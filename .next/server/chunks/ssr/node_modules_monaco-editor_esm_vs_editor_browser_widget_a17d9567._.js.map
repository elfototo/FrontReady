{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/codeEditorContributions.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/codeEditor/codeEditorContributions.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/vs/editor/browser/widget/codeEditor/codeEditorContributions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getWindow, runWhenWindowIdle } from '../../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableMap, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../editorBrowser.js';\nimport { EditorContributionInstantiation, IEditorContributionDescription } from '../../editorExtensions.js';\nimport { IEditorContribution } from '../../../common/editorCommon.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport class CodeEditorContributions extends Disposable {\n\n\tprivate _editor: ICodeEditor | null = null;\n\tprivate _instantiationService: IInstantiationService | null = null;\n\n\t/**\n\t * Contains all instantiated contributions.\n\t */\n\tprivate readonly _instances = this._register(new DisposableMap<string, IEditorContribution>());\n\t/**\n\t * Contains contributions which are not yet instantiated.\n\t */\n\tprivate readonly _pending = new Map<string, IEditorContributionDescription>();\n\t/**\n\t * Tracks which instantiation kinds are still left in `_pending`.\n\t */\n\tprivate readonly _finishedInstantiation: boolean[] = [];\n\n\tconstructor(\n\n\t) {\n\t\tsuper();\n\n\t\tthis._finishedInstantiation[EditorContributionInstantiation.Eager] = false;\n\t\tthis._finishedInstantiation[EditorContributionInstantiation.AfterFirstRender] = false;\n\t\tthis._finishedInstantiation[EditorContributionInstantiation.BeforeFirstInteraction] = false;\n\t\tthis._finishedInstantiation[EditorContributionInstantiation.Eventually] = false;\n\t}\n\n\tpublic initialize(editor: ICodeEditor, contributions: IEditorContributionDescription[], instantiationService: IInstantiationService) {\n\t\tthis._editor = editor;\n\t\tthis._instantiationService = instantiationService;\n\n\t\tfor (const desc of contributions) {\n\t\t\tif (this._pending.has(desc.id)) {\n\t\t\t\tonUnexpectedError(new Error(`Cannot have two contributions with the same id ${desc.id}`));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._pending.set(desc.id, desc);\n\t\t}\n\n\t\tthis._instantiateSome(EditorContributionInstantiation.Eager);\n\n\t\t// AfterFirstRender\n\t\t// - these extensions will be instantiated at the latest 50ms after the first render.\n\t\t// - but if there is idle time, we will instantiate them sooner.\n\t\tthis._register(runWhenWindowIdle(getWindow(this._editor.getDomNode()), () => {\n\t\t\tthis._instantiateSome(EditorContributionInstantiation.AfterFirstRender);\n\t\t}));\n\n\t\t// BeforeFirstInteraction\n\t\t// - these extensions will be instantiated at the latest before a mouse or a keyboard event.\n\t\t// - but if there is idle time, we will instantiate them sooner.\n\t\tthis._register(runWhenWindowIdle(getWindow(this._editor.getDomNode()), () => {\n\t\t\tthis._instantiateSome(EditorContributionInstantiation.BeforeFirstInteraction);\n\t\t}));\n\n\t\t// Eventually\n\t\t// - these extensions will only be instantiated when there is idle time.\n\t\t// - since there is no guarantee that there will ever be idle time, we set a timeout of 5s here.\n\t\tthis._register(runWhenWindowIdle(getWindow(this._editor.getDomNode()), () => {\n\t\t\tthis._instantiateSome(EditorContributionInstantiation.Eventually);\n\t\t}, 5000));\n\t}\n\n\tpublic saveViewState(): { [key: string]: any } {\n\t\tconst contributionsState: { [key: string]: any } = {};\n\t\tfor (const [id, contribution] of this._instances) {\n\t\t\tif (typeof contribution.saveViewState === 'function') {\n\t\t\t\tcontributionsState[id] = contribution.saveViewState();\n\t\t\t}\n\t\t}\n\t\treturn contributionsState;\n\t}\n\n\tpublic restoreViewState(contributionsState: { [key: string]: any }): void {\n\t\tfor (const [id, contribution] of this._instances) {\n\t\t\tif (typeof contribution.restoreViewState === 'function') {\n\t\t\t\tcontribution.restoreViewState(contributionsState[id]);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get(id: string): IEditorContribution | null {\n\t\tthis._instantiateById(id);\n\t\treturn this._instances.get(id) || null;\n\t}\n\n\tpublic onBeforeInteractionEvent(): void {\n\t\t// this method is called very often by the editor!\n\t\tthis._instantiateSome(EditorContributionInstantiation.BeforeFirstInteraction);\n\t}\n\n\tpublic onAfterModelAttached(): IDisposable {\n\t\treturn runWhenWindowIdle(getWindow(this._editor?.getDomNode()), () => {\n\t\t\tthis._instantiateSome(EditorContributionInstantiation.AfterFirstRender);\n\t\t}, 50);\n\t}\n\n\tprivate _instantiateSome(instantiation: EditorContributionInstantiation): void {\n\t\tif (this._finishedInstantiation[instantiation]) {\n\t\t\t// already done with this instantiation!\n\t\t\treturn;\n\t\t}\n\t\tthis._finishedInstantiation[instantiation] = true;\n\n\t\tconst contribs = this._findPendingContributionsByInstantiation(instantiation);\n\t\tfor (const contrib of contribs) {\n\t\t\tthis._instantiateById(contrib.id);\n\t\t}\n\t}\n\n\tprivate _findPendingContributionsByInstantiation(instantiation: EditorContributionInstantiation): readonly IEditorContributionDescription[] {\n\t\tconst result: IEditorContributionDescription[] = [];\n\t\tfor (const [, desc] of this._pending) {\n\t\t\tif (desc.instantiation === instantiation) {\n\t\t\t\tresult.push(desc);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _instantiateById(id: string): void {\n\t\tconst desc = this._pending.get(id);\n\t\tif (!desc) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._pending.delete(id);\n\n\t\tif (!this._instantiationService || !this._editor) {\n\t\t\tthrow new Error(`Cannot instantiate contributions before being initialized!`);\n\t\t}\n\n\t\ttry {\n\t\t\tconst instance = this._instantiationService.createInstance(desc.ctor, this._editor);\n\t\t\tthis._instances.set(desc.id, instance);\n\t\t\tif (typeof instance.restoreViewState === 'function' && desc.instantiation !== EditorContributionInstantiation.Eager) {\n\t\t\t\tconsole.warn(`Editor contribution '${desc.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tonUnexpectedError(err);\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getWindow, runWhenWindowIdle } from '../../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableMap, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../editorBrowser.js';\nimport { EditorContributionInstantiation, IEditorContributionDescription } from '../../editorExtensions.js';\nimport { IEditorContribution } from '../../../common/editorCommon.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport class CodeEditorContributions extends Disposable {\n\n\tprivate _editor: ICodeEditor | null = null;\n\tprivate _instantiationService: IInstantiationService | null = null;\n\n\t/**\n\t * Contains all instantiated contributions.\n\t */\n\tprivate readonly _instances = this._register(new DisposableMap<string, IEditorContribution>());\n\t/**\n\t * Contains contributions which are not yet instantiated.\n\t */\n\tprivate readonly _pending = new Map<string, IEditorContributionDescription>();\n\t/**\n\t * Tracks which instantiation kinds are still left in `_pending`.\n\t */\n\tprivate readonly _finishedInstantiation: boolean[] = [];\n\n\tconstructor(\n\n\t) {\n\t\tsuper();\n\n\t\tthis._finishedInstantiation[EditorContributionInstantiation.Eager] = false;\n\t\tthis._finishedInstantiation[EditorContributionInstantiation.AfterFirstRender] = false;\n\t\tthis._finishedInstantiation[EditorContributionInstantiation.BeforeFirstInteraction] = false;\n\t\tthis._finishedInstantiation[EditorContributionInstantiation.Eventually] = false;\n\t}\n\n\tpublic initialize(editor: ICodeEditor, contributions: IEditorContributionDescription[], instantiationService: IInstantiationService) {\n\t\tthis._editor = editor;\n\t\tthis._instantiationService = instantiationService;\n\n\t\tfor (const desc of contributions) {\n\t\t\tif (this._pending.has(desc.id)) {\n\t\t\t\tonUnexpectedError(new Error(`Cannot have two contributions with the same id ${desc.id}`));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._pending.set(desc.id, desc);\n\t\t}\n\n\t\tthis._instantiateSome(EditorContributionInstantiation.Eager);\n\n\t\t// AfterFirstRender\n\t\t// - these extensions will be instantiated at the latest 50ms after the first render.\n\t\t// - but if there is idle time, we will instantiate them sooner.\n\t\tthis._register(runWhenWindowIdle(getWindow(this._editor.getDomNode()), () => {\n\t\t\tthis._instantiateSome(EditorContributionInstantiation.AfterFirstRender);\n\t\t}));\n\n\t\t// BeforeFirstInteraction\n\t\t// - these extensions will be instantiated at the latest before a mouse or a keyboard event.\n\t\t// - but if there is idle time, we will instantiate them sooner.\n\t\tthis._register(runWhenWindowIdle(getWindow(this._editor.getDomNode()), () => {\n\t\t\tthis._instantiateSome(EditorContributionInstantiation.BeforeFirstInteraction);\n\t\t}));\n\n\t\t// Eventually\n\t\t// - these extensions will only be instantiated when there is idle time.\n\t\t// - since there is no guarantee that there will ever be idle time, we set a timeout of 5s here.\n\t\tthis._register(runWhenWindowIdle(getWindow(this._editor.getDomNode()), () => {\n\t\t\tthis._instantiateSome(EditorContributionInstantiation.Eventually);\n\t\t}, 5000));\n\t}\n\n\tpublic saveViewState(): { [key: string]: any } {\n\t\tconst contributionsState: { [key: string]: any } = {};\n\t\tfor (const [id, contribution] of this._instances) {\n\t\t\tif (typeof contribution.saveViewState === 'function') {\n\t\t\t\tcontributionsState[id] = contribution.saveViewState();\n\t\t\t}\n\t\t}\n\t\treturn contributionsState;\n\t}\n\n\tpublic restoreViewState(contributionsState: { [key: string]: any }): void {\n\t\tfor (const [id, contribution] of this._instances) {\n\t\t\tif (typeof contribution.restoreViewState === 'function') {\n\t\t\t\tcontribution.restoreViewState(contributionsState[id]);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get(id: string): IEditorContribution | null {\n\t\tthis._instantiateById(id);\n\t\treturn this._instances.get(id) || null;\n\t}\n\n\tpublic onBeforeInteractionEvent(): void {\n\t\t// this method is called very often by the editor!\n\t\tthis._instantiateSome(EditorContributionInstantiation.BeforeFirstInteraction);\n\t}\n\n\tpublic onAfterModelAttached(): IDisposable {\n\t\treturn runWhenWindowIdle(getWindow(this._editor?.getDomNode()), () => {\n\t\t\tthis._instantiateSome(EditorContributionInstantiation.AfterFirstRender);\n\t\t}, 50);\n\t}\n\n\tprivate _instantiateSome(instantiation: EditorContributionInstantiation): void {\n\t\tif (this._finishedInstantiation[instantiation]) {\n\t\t\t// already done with this instantiation!\n\t\t\treturn;\n\t\t}\n\t\tthis._finishedInstantiation[instantiation] = true;\n\n\t\tconst contribs = this._findPendingContributionsByInstantiation(instantiation);\n\t\tfor (const contrib of contribs) {\n\t\t\tthis._instantiateById(contrib.id);\n\t\t}\n\t}\n\n\tprivate _findPendingContributionsByInstantiation(instantiation: EditorContributionInstantiation): readonly IEditorContributionDescription[] {\n\t\tconst result: IEditorContributionDescription[] = [];\n\t\tfor (const [, desc] of this._pending) {\n\t\t\tif (desc.instantiation === instantiation) {\n\t\t\t\tresult.push(desc);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _instantiateById(id: string): void {\n\t\tconst desc = this._pending.get(id);\n\t\tif (!desc) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._pending.delete(id);\n\n\t\tif (!this._instantiationService || !this._editor) {\n\t\t\tthrow new Error(`Cannot instantiate contributions before being initialized!`);\n\t\t}\n\n\t\ttry {\n\t\t\tconst instance = this._instantiationService.createInstance(desc.ctor, this._editor);\n\t\t\tthis._instances.set(desc.id, instance);\n\t\t\tif (typeof instance.restoreViewState === 'function' && desc.instantiation !== EditorContributionInstantiation.Eager) {\n\t\t\t\tconsole.warn(`Editor contribution '${desc.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tonUnexpectedError(err);\n\t\t}\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/codeEditorWidget.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/vs/editor/browser/widget/codeEditor/codeEditorWidget.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport '../../services/markerDecorations.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { IMouseWheelEvent } from '../../../../base/browser/mouseEvent.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, EmitterOptions, Event, EventDeliveryQueue, createEventDeliveryQueue } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore, IDisposable, dispose } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport './editor.css';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { EditorConfiguration, IEditorConstructionOptions } from '../../config/editorConfiguration.js';\nimport { TabFocus } from '../../config/tabFocus.js';\nimport * as editorBrowser from '../../editorBrowser.js';\nimport { EditorExtensionsRegistry, IEditorContributionDescription } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { IContentWidgetData, IGlyphMarginWidgetData, IOverlayWidgetData, View } from '../../view.js';\nimport { DOMLineBreaksComputerFactory } from '../../view/domLineBreaksComputer.js';\nimport { ICommandDelegate } from '../../view/viewController.js';\nimport { ViewUserInputEvents } from '../../view/viewUserInputEvents.js';\nimport { CodeEditorContributions } from './codeEditorContributions.js';\nimport { IEditorConfiguration } from '../../../common/config/editorConfiguration.js';\nimport { ConfigurationChangedEvent, EditorLayoutInfo, EditorOption, FindComputedEditorOptionValueById, IComputedEditorOptions, IEditorOptions, filterFontDecorations, filterValidationDecorations } from '../../../common/config/editorOptions.js';\nimport { CursorColumns } from '../../../common/core/cursorColumns.js';\nimport { IDimension } from '../../../common/core/2d/dimension.js';\nimport { editorUnnecessaryCodeOpacity } from '../../../common/core/editorColorRegistry.js';\nimport { IPosition, Position } from '../../../common/core/position.js';\nimport { IRange, Range } from '../../../common/core/range.js';\nimport { ISelection, Selection } from '../../../common/core/selection.js';\nimport { IWordAtPosition } from '../../../common/core/wordHelper.js';\nimport { WordOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { CursorChangeReason, ICursorPositionChangedEvent, ICursorSelectionChangedEvent } from '../../../common/cursorEvents.js';\nimport { InternalEditorAction } from '../../../common/editorAction.js';\nimport * as editorCommon from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { EndOfLinePreference, IAttachedView, ICursorStateComputer, IIdentifiedSingleEditOperation, IModelDecoration, IModelDecorationsChangeAccessor, IModelDeltaDecoration, ITextModel } from '../../../common/model.js';\nimport { ClassName } from '../../../common/model/intervalTree.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IModelContentChangedEvent, IModelDecorationsChangedEvent, IModelLanguageChangedEvent, IModelLanguageConfigurationChangedEvent, IModelOptionsChangedEvent, IModelTokensChangedEvent, ModelFontChangedEvent, ModelLineHeightChangedEvent } from '../../../common/textModelEvents.js';\nimport { VerticalRevealType } from '../../../common/viewEvents.js';\nimport { IEditorWhitespace, IViewModel } from '../../../common/viewModel.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { ViewModel } from '../../../common/viewModel/viewModelImpl.js';\nimport { OutgoingViewModelEventKind } from '../../../common/viewModelEventDispatcher.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyValue, IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { editorErrorForeground, editorHintForeground, editorInfoForeground, editorWarningForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService, registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { TextModelEditSource, EditSources } from '../../../common/textModelEditSource.js';\nimport { TextEdit } from '../../../common/core/edits/textEdit.js';\n\nexport class CodeEditorWidget extends Disposable implements editorBrowser.ICodeEditor {\n\n\tprivate static readonly dropIntoEditorDecorationOptions = ModelDecorationOptions.register({\n\t\tdescription: 'workbench-dnd-target',\n\t\tclassName: 'dnd-target'\n\t});\n\n\t//#region Eventing\n\n\tprivate readonly _deliveryQueue = createEventDeliveryQueue();\n\tprotected readonly _contributions: CodeEditorContributions = this._register(new CodeEditorContributions());\n\n\tprivate readonly _onDidDispose: Emitter<void> = this._register(new Emitter<void>());\n\tpublic readonly onDidDispose: Event<void> = this._onDidDispose.event;\n\n\tprivate readonly _onDidChangeModelContent: Emitter<IModelContentChangedEvent> = this._register(new Emitter<IModelContentChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeModelContent: Event<IModelContentChangedEvent> = this._onDidChangeModelContent.event;\n\n\tprivate readonly _onDidChangeModelLanguage: Emitter<IModelLanguageChangedEvent> = this._register(new Emitter<IModelLanguageChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeModelLanguage: Event<IModelLanguageChangedEvent> = this._onDidChangeModelLanguage.event;\n\n\tprivate readonly _onDidChangeModelLanguageConfiguration: Emitter<IModelLanguageConfigurationChangedEvent> = this._register(new Emitter<IModelLanguageConfigurationChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeModelLanguageConfiguration: Event<IModelLanguageConfigurationChangedEvent> = this._onDidChangeModelLanguageConfiguration.event;\n\n\tprivate readonly _onDidChangeModelOptions: Emitter<IModelOptionsChangedEvent> = this._register(new Emitter<IModelOptionsChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeModelOptions: Event<IModelOptionsChangedEvent> = this._onDidChangeModelOptions.event;\n\n\tprivate readonly _onDidChangeModelDecorations: Emitter<IModelDecorationsChangedEvent> = this._register(new Emitter<IModelDecorationsChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeModelDecorations: Event<IModelDecorationsChangedEvent> = this._onDidChangeModelDecorations.event;\n\n\tprivate readonly _onDidChangeLineHeight: Emitter<ModelLineHeightChangedEvent> = this._register(new Emitter<ModelLineHeightChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeLineHeight: Event<ModelLineHeightChangedEvent> = this._onDidChangeLineHeight.event;\n\n\tprivate readonly _onDidChangeFont: Emitter<ModelFontChangedEvent> = this._register(new Emitter<ModelFontChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeFont: Event<ModelFontChangedEvent> = this._onDidChangeFont.event;\n\n\tprivate readonly _onDidChangeModelTokens: Emitter<IModelTokensChangedEvent> = this._register(new Emitter<IModelTokensChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeModelTokens: Event<IModelTokensChangedEvent> = this._onDidChangeModelTokens.event;\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<ConfigurationChangedEvent> = this._register(new Emitter<ConfigurationChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeConfiguration: Event<ConfigurationChangedEvent> = this._onDidChangeConfiguration.event;\n\n\tprotected readonly _onWillChangeModel: Emitter<editorCommon.IModelChangedEvent> = this._register(new Emitter<editorCommon.IModelChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onWillChangeModel: Event<editorCommon.IModelChangedEvent> = this._onWillChangeModel.event;\n\n\tprotected readonly _onDidChangeModel: Emitter<editorCommon.IModelChangedEvent> = this._register(new Emitter<editorCommon.IModelChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeModel: Event<editorCommon.IModelChangedEvent> = this._onDidChangeModel.event;\n\n\tprivate readonly _onDidChangeCursorPosition: Emitter<ICursorPositionChangedEvent> = this._register(new Emitter<ICursorPositionChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeCursorPosition: Event<ICursorPositionChangedEvent> = this._onDidChangeCursorPosition.event;\n\n\tprivate readonly _onDidChangeCursorSelection: Emitter<ICursorSelectionChangedEvent> = this._register(new Emitter<ICursorSelectionChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeCursorSelection: Event<ICursorSelectionChangedEvent> = this._onDidChangeCursorSelection.event;\n\n\tprivate readonly _onDidAttemptReadOnlyEdit: Emitter<void> = this._register(new InteractionEmitter<void>(this._contributions, this._deliveryQueue));\n\tpublic readonly onDidAttemptReadOnlyEdit: Event<void> = this._onDidAttemptReadOnlyEdit.event;\n\n\tprivate readonly _onDidLayoutChange: Emitter<EditorLayoutInfo> = this._register(new Emitter<EditorLayoutInfo>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidLayoutChange: Event<EditorLayoutInfo> = this._onDidLayoutChange.event;\n\n\tprivate readonly _editorTextFocus: BooleanEventEmitter = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidFocusEditorText: Event<void> = this._editorTextFocus.onDidChangeToTrue;\n\tpublic readonly onDidBlurEditorText: Event<void> = this._editorTextFocus.onDidChangeToFalse;\n\n\tprivate readonly _editorWidgetFocus: BooleanEventEmitter = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidFocusEditorWidget: Event<void> = this._editorWidgetFocus.onDidChangeToTrue;\n\tpublic readonly onDidBlurEditorWidget: Event<void> = this._editorWidgetFocus.onDidChangeToFalse;\n\n\tprivate readonly _onWillType: Emitter<string> = this._register(new InteractionEmitter<string>(this._contributions, this._deliveryQueue));\n\tpublic readonly onWillType = this._onWillType.event;\n\n\tprivate readonly _onDidType: Emitter<string> = this._register(new InteractionEmitter<string>(this._contributions, this._deliveryQueue));\n\tpublic readonly onDidType = this._onDidType.event;\n\n\tprivate readonly _onDidCompositionStart: Emitter<void> = this._register(new InteractionEmitter<void>(this._contributions, this._deliveryQueue));\n\tpublic readonly onDidCompositionStart = this._onDidCompositionStart.event;\n\n\tprivate readonly _onDidCompositionEnd: Emitter<void> = this._register(new InteractionEmitter<void>(this._contributions, this._deliveryQueue));\n\tpublic readonly onDidCompositionEnd = this._onDidCompositionEnd.event;\n\n\tprivate readonly _onDidPaste: Emitter<editorBrowser.IPasteEvent> = this._register(new InteractionEmitter<editorBrowser.IPasteEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onDidPaste = this._onDidPaste.event;\n\n\tprivate readonly _onMouseUp: Emitter<editorBrowser.IEditorMouseEvent> = this._register(new InteractionEmitter<editorBrowser.IEditorMouseEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onMouseUp: Event<editorBrowser.IEditorMouseEvent> = this._onMouseUp.event;\n\n\tprivate readonly _onMouseDown: Emitter<editorBrowser.IEditorMouseEvent> = this._register(new InteractionEmitter<editorBrowser.IEditorMouseEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onMouseDown: Event<editorBrowser.IEditorMouseEvent> = this._onMouseDown.event;\n\n\tprivate readonly _onMouseDrag: Emitter<editorBrowser.IEditorMouseEvent> = this._register(new InteractionEmitter<editorBrowser.IEditorMouseEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onMouseDrag: Event<editorBrowser.IEditorMouseEvent> = this._onMouseDrag.event;\n\n\tprivate readonly _onMouseDrop: Emitter<editorBrowser.IPartialEditorMouseEvent> = this._register(new InteractionEmitter<editorBrowser.IPartialEditorMouseEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onMouseDrop: Event<editorBrowser.IPartialEditorMouseEvent> = this._onMouseDrop.event;\n\n\tprivate readonly _onMouseDropCanceled: Emitter<void> = this._register(new InteractionEmitter<void>(this._contributions, this._deliveryQueue));\n\tpublic readonly onMouseDropCanceled: Event<void> = this._onMouseDropCanceled.event;\n\n\tprivate readonly _onDropIntoEditor = this._register(new InteractionEmitter<{ readonly position: IPosition; readonly event: DragEvent }>(this._contributions, this._deliveryQueue));\n\tpublic readonly onDropIntoEditor = this._onDropIntoEditor.event;\n\n\tprivate readonly _onContextMenu: Emitter<editorBrowser.IEditorMouseEvent> = this._register(new InteractionEmitter<editorBrowser.IEditorMouseEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onContextMenu: Event<editorBrowser.IEditorMouseEvent> = this._onContextMenu.event;\n\n\tprivate readonly _onMouseMove: Emitter<editorBrowser.IEditorMouseEvent> = this._register(new InteractionEmitter<editorBrowser.IEditorMouseEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onMouseMove: Event<editorBrowser.IEditorMouseEvent> = this._onMouseMove.event;\n\n\tprivate readonly _onMouseLeave: Emitter<editorBrowser.IPartialEditorMouseEvent> = this._register(new InteractionEmitter<editorBrowser.IPartialEditorMouseEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onMouseLeave: Event<editorBrowser.IPartialEditorMouseEvent> = this._onMouseLeave.event;\n\n\tprivate readonly _onMouseWheel: Emitter<IMouseWheelEvent> = this._register(new InteractionEmitter<IMouseWheelEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onMouseWheel: Event<IMouseWheelEvent> = this._onMouseWheel.event;\n\n\tprivate readonly _onKeyUp: Emitter<IKeyboardEvent> = this._register(new InteractionEmitter<IKeyboardEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onKeyUp: Event<IKeyboardEvent> = this._onKeyUp.event;\n\n\tprivate readonly _onKeyDown: Emitter<IKeyboardEvent> = this._register(new InteractionEmitter<IKeyboardEvent>(this._contributions, this._deliveryQueue));\n\tpublic readonly onKeyDown: Event<IKeyboardEvent> = this._onKeyDown.event;\n\n\tprivate readonly _onDidContentSizeChange: Emitter<editorCommon.IContentSizeChangedEvent> = this._register(new Emitter<editorCommon.IContentSizeChangedEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidContentSizeChange: Event<editorCommon.IContentSizeChangedEvent> = this._onDidContentSizeChange.event;\n\n\tprivate readonly _onDidScrollChange: Emitter<editorCommon.IScrollEvent> = this._register(new Emitter<editorCommon.IScrollEvent>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidScrollChange: Event<editorCommon.IScrollEvent> = this._onDidScrollChange.event;\n\n\tprivate readonly _onDidChangeViewZones: Emitter<void> = this._register(new Emitter<void>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeViewZones: Event<void> = this._onDidChangeViewZones.event;\n\n\tprivate readonly _onDidChangeHiddenAreas: Emitter<void> = this._register(new Emitter<void>({ deliveryQueue: this._deliveryQueue }));\n\tpublic readonly onDidChangeHiddenAreas: Event<void> = this._onDidChangeHiddenAreas.event;\n\n\tprivate _updateCounter = 0;\n\n\tprivate readonly _onWillTriggerEditorOperationEvent: Emitter<editorCommon.ITriggerEditorOperationEvent> = this._register(new Emitter<editorCommon.ITriggerEditorOperationEvent>());\n\n\tprivate readonly _onBeginUpdate: Emitter<void> = this._register(new Emitter<void>());\n\tpublic readonly onBeginUpdate: Event<void> = this._onBeginUpdate.event;\n\n\tprivate readonly _onEndUpdate: Emitter<void> = this._register(new Emitter<void>());\n\tpublic readonly onEndUpdate: Event<void> = this._onEndUpdate.event;\n\n\tprivate readonly _onBeforeExecuteEdit = this._register(new Emitter<{ source: string | undefined }>());\n\tpublic readonly onBeforeExecuteEdit = this._onBeforeExecuteEdit.event;\n\n\t//#endregion\n\n\tpublic get isSimpleWidget(): boolean {\n\t\treturn this._configuration.isSimpleWidget;\n\t}\n\n\tpublic get contextMenuId(): MenuId {\n\t\treturn this._configuration.contextMenuId;\n\t}\n\n\tprivate readonly _telemetryData?: object;\n\n\tprivate readonly _domElement: HTMLElement;\n\tprivate readonly _overflowWidgetsDomNode: HTMLElement | undefined;\n\tprivate readonly _id: number;\n\tprivate readonly _configuration: IEditorConfiguration;\n\tprivate _contributionsDisposable: IDisposable | undefined;\n\n\tprotected readonly _actions = new Map<string, editorCommon.IEditorAction>();\n\n\t// --- Members logically associated to a model\n\tprotected _modelData: ModelData | null;\n\n\tprotected readonly _instantiationService: IInstantiationService;\n\tprotected readonly _contextKeyService: IContextKeyService;\n\tprivate readonly _notificationService: INotificationService;\n\tprotected readonly _codeEditorService: ICodeEditorService;\n\tprivate readonly _commandService: ICommandService;\n\tprivate readonly _themeService: IThemeService;\n\n\tprivate _contentWidgets: { [key: string]: IContentWidgetData };\n\tprivate _overlayWidgets: { [key: string]: IOverlayWidgetData };\n\tprivate _glyphMarginWidgets: { [key: string]: IGlyphMarginWidgetData };\n\n\t/**\n\t * map from \"parent\" decoration type to live decoration ids.\n\t */\n\tprivate _decorationTypeKeysToIds: { [decorationTypeKey: string]: string[] };\n\tprivate _decorationTypeSubtypes: { [decorationTypeKey: string]: { [subtype: string]: boolean } };\n\n\tprivate _bannerDomNode: HTMLElement | null = null;\n\n\tprivate _dropIntoEditorDecorations: EditorDecorationsCollection = this.createDecorationsCollection();\n\n\tpublic inComposition: boolean = false;\n\n\tconstructor(\n\t\tdomElement: HTMLElement,\n\t\t_options: Readonly<IEditorConstructionOptions>,\n\t\tcodeEditorWidgetOptions: ICodeEditorWidgetOptions,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@ILanguageConfigurationService private readonly languageConfigurationService: ILanguageConfigurationService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tsuper();\n\t\tcodeEditorService.willCreateCodeEditor();\n\n\t\tconst options = { ..._options };\n\n\t\tthis._domElement = domElement;\n\t\tthis._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\n\t\tdelete options.overflowWidgetsDomNode;\n\t\tthis._id = (++EDITOR_ID);\n\t\tthis._decorationTypeKeysToIds = {};\n\t\tthis._decorationTypeSubtypes = {};\n\t\tthis._telemetryData = codeEditorWidgetOptions.telemetryData;\n\n\t\tthis._configuration = this._register(this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget || false,\n\t\t\tcodeEditorWidgetOptions.contextMenuId ?? (codeEditorWidgetOptions.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext),\n\t\t\toptions, accessibilityService));\n\t\tthis._register(this._configuration.onDidChange((e) => {\n\t\t\tthis._onDidChangeConfiguration.fire(e);\n\n\t\t\tconst options = this._configuration.options;\n\t\t\tif (e.hasChanged(EditorOption.layoutInfo)) {\n\t\t\t\tconst layoutInfo = options.get(EditorOption.layoutInfo);\n\t\t\t\tthis._onDidLayoutChange.fire(layoutInfo);\n\t\t\t}\n\t\t}));\n\n\t\tthis._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\n\t\tif (codeEditorWidgetOptions.contextKeyValues) {\n\t\t\tfor (const [key, value] of Object.entries(codeEditorWidgetOptions.contextKeyValues)) {\n\t\t\t\tthis._contextKeyService.createKey(key, value);\n\t\t\t}\n\t\t}\n\t\tthis._notificationService = notificationService;\n\t\tthis._codeEditorService = codeEditorService;\n\t\tthis._commandService = commandService;\n\t\tthis._themeService = themeService;\n\t\tthis._register(new EditorContextKeysManager(this, this._contextKeyService));\n\t\tthis._register(new EditorModeContext(this, this._contextKeyService, languageFeaturesService));\n\n\t\tthis._instantiationService = this._register(instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService])));\n\n\t\tthis._modelData = null;\n\n\t\tthis._contentWidgets = {};\n\t\tthis._overlayWidgets = {};\n\t\tthis._glyphMarginWidgets = {};\n\n\t\tlet contributions: IEditorContributionDescription[];\n\t\tif (Array.isArray(codeEditorWidgetOptions.contributions)) {\n\t\t\tcontributions = codeEditorWidgetOptions.contributions;\n\t\t} else {\n\t\t\tcontributions = EditorExtensionsRegistry.getEditorContributions();\n\t\t}\n\t\tthis._contributions.initialize(this, contributions, this._instantiationService);\n\n\t\tfor (const action of EditorExtensionsRegistry.getEditorActions()) {\n\t\t\tif (this._actions.has(action.id)) {\n\t\t\t\tonUnexpectedError(new Error(`Cannot have two actions with the same id ${action.id}`));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst internalAction = new InternalEditorAction(\n\t\t\t\taction.id,\n\t\t\t\taction.label,\n\t\t\t\taction.alias,\n\t\t\t\taction.metadata,\n\t\t\t\taction.precondition ?? undefined,\n\t\t\t\t(args: unknown): Promise<void> => {\n\t\t\t\t\treturn this._instantiationService.invokeFunction((accessor) => {\n\t\t\t\t\t\treturn Promise.resolve(action.runEditorCommand(accessor, this, args));\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tthis._contextKeyService\n\t\t\t);\n\t\t\tthis._actions.set(internalAction.id, internalAction);\n\t\t}\n\n\t\tconst isDropIntoEnabled = () => {\n\t\t\treturn !this._configuration.options.get(EditorOption.readOnly)\n\t\t\t\t&& this._configuration.options.get(EditorOption.dropIntoEditor).enabled;\n\t\t};\n\n\t\tthis._register(new dom.DragAndDropObserver(this._domElement, {\n\t\t\tonDragOver: e => {\n\t\t\t\tif (!isDropIntoEnabled()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n\t\t\t\tif (target?.position) {\n\t\t\t\t\tthis.showDropIndicatorAt(target.position);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDrop: async e => {\n\t\t\t\tif (!isDropIntoEnabled()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.removeDropIndicator();\n\n\t\t\t\tif (!e.dataTransfer) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n\t\t\t\tif (target?.position) {\n\t\t\t\t\tthis._onDropIntoEditor.fire({ position: target.position, event: e });\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDragLeave: () => {\n\t\t\t\tthis.removeDropIndicator();\n\t\t\t},\n\t\t\tonDragEnd: () => {\n\t\t\t\tthis.removeDropIndicator();\n\t\t\t},\n\t\t}));\n\n\t\tthis._codeEditorService.addCodeEditor(this);\n\t}\n\n\tpublic writeScreenReaderContent(reason: string): void {\n\t\tthis._modelData?.view.writeScreenReaderContent(reason);\n\t}\n\n\tprotected _createConfiguration(isSimpleWidget: boolean, contextMenuId: MenuId, options: Readonly<IEditorConstructionOptions>, accessibilityService: IAccessibilityService): EditorConfiguration {\n\t\treturn new EditorConfiguration(isSimpleWidget, contextMenuId, options, this._domElement, accessibilityService);\n\t}\n\n\tpublic getId(): string {\n\t\treturn this.getEditorType() + ':' + this._id;\n\t}\n\n\tpublic getEditorType(): string {\n\t\treturn editorCommon.EditorType.ICodeEditor;\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._codeEditorService.removeCodeEditor(this);\n\n\t\tthis._actions.clear();\n\t\tthis._contentWidgets = {};\n\t\tthis._overlayWidgets = {};\n\n\t\tthis._removeDecorationTypes();\n\t\tthis._postDetachModelCleanup(this._detachModel());\n\n\t\tthis._onDidDispose.fire();\n\n\t\tsuper.dispose();\n\t}\n\n\tpublic invokeWithinContext<T>(fn: (accessor: ServicesAccessor) => T): T {\n\t\treturn this._instantiationService.invokeFunction(fn);\n\t}\n\n\tpublic updateOptions(newOptions: Readonly<IEditorOptions> | undefined): void {\n\t\tthis._configuration.updateOptions(newOptions || {});\n\t}\n\n\tpublic getOptions(): IComputedEditorOptions {\n\t\treturn this._configuration.options;\n\t}\n\n\tpublic getOption<T extends EditorOption>(id: T): FindComputedEditorOptionValueById<T> {\n\t\treturn this._configuration.options.get(id);\n\t}\n\n\tpublic getRawOptions(): IEditorOptions {\n\t\treturn this._configuration.getRawOptions();\n\t}\n\n\tpublic getOverflowWidgetsDomNode(): HTMLElement | undefined {\n\t\treturn this._overflowWidgetsDomNode;\n\t}\n\n\tpublic getConfiguredWordAtPosition(position: Position): IWordAtPosition | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\treturn WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(EditorOption.wordSeparators), this._configuration.options.get(EditorOption.wordSegmenterLocales), position);\n\t}\n\n\tpublic getValue(options: { preserveBOM: boolean; lineEnding: string } | null = null): string {\n\t\tif (!this._modelData) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst preserveBOM: boolean = (options && options.preserveBOM) ? true : false;\n\t\tlet eolPreference = EndOfLinePreference.TextDefined;\n\t\tif (options && options.lineEnding && options.lineEnding === '\\n') {\n\t\t\teolPreference = EndOfLinePreference.LF;\n\t\t} else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n\t\t\teolPreference = EndOfLinePreference.CRLF;\n\t\t}\n\t\treturn this._modelData.model.getValue(eolPreference, preserveBOM);\n\t}\n\n\tpublic setValue(newValue: string): void {\n\t\ttry {\n\t\t\tthis._beginUpdate();\n\t\t\tif (!this._modelData) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._modelData.model.setValue(newValue);\n\t\t} finally {\n\t\t\tthis._endUpdate();\n\t\t}\n\t}\n\n\tpublic getModel(): ITextModel | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.model;\n\t}\n\n\tpublic setModel(_model: ITextModel | editorCommon.IDiffEditorModel | editorCommon.IDiffEditorViewModel | null = null): void {\n\t\ttry {\n\t\t\tthis._beginUpdate();\n\t\t\tconst model = <ITextModel | null>_model;\n\t\t\tif (this._modelData === null && model === null) {\n\t\t\t\t// Current model is the new model\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._modelData && this._modelData.model === model) {\n\t\t\t\t// Current model is the new model\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst e: editorCommon.IModelChangedEvent = {\n\t\t\t\toldModelUrl: this._modelData?.model.uri || null,\n\t\t\t\tnewModelUrl: model?.uri || null\n\t\t\t};\n\t\t\tthis._onWillChangeModel.fire(e);\n\n\t\t\tconst hasTextFocus = this.hasTextFocus();\n\t\t\tconst detachedModel = this._detachModel();\n\t\t\tthis._attachModel(model);\n\t\t\tif (this.hasModel()) {\n\t\t\t\t// we have a new model (with a new view)!\n\t\t\t\tif (hasTextFocus) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// we have no model (and no view) anymore\n\t\t\t\t// make sure the outside world knows we are not focused\n\t\t\t\tthis._editorTextFocus.setValue(false);\n\t\t\t\tthis._editorWidgetFocus.setValue(false);\n\t\t\t}\n\n\t\t\tthis._removeDecorationTypes();\n\t\t\tthis._onDidChangeModel.fire(e);\n\t\t\tthis._postDetachModelCleanup(detachedModel);\n\n\t\t\tthis._contributionsDisposable = this._contributions.onAfterModelAttached();\n\t\t} finally {\n\t\t\tthis._endUpdate();\n\t\t}\n\t}\n\n\tprivate _removeDecorationTypes(): void {\n\t\tthis._decorationTypeKeysToIds = {};\n\t\tif (this._decorationTypeSubtypes) {\n\t\t\tfor (const decorationType in this._decorationTypeSubtypes) {\n\t\t\t\tconst subTypes = this._decorationTypeSubtypes[decorationType];\n\t\t\t\tfor (const subType in subTypes) {\n\t\t\t\t\tthis._removeDecorationType(decorationType + '-' + subType);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._decorationTypeSubtypes = {};\n\t\t}\n\t}\n\n\tpublic getVisibleRanges(): Range[] {\n\t\tif (!this._modelData) {\n\t\t\treturn [];\n\t\t}\n\t\treturn this._modelData.viewModel.getVisibleRanges();\n\t}\n\n\tpublic getVisibleRangesPlusViewportAboveBelow(): Range[] {\n\t\tif (!this._modelData) {\n\t\t\treturn [];\n\t\t}\n\t\treturn this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\n\t}\n\n\tpublic getWhitespaces(): IEditorWhitespace[] {\n\t\tif (!this._modelData) {\n\t\t\treturn [];\n\t\t}\n\t\treturn this._modelData.viewModel.viewLayout.getWhitespaces();\n\t}\n\n\tprivate static _getVerticalOffsetAfterPosition(modelData: ModelData, modelLineNumber: number, modelColumn: number, includeViewZones: boolean): number {\n\t\tconst modelPosition = modelData.model.validatePosition({\n\t\t\tlineNumber: modelLineNumber,\n\t\t\tcolumn: modelColumn\n\t\t});\n\t\tconst viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n\t\treturn modelData.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(viewPosition.lineNumber, includeViewZones);\n\t}\n\n\tpublic getTopForLineNumber(lineNumber: number, includeViewZones: boolean = false): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1, includeViewZones);\n\t}\n\n\tpublic getTopForPosition(lineNumber: number, column: number): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column, false);\n\t}\n\n\tprivate static _getVerticalOffsetForPosition(modelData: ModelData, modelLineNumber: number, modelColumn: number, includeViewZones: boolean = false): number {\n\t\tconst modelPosition = modelData.model.validatePosition({\n\t\t\tlineNumber: modelLineNumber,\n\t\t\tcolumn: modelColumn\n\t\t});\n\t\tconst viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n\t\treturn modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber, includeViewZones);\n\t}\n\n\tpublic getBottomForLineNumber(lineNumber: number, includeViewZones: boolean = false): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst maxCol = this._modelData.model.getLineMaxColumn(lineNumber);\n\t\treturn CodeEditorWidget._getVerticalOffsetAfterPosition(this._modelData, lineNumber, maxCol, includeViewZones);\n\t}\n\n\tpublic getLineHeightForPosition(position: IPosition): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst viewModel = this._modelData.viewModel;\n\t\tconst coordinatesConverter = viewModel.coordinatesConverter;\n\t\tconst pos = Position.lift(position);\n\t\tif (coordinatesConverter.modelPositionIsVisible(pos)) {\n\t\t\tconst viewPosition = coordinatesConverter.convertModelPositionToViewPosition(pos);\n\t\t\treturn viewModel.viewLayout.getLineHeightForLineNumber(viewPosition.lineNumber);\n\t\t}\n\t\treturn 0;\n\t}\n\n\tpublic setHiddenAreas(ranges: IRange[], source?: unknown, forceUpdate?: boolean): void {\n\t\tthis._modelData?.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)), source, forceUpdate);\n\t}\n\n\tpublic getVisibleColumnFromPosition(rawPosition: IPosition): number {\n\t\tif (!this._modelData) {\n\t\t\treturn rawPosition.column;\n\t\t}\n\n\t\tconst position = this._modelData.model.validatePosition(rawPosition);\n\t\tconst tabSize = this._modelData.model.getOptions().tabSize;\n\n\t\treturn CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n\t}\n\n\tpublic getPosition(): Position | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.viewModel.getPosition();\n\t}\n\n\tpublic setPosition(position: IPosition, source: string = 'api'): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tif (!Position.isIPosition(position)) {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\t\tthis._modelData.viewModel.setSelections(source, [{\n\t\t\tselectionStartLineNumber: position.lineNumber,\n\t\t\tselectionStartColumn: position.column,\n\t\t\tpositionLineNumber: position.lineNumber,\n\t\t\tpositionColumn: position.column\n\t\t}]);\n\t}\n\n\tprivate _sendRevealRange(modelRange: Range, verticalType: VerticalRevealType, revealHorizontal: boolean, scrollType: editorCommon.ScrollType): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tif (!Range.isIRange(modelRange)) {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\t\tconst validatedModelRange = this._modelData.model.validateRange(modelRange);\n\t\tconst viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n\n\t\tthis._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\n\t}\n\n\tpublic revealLine(lineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealLine(lineNumber, VerticalRevealType.Simple, scrollType);\n\t}\n\n\tpublic revealLineInCenter(lineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealLine(lineNumber, VerticalRevealType.Center, scrollType);\n\t}\n\n\tpublic revealLineInCenterIfOutsideViewport(lineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealLine(lineNumber, VerticalRevealType.CenterIfOutsideViewport, scrollType);\n\t}\n\n\tpublic revealLineNearTop(lineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealLine(lineNumber, VerticalRevealType.NearTop, scrollType);\n\t}\n\n\tprivate _revealLine(lineNumber: number, revealType: VerticalRevealType, scrollType: editorCommon.ScrollType): void {\n\t\tif (typeof lineNumber !== 'number') {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\n\t\tthis._sendRevealRange(\n\t\t\tnew Range(lineNumber, 1, lineNumber, 1),\n\t\t\trevealType,\n\t\t\tfalse,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealPosition(position: IPosition, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealPosition(\n\t\t\tposition,\n\t\t\tVerticalRevealType.Simple,\n\t\t\ttrue,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealPositionInCenter(position: IPosition, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealPosition(\n\t\t\tposition,\n\t\t\tVerticalRevealType.Center,\n\t\t\ttrue,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealPositionInCenterIfOutsideViewport(position: IPosition, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealPosition(\n\t\t\tposition,\n\t\t\tVerticalRevealType.CenterIfOutsideViewport,\n\t\t\ttrue,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealPositionNearTop(position: IPosition, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealPosition(\n\t\t\tposition,\n\t\t\tVerticalRevealType.NearTop,\n\t\t\ttrue,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tprivate _revealPosition(position: IPosition, verticalType: VerticalRevealType, revealHorizontal: boolean, scrollType: editorCommon.ScrollType): void {\n\t\tif (!Position.isIPosition(position)) {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\n\t\tthis._sendRevealRange(\n\t\t\tnew Range(position.lineNumber, position.column, position.lineNumber, position.column),\n\t\t\tverticalType,\n\t\t\trevealHorizontal,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic getSelection(): Selection | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.viewModel.getSelection();\n\t}\n\n\tpublic getSelections(): Selection[] | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.viewModel.getSelections();\n\t}\n\n\tpublic setSelection(range: IRange, source?: string): void;\n\tpublic setSelection(editorRange: Range, source?: string): void;\n\tpublic setSelection(selection: ISelection, source?: string): void;\n\tpublic setSelection(editorSelection: Selection, source?: string): void;\n\tpublic setSelection(something: any, source: string = 'api'): void {\n\t\tconst isSelection = Selection.isISelection(something);\n\t\tconst isRange = Range.isIRange(something);\n\n\t\tif (!isSelection && !isRange) {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\n\t\tif (isSelection) {\n\t\t\tthis._setSelectionImpl(<ISelection>something, source);\n\t\t} else if (isRange) {\n\t\t\t// act as if it was an IRange\n\t\t\tconst selection: ISelection = {\n\t\t\t\tselectionStartLineNumber: something.startLineNumber,\n\t\t\t\tselectionStartColumn: something.startColumn,\n\t\t\t\tpositionLineNumber: something.endLineNumber,\n\t\t\t\tpositionColumn: something.endColumn\n\t\t\t};\n\t\t\tthis._setSelectionImpl(selection, source);\n\t\t}\n\t}\n\n\tprivate _setSelectionImpl(sel: ISelection, source: string): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tconst selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n\t\tthis._modelData.viewModel.setSelections(source, [selection]);\n\t}\n\n\tpublic revealLines(startLineNumber: number, endLineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealLines(\n\t\t\tstartLineNumber,\n\t\t\tendLineNumber,\n\t\t\tVerticalRevealType.Simple,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealLinesInCenter(startLineNumber: number, endLineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealLines(\n\t\t\tstartLineNumber,\n\t\t\tendLineNumber,\n\t\t\tVerticalRevealType.Center,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealLinesInCenterIfOutsideViewport(startLineNumber: number, endLineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealLines(\n\t\t\tstartLineNumber,\n\t\t\tendLineNumber,\n\t\t\tVerticalRevealType.CenterIfOutsideViewport,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealLinesNearTop(startLineNumber: number, endLineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealLines(\n\t\t\tstartLineNumber,\n\t\t\tendLineNumber,\n\t\t\tVerticalRevealType.NearTop,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tprivate _revealLines(startLineNumber: number, endLineNumber: number, verticalType: VerticalRevealType, scrollType: editorCommon.ScrollType): void {\n\t\tif (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\n\t\tthis._sendRevealRange(\n\t\t\tnew Range(startLineNumber, 1, endLineNumber, 1),\n\t\t\tverticalType,\n\t\t\tfalse,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealRange(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth, revealVerticalInCenter: boolean = false, revealHorizontal: boolean = true): void {\n\t\tthis._revealRange(\n\t\t\trange,\n\t\t\trevealVerticalInCenter ? VerticalRevealType.Center : VerticalRevealType.Simple,\n\t\t\trevealHorizontal,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealRangeInCenter(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealRange(\n\t\t\trange,\n\t\t\tVerticalRevealType.Center,\n\t\t\ttrue,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealRangeInCenterIfOutsideViewport(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealRange(\n\t\t\trange,\n\t\t\tVerticalRevealType.CenterIfOutsideViewport,\n\t\t\ttrue,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealRangeNearTop(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealRange(\n\t\t\trange,\n\t\t\tVerticalRevealType.NearTop,\n\t\t\ttrue,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealRangeNearTopIfOutsideViewport(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealRange(\n\t\t\trange,\n\t\t\tVerticalRevealType.NearTopIfOutsideViewport,\n\t\t\ttrue,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic revealRangeAtTop(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._revealRange(\n\t\t\trange,\n\t\t\tVerticalRevealType.Top,\n\t\t\ttrue,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tprivate _revealRange(range: IRange, verticalType: VerticalRevealType, revealHorizontal: boolean, scrollType: editorCommon.ScrollType): void {\n\t\tif (!Range.isIRange(range)) {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\n\t\tthis._sendRevealRange(\n\t\t\tRange.lift(range),\n\t\t\tverticalType,\n\t\t\trevealHorizontal,\n\t\t\tscrollType\n\t\t);\n\t}\n\n\tpublic setSelections(ranges: readonly ISelection[], source: string = 'api', reason = CursorChangeReason.NotSet): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tif (!ranges || ranges.length === 0) {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\t\tfor (let i = 0, len = ranges.length; i < len; i++) {\n\t\t\tif (!Selection.isISelection(ranges[i])) {\n\t\t\t\tthrow new Error('Invalid arguments');\n\t\t\t}\n\t\t}\n\t\tthis._modelData.viewModel.setSelections(source, ranges, reason);\n\t}\n\n\tpublic getContentWidth(): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._modelData.viewModel.viewLayout.getContentWidth();\n\t}\n\n\tpublic getScrollWidth(): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._modelData.viewModel.viewLayout.getScrollWidth();\n\t}\n\tpublic getScrollLeft(): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n\t}\n\n\tpublic getContentHeight(): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._modelData.viewModel.viewLayout.getContentHeight();\n\t}\n\n\tpublic getScrollHeight(): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._modelData.viewModel.viewLayout.getScrollHeight();\n\t}\n\tpublic getScrollTop(): number {\n\t\tif (!this._modelData) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n\t}\n\n\tpublic setScrollLeft(newScrollLeft: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Immediate): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof newScrollLeft !== 'number') {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\t\tthis._modelData.viewModel.viewLayout.setScrollPosition({\n\t\t\tscrollLeft: newScrollLeft\n\t\t}, scrollType);\n\t}\n\tpublic setScrollTop(newScrollTop: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Immediate): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof newScrollTop !== 'number') {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\t\tthis._modelData.viewModel.viewLayout.setScrollPosition({\n\t\t\tscrollTop: newScrollTop\n\t\t}, scrollType);\n\t}\n\tpublic setScrollPosition(position: editorCommon.INewScrollPosition, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Immediate): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.viewModel.viewLayout.setScrollPosition(position, scrollType);\n\t}\n\tpublic hasPendingScrollAnimation(): boolean {\n\t\tif (!this._modelData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this._modelData.viewModel.viewLayout.hasPendingScrollAnimation();\n\t}\n\n\tpublic saveViewState(): editorCommon.ICodeEditorViewState | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\tconst contributionsState = this._contributions.saveViewState();\n\t\tconst cursorState = this._modelData.viewModel.saveCursorState();\n\t\tconst viewState = this._modelData.viewModel.saveState();\n\t\treturn {\n\t\t\tcursorState: cursorState,\n\t\t\tviewState: viewState,\n\t\t\tcontributionsState: contributionsState\n\t\t};\n\t}\n\n\tpublic restoreViewState(s: editorCommon.IEditorViewState | null): void {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn;\n\t\t}\n\t\tconst codeEditorState = s as editorCommon.ICodeEditorViewState | null;\n\t\tif (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n\t\t\tconst cursorState = <any>codeEditorState.cursorState;\n\t\t\tif (Array.isArray(cursorState)) {\n\t\t\t\tif (cursorState.length > 0) {\n\t\t\t\t\tthis._modelData.viewModel.restoreCursorState(<editorCommon.ICursorState[]>cursorState);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Backwards compatibility\n\t\t\t\tthis._modelData.viewModel.restoreCursorState([<editorCommon.ICursorState>cursorState]);\n\t\t\t}\n\n\t\t\tthis._contributions.restoreViewState(codeEditorState.contributionsState || {});\n\t\t\tconst reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n\t\t\tthis._modelData.view.restoreState(reducedState);\n\t\t}\n\t}\n\n\tpublic handleInitialized(): void {\n\t\tthis._getViewModel()?.visibleLinesStabilized();\n\t}\n\n\tpublic getContribution<T extends editorCommon.IEditorContribution>(id: string): T | null {\n\t\treturn this._contributions.get(id) as T | null;\n\t}\n\n\tpublic getActions(): editorCommon.IEditorAction[] {\n\t\treturn Array.from(this._actions.values());\n\t}\n\n\tpublic getSupportedActions(): editorCommon.IEditorAction[] {\n\t\tlet result = this.getActions();\n\n\t\tresult = result.filter(action => action.isSupported());\n\n\t\treturn result;\n\t}\n\n\tpublic getAction(id: string): editorCommon.IEditorAction | null {\n\t\treturn this._actions.get(id) || null;\n\t}\n\n\tpublic trigger(source: string | null | undefined, handlerId: string, payload: any): void {\n\t\tpayload = payload || {};\n\n\t\ttry {\n\t\t\tthis._onWillTriggerEditorOperationEvent.fire({ source: source, handlerId: handlerId, payload: payload });\n\t\t\tthis._beginUpdate();\n\n\t\t\tswitch (handlerId) {\n\t\t\t\tcase editorCommon.Handler.CompositionStart:\n\t\t\t\t\tthis._startComposition();\n\t\t\t\t\treturn;\n\t\t\t\tcase editorCommon.Handler.CompositionEnd:\n\t\t\t\t\tthis._endComposition(source);\n\t\t\t\t\treturn;\n\t\t\t\tcase editorCommon.Handler.Type: {\n\t\t\t\t\tconst args = <Partial<editorCommon.TypePayload>>payload;\n\t\t\t\t\tthis._type(source, args.text || '');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcase editorCommon.Handler.ReplacePreviousChar: {\n\t\t\t\t\tconst args = <Partial<editorCommon.ReplacePreviousCharPayload>>payload;\n\t\t\t\t\tthis._compositionType(source, args.text || '', args.replaceCharCnt || 0, 0, 0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcase editorCommon.Handler.CompositionType: {\n\t\t\t\t\tconst args = <Partial<editorCommon.CompositionTypePayload>>payload;\n\t\t\t\t\tthis._compositionType(source, args.text || '', args.replacePrevCharCnt || 0, args.replaceNextCharCnt || 0, args.positionDelta || 0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcase editorCommon.Handler.Paste: {\n\t\t\t\t\tconst args = <Partial<editorBrowser.PastePayload>>payload;\n\t\t\t\t\tthis._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null, args.clipboardEvent);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcase editorCommon.Handler.Cut:\n\t\t\t\t\tthis._cut(source);\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = this.getAction(handlerId);\n\t\t\tif (action) {\n\t\t\t\tPromise.resolve(action.run(payload)).then(undefined, onUnexpectedError);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this._modelData) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._triggerEditorCommand(source, handlerId, payload)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._triggerCommand(handlerId, payload);\n\t\t} finally {\n\t\t\tthis._endUpdate();\n\t\t}\n\t}\n\n\tprotected _triggerCommand(handlerId: string, payload: any): void {\n\t\tthis._commandService.executeCommand(handlerId, payload);\n\t}\n\n\tprivate _startComposition(): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tthis.inComposition = true;\n\t\tthis._modelData.viewModel.startComposition();\n\t\tthis._onDidCompositionStart.fire();\n\t}\n\n\tprivate _endComposition(source: string | null | undefined): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tthis.inComposition = false;\n\t\tthis._modelData.viewModel.endComposition(source);\n\t\tthis._onDidCompositionEnd.fire();\n\t}\n\n\tprivate _type(source: string | null | undefined, text: string): void {\n\t\tif (!this._modelData || text.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (source === 'keyboard') {\n\t\t\tthis._onWillType.fire(text);\n\t\t}\n\t\tthis._modelData.viewModel.type(text, source);\n\t\tif (source === 'keyboard') {\n\t\t\tthis._onDidType.fire(text);\n\t\t}\n\t}\n\n\tprivate _compositionType(source: string | null | undefined, text: string, replacePrevCharCnt: number, replaceNextCharCnt: number, positionDelta: number): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.viewModel.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source);\n\t}\n\n\tprivate _paste(source: string | null | undefined, text: string, pasteOnNewLine: boolean, multicursorText: string[] | null, mode: string | null, clipboardEvent?: ClipboardEvent): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tconst viewModel = this._modelData.viewModel;\n\t\tconst startPosition = viewModel.getSelection().getStartPosition();\n\t\tviewModel.paste(text, pasteOnNewLine, multicursorText, source);\n\t\tconst endPosition = viewModel.getSelection().getStartPosition();\n\t\tif (source === 'keyboard') {\n\t\t\tthis._onDidPaste.fire({\n\t\t\t\tclipboardEvent,\n\t\t\t\trange: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n\t\t\t\tlanguageId: mode\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _cut(source: string | null | undefined): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.viewModel.cut(source);\n\t}\n\n\tprivate _triggerEditorCommand(source: string | null | undefined, handlerId: string, payload: any): boolean {\n\t\tconst command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n\t\tif (command) {\n\t\t\tpayload = payload || {};\n\t\t\tpayload.source = source;\n\t\t\tthis._instantiationService.invokeFunction((accessor) => {\n\t\t\t\tPromise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\n\t\t\t});\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic _getViewModel(): IViewModel | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.viewModel;\n\t}\n\n\tpublic pushUndoStop(): boolean {\n\t\tif (!this._modelData) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._configuration.options.get(EditorOption.readOnly)) {\n\t\t\t// read only editor => sorry!\n\t\t\treturn false;\n\t\t}\n\t\tthis._modelData.model.pushStackElement();\n\t\treturn true;\n\t}\n\n\tpublic popUndoStop(): boolean {\n\t\tif (!this._modelData) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._configuration.options.get(EditorOption.readOnly)) {\n\t\t\t// read only editor => sorry!\n\t\t\treturn false;\n\t\t}\n\t\tthis._modelData.model.popStackElement();\n\t\treturn true;\n\t}\n\n\tpublic edit(edit: TextEdit, reason: TextModelEditSource): boolean {\n\t\treturn this.executeEdits(reason, edit.replacements.map<IIdentifiedSingleEditOperation>(e => ({ range: e.range, text: e.text })), undefined);\n\t}\n\n\tpublic executeEdits(source: string | null | undefined | TextModelEditSource, edits: IIdentifiedSingleEditOperation[], endCursorState?: ICursorStateComputer | Selection[]): boolean {\n\t\tif (!this._modelData) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._configuration.options.get(EditorOption.readOnly)) {\n\t\t\t// read only editor => sorry!\n\t\t\treturn false;\n\t\t}\n\n\t\tlet cursorStateComputer: ICursorStateComputer;\n\t\tif (!endCursorState) {\n\t\t\tcursorStateComputer = () => null;\n\t\t} else if (Array.isArray(endCursorState)) {\n\t\t\tcursorStateComputer = () => endCursorState;\n\t\t} else {\n\t\t\tcursorStateComputer = endCursorState;\n\t\t}\n\n\t\tlet sourceStr: string | undefined | null;\n\t\tlet reason: TextModelEditSource;\n\n\t\tif (source instanceof TextModelEditSource) {\n\t\t\treason = source;\n\t\t\tsourceStr = source.metadata.source;\n\t\t} else {\n\t\t\treason = EditSources.unknown({ name: sourceStr });\n\t\t\tsourceStr = source;\n\t\t}\n\n\t\tthis._onBeforeExecuteEdit.fire({ source: sourceStr ?? undefined });\n\t\tthis._modelData.viewModel.executeEdits(sourceStr, edits, cursorStateComputer, reason);\n\t\treturn true;\n\t}\n\n\tpublic executeCommand(source: string | null | undefined, command: editorCommon.ICommand): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.viewModel.executeCommand(command, source);\n\t}\n\n\tpublic executeCommands(source: string | null | undefined, commands: editorCommon.ICommand[]): void {\n\t\tif (!this._modelData) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.viewModel.executeCommands(commands, source);\n\t}\n\n\tpublic createDecorationsCollection(decorations?: IModelDeltaDecoration[]): EditorDecorationsCollection {\n\t\treturn new EditorDecorationsCollection(this, decorations);\n\t}\n\n\tpublic changeDecorations(callback: (changeAccessor: IModelDecorationsChangeAccessor) => any): any {\n\t\tif (!this._modelData) {\n\t\t\t// callback will not be called\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.model.changeDecorations(callback, this._id);\n\t}\n\n\tpublic getLineDecorations(lineNumber: number): IModelDecoration[] | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\tconst options = this._configuration.options;\n\t\treturn this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(options), filterFontDecorations(options));\n\t}\n\n\tpublic getDecorationsInRange(range: Range): IModelDecoration[] | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\tconst options = this._configuration.options;\n\t\treturn this._modelData.model.getDecorationsInRange(range, this._id, filterValidationDecorations(options), filterFontDecorations(options));\n\t}\n\n\tpublic getFontSizeAtPosition(position: IPosition): string | null {\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.viewModel.getFontSizeAtPosition(position);\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\tpublic deltaDecorations(oldDecorations: string[], newDecorations: IModelDeltaDecoration[]): string[] {\n\t\tif (!this._modelData) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (oldDecorations.length === 0 && newDecorations.length === 0) {\n\t\t\treturn oldDecorations;\n\t\t}\n\n\t\treturn this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n\t}\n\n\tpublic removeDecorations(decorationIds: string[]): void {\n\t\tif (!this._modelData || decorationIds.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._modelData.model.changeDecorations((changeAccessor) => {\n\t\t\tchangeAccessor.deltaDecorations(decorationIds, []);\n\t\t});\n\t}\n\n\tpublic removeDecorationsByType(decorationTypeKey: string): void {\n\t\t// remove decorations for type and sub type\n\t\tconst oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n\t\tif (oldDecorationsIds) {\n\t\t\tthis.changeDecorations(accessor => accessor.deltaDecorations(oldDecorationsIds, []));\n\t\t}\n\t\tif (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n\t\t\tdelete this._decorationTypeKeysToIds[decorationTypeKey];\n\t\t}\n\t\tif (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n\t\t\tdelete this._decorationTypeSubtypes[decorationTypeKey];\n\t\t}\n\t}\n\n\tpublic getLayoutInfo(): EditorLayoutInfo {\n\t\tconst options = this._configuration.options;\n\t\tconst layoutInfo = options.get(EditorOption.layoutInfo);\n\t\treturn layoutInfo;\n\t}\n\n\tpublic createOverviewRuler(cssClassName: string): editorBrowser.IOverviewRuler | null {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.view.createOverviewRuler(cssClassName);\n\t}\n\n\tpublic getContainerDomNode(): HTMLElement {\n\t\treturn this._domElement;\n\t}\n\n\tpublic getDomNode(): HTMLElement | null {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.view.domNode.domNode;\n\t}\n\n\tpublic delegateVerticalScrollbarPointerDown(browserEvent: PointerEvent): void {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.view.delegateVerticalScrollbarPointerDown(browserEvent);\n\t}\n\n\tpublic delegateScrollFromMouseWheelEvent(browserEvent: IMouseWheelEvent) {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.view.delegateScrollFromMouseWheelEvent(browserEvent);\n\t}\n\n\tpublic layout(dimension?: IDimension, postponeRendering: boolean = false): void {\n\t\tthis._configuration.observeContainer(dimension);\n\t\tif (!postponeRendering) {\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\tpublic focus(): void {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.view.focus();\n\t}\n\n\tpublic hasTextFocus(): boolean {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this._modelData.view.isFocused();\n\t}\n\n\tpublic hasWidgetFocus(): boolean {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this._modelData.view.isWidgetFocused();\n\t}\n\n\tpublic addContentWidget(widget: editorBrowser.IContentWidget): void {\n\t\tconst widgetData: IContentWidgetData = {\n\t\t\twidget: widget,\n\t\t\tposition: widget.getPosition()\n\t\t};\n\n\t\tif (this._contentWidgets.hasOwnProperty(widget.getId())) {\n\t\t\tconsole.warn('Overwriting a content widget with the same id:' + widget.getId());\n\t\t}\n\n\t\tthis._contentWidgets[widget.getId()] = widgetData;\n\n\t\tif (this._modelData && this._modelData.hasRealView) {\n\t\t\tthis._modelData.view.addContentWidget(widgetData);\n\t\t}\n\t}\n\n\tpublic layoutContentWidget(widget: editorBrowser.IContentWidget): void {\n\t\tconst widgetId = widget.getId();\n\t\tif (this._contentWidgets.hasOwnProperty(widgetId)) {\n\t\t\tconst widgetData = this._contentWidgets[widgetId];\n\t\t\twidgetData.position = widget.getPosition();\n\t\t\tif (this._modelData && this._modelData.hasRealView) {\n\t\t\t\tthis._modelData.view.layoutContentWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic removeContentWidget(widget: editorBrowser.IContentWidget): void {\n\t\tconst widgetId = widget.getId();\n\t\tif (this._contentWidgets.hasOwnProperty(widgetId)) {\n\t\t\tconst widgetData = this._contentWidgets[widgetId];\n\t\t\tdelete this._contentWidgets[widgetId];\n\t\t\tif (this._modelData && this._modelData.hasRealView) {\n\t\t\t\tthis._modelData.view.removeContentWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic addOverlayWidget(widget: editorBrowser.IOverlayWidget): void {\n\t\tconst widgetData: IOverlayWidgetData = {\n\t\t\twidget: widget,\n\t\t\tposition: widget.getPosition()\n\t\t};\n\n\t\tif (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n\t\t\tconsole.warn('Overwriting an overlay widget with the same id.');\n\t\t}\n\n\t\tthis._overlayWidgets[widget.getId()] = widgetData;\n\t\tif (this._modelData && this._modelData.hasRealView) {\n\t\t\tthis._modelData.view.addOverlayWidget(widgetData);\n\t\t}\n\t}\n\n\tpublic layoutOverlayWidget(widget: editorBrowser.IOverlayWidget): void {\n\t\tconst widgetId = widget.getId();\n\t\tif (this._overlayWidgets.hasOwnProperty(widgetId)) {\n\t\t\tconst widgetData = this._overlayWidgets[widgetId];\n\t\t\twidgetData.position = widget.getPosition();\n\t\t\tif (this._modelData && this._modelData.hasRealView) {\n\t\t\t\tthis._modelData.view.layoutOverlayWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic removeOverlayWidget(widget: editorBrowser.IOverlayWidget): void {\n\t\tconst widgetId = widget.getId();\n\t\tif (this._overlayWidgets.hasOwnProperty(widgetId)) {\n\t\t\tconst widgetData = this._overlayWidgets[widgetId];\n\t\t\tdelete this._overlayWidgets[widgetId];\n\t\t\tif (this._modelData && this._modelData.hasRealView) {\n\t\t\t\tthis._modelData.view.removeOverlayWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic addGlyphMarginWidget(widget: editorBrowser.IGlyphMarginWidget): void {\n\t\tconst widgetData: IGlyphMarginWidgetData = {\n\t\t\twidget: widget,\n\t\t\tposition: widget.getPosition()\n\t\t};\n\n\t\tif (this._glyphMarginWidgets.hasOwnProperty(widget.getId())) {\n\t\t\tconsole.warn('Overwriting a glyph margin widget with the same id.');\n\t\t}\n\n\t\tthis._glyphMarginWidgets[widget.getId()] = widgetData;\n\n\t\tif (this._modelData && this._modelData.hasRealView) {\n\t\t\tthis._modelData.view.addGlyphMarginWidget(widgetData);\n\t\t}\n\t}\n\n\tpublic layoutGlyphMarginWidget(widget: editorBrowser.IGlyphMarginWidget): void {\n\t\tconst widgetId = widget.getId();\n\t\tif (this._glyphMarginWidgets.hasOwnProperty(widgetId)) {\n\t\t\tconst widgetData = this._glyphMarginWidgets[widgetId];\n\t\t\twidgetData.position = widget.getPosition();\n\t\t\tif (this._modelData && this._modelData.hasRealView) {\n\t\t\t\tthis._modelData.view.layoutGlyphMarginWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic removeGlyphMarginWidget(widget: editorBrowser.IGlyphMarginWidget): void {\n\t\tconst widgetId = widget.getId();\n\t\tif (this._glyphMarginWidgets.hasOwnProperty(widgetId)) {\n\t\t\tconst widgetData = this._glyphMarginWidgets[widgetId];\n\t\t\tdelete this._glyphMarginWidgets[widgetId];\n\t\t\tif (this._modelData && this._modelData.hasRealView) {\n\t\t\t\tthis._modelData.view.removeGlyphMarginWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic changeViewZones(callback: (accessor: editorBrowser.IViewZoneChangeAccessor) => void): void {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.view.change(callback);\n\t}\n\n\tpublic getTargetAtClientPoint(clientX: number, clientY: number): editorBrowser.IMouseTarget | null {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n\t}\n\n\tpublic getScrolledVisiblePosition(rawPosition: IPosition): { top: number; left: number; height: number } | null {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst position = this._modelData.model.validatePosition(rawPosition);\n\t\tconst options = this._configuration.options;\n\t\tconst layoutInfo = options.get(EditorOption.layoutInfo);\n\n\t\tconst top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n\t\tconst left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n\t\tconst height = this.getLineHeightForPosition(position);\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\theight\n\t\t};\n\t}\n\n\tpublic getOffsetForColumn(lineNumber: number, column: number): number {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._modelData.view.getOffsetForColumn(lineNumber, column);\n\t}\n\n\tpublic render(forceRedraw: boolean = false): void {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.viewModel.batchEvents(() => {\n\t\t\tthis._modelData!.view.render(true, forceRedraw);\n\t\t});\n\t}\n\n\tpublic setAriaOptions(options: editorBrowser.IEditorAriaOptions): void {\n\t\tif (!this._modelData || !this._modelData.hasRealView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._modelData.view.setAriaOptions(options);\n\t}\n\n\tpublic applyFontInfo(target: HTMLElement): void {\n\t\tapplyFontInfo(target, this._configuration.options.get(EditorOption.fontInfo));\n\t}\n\n\tpublic setBanner(domNode: HTMLElement | null, domNodeHeight: number): void {\n\t\tif (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n\t\t\tthis._bannerDomNode.remove();\n\t\t}\n\n\t\tthis._bannerDomNode = domNode;\n\t\tthis._configuration.setReservedHeight(domNode ? domNodeHeight : 0);\n\n\t\tif (this._bannerDomNode) {\n\t\t\tthis._domElement.prepend(this._bannerDomNode);\n\t\t}\n\t}\n\n\tprotected _attachModel(model: ITextModel | null): void {\n\t\tif (!model) {\n\t\t\tthis._modelData = null;\n\t\t\treturn;\n\t\t}\n\n\t\tconst listenersToRemove: IDisposable[] = [];\n\n\t\tthis._domElement.setAttribute('data-mode-id', model.getLanguageId());\n\t\tthis._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n\t\tthis._configuration.setModelLineCount(model.getLineCount());\n\n\t\tconst attachedView = model.onBeforeAttached();\n\n\t\tconst viewModel = new ViewModel(\n\t\t\tthis._id,\n\t\t\tthis._configuration,\n\t\t\tmodel,\n\t\t\tDOMLineBreaksComputerFactory.create(dom.getWindow(this._domElement)),\n\t\t\tMonospaceLineBreaksComputerFactory.create(this._configuration.options),\n\t\t\t(callback) => dom.scheduleAtNextAnimationFrame(dom.getWindow(this._domElement), callback),\n\t\t\tthis.languageConfigurationService,\n\t\t\tthis._themeService,\n\t\t\tattachedView,\n\t\t\t{\n\t\t\t\tbatchChanges: (cb) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis._beginUpdate();\n\t\t\t\t\t\treturn cb();\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis._endUpdate();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\t// Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n\t\tlistenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\n\n\t\tlistenersToRemove.push(viewModel.onEvent((e) => {\n\t\t\tswitch (e.kind) {\n\t\t\t\tcase OutgoingViewModelEventKind.ContentSizeChanged:\n\t\t\t\t\tthis._onDidContentSizeChange.fire(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.FocusChanged:\n\t\t\t\t\tthis._editorTextFocus.setValue(e.hasFocus);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.WidgetFocusChanged:\n\t\t\t\t\tthis._editorWidgetFocus.setValue(e.hasFocus);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ScrollChanged:\n\t\t\t\t\tthis._onDidScrollChange.fire(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ViewZonesChanged:\n\t\t\t\t\tthis._onDidChangeViewZones.fire();\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.HiddenAreasChanged:\n\t\t\t\t\tthis._onDidChangeHiddenAreas.fire();\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ReadOnlyEditAttempt:\n\t\t\t\t\tthis._onDidAttemptReadOnlyEdit.fire();\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.CursorStateChanged: {\n\t\t\t\t\tif (e.reachedMaxCursorCount) {\n\n\t\t\t\t\t\tconst multiCursorLimit = this.getOption(EditorOption.multiCursorLimit);\n\t\t\t\t\t\tconst message = nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.\", multiCursorLimit);\n\t\t\t\t\t\tthis._notificationService.prompt(Severity.Warning, message, [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'Find and Replace',\n\t\t\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\t\t\tthis._commandService.executeCommand('editor.action.startFindReplaceAction');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: nls.localize('goToSetting', 'Increase Multi Cursor Limit'),\n\t\t\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\t\t\tthis._commandService.executeCommand('workbench.action.openSettings2', {\n\t\t\t\t\t\t\t\t\t\tquery: 'editor.multiCursorLimit'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst positions: Position[] = [];\n\t\t\t\t\tfor (let i = 0, len = e.selections.length; i < len; i++) {\n\t\t\t\t\t\tpositions[i] = e.selections[i].getPosition();\n\t\t\t\t\t}\n\n\t\t\t\t\tconst e1: ICursorPositionChangedEvent = {\n\t\t\t\t\t\tposition: positions[0],\n\t\t\t\t\t\tsecondaryPositions: positions.slice(1),\n\t\t\t\t\t\treason: e.reason,\n\t\t\t\t\t\tsource: e.source\n\t\t\t\t\t};\n\t\t\t\t\tthis._onDidChangeCursorPosition.fire(e1);\n\n\t\t\t\t\tconst e2: ICursorSelectionChangedEvent = {\n\t\t\t\t\t\tselection: e.selections[0],\n\t\t\t\t\t\tsecondarySelections: e.selections.slice(1),\n\t\t\t\t\t\tmodelVersionId: e.modelVersionId,\n\t\t\t\t\t\toldSelections: e.oldSelections,\n\t\t\t\t\t\toldModelVersionId: e.oldModelVersionId,\n\t\t\t\t\t\tsource: e.source,\n\t\t\t\t\t\treason: e.reason\n\t\t\t\t\t};\n\t\t\t\t\tthis._onDidChangeCursorSelection.fire(e2);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase OutgoingViewModelEventKind.ModelDecorationsChanged:\n\t\t\t\t\tthis._onDidChangeModelDecorations.fire(e.event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ModelLanguageChanged:\n\t\t\t\t\tthis._domElement.setAttribute('data-mode-id', model.getLanguageId());\n\t\t\t\t\tthis._onDidChangeModelLanguage.fire(e.event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ModelLanguageConfigurationChanged:\n\t\t\t\t\tthis._onDidChangeModelLanguageConfiguration.fire(e.event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ModelContentChanged:\n\t\t\t\t\tthis._onDidChangeModelContent.fire(e.event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ModelOptionsChanged:\n\t\t\t\t\tthis._onDidChangeModelOptions.fire(e.event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ModelTokensChanged:\n\t\t\t\t\tthis._onDidChangeModelTokens.fire(e.event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ModelLineHeightChanged:\n\t\t\t\t\tthis._onDidChangeLineHeight.fire(e.event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OutgoingViewModelEventKind.ModelFontChangedEvent:\n\t\t\t\t\tthis._onDidChangeFont.fire(e.event);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}));\n\n\t\tconst [view, hasRealView] = this._createView(viewModel);\n\t\tif (hasRealView) {\n\t\t\tthis._domElement.appendChild(view.domNode.domNode);\n\n\t\t\tlet keys = Object.keys(this._contentWidgets);\n\t\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\t\tconst widgetId = keys[i];\n\t\t\t\tview.addContentWidget(this._contentWidgets[widgetId]);\n\t\t\t}\n\n\t\t\tkeys = Object.keys(this._overlayWidgets);\n\t\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\t\tconst widgetId = keys[i];\n\t\t\t\tview.addOverlayWidget(this._overlayWidgets[widgetId]);\n\t\t\t}\n\n\t\t\tkeys = Object.keys(this._glyphMarginWidgets);\n\t\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\t\tconst widgetId = keys[i];\n\t\t\t\tview.addGlyphMarginWidget(this._glyphMarginWidgets[widgetId]);\n\t\t\t}\n\n\t\t\tview.render(false, true);\n\t\t\tview.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n\t\t}\n\n\t\tthis._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove, attachedView);\n\t}\n\n\tprotected _createView(viewModel: ViewModel): [View, boolean] {\n\t\tlet commandDelegate: ICommandDelegate;\n\t\tif (this.isSimpleWidget) {\n\t\t\tcommandDelegate = {\n\t\t\t\tpaste: (text: string, pasteOnNewLine: boolean, multicursorText: string[] | null, mode: string | null) => {\n\t\t\t\t\tthis._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\n\t\t\t\t},\n\t\t\t\ttype: (text: string) => {\n\t\t\t\t\tthis._type('keyboard', text);\n\t\t\t\t},\n\t\t\t\tcompositionType: (text: string, replacePrevCharCnt: number, replaceNextCharCnt: number, positionDelta: number) => {\n\t\t\t\t\tthis._compositionType('keyboard', text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n\t\t\t\t},\n\t\t\t\tstartComposition: () => {\n\t\t\t\t\tthis._startComposition();\n\t\t\t\t},\n\t\t\t\tendComposition: () => {\n\t\t\t\t\tthis._endComposition('keyboard');\n\t\t\t\t},\n\t\t\t\tcut: () => {\n\t\t\t\t\tthis._cut('keyboard');\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\tcommandDelegate = {\n\t\t\t\tpaste: (text: string, pasteOnNewLine: boolean, multicursorText: string[] | null, mode: string | null) => {\n\t\t\t\t\tconst payload: editorBrowser.PastePayload = { text, pasteOnNewLine, multicursorText, mode };\n\t\t\t\t\tthis._commandService.executeCommand(editorCommon.Handler.Paste, payload);\n\t\t\t\t},\n\t\t\t\ttype: (text: string) => {\n\t\t\t\t\tconst payload: editorCommon.TypePayload = { text };\n\t\t\t\t\tthis._commandService.executeCommand(editorCommon.Handler.Type, payload);\n\t\t\t\t},\n\t\t\t\tcompositionType: (text: string, replacePrevCharCnt: number, replaceNextCharCnt: number, positionDelta: number) => {\n\t\t\t\t\t// Try if possible to go through the existing `replacePreviousChar` command\n\t\t\t\t\tif (replaceNextCharCnt || positionDelta) {\n\t\t\t\t\t\t// must be handled through the new command\n\t\t\t\t\t\tconst payload: editorCommon.CompositionTypePayload = { text, replacePrevCharCnt, replaceNextCharCnt, positionDelta };\n\t\t\t\t\t\tthis._commandService.executeCommand(editorCommon.Handler.CompositionType, payload);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst payload: editorCommon.ReplacePreviousCharPayload = { text, replaceCharCnt: replacePrevCharCnt };\n\t\t\t\t\t\tthis._commandService.executeCommand(editorCommon.Handler.ReplacePreviousChar, payload);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstartComposition: () => {\n\t\t\t\t\tthis._commandService.executeCommand(editorCommon.Handler.CompositionStart, {});\n\t\t\t\t},\n\t\t\t\tendComposition: () => {\n\t\t\t\t\tthis._commandService.executeCommand(editorCommon.Handler.CompositionEnd, {});\n\t\t\t\t},\n\t\t\t\tcut: () => {\n\t\t\t\t\tthis._commandService.executeCommand(editorCommon.Handler.Cut, {});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tconst viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\n\t\tviewUserInputEvents.onKeyDown = (e) => this._onKeyDown.fire(e);\n\t\tviewUserInputEvents.onKeyUp = (e) => this._onKeyUp.fire(e);\n\t\tviewUserInputEvents.onContextMenu = (e) => this._onContextMenu.fire(e);\n\t\tviewUserInputEvents.onMouseMove = (e) => this._onMouseMove.fire(e);\n\t\tviewUserInputEvents.onMouseLeave = (e) => this._onMouseLeave.fire(e);\n\t\tviewUserInputEvents.onMouseDown = (e) => this._onMouseDown.fire(e);\n\t\tviewUserInputEvents.onMouseUp = (e) => this._onMouseUp.fire(e);\n\t\tviewUserInputEvents.onMouseDrag = (e) => this._onMouseDrag.fire(e);\n\t\tviewUserInputEvents.onMouseDrop = (e) => this._onMouseDrop.fire(e);\n\t\tviewUserInputEvents.onMouseDropCanceled = (e) => this._onMouseDropCanceled.fire(e);\n\t\tviewUserInputEvents.onMouseWheel = (e) => this._onMouseWheel.fire(e);\n\n\t\tconst view = new View(\n\t\t\tthis._domElement,\n\t\t\tthis.getId(),\n\t\t\tcommandDelegate,\n\t\t\tthis._configuration,\n\t\t\tthis._themeService.getColorTheme(),\n\t\t\tviewModel,\n\t\t\tviewUserInputEvents,\n\t\t\tthis._overflowWidgetsDomNode,\n\t\t\tthis._instantiationService\n\t\t);\n\n\t\treturn [view, true];\n\t}\n\n\tprotected _postDetachModelCleanup(detachedModel: ITextModel | null): void {\n\t\tdetachedModel?.removeAllDecorationsWithOwnerId(this._id);\n\t}\n\n\tprivate _detachModel(): ITextModel | null {\n\t\tthis._contributionsDisposable?.dispose();\n\t\tthis._contributionsDisposable = undefined;\n\t\tif (!this._modelData) {\n\t\t\treturn null;\n\t\t}\n\t\tconst model = this._modelData.model;\n\t\tconst removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n\n\t\tthis._modelData.dispose();\n\t\tthis._modelData = null;\n\n\t\tthis._domElement.removeAttribute('data-mode-id');\n\t\tif (removeDomNode && this._domElement.contains(removeDomNode)) {\n\t\t\tremoveDomNode.remove();\n\t\t}\n\t\tif (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n\t\t\tthis._bannerDomNode.remove();\n\t\t}\n\t\treturn model;\n\t}\n\n\tprivate _removeDecorationType(key: string): void {\n\t\tthis._codeEditorService.removeDecorationType(key);\n\t}\n\n\tpublic hasModel(): this is editorBrowser.IActiveCodeEditor {\n\t\treturn (this._modelData !== null);\n\t}\n\n\tprivate showDropIndicatorAt(position: Position): void {\n\t\tconst newDecorations: IModelDeltaDecoration[] = [{\n\t\t\trange: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n\t\t\toptions: CodeEditorWidget.dropIntoEditorDecorationOptions\n\t\t}];\n\n\t\tthis._dropIntoEditorDecorations.set(newDecorations);\n\t\tthis.revealPosition(position, editorCommon.ScrollType.Immediate);\n\t}\n\n\tprivate removeDropIndicator(): void {\n\t\tthis._dropIntoEditorDecorations.clear();\n\t}\n\n\tprivate _beginUpdate(): void {\n\t\tthis._updateCounter++;\n\t\tif (this._updateCounter === 1) {\n\t\t\tthis._onBeginUpdate.fire();\n\t\t}\n\t}\n\n\tprivate _endUpdate(): void {\n\t\tthis._updateCounter--;\n\t\tif (this._updateCounter === 0) {\n\t\t\tthis._onEndUpdate.fire();\n\t\t}\n\t}\n}\n\nlet EDITOR_ID = 0;\n\nexport interface ICodeEditorWidgetOptions {\n\t/**\n\t * Is this a simple widget (not a real code editor)?\n\t * Defaults to false.\n\t */\n\tisSimpleWidget?: boolean;\n\n\t/**\n\t * Contributions to instantiate.\n\t * When provided, only the contributions included will be instantiated.\n\t * To include the defaults, those must be provided as well via [...EditorExtensionsRegistry.getEditorContributions()]\n\t * Defaults to EditorExtensionsRegistry.getEditorContributions().\n\t */\n\tcontributions?: IEditorContributionDescription[];\n\n\t/**\n\t * Telemetry data associated with this CodeEditorWidget.\n\t * Defaults to null.\n\t */\n\ttelemetryData?: object;\n\n\t/**\n\t * The ID of the context menu.\n\t * Defaults to MenuId.SimpleEditorContext or MenuId.EditorContext depending on whether the widget is simple.\n\t */\n\tcontextMenuId?: MenuId;\n\n\t/**\n\t * Define extra context keys that will be defined in the context service\n\t * for the editor.\n\t */\n\tcontextKeyValues?: Record<string, ContextKeyValue>;\n}\n\nclass ModelData {\n\tconstructor(\n\t\tpublic readonly model: ITextModel,\n\t\tpublic readonly viewModel: ViewModel,\n\t\tpublic readonly view: View,\n\t\tpublic readonly hasRealView: boolean,\n\t\tpublic readonly listenersToRemove: IDisposable[],\n\t\tpublic readonly attachedView: IAttachedView,\n\t) {\n\t}\n\n\tpublic dispose(): void {\n\t\tdispose(this.listenersToRemove);\n\t\tthis.model.onBeforeDetached(this.attachedView);\n\t\tif (this.hasRealView) {\n\t\t\tthis.view.dispose();\n\t\t}\n\t\tthis.viewModel.dispose();\n\t}\n}\n\nconst enum BooleanEventValue {\n\tNotSet,\n\tFalse,\n\tTrue\n}\n\nexport class BooleanEventEmitter extends Disposable {\n\tprivate readonly _onDidChangeToTrue: Emitter<void>;\n\tpublic readonly onDidChangeToTrue: Event<void>;\n\n\tprivate readonly _onDidChangeToFalse: Emitter<void>;\n\tpublic readonly onDidChangeToFalse: Event<void>;\n\n\tprivate _value: BooleanEventValue;\n\n\tconstructor(\n\t\tprivate readonly _emitterOptions: EmitterOptions\n\t) {\n\t\tsuper();\n\t\tthis._onDidChangeToTrue = this._register(new Emitter<void>(this._emitterOptions));\n\t\tthis.onDidChangeToTrue = this._onDidChangeToTrue.event;\n\t\tthis._onDidChangeToFalse = this._register(new Emitter<void>(this._emitterOptions));\n\t\tthis.onDidChangeToFalse = this._onDidChangeToFalse.event;\n\t\tthis._value = BooleanEventValue.NotSet;\n\t}\n\n\tpublic setValue(_value: boolean) {\n\t\tconst value = (_value ? BooleanEventValue.True : BooleanEventValue.False);\n\t\tif (this._value === value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._value = value;\n\t\tif (this._value === BooleanEventValue.True) {\n\t\t\tthis._onDidChangeToTrue.fire();\n\t\t} else if (this._value === BooleanEventValue.False) {\n\t\t\tthis._onDidChangeToFalse.fire();\n\t\t}\n\t}\n}\n\n/**\n * A regular event emitter that also makes sure contributions are instantiated if necessary\n */\nclass InteractionEmitter<T> extends Emitter<T> {\n\n\tconstructor(\n\t\tprivate readonly _contributions: CodeEditorContributions,\n\t\tdeliveryQueue: EventDeliveryQueue\n\t) {\n\t\tsuper({ deliveryQueue });\n\t}\n\n\toverride fire(event: T): void {\n\t\tthis._contributions.onBeforeInteractionEvent();\n\t\tsuper.fire(event);\n\t}\n}\n\nclass EditorContextKeysManager extends Disposable {\n\n\tprivate readonly _editor: CodeEditorWidget;\n\tprivate readonly _editorSimpleInput: IContextKey<boolean>;\n\tprivate readonly _editorFocus: IContextKey<boolean>;\n\tprivate readonly _textInputFocus: IContextKey<boolean>;\n\tprivate readonly _editorTextFocus: IContextKey<boolean>;\n\tprivate readonly _tabMovesFocus: IContextKey<boolean>;\n\tprivate readonly _editorReadonly: IContextKey<boolean>;\n\tprivate readonly _inDiffEditor: IContextKey<boolean>;\n\tprivate readonly _editorColumnSelection: IContextKey<boolean>;\n\tprivate readonly _hasMultipleSelections: IContextKey<boolean>;\n\tprivate readonly _hasNonEmptySelection: IContextKey<boolean>;\n\tprivate readonly _canUndo: IContextKey<boolean>;\n\tprivate readonly _canRedo: IContextKey<boolean>;\n\n\tconstructor(\n\t\teditor: CodeEditorWidget,\n\t\tcontextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\n\t\tthis._editor = editor;\n\n\t\tcontextKeyService.createKey('editorId', editor.getId());\n\n\t\tthis._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n\t\tthis._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n\t\tthis._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n\t\tthis._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n\t\tthis._tabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n\t\tthis._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n\t\tthis._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\n\t\tthis._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\n\t\tthis._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n\t\tthis._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n\t\tthis._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n\t\tthis._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n\n\t\tthis._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\n\t\tthis._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\n\t\tthis._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\n\t\tthis._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\n\t\tthis._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\n\t\tthis._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\n\t\tthis._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\n\t\tthis._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\n\t\tthis._register(TabFocus.onDidChangeTabFocus((tabFocusMode: boolean) => this._tabMovesFocus.set(tabFocusMode)));\n\n\t\tthis._updateFromConfig();\n\t\tthis._updateFromSelection();\n\t\tthis._updateFromFocus();\n\t\tthis._updateFromModel();\n\n\t\tthis._editorSimpleInput.set(this._editor.isSimpleWidget);\n\t}\n\n\tprivate _updateFromConfig(): void {\n\t\tconst options = this._editor.getOptions();\n\n\t\tthis._tabMovesFocus.set(options.get(EditorOption.tabFocusMode) || TabFocus.getTabFocusMode());\n\t\tthis._editorReadonly.set(options.get(EditorOption.readOnly));\n\t\tthis._inDiffEditor.set(options.get(EditorOption.inDiffEditor));\n\t\tthis._editorColumnSelection.set(options.get(EditorOption.columnSelection));\n\t}\n\n\tprivate _updateFromSelection(): void {\n\t\tconst selections = this._editor.getSelections();\n\t\tif (!selections) {\n\t\t\tthis._hasMultipleSelections.reset();\n\t\t\tthis._hasNonEmptySelection.reset();\n\t\t} else {\n\t\t\tthis._hasMultipleSelections.set(selections.length > 1);\n\t\t\tthis._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\n\t\t}\n\t}\n\n\tprivate _updateFromFocus(): void {\n\t\tthis._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n\t\tthis._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n\t\tthis._textInputFocus.set(this._editor.hasTextFocus());\n\t}\n\n\tprivate _updateFromModel(): void {\n\t\tconst model = this._editor.getModel();\n\t\tthis._canUndo.set(Boolean(model && model.canUndo()));\n\t\tthis._canRedo.set(Boolean(model && model.canRedo()));\n\t}\n}\n\nexport class EditorModeContext extends Disposable {\n\n\tprivate readonly _langId: IContextKey<string>;\n\tprivate readonly _hasCompletionItemProvider: IContextKey<boolean>;\n\tprivate readonly _hasCodeActionsProvider: IContextKey<boolean>;\n\tprivate readonly _hasCodeLensProvider: IContextKey<boolean>;\n\tprivate readonly _hasDefinitionProvider: IContextKey<boolean>;\n\tprivate readonly _hasDeclarationProvider: IContextKey<boolean>;\n\tprivate readonly _hasImplementationProvider: IContextKey<boolean>;\n\tprivate readonly _hasTypeDefinitionProvider: IContextKey<boolean>;\n\tprivate readonly _hasHoverProvider: IContextKey<boolean>;\n\tprivate readonly _hasDocumentHighlightProvider: IContextKey<boolean>;\n\tprivate readonly _hasDocumentSymbolProvider: IContextKey<boolean>;\n\tprivate readonly _hasReferenceProvider: IContextKey<boolean>;\n\tprivate readonly _hasRenameProvider: IContextKey<boolean>;\n\tprivate readonly _hasDocumentFormattingProvider: IContextKey<boolean>;\n\tprivate readonly _hasDocumentSelectionFormattingProvider: IContextKey<boolean>;\n\tprivate readonly _hasMultipleDocumentFormattingProvider: IContextKey<boolean>;\n\tprivate readonly _hasMultipleDocumentSelectionFormattingProvider: IContextKey<boolean>;\n\tprivate readonly _hasSignatureHelpProvider: IContextKey<boolean>;\n\tprivate readonly _hasInlayHintsProvider: IContextKey<boolean>;\n\tprivate readonly _isInEmbeddedEditor: IContextKey<boolean>;\n\n\tconstructor(\n\t\tprivate readonly _editor: CodeEditorWidget,\n\t\tprivate readonly _contextKeyService: IContextKeyService,\n\t\tprivate readonly _languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tsuper();\n\n\t\tthis._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n\t\tthis._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n\t\tthis._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n\t\tthis._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n\t\tthis._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n\t\tthis._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n\t\tthis._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n\t\tthis._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n\t\tthis._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n\t\tthis._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n\t\tthis._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n\t\tthis._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n\t\tthis._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n\t\tthis._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n\t\tthis._hasInlayHintsProvider = EditorContextKeys.hasInlayHintsProvider.bindTo(_contextKeyService);\n\t\tthis._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n\t\tthis._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n\t\tthis._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n\t\tthis._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n\t\tthis._isInEmbeddedEditor = EditorContextKeys.isInEmbeddedEditor.bindTo(_contextKeyService);\n\n\t\tconst update = () => this._update();\n\n\t\t// update when model/mode changes\n\t\tthis._register(_editor.onDidChangeModel(update));\n\t\tthis._register(_editor.onDidChangeModelLanguage(update));\n\n\t\t// update when registries change\n\t\tthis._register(_languageFeaturesService.completionProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.codeActionProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.codeLensProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.definitionProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.declarationProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.implementationProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.typeDefinitionProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.hoverProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.documentHighlightProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.documentSymbolProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.referenceProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.renameProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.documentFormattingEditProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.signatureHelpProvider.onDidChange(update));\n\t\tthis._register(_languageFeaturesService.inlayHintsProvider.onDidChange(update));\n\n\t\tupdate();\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t}\n\n\treset() {\n\t\tthis._contextKeyService.bufferChangeEvents(() => {\n\t\t\tthis._langId.reset();\n\t\t\tthis._hasCompletionItemProvider.reset();\n\t\t\tthis._hasCodeActionsProvider.reset();\n\t\t\tthis._hasCodeLensProvider.reset();\n\t\t\tthis._hasDefinitionProvider.reset();\n\t\t\tthis._hasDeclarationProvider.reset();\n\t\t\tthis._hasImplementationProvider.reset();\n\t\t\tthis._hasTypeDefinitionProvider.reset();\n\t\t\tthis._hasHoverProvider.reset();\n\t\t\tthis._hasDocumentHighlightProvider.reset();\n\t\t\tthis._hasDocumentSymbolProvider.reset();\n\t\t\tthis._hasReferenceProvider.reset();\n\t\t\tthis._hasRenameProvider.reset();\n\t\t\tthis._hasDocumentFormattingProvider.reset();\n\t\t\tthis._hasDocumentSelectionFormattingProvider.reset();\n\t\t\tthis._hasSignatureHelpProvider.reset();\n\t\t\tthis._isInEmbeddedEditor.reset();\n\t\t});\n\t}\n\n\tprivate _update() {\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\tthis.reset();\n\t\t\treturn;\n\t\t}\n\t\tthis._contextKeyService.bufferChangeEvents(() => {\n\t\t\tthis._langId.set(model.getLanguageId());\n\t\t\tthis._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(model));\n\t\t\tthis._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(model));\n\t\t\tthis._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(model));\n\t\t\tthis._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(model));\n\t\t\tthis._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(model));\n\t\t\tthis._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(model));\n\t\t\tthis._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(model));\n\t\t\tthis._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(model));\n\t\t\tthis._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(model));\n\t\t\tthis._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(model));\n\t\t\tthis._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(model));\n\t\t\tthis._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(model));\n\t\t\tthis._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(model));\n\t\t\tthis._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(model));\n\t\t\tthis._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(model) || this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n\t\t\tthis._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n\t\t\tthis._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(model).length + this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n\t\t\tthis._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n\t\t\tthis._isInEmbeddedEditor.set(model.uri.scheme === Schemas.walkThroughSnippet || model.uri.scheme === Schemas.vscodeChatCodeBlock);\n\t\t});\n\t}\n}\n\n\nclass EditorDecorationsCollection implements editorCommon.IEditorDecorationsCollection {\n\n\tprivate _decorationIds: string[] = [];\n\tprivate _isChangingDecorations: boolean = false;\n\n\tpublic get length(): number {\n\t\treturn this._decorationIds.length;\n\t}\n\n\tconstructor(\n\t\tprivate readonly _editor: editorBrowser.ICodeEditor,\n\t\tdecorations: IModelDeltaDecoration[] | undefined\n\t) {\n\t\tif (Array.isArray(decorations) && decorations.length > 0) {\n\t\t\tthis.set(decorations);\n\t\t}\n\t}\n\n\tpublic onDidChange(listener: (e: IModelDecorationsChangedEvent) => any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore): IDisposable {\n\t\treturn this._editor.onDidChangeModelDecorations((e) => {\n\t\t\tif (this._isChangingDecorations) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlistener.call(thisArgs, e);\n\t\t}, disposables);\n\t}\n\n\tpublic getRange(index: number): Range | null {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn null;\n\t\t}\n\t\tif (index >= this._decorationIds.length) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._editor.getModel().getDecorationRange(this._decorationIds[index]);\n\t}\n\n\tpublic getRanges(): Range[] {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn [];\n\t\t}\n\t\tconst model = this._editor.getModel();\n\t\tconst result: Range[] = [];\n\t\tfor (const decorationId of this._decorationIds) {\n\t\t\tconst range = model.getDecorationRange(decorationId);\n\t\t\tif (range) {\n\t\t\t\tresult.push(range);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic has(decoration: IModelDecoration): boolean {\n\t\treturn this._decorationIds.includes(decoration.id);\n\t}\n\n\tpublic clear(): void {\n\t\tif (this._decorationIds.length === 0) {\n\t\t\t// nothing to do\n\t\t\treturn;\n\t\t}\n\t\tthis.set([]);\n\t}\n\n\tpublic set(newDecorations: readonly IModelDeltaDecoration[]): string[] {\n\t\ttry {\n\t\t\tthis._isChangingDecorations = true;\n\t\t\tthis._editor.changeDecorations((accessor) => {\n\t\t\t\tthis._decorationIds = accessor.deltaDecorations(this._decorationIds, newDecorations);\n\t\t\t});\n\t\t} finally {\n\t\t\tthis._isChangingDecorations = false;\n\t\t}\n\t\treturn this._decorationIds;\n\t}\n\n\tpublic append(newDecorations: readonly IModelDeltaDecoration[]): string[] {\n\t\tlet newDecorationIds: string[] = [];\n\t\ttry {\n\t\t\tthis._isChangingDecorations = true;\n\t\t\tthis._editor.changeDecorations((accessor) => {\n\t\t\t\tnewDecorationIds = accessor.deltaDecorations([], newDecorations);\n\t\t\t\tthis._decorationIds = this._decorationIds.concat(newDecorationIds);\n\t\t\t});\n\t\t} finally {\n\t\t\tthis._isChangingDecorations = false;\n\t\t}\n\t\treturn newDecorationIds;\n\t}\n}\n\nconst squigglyStart = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='`);\nconst squigglyEnd = encodeURIComponent(`'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>`);\n\nfunction getSquigglySVGData(color: Color) {\n\treturn squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\n\nconst dotdotdotStart = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"`);\nconst dotdotdotEnd = encodeURIComponent(`\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>`);\n\nfunction getDotDotDotSVGData(color: Color) {\n\treturn dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\n\nregisterThemingParticipant((theme, collector) => {\n\tconst errorForeground = theme.getColor(editorErrorForeground);\n\tif (errorForeground) {\n\t\tcollector.addRule(`.monaco-editor .${ClassName.EditorErrorDecoration} { background: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\") repeat-x bottom left; }`);\n\t\tcollector.addRule(`:root { --monaco-editor-error-decoration: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\"); }`);\n\t}\n\tconst warningForeground = theme.getColor(editorWarningForeground);\n\tif (warningForeground) {\n\t\tcollector.addRule(`.monaco-editor .${ClassName.EditorWarningDecoration} { background: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\") repeat-x bottom left; }`);\n\t\tcollector.addRule(`:root { --monaco-editor-warning-decoration: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\"); }`);\n\t}\n\tconst infoForeground = theme.getColor(editorInfoForeground);\n\tif (infoForeground) {\n\t\tcollector.addRule(`.monaco-editor .${ClassName.EditorInfoDecoration} { background: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\") repeat-x bottom left; }`);\n\t\tcollector.addRule(`:root { --monaco-editor-info-decoration: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\"); }`);\n\t}\n\tconst hintForeground = theme.getColor(editorHintForeground);\n\tif (hintForeground) {\n\t\tcollector.addRule(`.monaco-editor .${ClassName.EditorHintDecoration} { background: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\") no-repeat bottom left; }`);\n\t\tcollector.addRule(`:root { --monaco-editor-hint-decoration: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\"); }`);\n\t}\n\tconst unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n\tif (unnecessaryForeground) {\n\t\tcollector.addRule(`.monaco-editor.showUnused .${ClassName.EditorUnnecessaryInlineDecoration} { opacity: ${unnecessaryForeground.rgba.a}; }`);\n\t\tcollector.addRule(`:root { --monaco-editor-unnecessary-decoration-opacity: ${unnecessaryForeground.rgba.a}; }`);\n\t}\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2109, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/utils.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/vs/editor/browser/widget/diffEditor/utils.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDimension } from '../../../../base/browser/dom.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Disposable, DisposableStore, IDisposable, IReference, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IObservable, IObservableWithChange, ISettableObservable, autorun, autorunHandleChanges, autorunOpts, autorunWithStore, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\nimport { ICodeEditor, IOverlayWidget, IViewZone } from '../../editorBrowser.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { DetailedLineRangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { IModelDeltaDecoration } from '../../../common/model.js';\nimport { TextLength } from '../../../common/core/text/textLength.js';\n\nexport function joinCombine<T>(arr1: readonly T[], arr2: readonly T[], keySelector: (val: T) => number, combine: (v1: T, v2: T) => T): readonly T[] {\n\tif (arr1.length === 0) {\n\t\treturn arr2;\n\t}\n\tif (arr2.length === 0) {\n\t\treturn arr1;\n\t}\n\n\tconst result: T[] = [];\n\tlet i = 0;\n\tlet j = 0;\n\twhile (i < arr1.length && j < arr2.length) {\n\t\tconst val1 = arr1[i];\n\t\tconst val2 = arr2[j];\n\t\tconst key1 = keySelector(val1);\n\t\tconst key2 = keySelector(val2);\n\n\t\tif (key1 < key2) {\n\t\t\tresult.push(val1);\n\t\t\ti++;\n\t\t} else if (key1 > key2) {\n\t\t\tresult.push(val2);\n\t\t\tj++;\n\t\t} else {\n\t\t\tresult.push(combine(val1, val2));\n\t\t\ti++;\n\t\t\tj++;\n\t\t}\n\t}\n\twhile (i < arr1.length) {\n\t\tresult.push(arr1[i]);\n\t\ti++;\n\t}\n\twhile (j < arr2.length) {\n\t\tresult.push(arr2[j]);\n\t\tj++;\n\t}\n\treturn result;\n}\n\n// TODO make utility\nexport function applyObservableDecorations(editor: ICodeEditor, decorations: IObservable<IModelDeltaDecoration[]>): IDisposable {\n\tconst d = new DisposableStore();\n\tconst decorationsCollection = editor.createDecorationsCollection();\n\td.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\n\t\tconst d = decorations.read(reader);\n\t\tdecorationsCollection.set(d);\n\t}));\n\td.add({\n\t\tdispose: () => {\n\t\t\tdecorationsCollection.clear();\n\t\t}\n\t});\n\treturn d;\n}\n\nexport function appendRemoveOnDispose(parent: HTMLElement, child: HTMLElement) {\n\tparent.appendChild(child);\n\treturn toDisposable(() => {\n\t\tchild.remove();\n\t});\n}\n\nexport function prependRemoveOnDispose(parent: HTMLElement, child: HTMLElement) {\n\tparent.prepend(child);\n\treturn toDisposable(() => {\n\t\tchild.remove();\n\t});\n}\n\nexport class ObservableElementSizeObserver extends Disposable {\n\tprivate readonly elementSizeObserver: ElementSizeObserver;\n\n\tprivate readonly _width: ISettableObservable<number>;\n\tpublic get width(): IObservable<number> { return this._width; }\n\n\tprivate readonly _height: ISettableObservable<number>;\n\tpublic get height(): IObservable<number> { return this._height; }\n\n\tprivate _automaticLayout: boolean = false;\n\tpublic get automaticLayout(): boolean { return this._automaticLayout; }\n\n\tconstructor(element: HTMLElement | null, dimension: IDimension | undefined) {\n\t\tsuper();\n\n\t\tthis.elementSizeObserver = this._register(new ElementSizeObserver(element, dimension));\n\t\tthis._width = observableValue(this, this.elementSizeObserver.getWidth());\n\t\tthis._height = observableValue(this, this.elementSizeObserver.getHeight());\n\n\t\tthis._register(this.elementSizeObserver.onDidChange(e => transaction(tx => {\n\t\t\t/** @description Set width/height from elementSizeObserver */\n\t\t\tthis._width.set(this.elementSizeObserver.getWidth(), tx);\n\t\t\tthis._height.set(this.elementSizeObserver.getHeight(), tx);\n\t\t})));\n\t}\n\n\tpublic observe(dimension?: IDimension): void {\n\t\tthis.elementSizeObserver.observe(dimension);\n\t}\n\n\tpublic setAutomaticLayout(automaticLayout: boolean): void {\n\t\tthis._automaticLayout = automaticLayout;\n\t\tif (automaticLayout) {\n\t\t\tthis.elementSizeObserver.startObserving();\n\t\t} else {\n\t\t\tthis.elementSizeObserver.stopObserving();\n\t\t}\n\t}\n}\n\nexport function animatedObservable(targetWindow: Window, base: IObservableWithChange<number, boolean>, store: DisposableStore): IObservable<number> {\n\tlet targetVal = base.get();\n\tlet startVal = targetVal;\n\tlet curVal = targetVal;\n\tconst result = observableValue('animatedValue', targetVal);\n\n\tlet animationStartMs: number = -1;\n\tconst durationMs = 300;\n\tlet animationFrame: number | undefined = undefined;\n\n\tstore.add(autorunHandleChanges({\n\t\tchangeTracker: {\n\t\t\tcreateChangeSummary: () => ({ animate: false }),\n\t\t\thandleChange: (ctx, s) => {\n\t\t\t\tif (ctx.didChange(base)) {\n\t\t\t\t\ts.animate = s.animate || ctx.change;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}, (reader, s) => {\n\t\t/** @description update value */\n\t\tif (animationFrame !== undefined) {\n\t\t\ttargetWindow.cancelAnimationFrame(animationFrame);\n\t\t\tanimationFrame = undefined;\n\t\t}\n\n\t\tstartVal = curVal;\n\t\ttargetVal = base.read(reader);\n\t\tanimationStartMs = Date.now() - (s.animate ? 0 : durationMs);\n\n\t\tupdate();\n\t}));\n\n\tfunction update() {\n\t\tconst passedMs = Date.now() - animationStartMs;\n\t\tcurVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\n\n\t\tif (passedMs < durationMs) {\n\t\t\tanimationFrame = targetWindow.requestAnimationFrame(update);\n\t\t} else {\n\t\t\tcurVal = targetVal;\n\t\t}\n\n\t\tresult.set(curVal, undefined);\n\t}\n\n\treturn result;\n}\n\nfunction easeOutExpo(t: number, b: number, c: number, d: number): number {\n\treturn t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\n\nexport abstract class ViewZoneOverlayWidget extends Disposable {\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\tviewZone: PlaceholderViewZone,\n\t\thtmlElement: HTMLElement,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(new ManagedOverlayWidget(editor, htmlElement));\n\t\tthis._register(applyStyle(htmlElement, {\n\t\t\theight: viewZone.actualHeight,\n\t\t\ttop: viewZone.actualTop,\n\t\t}));\n\t}\n}\n\nexport interface IObservableViewZone extends IViewZone {\n\t// Causes the view zone to relayout.\n\tonChange?: IObservable<unknown>;\n\n\t// Tells a view zone its id.\n\tsetZoneId?(zoneId: string): void;\n}\n\nexport class PlaceholderViewZone implements IObservableViewZone {\n\tpublic readonly domNode;\n\n\tprivate readonly _actualTop;\n\tprivate readonly _actualHeight;\n\n\tpublic readonly actualTop: IObservable<number | undefined>;\n\tpublic readonly actualHeight: IObservable<number | undefined>;\n\n\tpublic readonly showInHiddenAreas;\n\n\tpublic get afterLineNumber(): number { return this._afterLineNumber.get(); }\n\n\tpublic readonly onChange?: IObservable<unknown>;\n\n\tconstructor(\n\t\tprivate readonly _afterLineNumber: IObservable<number>,\n\t\tpublic readonly heightInPx: number,\n\t) {\n\t\tthis.domNode = document.createElement('div');\n\t\tthis._actualTop = observableValue<number | undefined>(this, undefined);\n\t\tthis._actualHeight = observableValue<number | undefined>(this, undefined);\n\t\tthis.actualTop = this._actualTop;\n\t\tthis.actualHeight = this._actualHeight;\n\t\tthis.showInHiddenAreas = true;\n\t\tthis.onChange = this._afterLineNumber;\n\t\tthis.onDomNodeTop = (top: number) => {\n\t\t\tthis._actualTop.set(top, undefined);\n\t\t};\n\t\tthis.onComputedHeight = (height: number) => {\n\t\t\tthis._actualHeight.set(height, undefined);\n\t\t};\n\t}\n\n\tonDomNodeTop;\n\n\tonComputedHeight;\n}\n\n\nexport class ManagedOverlayWidget implements IDisposable {\n\tprivate static _counter = 0;\n\tprivate readonly _overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;\n\n\tprivate readonly _overlayWidget: IOverlayWidget = {\n\t\tgetId: () => this._overlayWidgetId,\n\t\tgetDomNode: () => this._domElement,\n\t\tgetPosition: () => null\n\t};\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _domElement: HTMLElement,\n\t) {\n\t\tthis._editor.addOverlayWidget(this._overlayWidget);\n\t}\n\n\tdispose(): void {\n\t\tthis._editor.removeOverlayWidget(this._overlayWidget);\n\t}\n}\n\nexport interface CSSStyle {\n\theight: number | string;\n\twidth: number | string;\n\ttop: number | string;\n\tvisibility: 'visible' | 'hidden' | 'collapse';\n\tdisplay: 'block' | 'inline' | 'inline-block' | 'flex' | 'none';\n\tpaddingRight: number | string;\n}\n\nexport function applyStyle(domNode: HTMLElement, style: Partial<{ [TKey in keyof CSSStyle]: CSSStyle[TKey] | IObservable<CSSStyle[TKey] | undefined> | undefined }>) {\n\treturn autorun(reader => {\n\t\t/** @description applyStyle */\n\t\tfor (let [key, val] of Object.entries(style)) {\n\t\t\tif (val && typeof val === 'object' && 'read' in val) {\n\t\t\t\tval = val.read(reader) as any;\n\t\t\t}\n\t\t\tif (typeof val === 'number') {\n\t\t\t\tval = `${val}px`;\n\t\t\t}\n\t\t\tkey = key.replace(/[A-Z]/g, m => '-' + m.toLowerCase());\n\t\t\tdomNode.style[key as any] = val as any;\n\t\t}\n\t});\n}\n\nexport function applyViewZones(editor: ICodeEditor, viewZones: IObservable<IObservableViewZone[]>, setIsUpdating?: (isUpdatingViewZones: boolean) => void, zoneIds?: Set<string>): IDisposable {\n\tconst store = new DisposableStore();\n\tconst lastViewZoneIds: string[] = [];\n\n\tstore.add(autorunWithStore((reader, store) => {\n\t\t/** @description applyViewZones */\n\t\tconst curViewZones = viewZones.read(reader);\n\n\t\tconst viewZonIdsPerViewZone = new Map<IObservableViewZone, string>();\n\t\tconst viewZoneIdPerOnChangeObservable = new Map<IObservable<unknown>, string>();\n\n\t\t// Add/remove view zones\n\t\tif (setIsUpdating) { setIsUpdating(true); }\n\t\teditor.changeViewZones(a => {\n\t\t\tfor (const id of lastViewZoneIds) { a.removeZone(id); zoneIds?.delete(id); }\n\t\t\tlastViewZoneIds.length = 0;\n\n\t\t\tfor (const z of curViewZones) {\n\t\t\t\tconst id = a.addZone(z);\n\t\t\t\tif (z.setZoneId) {\n\t\t\t\t\tz.setZoneId(id);\n\t\t\t\t}\n\t\t\t\tlastViewZoneIds.push(id);\n\t\t\t\tzoneIds?.add(id);\n\t\t\t\tviewZonIdsPerViewZone.set(z, id);\n\t\t\t}\n\t\t});\n\t\tif (setIsUpdating) { setIsUpdating(false); }\n\n\t\t// Layout zone on change\n\t\tstore.add(autorunHandleChanges({\n\t\t\tchangeTracker: {\n\t\t\t\tcreateChangeSummary() {\n\t\t\t\t\treturn { zoneIds: [] as string[] };\n\t\t\t\t},\n\t\t\t\thandleChange(context, changeSummary) {\n\t\t\t\t\tconst id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\n\t\t\t\t\tif (id !== undefined) { changeSummary.zoneIds.push(id); }\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t}\n\t\t}, (reader, changeSummary) => {\n\t\t\t/** @description layoutZone on change */\n\t\t\tfor (const vz of curViewZones) {\n\t\t\t\tif (vz.onChange) {\n\t\t\t\t\tviewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz)!);\n\t\t\t\t\tvz.onChange.read(reader);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (setIsUpdating) { setIsUpdating(true); }\n\t\t\teditor.changeViewZones(a => { for (const id of changeSummary.zoneIds) { a.layoutZone(id); } });\n\t\t\tif (setIsUpdating) { setIsUpdating(false); }\n\t\t}));\n\t}));\n\n\tstore.add({\n\t\tdispose() {\n\t\t\tif (setIsUpdating) { setIsUpdating(true); }\n\t\t\teditor.changeViewZones(a => { for (const id of lastViewZoneIds) { a.removeZone(id); } });\n\t\t\tzoneIds?.clear();\n\t\t\tif (setIsUpdating) { setIsUpdating(false); }\n\t\t}\n\t});\n\n\treturn store;\n}\n\nexport class DisposableCancellationTokenSource extends CancellationTokenSource {\n\tpublic override dispose() {\n\t\tsuper.dispose(true);\n\t}\n}\n\nexport function translatePosition(posInOriginal: Position, mappings: DetailedLineRangeMapping[]): Range {\n\tconst mapping = findLast(mappings, m => m.original.startLineNumber <= posInOriginal.lineNumber);\n\tif (!mapping) {\n\t\t// No changes before the position\n\t\treturn Range.fromPositions(posInOriginal);\n\t}\n\n\tif (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {\n\t\tconst newLineNumber = posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive;\n\t\treturn Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n\t}\n\n\tif (!mapping.innerChanges) {\n\t\t// Only for legacy algorithm\n\t\treturn Range.fromPositions(new Position(mapping.modified.startLineNumber, 1));\n\t}\n\n\tconst innerMapping = findLast(mapping.innerChanges, m => m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal));\n\tif (!innerMapping) {\n\t\tconst newLineNumber = posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber;\n\t\treturn Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n\t}\n\n\tif (innerMapping.originalRange.containsPosition(posInOriginal)) {\n\t\treturn innerMapping.modifiedRange;\n\t} else {\n\t\tconst l = lengthBetweenPositions(innerMapping.originalRange.getEndPosition(), posInOriginal);\n\t\treturn Range.fromPositions(l.addToPosition(innerMapping.modifiedRange.getEndPosition()));\n\t}\n}\n\nfunction lengthBetweenPositions(position1: Position, position2: Position): TextLength {\n\tif (position1.lineNumber === position2.lineNumber) {\n\t\treturn new TextLength(0, position2.column - position1.column);\n\t} else {\n\t\treturn new TextLength(position2.lineNumber - position1.lineNumber, position2.column - 1);\n\t}\n}\n\nexport function filterWithPrevious<T>(arr: T[], filter: (cur: T, prev: T | undefined) => boolean): T[] {\n\tlet prev: T | undefined;\n\treturn arr.filter(cur => {\n\t\tconst result = filter(cur, prev);\n\t\tprev = cur;\n\t\treturn result;\n\t});\n}\n\nexport abstract class RefCounted<T> implements IDisposable, IReference<T> {\n\tpublic static create<T extends IDisposable>(value: T, debugOwner: object | undefined = undefined): RefCounted<T> {\n\t\treturn new BaseRefCounted(value, value, debugOwner);\n\t}\n\n\tpublic static createWithDisposable<T extends IDisposable>(value: T, disposable: IDisposable, debugOwner: object | undefined = undefined): RefCounted<T> {\n\t\tconst store = new DisposableStore();\n\t\tstore.add(disposable);\n\t\tstore.add(value);\n\t\treturn new BaseRefCounted(value, store, debugOwner);\n\t}\n\n\tpublic abstract createNewRef(debugOwner?: object | undefined): RefCounted<T>;\n\n\tpublic abstract dispose(): void;\n\n\tpublic abstract get object(): T;\n}\n\nclass BaseRefCounted<T> extends RefCounted<T> {\n\tprivate _refCount = 1;\n\tprivate _isDisposed = false;\n\tprivate readonly _owners: object[] = [];\n\n\tconstructor(\n\t\tpublic override readonly object: T,\n\t\tprivate readonly _disposable: IDisposable,\n\t\tprivate readonly _debugOwner: object | undefined,\n\t) {\n\t\tsuper();\n\n\t\tif (_debugOwner) {\n\t\t\tthis._addOwner(_debugOwner);\n\t\t}\n\t}\n\n\tprivate _addOwner(debugOwner: object | undefined) {\n\t\tif (debugOwner) {\n\t\t\tthis._owners.push(debugOwner);\n\t\t}\n\t}\n\n\tpublic createNewRef(debugOwner?: object | undefined): RefCounted<T> {\n\t\tthis._refCount++;\n\t\tif (debugOwner) {\n\t\t\tthis._addOwner(debugOwner);\n\t\t}\n\t\treturn new ClonedRefCounted(this, debugOwner);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._isDisposed) { return; }\n\t\tthis._isDisposed = true;\n\t\tthis._decreaseRefCount(this._debugOwner);\n\t}\n\n\tpublic _decreaseRefCount(debugOwner?: object | undefined): void {\n\t\tthis._refCount--;\n\t\tif (this._refCount === 0) {\n\t\t\tthis._disposable.dispose();\n\t\t}\n\n\t\tif (debugOwner) {\n\t\t\tconst idx = this._owners.indexOf(debugOwner);\n\t\t\tif (idx !== -1) {\n\t\t\t\tthis._owners.splice(idx, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ClonedRefCounted<T> extends RefCounted<T> {\n\tprivate _isDisposed = false;\n\tconstructor(\n\t\tprivate readonly _base: BaseRefCounted<T>,\n\t\tprivate readonly _debugOwner: object | undefined,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic get object(): T { return this._base.object; }\n\n\tpublic createNewRef(debugOwner?: object | undefined): RefCounted<T> {\n\t\treturn this._base.createNewRef(debugOwner);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._isDisposed) { return; }\n\t\tthis._isDisposed = true;\n\t\tthis._base._decreaseRefCount(this._debugOwner);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDimension } from '../../../../base/browser/dom.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Disposable, DisposableStore, IDisposable, IReference, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IObservable, IObservableWithChange, ISettableObservable, autorun, autorunHandleChanges, autorunOpts, autorunWithStore, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\nimport { ICodeEditor, IOverlayWidget, IViewZone } from '../../editorBrowser.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { DetailedLineRangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { IModelDeltaDecoration } from '../../../common/model.js';\nimport { TextLength } from '../../../common/core/text/textLength.js';\n\nexport function joinCombine<T>(arr1: readonly T[], arr2: readonly T[], keySelector: (val: T) => number, combine: (v1: T, v2: T) => T): readonly T[] {\n\tif (arr1.length === 0) {\n\t\treturn arr2;\n\t}\n\tif (arr2.length === 0) {\n\t\treturn arr1;\n\t}\n\n\tconst result: T[] = [];\n\tlet i = 0;\n\tlet j = 0;\n\twhile (i < arr1.length && j < arr2.length) {\n\t\tconst val1 = arr1[i];\n\t\tconst val2 = arr2[j];\n\t\tconst key1 = keySelector(val1);\n\t\tconst key2 = keySelector(val2);\n\n\t\tif (key1 < key2) {\n\t\t\tresult.push(val1);\n\t\t\ti++;\n\t\t} else if (key1 > key2) {\n\t\t\tresult.push(val2);\n\t\t\tj++;\n\t\t} else {\n\t\t\tresult.push(combine(val1, val2));\n\t\t\ti++;\n\t\t\tj++;\n\t\t}\n\t}\n\twhile (i < arr1.length) {\n\t\tresult.push(arr1[i]);\n\t\ti++;\n\t}\n\twhile (j < arr2.length) {\n\t\tresult.push(arr2[j]);\n\t\tj++;\n\t}\n\treturn result;\n}\n\n// TODO make utility\nexport function applyObservableDecorations(editor: ICodeEditor, decorations: IObservable<IModelDeltaDecoration[]>): IDisposable {\n\tconst d = new DisposableStore();\n\tconst decorationsCollection = editor.createDecorationsCollection();\n\td.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\n\t\tconst d = decorations.read(reader);\n\t\tdecorationsCollection.set(d);\n\t}));\n\td.add({\n\t\tdispose: () => {\n\t\t\tdecorationsCollection.clear();\n\t\t}\n\t});\n\treturn d;\n}\n\nexport function appendRemoveOnDispose(parent: HTMLElement, child: HTMLElement) {\n\tparent.appendChild(child);\n\treturn toDisposable(() => {\n\t\tchild.remove();\n\t});\n}\n\nexport function prependRemoveOnDispose(parent: HTMLElement, child: HTMLElement) {\n\tparent.prepend(child);\n\treturn toDisposable(() => {\n\t\tchild.remove();\n\t});\n}\n\nexport class ObservableElementSizeObserver extends Disposable {\n\tprivate readonly elementSizeObserver: ElementSizeObserver;\n\n\tprivate readonly _width: ISettableObservable<number>;\n\tpublic get width(): IObservable<number> { return this._width; }\n\n\tprivate readonly _height: ISettableObservable<number>;\n\tpublic get height(): IObservable<number> { return this._height; }\n\n\tprivate _automaticLayout: boolean = false;\n\tpublic get automaticLayout(): boolean { return this._automaticLayout; }\n\n\tconstructor(element: HTMLElement | null, dimension: IDimension | undefined) {\n\t\tsuper();\n\n\t\tthis.elementSizeObserver = this._register(new ElementSizeObserver(element, dimension));\n\t\tthis._width = observableValue(this, this.elementSizeObserver.getWidth());\n\t\tthis._height = observableValue(this, this.elementSizeObserver.getHeight());\n\n\t\tthis._register(this.elementSizeObserver.onDidChange(e => transaction(tx => {\n\t\t\t/** @description Set width/height from elementSizeObserver */\n\t\t\tthis._width.set(this.elementSizeObserver.getWidth(), tx);\n\t\t\tthis._height.set(this.elementSizeObserver.getHeight(), tx);\n\t\t})));\n\t}\n\n\tpublic observe(dimension?: IDimension): void {\n\t\tthis.elementSizeObserver.observe(dimension);\n\t}\n\n\tpublic setAutomaticLayout(automaticLayout: boolean): void {\n\t\tthis._automaticLayout = automaticLayout;\n\t\tif (automaticLayout) {\n\t\t\tthis.elementSizeObserver.startObserving();\n\t\t} else {\n\t\t\tthis.elementSizeObserver.stopObserving();\n\t\t}\n\t}\n}\n\nexport function animatedObservable(targetWindow: Window, base: IObservableWithChange<number, boolean>, store: DisposableStore): IObservable<number> {\n\tlet targetVal = base.get();\n\tlet startVal = targetVal;\n\tlet curVal = targetVal;\n\tconst result = observableValue('animatedValue', targetVal);\n\n\tlet animationStartMs: number = -1;\n\tconst durationMs = 300;\n\tlet animationFrame: number | undefined = undefined;\n\n\tstore.add(autorunHandleChanges({\n\t\tchangeTracker: {\n\t\t\tcreateChangeSummary: () => ({ animate: false }),\n\t\t\thandleChange: (ctx, s) => {\n\t\t\t\tif (ctx.didChange(base)) {\n\t\t\t\t\ts.animate = s.animate || ctx.change;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}, (reader, s) => {\n\t\t/** @description update value */\n\t\tif (animationFrame !== undefined) {\n\t\t\ttargetWindow.cancelAnimationFrame(animationFrame);\n\t\t\tanimationFrame = undefined;\n\t\t}\n\n\t\tstartVal = curVal;\n\t\ttargetVal = base.read(reader);\n\t\tanimationStartMs = Date.now() - (s.animate ? 0 : durationMs);\n\n\t\tupdate();\n\t}));\n\n\tfunction update() {\n\t\tconst passedMs = Date.now() - animationStartMs;\n\t\tcurVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\n\n\t\tif (passedMs < durationMs) {\n\t\t\tanimationFrame = targetWindow.requestAnimationFrame(update);\n\t\t} else {\n\t\t\tcurVal = targetVal;\n\t\t}\n\n\t\tresult.set(curVal, undefined);\n\t}\n\n\treturn result;\n}\n\nfunction easeOutExpo(t: number, b: number, c: number, d: number): number {\n\treturn t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\n\nexport abstract class ViewZoneOverlayWidget extends Disposable {\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\tviewZone: PlaceholderViewZone,\n\t\thtmlElement: HTMLElement,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(new ManagedOverlayWidget(editor, htmlElement));\n\t\tthis._register(applyStyle(htmlElement, {\n\t\t\theight: viewZone.actualHeight,\n\t\t\ttop: viewZone.actualTop,\n\t\t}));\n\t}\n}\n\nexport interface IObservableViewZone extends IViewZone {\n\t// Causes the view zone to relayout.\n\tonChange?: IObservable<unknown>;\n\n\t// Tells a view zone its id.\n\tsetZoneId?(zoneId: string): void;\n}\n\nexport class PlaceholderViewZone implements IObservableViewZone {\n\tpublic readonly domNode;\n\n\tprivate readonly _actualTop;\n\tprivate readonly _actualHeight;\n\n\tpublic readonly actualTop: IObservable<number | undefined>;\n\tpublic readonly actualHeight: IObservable<number | undefined>;\n\n\tpublic readonly showInHiddenAreas;\n\n\tpublic get afterLineNumber(): number { return this._afterLineNumber.get(); }\n\n\tpublic readonly onChange?: IObservable<unknown>;\n\n\tconstructor(\n\t\tprivate readonly _afterLineNumber: IObservable<number>,\n\t\tpublic readonly heightInPx: number,\n\t) {\n\t\tthis.domNode = document.createElement('div');\n\t\tthis._actualTop = observableValue<number | undefined>(this, undefined);\n\t\tthis._actualHeight = observableValue<number | undefined>(this, undefined);\n\t\tthis.actualTop = this._actualTop;\n\t\tthis.actualHeight = this._actualHeight;\n\t\tthis.showInHiddenAreas = true;\n\t\tthis.onChange = this._afterLineNumber;\n\t\tthis.onDomNodeTop = (top: number) => {\n\t\t\tthis._actualTop.set(top, undefined);\n\t\t};\n\t\tthis.onComputedHeight = (height: number) => {\n\t\t\tthis._actualHeight.set(height, undefined);\n\t\t};\n\t}\n\n\tonDomNodeTop;\n\n\tonComputedHeight;\n}\n\n\nexport class ManagedOverlayWidget implements IDisposable {\n\tprivate static _counter = 0;\n\tprivate readonly _overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;\n\n\tprivate readonly _overlayWidget: IOverlayWidget = {\n\t\tgetId: () => this._overlayWidgetId,\n\t\tgetDomNode: () => this._domElement,\n\t\tgetPosition: () => null\n\t};\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _domElement: HTMLElement,\n\t) {\n\t\tthis._editor.addOverlayWidget(this._overlayWidget);\n\t}\n\n\tdispose(): void {\n\t\tthis._editor.removeOverlayWidget(this._overlayWidget);\n\t}\n}\n\nexport interface CSSStyle {\n\theight: number | string;\n\twidth: number | string;\n\ttop: number | string;\n\tvisibility: 'visible' | 'hidden' | 'collapse';\n\tdisplay: 'block' | 'inline' | 'inline-block' | 'flex' | 'none';\n\tpaddingRight: number | string;\n}\n\nexport function applyStyle(domNode: HTMLElement, style: Partial<{ [TKey in keyof CSSStyle]: CSSStyle[TKey] | IObservable<CSSStyle[TKey] | undefined> | undefined }>) {\n\treturn autorun(reader => {\n\t\t/** @description applyStyle */\n\t\tfor (let [key, val] of Object.entries(style)) {\n\t\t\tif (val && typeof val === 'object' && 'read' in val) {\n\t\t\t\tval = val.read(reader) as any;\n\t\t\t}\n\t\t\tif (typeof val === 'number') {\n\t\t\t\tval = `${val}px`;\n\t\t\t}\n\t\t\tkey = key.replace(/[A-Z]/g, m => '-' + m.toLowerCase());\n\t\t\tdomNode.style[key as any] = val as any;\n\t\t}\n\t});\n}\n\nexport function applyViewZones(editor: ICodeEditor, viewZones: IObservable<IObservableViewZone[]>, setIsUpdating?: (isUpdatingViewZones: boolean) => void, zoneIds?: Set<string>): IDisposable {\n\tconst store = new DisposableStore();\n\tconst lastViewZoneIds: string[] = [];\n\n\tstore.add(autorunWithStore((reader, store) => {\n\t\t/** @description applyViewZones */\n\t\tconst curViewZones = viewZones.read(reader);\n\n\t\tconst viewZonIdsPerViewZone = new Map<IObservableViewZone, string>();\n\t\tconst viewZoneIdPerOnChangeObservable = new Map<IObservable<unknown>, string>();\n\n\t\t// Add/remove view zones\n\t\tif (setIsUpdating) { setIsUpdating(true); }\n\t\teditor.changeViewZones(a => {\n\t\t\tfor (const id of lastViewZoneIds) { a.removeZone(id); zoneIds?.delete(id); }\n\t\t\tlastViewZoneIds.length = 0;\n\n\t\t\tfor (const z of curViewZones) {\n\t\t\t\tconst id = a.addZone(z);\n\t\t\t\tif (z.setZoneId) {\n\t\t\t\t\tz.setZoneId(id);\n\t\t\t\t}\n\t\t\t\tlastViewZoneIds.push(id);\n\t\t\t\tzoneIds?.add(id);\n\t\t\t\tviewZonIdsPerViewZone.set(z, id);\n\t\t\t}\n\t\t});\n\t\tif (setIsUpdating) { setIsUpdating(false); }\n\n\t\t// Layout zone on change\n\t\tstore.add(autorunHandleChanges({\n\t\t\tchangeTracker: {\n\t\t\t\tcreateChangeSummary() {\n\t\t\t\t\treturn { zoneIds: [] as string[] };\n\t\t\t\t},\n\t\t\t\thandleChange(context, changeSummary) {\n\t\t\t\t\tconst id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\n\t\t\t\t\tif (id !== undefined) { changeSummary.zoneIds.push(id); }\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t}\n\t\t}, (reader, changeSummary) => {\n\t\t\t/** @description layoutZone on change */\n\t\t\tfor (const vz of curViewZones) {\n\t\t\t\tif (vz.onChange) {\n\t\t\t\t\tviewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz)!);\n\t\t\t\t\tvz.onChange.read(reader);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (setIsUpdating) { setIsUpdating(true); }\n\t\t\teditor.changeViewZones(a => { for (const id of changeSummary.zoneIds) { a.layoutZone(id); } });\n\t\t\tif (setIsUpdating) { setIsUpdating(false); }\n\t\t}));\n\t}));\n\n\tstore.add({\n\t\tdispose() {\n\t\t\tif (setIsUpdating) { setIsUpdating(true); }\n\t\t\teditor.changeViewZones(a => { for (const id of lastViewZoneIds) { a.removeZone(id); } });\n\t\t\tzoneIds?.clear();\n\t\t\tif (setIsUpdating) { setIsUpdating(false); }\n\t\t}\n\t});\n\n\treturn store;\n}\n\nexport class DisposableCancellationTokenSource extends CancellationTokenSource {\n\tpublic override dispose() {\n\t\tsuper.dispose(true);\n\t}\n}\n\nexport function translatePosition(posInOriginal: Position, mappings: DetailedLineRangeMapping[]): Range {\n\tconst mapping = findLast(mappings, m => m.original.startLineNumber <= posInOriginal.lineNumber);\n\tif (!mapping) {\n\t\t// No changes before the position\n\t\treturn Range.fromPositions(posInOriginal);\n\t}\n\n\tif (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {\n\t\tconst newLineNumber = posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive;\n\t\treturn Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n\t}\n\n\tif (!mapping.innerChanges) {\n\t\t// Only for legacy algorithm\n\t\treturn Range.fromPositions(new Position(mapping.modified.startLineNumber, 1));\n\t}\n\n\tconst innerMapping = findLast(mapping.innerChanges, m => m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal));\n\tif (!innerMapping) {\n\t\tconst newLineNumber = posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber;\n\t\treturn Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n\t}\n\n\tif (innerMapping.originalRange.containsPosition(posInOriginal)) {\n\t\treturn innerMapping.modifiedRange;\n\t} else {\n\t\tconst l = lengthBetweenPositions(innerMapping.originalRange.getEndPosition(), posInOriginal);\n\t\treturn Range.fromPositions(l.addToPosition(innerMapping.modifiedRange.getEndPosition()));\n\t}\n}\n\nfunction lengthBetweenPositions(position1: Position, position2: Position): TextLength {\n\tif (position1.lineNumber === position2.lineNumber) {\n\t\treturn new TextLength(0, position2.column - position1.column);\n\t} else {\n\t\treturn new TextLength(position2.lineNumber - position1.lineNumber, position2.column - 1);\n\t}\n}\n\nexport function filterWithPrevious<T>(arr: T[], filter: (cur: T, prev: T | undefined) => boolean): T[] {\n\tlet prev: T | undefined;\n\treturn arr.filter(cur => {\n\t\tconst result = filter(cur, prev);\n\t\tprev = cur;\n\t\treturn result;\n\t});\n}\n\nexport abstract class RefCounted<T> implements IDisposable, IReference<T> {\n\tpublic static create<T extends IDisposable>(value: T, debugOwner: object | undefined = undefined): RefCounted<T> {\n\t\treturn new BaseRefCounted(value, value, debugOwner);\n\t}\n\n\tpublic static createWithDisposable<T extends IDisposable>(value: T, disposable: IDisposable, debugOwner: object | undefined = undefined): RefCounted<T> {\n\t\tconst store = new DisposableStore();\n\t\tstore.add(disposable);\n\t\tstore.add(value);\n\t\treturn new BaseRefCounted(value, store, debugOwner);\n\t}\n\n\tpublic abstract createNewRef(debugOwner?: object | undefined): RefCounted<T>;\n\n\tpublic abstract dispose(): void;\n\n\tpublic abstract get object(): T;\n}\n\nclass BaseRefCounted<T> extends RefCounted<T> {\n\tprivate _refCount = 1;\n\tprivate _isDisposed = false;\n\tprivate readonly _owners: object[] = [];\n\n\tconstructor(\n\t\tpublic override readonly object: T,\n\t\tprivate readonly _disposable: IDisposable,\n\t\tprivate readonly _debugOwner: object | undefined,\n\t) {\n\t\tsuper();\n\n\t\tif (_debugOwner) {\n\t\t\tthis._addOwner(_debugOwner);\n\t\t}\n\t}\n\n\tprivate _addOwner(debugOwner: object | undefined) {\n\t\tif (debugOwner) {\n\t\t\tthis._owners.push(debugOwner);\n\t\t}\n\t}\n\n\tpublic createNewRef(debugOwner?: object | undefined): RefCounted<T> {\n\t\tthis._refCount++;\n\t\tif (debugOwner) {\n\t\t\tthis._addOwner(debugOwner);\n\t\t}\n\t\treturn new ClonedRefCounted(this, debugOwner);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._isDisposed) { return; }\n\t\tthis._isDisposed = true;\n\t\tthis._decreaseRefCount(this._debugOwner);\n\t}\n\n\tpublic _decreaseRefCount(debugOwner?: object | undefined): void {\n\t\tthis._refCount--;\n\t\tif (this._refCount === 0) {\n\t\t\tthis._disposable.dispose();\n\t\t}\n\n\t\tif (debugOwner) {\n\t\t\tconst idx = this._owners.indexOf(debugOwner);\n\t\t\tif (idx !== -1) {\n\t\t\t\tthis._owners.splice(idx, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ClonedRefCounted<T> extends RefCounted<T> {\n\tprivate _isDisposed = false;\n\tconstructor(\n\t\tprivate readonly _base: BaseRefCounted<T>,\n\t\tprivate readonly _debugOwner: object | undefined,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic get object(): T { return this._base.object; }\n\n\tpublic createNewRef(debugOwner?: object | undefined): RefCounted<T> {\n\t\treturn this._base.createNewRef(debugOwner);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._isDisposed) { return; }\n\t\tthis._isDisposed = true;\n\t\tthis._base._decreaseRefCount(this._debugOwner);\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2580, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/accessibleDiffViewer.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/vs/editor/browser/widget/diffEditor/components/accessibleDiffViewer.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, ITransaction, autorun, autorunWithStore, derived, observableValue, subtransaction, transaction } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../../config/domFontInfo.js';\nimport { applyStyle } from '../utils.js';\nimport { EditorFontLigatures, EditorOption, IComputedEditorOptions } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/ranges/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/ranges/offsetRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { DetailedLineRangeMapping, LineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { ILanguageIdCodec } from '../../../../common/languages.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModel, TextModelResolvedOptions } from '../../../../common/model.js';\nimport { LineTokens } from '../../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../../common/viewModel.js';\nimport { localize } from '../../../../../nls.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../../platform/theme/common/iconRegistry.js';\nimport './accessibleDiffViewer.css';\nimport { DiffEditorEditors } from './diffEditorEditors.js';\nimport { toAction } from '../../../../../base/common/actions.js';\n\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\n\nexport interface IAccessibleDiffViewerModel {\n\tgetOriginalModel(): ITextModel;\n\tgetOriginalOptions(): IComputedEditorOptions;\n\n\t/**\n\t * Should do: `setSelection`, `revealLine` and `focus`\n\t */\n\toriginalReveal(range: Range): void;\n\n\tgetModifiedModel(): ITextModel;\n\tgetModifiedOptions(): IComputedEditorOptions;\n\t/**\n\t * Should do: `setSelection`, `revealLine` and `focus`\n\t */\n\tmodifiedReveal(range?: Range): void;\n\tmodifiedSetSelection(range: Range): void;\n\tmodifiedFocus(): void;\n\n\tgetModifiedPosition(): Position | undefined;\n}\n\nexport class AccessibleDiffViewer extends Disposable {\n\tpublic static _ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\n\n\tconstructor(\n\t\tprivate readonly _parentNode: HTMLElement,\n\t\tprivate readonly _visible: IObservable<boolean>,\n\t\tprivate readonly _setVisible: (visible: boolean, tx: ITransaction | undefined) => void,\n\t\tprivate readonly _canClose: IObservable<boolean>,\n\t\tprivate readonly _width: IObservable<number>,\n\t\tprivate readonly _height: IObservable<number>,\n\t\tprivate readonly _diffs: IObservable<DetailedLineRangeMapping[] | undefined>,\n\t\tprivate readonly _models: IAccessibleDiffViewerModel,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t}\n\n\tprivate readonly _state = derived(this, (reader) => {\n\t\tconst visible = this._visible.read(reader);\n\t\tthis._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n\t\tif (!visible) {\n\t\t\treturn null;\n\t\t}\n\t\tconst model = reader.store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._models, this._setVisible, this._canClose));\n\t\tconst view = reader.store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._models));\n\t\treturn { model, view, };\n\t}).recomputeInitiallyAndOnChange(this._store);\n\n\tnext(): void {\n\t\ttransaction(tx => {\n\t\t\tconst isVisible = this._visible.get();\n\t\t\tthis._setVisible(true, tx);\n\t\t\tif (isVisible) {\n\t\t\t\tthis._state.get()!.model.nextGroup(tx);\n\t\t\t}\n\t\t});\n\t}\n\n\tprev(): void {\n\t\ttransaction(tx => {\n\t\t\tthis._setVisible(true, tx);\n\t\t\tthis._state.get()!.model.previousGroup(tx);\n\t\t});\n\t}\n\n\tclose(): void {\n\t\ttransaction(tx => {\n\t\t\tthis._setVisible(false, tx);\n\t\t});\n\t}\n}\n\nclass ViewModel extends Disposable {\n\tprivate readonly _groups = observableValue<ViewElementGroup[]>(this, []);\n\tprivate readonly _currentGroupIdx = observableValue(this, 0);\n\tprivate readonly _currentElementIdx = observableValue(this, 0);\n\n\tpublic readonly groups: IObservable<ViewElementGroup[]> = this._groups;\n\tpublic readonly currentGroup: IObservable<ViewElementGroup | undefined>\n\t\t= this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n\tpublic readonly currentGroupIndex: IObservable<number> = this._currentGroupIdx;\n\n\tpublic readonly currentElement: IObservable<ViewElement | undefined>\n\t\t= this._currentElementIdx.map((idx, r) => this.currentGroup.read(r)?.lines[idx]);\n\n\tconstructor(\n\t\tprivate readonly _diffs: IObservable<DetailedLineRangeMapping[] | undefined>,\n\t\tprivate readonly _models: IAccessibleDiffViewerModel,\n\t\tprivate readonly _setVisible: (visible: boolean, tx: ITransaction | undefined) => void,\n\t\tpublic readonly canClose: IObservable<boolean>,\n\t\t@IAccessibilitySignalService private readonly _accessibilitySignalService: IAccessibilitySignalService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update groups */\n\t\t\tconst diffs = this._diffs.read(reader);\n\t\t\tif (!diffs) {\n\t\t\t\tthis._groups.set([], undefined);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst groups = computeViewElementGroups(\n\t\t\t\tdiffs,\n\t\t\t\tthis._models.getOriginalModel().getLineCount(),\n\t\t\t\tthis._models.getModifiedModel().getLineCount()\n\t\t\t);\n\n\t\t\ttransaction(tx => {\n\t\t\t\tconst p = this._models.getModifiedPosition();\n\t\t\t\tif (p) {\n\t\t\t\t\tconst nextGroup = groups.findIndex(g => p?.lineNumber < g.range.modified.endLineNumberExclusive);\n\t\t\t\t\tif (nextGroup !== -1) {\n\t\t\t\t\t\tthis._currentGroupIdx.set(nextGroup, tx);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._groups.set(groups, tx);\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description play audio-cue for diff */\n\t\t\tconst currentViewItem = this.currentElement.read(reader);\n\t\t\tif (currentViewItem?.type === LineType.Deleted) {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'accessibleDiffViewer.currentElementChanged' });\n\t\t\t} else if (currentViewItem?.type === LineType.Added) {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'accessibleDiffViewer.currentElementChanged' });\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description select lines in editor */\n\t\t\t// This ensures editor commands (like revert/stage) work\n\t\t\tconst currentViewItem = this.currentElement.read(reader);\n\t\t\tif (currentViewItem && currentViewItem.type !== LineType.Header) {\n\t\t\t\tconst lineNumber = currentViewItem.modifiedLineNumber ?? currentViewItem.diff.modified.startLineNumber;\n\t\t\t\tthis._models.modifiedSetSelection(Range.fromPositions(new Position(lineNumber, 1)));\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _goToGroupDelta(delta: number, tx?: ITransaction): void {\n\t\tconst groups = this.groups.get();\n\t\tif (!groups || groups.length <= 1) { return; }\n\t\tsubtransaction(tx, tx => {\n\t\t\tthis._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);\n\t\t\tthis._currentElementIdx.set(0, tx);\n\t\t});\n\t}\n\n\tnextGroup(tx?: ITransaction): void { this._goToGroupDelta(1, tx); }\n\tpreviousGroup(tx?: ITransaction): void { this._goToGroupDelta(-1, tx); }\n\n\tprivate _goToLineDelta(delta: number): void {\n\t\tconst group = this.currentGroup.get();\n\t\tif (!group || group.lines.length <= 1) { return; }\n\t\ttransaction(tx => {\n\t\t\tthis._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);\n\t\t});\n\t}\n\n\tgoToNextLine(): void { this._goToLineDelta(1); }\n\tgoToPreviousLine(): void { this._goToLineDelta(-1); }\n\n\tgoToLine(line: ViewElement): void {\n\t\tconst group = this.currentGroup.get();\n\t\tif (!group) { return; }\n\t\tconst idx = group.lines.indexOf(line);\n\t\tif (idx === -1) { return; }\n\t\ttransaction(tx => {\n\t\t\tthis._currentElementIdx.set(idx, tx);\n\t\t});\n\t}\n\n\trevealCurrentElementInEditor(): void {\n\t\tif (!this.canClose.get()) { return; }\n\t\tthis._setVisible(false, undefined);\n\n\t\tconst curElem = this.currentElement.get();\n\t\tif (curElem) {\n\t\t\tif (curElem.type === LineType.Deleted) {\n\t\t\t\tthis._models.originalReveal(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n\t\t\t} else {\n\t\t\t\tthis._models.modifiedReveal(\n\t\t\t\t\tcurElem.type !== LineType.Header\n\t\t\t\t\t\t? Range.fromPositions(new Position(curElem.modifiedLineNumber, 1))\n\t\t\t\t\t\t: undefined\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tclose(): void {\n\t\tif (!this.canClose.get()) { return; }\n\t\tthis._setVisible(false, undefined);\n\t\tthis._models.modifiedFocus();\n\t}\n}\n\n\nconst viewElementGroupLineMargin = 3;\n\nfunction computeViewElementGroups(diffs: DetailedLineRangeMapping[], originalLineCount: number, modifiedLineCount: number): ViewElementGroup[] {\n\tconst result: ViewElementGroup[] = [];\n\n\tfor (const g of groupAdjacentBy(diffs, (a, b) => (b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\n\t\tconst viewElements: ViewElement[] = [];\n\t\tviewElements.push(new HeaderViewElement());\n\n\t\tconst origFullRange = new LineRange(\n\t\t\tMath.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin),\n\t\t\tMath.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1)\n\t\t);\n\t\tconst modifiedFullRange = new LineRange(\n\t\t\tMath.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin),\n\t\t\tMath.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1)\n\t\t);\n\n\t\tforEachAdjacent(g, (a, b) => {\n\t\t\tconst origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\n\t\t\tconst modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n\n\t\t\torigRange.forEach(origLineNumber => {\n\t\t\t\tviewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n\t\t\t});\n\n\t\t\tif (b) {\n\t\t\t\tb.original.forEach(origLineNumber => {\n\t\t\t\t\tviewElements.push(new DeletedLineViewElement(b, origLineNumber));\n\t\t\t\t});\n\t\t\t\tb.modified.forEach(modifiedLineNumber => {\n\t\t\t\t\tviewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tconst modifiedRange = g[0].modified.join(g[g.length - 1].modified);\n\t\tconst originalRange = g[0].original.join(g[g.length - 1].original);\n\n\t\tresult.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\n\t}\n\treturn result;\n}\n\nenum LineType {\n\tHeader,\n\tUnchanged,\n\tDeleted,\n\tAdded,\n}\n\nclass ViewElementGroup {\n\tconstructor(\n\t\tpublic readonly range: LineRangeMapping,\n\t\tpublic readonly lines: readonly ViewElement[],\n\t) { }\n}\n\ntype ViewElement = HeaderViewElement | UnchangedLineViewElement | DeletedLineViewElement | AddedLineViewElement;\n\nclass HeaderViewElement {\n\tpublic readonly type = LineType.Header;\n}\n\nclass DeletedLineViewElement {\n\tpublic readonly type = LineType.Deleted;\n\n\tpublic readonly modifiedLineNumber = undefined;\n\n\tconstructor(\n\t\tpublic readonly diff: DetailedLineRangeMapping,\n\t\tpublic readonly originalLineNumber: number,\n\t) {\n\t}\n}\n\nclass AddedLineViewElement {\n\tpublic readonly type = LineType.Added;\n\n\tpublic readonly originalLineNumber = undefined;\n\n\tconstructor(\n\t\tpublic readonly diff: DetailedLineRangeMapping,\n\t\tpublic readonly modifiedLineNumber: number,\n\t) {\n\t}\n}\n\nclass UnchangedLineViewElement {\n\tpublic readonly type = LineType.Unchanged;\n\tconstructor(\n\t\tpublic readonly originalLineNumber: number,\n\t\tpublic readonly modifiedLineNumber: number,\n\t) {\n\t}\n}\n\nclass View extends Disposable {\n\tpublic readonly domNode: HTMLElement;\n\tprivate readonly _content: HTMLElement;\n\tprivate readonly _scrollbar: DomScrollableElement;\n\tprivate readonly _actionBar: ActionBar;\n\n\tconstructor(\n\t\tprivate readonly _element: HTMLElement,\n\t\tprivate readonly _model: ViewModel,\n\t\tprivate readonly _width: IObservable<number>,\n\t\tprivate readonly _height: IObservable<number>,\n\t\tprivate readonly _models: IAccessibleDiffViewerModel,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t) {\n\t\tsuper();\n\n\t\tthis.domNode = this._element;\n\t\tthis.domNode.className = 'monaco-component diff-review monaco-editor-background';\n\n\t\tconst actionBarContainer = document.createElement('div');\n\t\tactionBarContainer.className = 'diff-review-actions';\n\t\tthis._actionBar = this._register(new ActionBar(\n\t\t\tactionBarContainer\n\t\t));\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update actions */\n\t\t\tthis._actionBar.clear();\n\t\t\tif (this._model.canClose.read(reader)) {\n\t\t\t\tthis._actionBar.push(toAction({\n\t\t\t\t\tid: 'diffreview.close',\n\t\t\t\t\tlabel: localize('label.close', \"Close\"),\n\t\t\t\t\tclass: 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon),\n\t\t\t\t\tenabled: true,\n\t\t\t\t\trun: async () => _model.close()\n\t\t\t\t}), { label: false, icon: true });\n\t\t\t}\n\t\t}));\n\n\t\tthis._content = document.createElement('div');\n\t\tthis._content.className = 'diff-review-content';\n\t\tthis._content.setAttribute('role', 'code');\n\t\tthis._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n\t\treset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n\n\t\tthis._register(autorun(r => {\n\t\t\tthis._height.read(r);\n\t\t\tthis._width.read(r);\n\t\t\tthis._scrollbar.scanDomNode();\n\t\t}));\n\n\t\tthis._register(toDisposable(() => { reset(this.domNode); }));\n\n\t\tthis._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\n\t\tthis._register(applyStyle(this._content, { width: this._width, height: this._height }));\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\t/** @description render */\n\t\t\tthis._model.currentGroup.read(reader);\n\t\t\tthis._render(store);\n\t\t}));\n\n\t\t// TODO@hediet use commands\n\t\tthis._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\n\t\t\tif (\n\t\t\t\te.equals(KeyCode.DownArrow)\n\t\t\t\t|| e.equals(KeyMod.CtrlCmd | KeyCode.DownArrow)\n\t\t\t\t|| e.equals(KeyMod.Alt | KeyCode.DownArrow)\n\t\t\t) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._model.goToNextLine();\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\te.equals(KeyCode.UpArrow)\n\t\t\t\t|| e.equals(KeyMod.CtrlCmd | KeyCode.UpArrow)\n\t\t\t\t|| e.equals(KeyMod.Alt | KeyCode.UpArrow)\n\t\t\t) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._model.goToPreviousLine();\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\te.equals(KeyCode.Escape)\n\t\t\t\t|| e.equals(KeyMod.CtrlCmd | KeyCode.Escape)\n\t\t\t\t|| e.equals(KeyMod.Alt | KeyCode.Escape)\n\t\t\t\t|| e.equals(KeyMod.Shift | KeyCode.Escape)\n\t\t\t) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._model.close();\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\te.equals(KeyCode.Space)\n\t\t\t\t|| e.equals(KeyCode.Enter)\n\t\t\t) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._model.revealCurrentElementInEditor();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _render(store: DisposableStore): void {\n\t\tconst originalOptions = this._models.getOriginalOptions();\n\t\tconst modifiedOptions = this._models.getModifiedOptions();\n\n\t\tconst container = document.createElement('div');\n\t\tcontainer.className = 'diff-review-table';\n\t\tcontainer.setAttribute('role', 'list');\n\t\tcontainer.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n\t\tapplyFontInfo(container, modifiedOptions.get(EditorOption.fontInfo));\n\n\t\treset(this._content, container);\n\n\t\tconst originalModel = this._models.getOriginalModel();\n\t\tconst modifiedModel = this._models.getModifiedModel();\n\t\tif (!originalModel || !modifiedModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst originalModelOpts = originalModel.getOptions();\n\t\tconst modifiedModelOpts = modifiedModel.getOptions();\n\n\t\tconst lineHeight = modifiedOptions.get(EditorOption.lineHeight);\n\t\tconst group = this._model.currentGroup.get();\n\t\tfor (const viewItem of group?.lines || []) {\n\t\t\tif (!group) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet row: HTMLDivElement;\n\n\t\t\tif (viewItem.type === LineType.Header) {\n\n\t\t\t\tconst header = document.createElement('div');\n\t\t\t\theader.className = 'diff-review-row';\n\t\t\t\theader.setAttribute('role', 'listitem');\n\n\t\t\t\tconst r = group.range;\n\t\t\t\tconst diffIndex = this._model.currentGroupIndex.get();\n\t\t\t\tconst diffsLength = this._model.groups.get().length;\n\t\t\t\tconst getAriaLines = (lines: number) =>\n\t\t\t\t\tlines === 0 ? localize('no_lines_changed', \"no lines changed\")\n\t\t\t\t\t\t: lines === 1 ? localize('one_line_changed', \"1 line changed\")\n\t\t\t\t\t\t\t: localize('more_lines_changed', \"{0} lines changed\", lines);\n\n\t\t\t\tconst originalChangedLinesCntAria = getAriaLines(r.original.length);\n\t\t\t\tconst modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n\t\t\t\theader.setAttribute('aria-label', localize({\n\t\t\t\t\tkey: 'header',\n\t\t\t\t\tcomment: [\n\t\t\t\t\t\t'This is the ARIA label for a git diff header.',\n\t\t\t\t\t\t'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n\t\t\t\t\t\t'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n\t\t\t\t\t\t'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n\t\t\t\t\t\t'Variables 2 and 4 will be numbers (a line number).',\n\t\t\t\t\t\t'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n\t\t\t\t\t]\n\t\t\t\t}, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\",\n\t\t\t\t\t(diffIndex + 1),\n\t\t\t\t\tdiffsLength,\n\t\t\t\t\tr.original.startLineNumber,\n\t\t\t\t\toriginalChangedLinesCntAria,\n\t\t\t\t\tr.modified.startLineNumber,\n\t\t\t\t\tmodifiedChangedLinesCntAria\n\t\t\t\t));\n\n\t\t\t\tconst cell = document.createElement('div');\n\t\t\t\tcell.className = 'diff-review-cell diff-review-summary';\n\t\t\t\t// e.g.: `1/10: @@ -504,7 +517,7 @@`\n\t\t\t\tcell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n\t\t\t\theader.appendChild(cell);\n\n\t\t\t\trow = header;\n\t\t\t} else {\n\t\t\t\trow = this._createRow(viewItem, lineHeight,\n\t\t\t\t\tthis._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tcontainer.appendChild(row);\n\n\t\t\tconst isSelectedObs = derived(reader => /** @description isSelected */ this._model.currentElement.read(reader) === viewItem);\n\n\t\t\tstore.add(autorun(reader => {\n\t\t\t\t/** @description update tab index */\n\t\t\t\tconst isSelected = isSelectedObs.read(reader);\n\t\t\t\trow.tabIndex = isSelected ? 0 : -1;\n\t\t\t\tif (isSelected) {\n\t\t\t\t\trow.focus();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tstore.add(addDisposableListener(row, 'focus', () => {\n\t\t\t\tthis._model.goToLine(viewItem);\n\t\t\t}));\n\t\t}\n\n\t\tthis._scrollbar.scanDomNode();\n\t}\n\n\tprivate _createRow(\n\t\titem: DeletedLineViewElement | AddedLineViewElement | UnchangedLineViewElement,\n\t\tlineHeight: number,\n\t\twidth: number,\n\t\toriginalOptions: IComputedEditorOptions, originalModel: ITextModel, originalModelOpts: TextModelResolvedOptions,\n\t\tmodifiedOptions: IComputedEditorOptions, modifiedModel: ITextModel, modifiedModelOpts: TextModelResolvedOptions,\n\t): HTMLDivElement {\n\t\tconst originalLayoutInfo = originalOptions.get(EditorOption.layoutInfo);\n\t\tconst originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n\n\t\tconst modifiedLayoutInfo = modifiedOptions.get(EditorOption.layoutInfo);\n\t\tconst modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n\n\t\tlet rowClassName: string = 'diff-review-row';\n\t\tlet lineNumbersExtraClassName: string = '';\n\t\tconst spacerClassName: string = 'diff-review-spacer';\n\t\tlet spacerIcon: ThemeIcon | null = null;\n\t\tswitch (item.type) {\n\t\t\tcase LineType.Added:\n\t\t\t\trowClassName = 'diff-review-row line-insert';\n\t\t\t\tlineNumbersExtraClassName = ' char-insert';\n\t\t\t\tspacerIcon = accessibleDiffViewerInsertIcon;\n\t\t\t\tbreak;\n\t\t\tcase LineType.Deleted:\n\t\t\t\trowClassName = 'diff-review-row line-delete';\n\t\t\t\tlineNumbersExtraClassName = ' char-delete';\n\t\t\t\tspacerIcon = accessibleDiffViewerRemoveIcon;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst row = document.createElement('div');\n\t\trow.style.minWidth = width + 'px';\n\t\trow.className = rowClassName;\n\t\trow.setAttribute('role', 'listitem');\n\t\trow.ariaLevel = '';\n\n\t\tconst cell = document.createElement('div');\n\t\tcell.className = 'diff-review-cell';\n\t\tcell.style.height = `${lineHeight}px`;\n\t\trow.appendChild(cell);\n\n\t\tconst originalLineNumber = document.createElement('span');\n\t\toriginalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n\t\toriginalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n\t\toriginalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n\t\tif (item.originalLineNumber !== undefined) {\n\t\t\toriginalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n\t\t} else {\n\t\t\toriginalLineNumber.innerText = '\\u00a0';\n\t\t}\n\t\tcell.appendChild(originalLineNumber);\n\n\t\tconst modifiedLineNumber = document.createElement('span');\n\t\tmodifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n\t\tmodifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n\t\tmodifiedLineNumber.style.paddingRight = '10px';\n\t\tmodifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n\t\tif (item.modifiedLineNumber !== undefined) {\n\t\t\tmodifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n\t\t} else {\n\t\t\tmodifiedLineNumber.innerText = '\\u00a0';\n\t\t}\n\t\tcell.appendChild(modifiedLineNumber);\n\n\t\tconst spacer = document.createElement('span');\n\t\tspacer.className = spacerClassName;\n\n\t\tif (spacerIcon) {\n\t\t\tconst spacerCodicon = document.createElement('span');\n\t\t\tspacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n\t\t\tspacerCodicon.innerText = '\\u00a0\\u00a0';\n\t\t\tspacer.appendChild(spacerCodicon);\n\t\t} else {\n\t\t\tspacer.innerText = '\\u00a0\\u00a0';\n\t\t}\n\t\tcell.appendChild(spacer);\n\n\t\tlet lineContent: string;\n\t\tif (item.modifiedLineNumber !== undefined) {\n\t\t\tlet html: string | TrustedHTML = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n\t\t\tif (AccessibleDiffViewer._ttPolicy) {\n\t\t\t\thtml = AccessibleDiffViewer._ttPolicy.createHTML(html as string);\n\t\t\t}\n\t\t\tcell.insertAdjacentHTML('beforeend', html as string);\n\t\t\tlineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n\t\t} else {\n\t\t\tlet html: string | TrustedHTML = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n\t\t\tif (AccessibleDiffViewer._ttPolicy) {\n\t\t\t\thtml = AccessibleDiffViewer._ttPolicy.createHTML(html as string);\n\t\t\t}\n\t\t\tcell.insertAdjacentHTML('beforeend', html as string);\n\t\t\tlineContent = originalModel.getLineContent(item.originalLineNumber);\n\t\t}\n\n\t\tif (lineContent.length === 0) {\n\t\t\tlineContent = localize('blankLine', \"blank\");\n\t\t}\n\n\t\tlet ariaLabel: string = '';\n\t\tswitch (item.type) {\n\t\t\tcase LineType.Unchanged:\n\t\t\t\tif (item.originalLineNumber === item.modifiedLineNumber) {\n\t\t\t\t\tariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n\t\t\t\t} else {\n\t\t\t\t\tariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase LineType.Added:\n\t\t\t\tariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n\t\t\t\tbreak;\n\t\t\tcase LineType.Deleted:\n\t\t\t\tariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n\t\t\t\tbreak;\n\t\t}\n\t\trow.setAttribute('aria-label', ariaLabel);\n\n\t\treturn row;\n\t}\n\n\tprivate _getLineHtml(model: ITextModel, options: IComputedEditorOptions, tabSize: number, lineNumber: number, languageIdCodec: ILanguageIdCodec): string {\n\t\tconst lineContent = model.getLineContent(lineNumber);\n\t\tconst fontInfo = options.get(EditorOption.fontInfo);\n\t\tconst verticalScrollbarSize = options.get(EditorOption.scrollbar).verticalScrollbarSize;\n\t\tconst lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n\t\tconst isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n\t\tconst containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n\t\tconst r = renderViewLine2(new RenderLineInput(\n\t\t\t(fontInfo.isMonospace && !options.get(EditorOption.disableMonospaceOptimizations)),\n\t\t\tfontInfo.canUseHalfwidthRightwardsArrow,\n\t\t\tlineContent,\n\t\t\tfalse,\n\t\t\tisBasicASCII,\n\t\t\tcontainsRTL,\n\t\t\t0,\n\t\t\tlineTokens,\n\t\t\t[],\n\t\t\ttabSize,\n\t\t\t0,\n\t\t\tfontInfo.spaceWidth,\n\t\t\tfontInfo.middotWidth,\n\t\t\tfontInfo.wsmiddotWidth,\n\t\t\toptions.get(EditorOption.stopRenderingLineAfter),\n\t\t\toptions.get(EditorOption.renderWhitespace),\n\t\t\toptions.get(EditorOption.renderControlCharacters),\n\t\t\toptions.get(EditorOption.fontLigatures) !== EditorFontLigatures.OFF,\n\t\t\tnull,\n\t\t\tnull,\n\t\t\tverticalScrollbarSize\n\t\t));\n\n\t\treturn r.html;\n\t}\n}\n\nexport class AccessibleDiffViewerModelFromEditors implements IAccessibleDiffViewerModel {\n\tconstructor(private readonly editors: DiffEditorEditors) { }\n\n\tgetOriginalModel(): ITextModel {\n\t\treturn this.editors.original.getModel()!;\n\t}\n\n\tgetOriginalOptions(): IComputedEditorOptions {\n\t\treturn this.editors.original.getOptions();\n\t}\n\n\toriginalReveal(range: Range): void {\n\t\tthis.editors.original.revealRange(range);\n\t\tthis.editors.original.setSelection(range);\n\t\tthis.editors.original.focus();\n\t}\n\n\tgetModifiedModel(): ITextModel {\n\t\treturn this.editors.modified.getModel()!;\n\t}\n\n\tgetModifiedOptions(): IComputedEditorOptions {\n\t\treturn this.editors.modified.getOptions();\n\t}\n\n\tmodifiedReveal(range?: Range | undefined): void {\n\t\tif (range) {\n\t\t\tthis.editors.modified.revealRange(range);\n\t\t\tthis.editors.modified.setSelection(range);\n\t\t}\n\t\tthis.editors.modified.focus();\n\t}\n\n\tmodifiedSetSelection(range: Range): void {\n\t\tthis.editors.modified.setSelection(range);\n\t}\n\n\tmodifiedFocus(): void {\n\t\tthis.editors.modified.focus();\n\t}\n\n\tgetModifiedPosition(): Position | undefined {\n\t\treturn this.editors.modified.getPosition() ?? undefined;\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3194, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/registrations.contribution.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/vs/editor/browser/widget/diffEditor/registrations.contribution.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\n\nexport const diffMoveBorder = registerColor(\n\t'diffEditor.move.border',\n\t'#8b8b8b9c',\n\tlocalize('diffEditor.move.border', 'The border color for text that got moved in the diff editor.')\n);\n\nexport const diffMoveBorderActive = registerColor(\n\t'diffEditor.moveActive.border',\n\t'#FFA500',\n\tlocalize('diffEditor.moveActive.border', 'The active border color for text that got moved in the diff editor.')\n);\n\nexport const diffEditorUnchangedRegionShadow = registerColor(\n\t'diffEditor.unchangedRegionShadow',\n\t{ dark: '#000000', light: '#737373BF', hcDark: '#000000', hcLight: '#737373BF', },\n\tlocalize('diffEditor.unchangedRegionShadow', 'The color of the shadow around unchanged region widgets.')\n);\n\nexport const diffInsertIcon = registerIcon('diff-insert', Codicon.add, localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\nexport const diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\n\nexport const diffLineAddDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n\tclassName: 'line-insert',\n\tdescription: 'line-insert',\n\tisWholeLine: true,\n\tlinesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\n\tmarginClassName: 'gutter-insert',\n});\n\nexport const diffLineDeleteDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n\tclassName: 'line-delete',\n\tdescription: 'line-delete',\n\tisWholeLine: true,\n\tlinesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\n\tmarginClassName: 'gutter-delete',\n});\n\nexport const diffLineAddDecorationBackground = ModelDecorationOptions.register({\n\tclassName: 'line-insert',\n\tdescription: 'line-insert',\n\tisWholeLine: true,\n\tmarginClassName: 'gutter-insert',\n});\n\nexport const diffLineDeleteDecorationBackground = ModelDecorationOptions.register({\n\tclassName: 'line-delete',\n\tdescription: 'line-delete',\n\tisWholeLine: true,\n\tmarginClassName: 'gutter-delete',\n});\n\nexport const diffAddDecoration = ModelDecorationOptions.register({\n\tclassName: 'char-insert',\n\tdescription: 'char-insert',\n\tshouldFillLineOnLineBreak: true,\n});\n\nexport const diffWholeLineAddDecoration = ModelDecorationOptions.register({\n\tclassName: 'char-insert',\n\tdescription: 'char-insert',\n\tisWholeLine: true,\n});\n\nexport const diffAddDecorationEmpty = ModelDecorationOptions.register({\n\tclassName: 'char-insert diff-range-empty',\n\tdescription: 'char-insert diff-range-empty',\n});\n\nexport const diffDeleteDecoration = ModelDecorationOptions.register({\n\tclassName: 'char-delete',\n\tdescription: 'char-delete',\n\tshouldFillLineOnLineBreak: true,\n});\n\nexport const diffWholeLineDeleteDecoration = ModelDecorationOptions.register({\n\tclassName: 'char-delete',\n\tdescription: 'char-delete',\n\tisWholeLine: true,\n});\n\nexport const diffDeleteDecorationEmpty = ModelDecorationOptions.register({\n\tclassName: 'char-delete diff-range-empty',\n\tdescription: 'char-delete diff-range-empty',\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3310, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffProviderFactoryService.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/diffProviderFactoryService.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/vs/editor/browser/widget/diffEditor/diffProviderFactoryService.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService, createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { LineRange } from '../../../common/core/ranges/lineRange.js';\nimport { IDocumentDiff, IDocumentDiffProvider, IDocumentDiffProviderOptions } from '../../../common/diff/documentDiffProvider.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { DiffAlgorithmName, IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\n\nexport const IDiffProviderFactoryService = createDecorator<IDiffProviderFactoryService>('diffProviderFactoryService');\n\nexport interface IDocumentDiffFactoryOptions {\n\treadonly diffAlgorithm?: 'legacy' | 'advanced';\n}\n\nexport interface IDiffProviderFactoryService {\n\treadonly _serviceBrand: undefined;\n\tcreateDiffProvider(options: IDocumentDiffFactoryOptions): IDocumentDiffProvider;\n}\n\nexport class WorkerBasedDiffProviderFactoryService implements IDiffProviderFactoryService {\n\treadonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) { }\n\n\tcreateDiffProvider(options: IDocumentDiffFactoryOptions): IDocumentDiffProvider {\n\t\treturn this.instantiationService.createInstance(WorkerBasedDocumentDiffProvider, options);\n\t}\n}\n\nregisterSingleton(IDiffProviderFactoryService, WorkerBasedDiffProviderFactoryService, InstantiationType.Delayed);\n\nexport class WorkerBasedDocumentDiffProvider implements IDocumentDiffProvider, IDisposable {\n\tprivate onDidChangeEventEmitter = new Emitter<void>();\n\tpublic readonly onDidChange: Event<void> = this.onDidChangeEventEmitter.event;\n\n\tprivate diffAlgorithm: DiffAlgorithmName | IDocumentDiffProvider = 'advanced';\n\tprivate diffAlgorithmOnDidChangeSubscription: IDisposable | undefined = undefined;\n\n\tprivate static readonly diffCache = new Map<string, { result: IDocumentDiff; context: string }>();\n\n\tconstructor(\n\t\toptions: IWorkerBasedDocumentDiffProviderOptions,\n\t\t@IEditorWorkerService private readonly editorWorkerService: IEditorWorkerService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t) {\n\t\tthis.setOptions(options);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.diffAlgorithmOnDidChangeSubscription?.dispose();\n\t}\n\n\tasync computeDiff(original: ITextModel, modified: ITextModel, options: IDocumentDiffProviderOptions, cancellationToken: CancellationToken): Promise<IDocumentDiff> {\n\t\tif (typeof this.diffAlgorithm !== 'string') {\n\t\t\treturn this.diffAlgorithm.computeDiff(original, modified, options, cancellationToken);\n\t\t}\n\n\t\tif (original.isDisposed() || modified.isDisposed()) {\n\t\t\t// TODO@hediet\n\t\t\treturn {\n\t\t\t\tchanges: [],\n\t\t\t\tidentical: true,\n\t\t\t\tquitEarly: false,\n\t\t\t\tmoves: [],\n\t\t\t};\n\t\t}\n\n\t\t// This significantly speeds up the case when the original file is empty\n\t\tif (original.getLineCount() === 1 && original.getLineMaxColumn(1) === 1) {\n\t\t\tif (modified.getLineCount() === 1 && modified.getLineMaxColumn(1) === 1) {\n\t\t\t\treturn {\n\t\t\t\t\tchanges: [],\n\t\t\t\t\tidentical: true,\n\t\t\t\t\tquitEarly: false,\n\t\t\t\t\tmoves: [],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tchanges: [\n\t\t\t\t\tnew DetailedLineRangeMapping(\n\t\t\t\t\t\tnew LineRange(1, 2),\n\t\t\t\t\t\tnew LineRange(1, modified.getLineCount() + 1),\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tnew RangeMapping(\n\t\t\t\t\t\t\t\toriginal.getFullModelRange(),\n\t\t\t\t\t\t\t\tmodified.getFullModelRange(),\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t\t)\n\t\t\t\t],\n\t\t\t\tidentical: false,\n\t\t\t\tquitEarly: false,\n\t\t\t\tmoves: [],\n\t\t\t};\n\t\t}\n\n\t\tconst uriKey = JSON.stringify([original.uri.toString(), modified.uri.toString()]);\n\t\tconst context = JSON.stringify([original.id, modified.id, original.getAlternativeVersionId(), modified.getAlternativeVersionId(), JSON.stringify(options)]);\n\t\tconst c = WorkerBasedDocumentDiffProvider.diffCache.get(uriKey);\n\t\tif (c && c.context === context) {\n\t\t\treturn c.result;\n\t\t}\n\n\t\tconst sw = StopWatch.create();\n\t\tconst result = await this.editorWorkerService.computeDiff(original.uri, modified.uri, options, this.diffAlgorithm);\n\t\tconst timeMs = sw.elapsed();\n\n\t\tthis.telemetryService.publicLog2<{\n\t\t\ttimeMs: number;\n\t\t\ttimedOut: boolean;\n\t\t\tdetectedMoves: number;\n\t\t}, {\n\t\t\towner: 'hediet';\n\n\t\t\ttimeMs: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'To understand if the new diff algorithm is slower/faster than the old one' };\n\t\t\ttimedOut: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'To understand how often the new diff algorithm times out' };\n\t\t\tdetectedMoves: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'To understand how often the new diff algorithm detects moves' };\n\n\t\t\tcomment: 'This event gives insight about the performance of the new diff algorithm.';\n\t\t}>('diffEditor.computeDiff', {\n\t\t\ttimeMs,\n\t\t\ttimedOut: result?.quitEarly ?? true,\n\t\t\tdetectedMoves: options.computeMoves ? (result?.moves.length ?? 0) : -1,\n\t\t});\n\n\t\tif (cancellationToken.isCancellationRequested) {\n\t\t\t// Text models might be disposed!\n\t\t\treturn {\n\t\t\t\tchanges: [],\n\t\t\t\tidentical: false,\n\t\t\t\tquitEarly: true,\n\t\t\t\tmoves: [],\n\t\t\t};\n\t\t}\n\n\t\tif (!result) {\n\t\t\tthrow new Error('no diff result available');\n\t\t}\n\n\t\t// max 10 items in cache\n\t\tif (WorkerBasedDocumentDiffProvider.diffCache.size > 10) {\n\t\t\tWorkerBasedDocumentDiffProvider.diffCache.delete(WorkerBasedDocumentDiffProvider.diffCache.keys().next().value!);\n\t\t}\n\n\t\tWorkerBasedDocumentDiffProvider.diffCache.set(uriKey, { result, context });\n\t\treturn result;\n\t}\n\n\tpublic setOptions(newOptions: IWorkerBasedDocumentDiffProviderOptions): void {\n\t\tlet didChange = false;\n\t\tif (newOptions.diffAlgorithm) {\n\t\t\tif (this.diffAlgorithm !== newOptions.diffAlgorithm) {\n\t\t\t\tthis.diffAlgorithmOnDidChangeSubscription?.dispose();\n\t\t\t\tthis.diffAlgorithmOnDidChangeSubscription = undefined;\n\n\t\t\t\tthis.diffAlgorithm = newOptions.diffAlgorithm;\n\t\t\t\tif (typeof newOptions.diffAlgorithm !== 'string') {\n\t\t\t\t\tthis.diffAlgorithmOnDidChangeSubscription = newOptions.diffAlgorithm.onDidChange(() => this.onDidChangeEventEmitter.fire());\n\t\t\t\t}\n\t\t\t\tdidChange = true;\n\t\t\t}\n\t\t}\n\t\tif (didChange) {\n\t\t\tthis.onDidChangeEventEmitter.fire();\n\t\t}\n\t}\n}\n\ninterface IWorkerBasedDocumentDiffProviderOptions {\n\treadonly diffAlgorithm?: 'legacy' | 'advanced' | IDocumentDiffProvider;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService, createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { LineRange } from '../../../common/core/ranges/lineRange.js';\nimport { IDocumentDiff, IDocumentDiffProvider, IDocumentDiffProviderOptions } from '../../../common/diff/documentDiffProvider.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { DiffAlgorithmName, IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\n\nexport const IDiffProviderFactoryService = createDecorator<IDiffProviderFactoryService>('diffProviderFactoryService');\n\nexport interface IDocumentDiffFactoryOptions {\n\treadonly diffAlgorithm?: 'legacy' | 'advanced';\n}\n\nexport interface IDiffProviderFactoryService {\n\treadonly _serviceBrand: undefined;\n\tcreateDiffProvider(options: IDocumentDiffFactoryOptions): IDocumentDiffProvider;\n}\n\nexport class WorkerBasedDiffProviderFactoryService implements IDiffProviderFactoryService {\n\treadonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) { }\n\n\tcreateDiffProvider(options: IDocumentDiffFactoryOptions): IDocumentDiffProvider {\n\t\treturn this.instantiationService.createInstance(WorkerBasedDocumentDiffProvider, options);\n\t}\n}\n\nregisterSingleton(IDiffProviderFactoryService, WorkerBasedDiffProviderFactoryService, InstantiationType.Delayed);\n\nexport class WorkerBasedDocumentDiffProvider implements IDocumentDiffProvider, IDisposable {\n\tprivate onDidChangeEventEmitter = new Emitter<void>();\n\tpublic readonly onDidChange: Event<void> = this.onDidChangeEventEmitter.event;\n\n\tprivate diffAlgorithm: DiffAlgorithmName | IDocumentDiffProvider = 'advanced';\n\tprivate diffAlgorithmOnDidChangeSubscription: IDisposable | undefined = undefined;\n\n\tprivate static readonly diffCache = new Map<string, { result: IDocumentDiff; context: string }>();\n\n\tconstructor(\n\t\toptions: IWorkerBasedDocumentDiffProviderOptions,\n\t\t@IEditorWorkerService private readonly editorWorkerService: IEditorWorkerService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t) {\n\t\tthis.setOptions(options);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.diffAlgorithmOnDidChangeSubscription?.dispose();\n\t}\n\n\tasync computeDiff(original: ITextModel, modified: ITextModel, options: IDocumentDiffProviderOptions, cancellationToken: CancellationToken): Promise<IDocumentDiff> {\n\t\tif (typeof this.diffAlgorithm !== 'string') {\n\t\t\treturn this.diffAlgorithm.computeDiff(original, modified, options, cancellationToken);\n\t\t}\n\n\t\tif (original.isDisposed() || modified.isDisposed()) {\n\t\t\t// TODO@hediet\n\t\t\treturn {\n\t\t\t\tchanges: [],\n\t\t\t\tidentical: true,\n\t\t\t\tquitEarly: false,\n\t\t\t\tmoves: [],\n\t\t\t};\n\t\t}\n\n\t\t// This significantly speeds up the case when the original file is empty\n\t\tif (original.getLineCount() === 1 && original.getLineMaxColumn(1) === 1) {\n\t\t\tif (modified.getLineCount() === 1 && modified.getLineMaxColumn(1) === 1) {\n\t\t\t\treturn {\n\t\t\t\t\tchanges: [],\n\t\t\t\t\tidentical: true,\n\t\t\t\t\tquitEarly: false,\n\t\t\t\t\tmoves: [],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tchanges: [\n\t\t\t\t\tnew DetailedLineRangeMapping(\n\t\t\t\t\t\tnew LineRange(1, 2),\n\t\t\t\t\t\tnew LineRange(1, modified.getLineCount() + 1),\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tnew RangeMapping(\n\t\t\t\t\t\t\t\toriginal.getFullModelRange(),\n\t\t\t\t\t\t\t\tmodified.getFullModelRange(),\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]\n\t\t\t\t\t)\n\t\t\t\t],\n\t\t\t\tidentical: false,\n\t\t\t\tquitEarly: false,\n\t\t\t\tmoves: [],\n\t\t\t};\n\t\t}\n\n\t\tconst uriKey = JSON.stringify([original.uri.toString(), modified.uri.toString()]);\n\t\tconst context = JSON.stringify([original.id, modified.id, original.getAlternativeVersionId(), modified.getAlternativeVersionId(), JSON.stringify(options)]);\n\t\tconst c = WorkerBasedDocumentDiffProvider.diffCache.get(uriKey);\n\t\tif (c && c.context === context) {\n\t\t\treturn c.result;\n\t\t}\n\n\t\tconst sw = StopWatch.create();\n\t\tconst result = await this.editorWorkerService.computeDiff(original.uri, modified.uri, options, this.diffAlgorithm);\n\t\tconst timeMs = sw.elapsed();\n\n\t\tthis.telemetryService.publicLog2<{\n\t\t\ttimeMs: number;\n\t\t\ttimedOut: boolean;\n\t\t\tdetectedMoves: number;\n\t\t}, {\n\t\t\towner: 'hediet';\n\n\t\t\ttimeMs: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'To understand if the new diff algorithm is slower/faster than the old one' };\n\t\t\ttimedOut: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'To understand how often the new diff algorithm times out' };\n\t\t\tdetectedMoves: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'To understand how often the new diff algorithm detects moves' };\n\n\t\t\tcomment: 'This event gives insight about the performance of the new diff algorithm.';\n\t\t}>('diffEditor.computeDiff', {\n\t\t\ttimeMs,\n\t\t\ttimedOut: result?.quitEarly ?? true,\n\t\t\tdetectedMoves: options.computeMoves ? (result?.moves.length ?? 0) : -1,\n\t\t});\n\n\t\tif (cancellationToken.isCancellationRequested) {\n\t\t\t// Text models might be disposed!\n\t\t\treturn {\n\t\t\t\tchanges: [],\n\t\t\t\tidentical: false,\n\t\t\t\tquitEarly: true,\n\t\t\t\tmoves: [],\n\t\t\t};\n\t\t}\n\n\t\tif (!result) {\n\t\t\tthrow new Error('no diff result available');\n\t\t}\n\n\t\t// max 10 items in cache\n\t\tif (WorkerBasedDocumentDiffProvider.diffCache.size > 10) {\n\t\t\tWorkerBasedDocumentDiffProvider.diffCache.delete(WorkerBasedDocumentDiffProvider.diffCache.keys().next().value!);\n\t\t}\n\n\t\tWorkerBasedDocumentDiffProvider.diffCache.set(uriKey, { result, context });\n\t\treturn result;\n\t}\n\n\tpublic setOptions(newOptions: IWorkerBasedDocumentDiffProviderOptions): void {\n\t\tlet didChange = false;\n\t\tif (newOptions.diffAlgorithm) {\n\t\t\tif (this.diffAlgorithm !== newOptions.diffAlgorithm) {\n\t\t\t\tthis.diffAlgorithmOnDidChangeSubscription?.dispose();\n\t\t\t\tthis.diffAlgorithmOnDidChangeSubscription = undefined;\n\n\t\t\t\tthis.diffAlgorithm = newOptions.diffAlgorithm;\n\t\t\t\tif (typeof newOptions.diffAlgorithm !== 'string') {\n\t\t\t\t\tthis.diffAlgorithmOnDidChangeSubscription = newOptions.diffAlgorithm.onDidChange(() => this.onDidChangeEventEmitter.fire());\n\t\t\t\t}\n\t\t\t\tdidChange = true;\n\t\t\t}\n\t\t}\n\t\tif (didChange) {\n\t\t\tthis.onDidChangeEventEmitter.fire();\n\t\t}\n\t}\n}\n\ninterface IWorkerBasedDocumentDiffProviderOptions {\n\treadonly diffAlgorithm?: 'legacy' | 'advanced' | IDocumentDiffProvider;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3489, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorViewModel.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/diffEditorViewModel.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/vs/editor/browser/widget/diffEditor/diffEditorViewModel.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IObservable, IReader, ISettableObservable, ITransaction, autorun, autorunWithStore, derived, observableSignal, observableSignalFromEvent, observableValue, transaction, waitForState } from '../../../../base/common/observable.js';\nimport { IDiffProviderFactoryService } from './diffProviderFactoryService.js';\nimport { filterWithPrevious } from './utils.js';\nimport { readHotReloadableExport } from '../../../../base/common/hotReloadHelpers.js';\nimport { ISerializedLineRange, LineRange, LineRangeSet } from '../../../common/core/ranges/lineRange.js';\nimport { DefaultLinesDiffComputer } from '../../../common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js';\nimport { IDocumentDiff } from '../../../common/diff/documentDiffProvider.js';\nimport { MovedText } from '../../../common/diff/linesDiffComputer.js';\nimport { DetailedLineRangeMapping, LineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { IDiffEditorModel, IDiffEditorViewModel } from '../../../common/editorCommon.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { TextEditInfo } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js';\nimport { combineTextEditInfos } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/combineTextEditInfos.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { optimizeSequenceDiffs } from '../../../common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { groupAdjacentBy } from '../../../../base/common/arrays.js';\nimport { softAssert } from '../../../../base/common/assert.js';\n\nexport class DiffEditorViewModel extends Disposable implements IDiffEditorViewModel {\n\tprivate readonly _isDiffUpToDate = observableValue<boolean>(this, false);\n\tpublic readonly isDiffUpToDate: IObservable<boolean> = this._isDiffUpToDate;\n\n\tprivate _lastDiff: IDocumentDiff | undefined;\n\tprivate readonly _diff = observableValue<DiffState | undefined>(this, undefined);\n\tpublic readonly diff: IObservable<DiffState | undefined> = this._diff;\n\n\tprivate readonly _unchangedRegions = observableValue<{ regions: UnchangedRegion[]; originalDecorationIds: string[]; modifiedDecorationIds: string[] } | undefined>(this, undefined);\n\tpublic readonly unchangedRegions: IObservable<UnchangedRegion[]> = derived(this, r => {\n\t\tif (this._options.hideUnchangedRegions.read(r)) {\n\t\t\treturn this._unchangedRegions.read(r)?.regions ?? [];\n\t\t} else {\n\t\t\t// Reset state\n\t\t\ttransaction(tx => {\n\t\t\t\tfor (const r of this._unchangedRegions.get()?.regions || []) {\n\t\t\t\t\tr.collapseAll(tx);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn [];\n\t\t}\n\t}\n\t);\n\n\tpublic readonly movedTextToCompare = observableValue<MovedText | undefined>(this, undefined);\n\n\tprivate readonly _activeMovedText = observableValue<MovedText | undefined>(this, undefined);\n\tprivate readonly _hoveredMovedText = observableValue<MovedText | undefined>(this, undefined);\n\n\n\tpublic readonly activeMovedText = derived(this, r => this.movedTextToCompare.read(r) ?? this._hoveredMovedText.read(r) ?? this._activeMovedText.read(r));\n\n\tpublic setActiveMovedText(movedText: MovedText | undefined): void {\n\t\tthis._activeMovedText.set(movedText, undefined);\n\t}\n\n\tprivate readonly _cancellationTokenSource = new CancellationTokenSource();\n\n\tprivate readonly _diffProvider = derived(this, reader => {\n\t\tconst diffProvider = this._diffProviderFactoryService.createDiffProvider({\n\t\t\tdiffAlgorithm: this._options.diffAlgorithm.read(reader)\n\t\t});\n\t\tconst onChangeSignal = observableSignalFromEvent('onDidChange', diffProvider.onDidChange);\n\t\treturn {\n\t\t\tdiffProvider,\n\t\t\tonChangeSignal,\n\t\t};\n\t});\n\n\tconstructor(\n\t\tpublic readonly model: IDiffEditorModel,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\t@IDiffProviderFactoryService private readonly _diffProviderFactoryService: IDiffProviderFactoryService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(toDisposable(() => this._cancellationTokenSource.cancel()));\n\n\t\tconst contentChangedSignal = observableSignal('contentChangedSignal');\n\t\tconst debouncer = this._register(new RunOnceScheduler(() => contentChangedSignal.trigger(undefined), 200));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description collapse touching unchanged ranges */\n\n\t\t\tconst lastUnchangedRegions = this._unchangedRegions.read(reader);\n\t\t\tif (!lastUnchangedRegions || lastUnchangedRegions.regions.some(r => r.isDragged.read(reader))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n\t\t\t\t.map(id => model.original.getDecorationRange(id))\n\t\t\t\t.map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n\t\t\tconst lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n\t\t\t\t.map(id => model.modified.getDecorationRange(id))\n\t\t\t\t.map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n\t\t\tconst updatedLastUnchangedRegions = lastUnchangedRegions.regions.map((r, idx) =>\n\t\t\t\t(!lastUnchangedRegionsOrigRanges[idx] || !lastUnchangedRegionsModRanges[idx]) ? undefined :\n\t\t\t\t\tnew UnchangedRegion(\n\t\t\t\t\t\tlastUnchangedRegionsOrigRanges[idx]!.startLineNumber,\n\t\t\t\t\t\tlastUnchangedRegionsModRanges[idx]!.startLineNumber,\n\t\t\t\t\t\tlastUnchangedRegionsOrigRanges[idx]!.length,\n\t\t\t\t\t\tr.visibleLineCountTop.read(reader),\n\t\t\t\t\t\tr.visibleLineCountBottom.read(reader),\n\t\t\t\t\t)).filter(isDefined);\n\n\t\t\tconst newRanges: UnchangedRegion[] = [];\n\n\t\t\tlet didChange = false;\n\t\t\tfor (const touching of groupAdjacentBy(updatedLastUnchangedRegions, (a, b) => a.getHiddenModifiedRange(reader).endLineNumberExclusive === b.getHiddenModifiedRange(reader).startLineNumber)) {\n\t\t\t\tif (touching.length > 1) {\n\t\t\t\t\tdidChange = true;\n\t\t\t\t\tconst sumLineCount = touching.reduce((sum, r) => sum + r.lineCount, 0);\n\t\t\t\t\tconst r = new UnchangedRegion(touching[0].originalLineNumber, touching[0].modifiedLineNumber, sumLineCount, touching[0].visibleLineCountTop.get(), touching[touching.length - 1].visibleLineCountBottom.get());\n\t\t\t\t\tnewRanges.push(r);\n\t\t\t\t} else {\n\t\t\t\t\tnewRanges.push(touching[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (didChange) {\n\t\t\t\tconst originalDecorationIds = model.original.deltaDecorations(\n\t\t\t\t\tlastUnchangedRegions.originalDecorationIds,\n\t\t\t\t\tnewRanges.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange()!, options: { description: 'unchanged' } }))\n\t\t\t\t);\n\t\t\t\tconst modifiedDecorationIds = model.modified.deltaDecorations(\n\t\t\t\t\tlastUnchangedRegions.modifiedDecorationIds,\n\t\t\t\t\tnewRanges.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange()!, options: { description: 'unchanged' } }))\n\t\t\t\t);\n\n\t\t\t\ttransaction(tx => {\n\t\t\t\t\tthis._unchangedRegions.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tregions: newRanges,\n\t\t\t\t\t\t\toriginalDecorationIds,\n\t\t\t\t\t\t\tmodifiedDecorationIds\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttx\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tconst updateUnchangedRegions = (result: IDocumentDiff, tx: ITransaction, reader?: IReader) => {\n\t\t\tconst newUnchangedRegions = UnchangedRegion.fromDiffs(\n\t\t\t\tresult.changes,\n\t\t\t\tmodel.original.getLineCount(),\n\t\t\t\tmodel.modified.getLineCount(),\n\t\t\t\tthis._options.hideUnchangedRegionsMinimumLineCount.read(reader),\n\t\t\t\tthis._options.hideUnchangedRegionsContextLineCount.read(reader),\n\t\t\t);\n\n\t\t\t// Transfer state from cur state\n\t\t\tlet visibleRegions: LineRangeMapping[] | undefined = undefined;\n\n\t\t\tconst lastUnchangedRegions = this._unchangedRegions.get();\n\t\t\tif (lastUnchangedRegions) {\n\t\t\t\tconst lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n\t\t\t\t\t.map(id => model.original.getDecorationRange(id))\n\t\t\t\t\t.map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n\t\t\t\tconst lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n\t\t\t\t\t.map(id => model.modified.getDecorationRange(id))\n\t\t\t\t\t.map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n\t\t\t\tconst updatedLastUnchangedRegions = filterWithPrevious(\n\t\t\t\t\tlastUnchangedRegions.regions\n\t\t\t\t\t\t.map((r, idx) => {\n\t\t\t\t\t\t\tif (!lastUnchangedRegionsOrigRanges[idx] || !lastUnchangedRegionsModRanges[idx]) { return undefined; }\n\t\t\t\t\t\t\tconst length = lastUnchangedRegionsOrigRanges[idx]!.length;\n\t\t\t\t\t\t\treturn new UnchangedRegion(\n\t\t\t\t\t\t\t\tlastUnchangedRegionsOrigRanges[idx]!.startLineNumber,\n\t\t\t\t\t\t\t\tlastUnchangedRegionsModRanges[idx]!.startLineNumber,\n\t\t\t\t\t\t\t\tlength,\n\t\t\t\t\t\t\t\t// The visible area can shrink by edits -> we have to account for this\n\t\t\t\t\t\t\t\tMath.min(r.visibleLineCountTop.get(), length),\n\t\t\t\t\t\t\t\tMath.min(r.visibleLineCountBottom.get(), length - r.visibleLineCountTop.get()),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t).filter(isDefined),\n\t\t\t\t\t(cur, prev) => !prev || (cur.modifiedLineNumber >= prev.modifiedLineNumber + prev.lineCount && cur.originalLineNumber >= prev.originalLineNumber + prev.lineCount)\n\t\t\t\t);\n\n\t\t\t\tlet hiddenRegions = updatedLastUnchangedRegions.map(r => new LineRangeMapping(r.getHiddenOriginalRange(reader), r.getHiddenModifiedRange(reader)));\n\t\t\t\thiddenRegions = LineRangeMapping.clip(hiddenRegions, LineRange.ofLength(1, model.original.getLineCount()), LineRange.ofLength(1, model.modified.getLineCount()));\n\t\t\t\tvisibleRegions = LineRangeMapping.inverse(hiddenRegions, model.original.getLineCount(), model.modified.getLineCount());\n\t\t\t}\n\n\t\t\tconst newUnchangedRegions2 = [];\n\t\t\tif (visibleRegions) {\n\t\t\t\tfor (const r of newUnchangedRegions) {\n\t\t\t\t\tconst intersecting = visibleRegions.filter(f => f.original.intersectsStrict(r.originalUnchangedRange) && f.modified.intersectsStrict(r.modifiedUnchangedRange));\n\t\t\t\t\tnewUnchangedRegions2.push(...r.setVisibleRanges(intersecting, tx));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewUnchangedRegions2.push(...newUnchangedRegions);\n\t\t\t}\n\n\t\t\tconst originalDecorationIds = model.original.deltaDecorations(\n\t\t\t\tlastUnchangedRegions?.originalDecorationIds || [],\n\t\t\t\tnewUnchangedRegions2.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange()!, options: { description: 'unchanged' } }))\n\t\t\t);\n\t\t\tconst modifiedDecorationIds = model.modified.deltaDecorations(\n\t\t\t\tlastUnchangedRegions?.modifiedDecorationIds || [],\n\t\t\t\tnewUnchangedRegions2.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange()!, options: { description: 'unchanged' } }))\n\t\t\t);\n\n\t\t\tthis._unchangedRegions.set(\n\t\t\t\t{\n\t\t\t\t\tregions: newUnchangedRegions2,\n\t\t\t\t\toriginalDecorationIds,\n\t\t\t\t\tmodifiedDecorationIds\n\t\t\t\t},\n\t\t\t\ttx\n\t\t\t);\n\t\t};\n\n\t\tthis._register(model.modified.onDidChangeContent((e) => {\n\t\t\tconst diff = this._diff.get();\n\t\t\tif (diff) {\n\t\t\t\tconst textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n\t\t\t\tconst result = applyModifiedEdits(this._lastDiff!, textEdits, model.original, model.modified);\n\t\t\t\tif (result) {\n\t\t\t\t\tthis._lastDiff = result;\n\t\t\t\t\ttransaction(tx => {\n\t\t\t\t\t\tthis._diff.set(DiffState.fromDiffResult(this._lastDiff!), tx);\n\t\t\t\t\t\tupdateUnchangedRegions(result, tx);\n\t\t\t\t\t\tconst currentSyncedMovedText = this.movedTextToCompare.get();\n\t\t\t\t\t\tthis.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff!.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._isDiffUpToDate.set(false, undefined);\n\t\t\tdebouncer.schedule();\n\t\t}));\n\t\tthis._register(model.original.onDidChangeContent((e) => {\n\t\t\tconst diff = this._diff.get();\n\t\t\tif (diff) {\n\t\t\t\tconst textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n\t\t\t\tconst result = applyOriginalEdits(this._lastDiff!, textEdits, model.original, model.modified);\n\t\t\t\tif (result) {\n\t\t\t\t\tthis._lastDiff = result;\n\t\t\t\t\ttransaction(tx => {\n\t\t\t\t\t\tthis._diff.set(DiffState.fromDiffResult(this._lastDiff!), tx);\n\t\t\t\t\t\tupdateUnchangedRegions(result, tx);\n\t\t\t\t\t\tconst currentSyncedMovedText = this.movedTextToCompare.get();\n\t\t\t\t\t\tthis.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff!.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._isDiffUpToDate.set(false, undefined);\n\t\t\tdebouncer.schedule();\n\t\t}));\n\n\t\tthis._register(autorunWithStore(async (reader, store) => {\n\t\t\t/** @description compute diff */\n\n\t\t\t// So that they get recomputed when these settings change\n\t\t\tthis._options.hideUnchangedRegionsMinimumLineCount.read(reader);\n\t\t\tthis._options.hideUnchangedRegionsContextLineCount.read(reader);\n\n\t\t\tdebouncer.cancel();\n\t\t\tcontentChangedSignal.read(reader);\n\t\t\tconst documentDiffProvider = this._diffProvider.read(reader);\n\t\t\tdocumentDiffProvider.onChangeSignal.read(reader);\n\n\t\t\treadHotReloadableExport(DefaultLinesDiffComputer, reader);\n\t\t\treadHotReloadableExport(optimizeSequenceDiffs, reader);\n\n\t\t\tthis._isDiffUpToDate.set(false, undefined);\n\n\t\t\tlet originalTextEditInfos: TextEditInfo[] = [];\n\t\t\tstore.add(model.original.onDidChangeContent((e) => {\n\t\t\t\tconst edits = TextEditInfo.fromModelContentChanges(e.changes);\n\t\t\t\toriginalTextEditInfos = combineTextEditInfos(originalTextEditInfos, edits);\n\t\t\t}));\n\n\t\t\tlet modifiedTextEditInfos: TextEditInfo[] = [];\n\t\t\tstore.add(model.modified.onDidChangeContent((e) => {\n\t\t\t\tconst edits = TextEditInfo.fromModelContentChanges(e.changes);\n\t\t\t\tmodifiedTextEditInfos = combineTextEditInfos(modifiedTextEditInfos, edits);\n\t\t\t}));\n\n\t\t\tlet result = await documentDiffProvider.diffProvider.computeDiff(model.original, model.modified, {\n\t\t\t\tignoreTrimWhitespace: this._options.ignoreTrimWhitespace.read(reader),\n\t\t\t\tmaxComputationTimeMs: this._options.maxComputationTimeMs.read(reader),\n\t\t\t\tcomputeMoves: this._options.showMoves.read(reader),\n\t\t\t}, this._cancellationTokenSource.token);\n\n\t\t\tif (this._cancellationTokenSource.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (model.original.isDisposed() || model.modified.isDisposed()) {\n\t\t\t\t// TODO@hediet fishy?\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = normalizeDocumentDiff(result, model.original, model.modified);\n\t\t\tresult = applyOriginalEdits(result, originalTextEditInfos, model.original, model.modified) ?? result;\n\t\t\tresult = applyModifiedEdits(result, modifiedTextEditInfos, model.original, model.modified) ?? result;\n\n\t\t\ttransaction(tx => {\n\t\t\t\t/** @description write diff result */\n\t\t\t\tupdateUnchangedRegions(result, tx);\n\n\t\t\t\tthis._lastDiff = result;\n\t\t\t\tconst state = DiffState.fromDiffResult(result);\n\t\t\t\tthis._diff.set(state, tx);\n\t\t\t\tthis._isDiffUpToDate.set(true, tx);\n\t\t\t\tconst currentSyncedMovedText = this.movedTextToCompare.get();\n\t\t\t\tthis.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n\t\t\t});\n\t\t}));\n\t}\n\n\tpublic ensureModifiedLineIsVisible(lineNumber: number, preference: RevealPreference, tx: ITransaction | undefined): void {\n\t\tif (this.diff.get()?.mappings.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tconst unchangedRegions = this._unchangedRegions.get()?.regions || [];\n\t\tfor (const r of unchangedRegions) {\n\t\t\tif (r.getHiddenModifiedRange(undefined).contains(lineNumber)) {\n\t\t\t\tr.showModifiedLine(lineNumber, preference, tx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic ensureOriginalLineIsVisible(lineNumber: number, preference: RevealPreference, tx: ITransaction | undefined): void {\n\t\tif (this.diff.get()?.mappings.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tconst unchangedRegions = this._unchangedRegions.get()?.regions || [];\n\t\tfor (const r of unchangedRegions) {\n\t\t\tif (r.getHiddenOriginalRange(undefined).contains(lineNumber)) {\n\t\t\t\tr.showOriginalLine(lineNumber, preference, tx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async waitForDiff(): Promise<void> {\n\t\tawait waitForState(this.isDiffUpToDate, s => s);\n\t}\n\n\tpublic serializeState(): SerializedState {\n\t\tconst regions = this._unchangedRegions.get();\n\t\treturn {\n\t\t\tcollapsedRegions: regions?.regions.map(r => ({ range: r.getHiddenModifiedRange(undefined).serialize() }))\n\t\t};\n\t}\n\n\tpublic restoreSerializedState(state: SerializedState): void {\n\t\tconst ranges = state.collapsedRegions?.map(r => LineRange.deserialize(r.range));\n\t\tconst regions = this._unchangedRegions.get();\n\t\tif (!regions || !ranges) {\n\t\t\treturn;\n\t\t}\n\t\ttransaction(tx => {\n\t\t\tfor (const r of regions.regions) {\n\t\t\t\tfor (const range of ranges) {\n\t\t\t\t\tif (r.modifiedUnchangedRange.intersect(range)) {\n\t\t\t\t\t\tr.setHiddenModifiedRange(range, tx);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction normalizeDocumentDiff(diff: IDocumentDiff, original: ITextModel, modified: ITextModel): IDocumentDiff {\n\treturn {\n\t\tchanges: diff.changes.map(c => new DetailedLineRangeMapping(\n\t\t\tc.original,\n\t\t\tc.modified,\n\t\t\tc.innerChanges ? c.innerChanges.map(i => normalizeRangeMapping(i, original, modified)) : undefined\n\t\t)),\n\t\tmoves: diff.moves,\n\t\tidentical: diff.identical,\n\t\tquitEarly: diff.quitEarly,\n\t};\n}\n\nfunction normalizeRangeMapping(rangeMapping: RangeMapping, original: ITextModel, modified: ITextModel): RangeMapping {\n\tlet originalRange = rangeMapping.originalRange;\n\tlet modifiedRange = rangeMapping.modifiedRange;\n\tif (\n\t\toriginalRange.startColumn === 1 && modifiedRange.startColumn === 1 &&\n\t\t(originalRange.endColumn !== 1 || modifiedRange.endColumn !== 1) &&\n\t\toriginalRange.endColumn === original.getLineMaxColumn(originalRange.endLineNumber)\n\t\t&& modifiedRange.endColumn === modified.getLineMaxColumn(modifiedRange.endLineNumber)\n\t\t&& originalRange.endLineNumber < original.getLineCount()\n\t\t&& modifiedRange.endLineNumber < modified.getLineCount()\n\t) {\n\t\toriginalRange = originalRange.setEndPosition(originalRange.endLineNumber + 1, 1);\n\t\tmodifiedRange = modifiedRange.setEndPosition(modifiedRange.endLineNumber + 1, 1);\n\t}\n\treturn new RangeMapping(originalRange, modifiedRange);\n}\n\ninterface SerializedState {\n\tcollapsedRegions: { range: ISerializedLineRange }[] | undefined;\n}\n\nexport class DiffState {\n\tpublic static fromDiffResult(result: IDocumentDiff): DiffState {\n\t\treturn new DiffState(\n\t\t\tresult.changes.map(c => new DiffMapping(c)),\n\t\t\tresult.moves || [],\n\t\t\tresult.identical,\n\t\t\tresult.quitEarly,\n\t\t);\n\t}\n\n\tconstructor(\n\t\tpublic readonly mappings: readonly DiffMapping[],\n\t\tpublic readonly movedTexts: readonly MovedText[],\n\t\tpublic readonly identical: boolean,\n\t\tpublic readonly quitEarly: boolean,\n\t) { }\n}\n\nexport class DiffMapping {\n\tconstructor(\n\t\treadonly lineRangeMapping: DetailedLineRangeMapping,\n\t) {\n\t\t/*\n\t\treadonly movedTo: MovedText | undefined,\n\t\treadonly movedFrom: MovedText | undefined,\n\n\t\tif (movedTo) {\n\t\t\tassertFn(() =>\n\t\t\t\tmovedTo.lineRangeMapping.modifiedRange.equals(lineRangeMapping.modifiedRange)\n\t\t\t\t&& lineRangeMapping.originalRange.isEmpty\n\t\t\t\t&& !movedFrom\n\t\t\t);\n\t\t} else if (movedFrom) {\n\t\t\tassertFn(() =>\n\t\t\t\tmovedFrom.lineRangeMapping.originalRange.equals(lineRangeMapping.originalRange)\n\t\t\t\t&& lineRangeMapping.modifiedRange.isEmpty\n\t\t\t\t&& !movedTo\n\t\t\t);\n\t\t}\n\t\t*/\n\t}\n}\n\nexport class UnchangedRegion {\n\tpublic static fromDiffs(\n\t\tchanges: readonly DetailedLineRangeMapping[],\n\t\toriginalLineCount: number,\n\t\tmodifiedLineCount: number,\n\t\tminHiddenLineCount: number,\n\t\tminContext: number,\n\t): UnchangedRegion[] {\n\t\tconst inversedMappings = DetailedLineRangeMapping.inverse(changes, originalLineCount, modifiedLineCount);\n\t\tconst result: UnchangedRegion[] = [];\n\n\t\tfor (const mapping of inversedMappings) {\n\t\t\tlet origStart = mapping.original.startLineNumber;\n\t\t\tlet modStart = mapping.modified.startLineNumber;\n\t\t\tlet length = mapping.original.length;\n\n\t\t\tconst atStart = origStart === 1 && modStart === 1;\n\t\t\tconst atEnd = origStart + length === originalLineCount + 1 && modStart + length === modifiedLineCount + 1;\n\n\t\t\tif ((atStart || atEnd) && length >= minContext + minHiddenLineCount) {\n\t\t\t\tif (atStart && !atEnd) {\n\t\t\t\t\tlength -= minContext;\n\t\t\t\t}\n\t\t\t\tif (atEnd && !atStart) {\n\t\t\t\t\torigStart += minContext;\n\t\t\t\t\tmodStart += minContext;\n\t\t\t\t\tlength -= minContext;\n\t\t\t\t}\n\t\t\t\tresult.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n\t\t\t} else if (length >= minContext * 2 + minHiddenLineCount) {\n\t\t\t\torigStart += minContext;\n\t\t\t\tmodStart += minContext;\n\t\t\t\tlength -= minContext * 2;\n\t\t\t\tresult.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic get originalUnchangedRange(): LineRange {\n\t\treturn LineRange.ofLength(this.originalLineNumber, this.lineCount);\n\t}\n\n\tpublic get modifiedUnchangedRange(): LineRange {\n\t\treturn LineRange.ofLength(this.modifiedLineNumber, this.lineCount);\n\t}\n\n\tprivate readonly _visibleLineCountTop = observableValue<number>(this, 0);\n\tpublic readonly visibleLineCountTop: ISettableObservable<number> = this._visibleLineCountTop;\n\n\tprivate readonly _visibleLineCountBottom = observableValue<number>(this, 0);\n\tpublic readonly visibleLineCountBottom: ISettableObservable<number> = this._visibleLineCountBottom;\n\n\tprivate readonly _shouldHideControls = derived(this, reader => /** @description isVisible */\n\t\tthis.visibleLineCountTop.read(reader) + this.visibleLineCountBottom.read(reader) === this.lineCount && !this.isDragged.read(reader));\n\n\tpublic readonly isDragged = observableValue<undefined | 'bottom' | 'top'>(this, undefined);\n\n\tconstructor(\n\t\tpublic readonly originalLineNumber: number,\n\t\tpublic readonly modifiedLineNumber: number,\n\t\tpublic readonly lineCount: number,\n\t\tvisibleLineCountTop: number,\n\t\tvisibleLineCountBottom: number,\n\t) {\n\t\tconst visibleLineCountTop2 = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n\t\tconst visibleLineCountBottom2 = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n\n\t\tsoftAssert(visibleLineCountTop === visibleLineCountTop2);\n\t\tsoftAssert(visibleLineCountBottom === visibleLineCountBottom2);\n\n\t\tthis._visibleLineCountTop.set(visibleLineCountTop2, undefined);\n\t\tthis._visibleLineCountBottom.set(visibleLineCountBottom2, undefined);\n\t}\n\n\tpublic setVisibleRanges(visibleRanges: LineRangeMapping[], tx: ITransaction): UnchangedRegion[] {\n\t\tconst result: UnchangedRegion[] = [];\n\n\t\tconst hiddenModified = new LineRangeSet(visibleRanges.map(r => r.modified)).subtractFrom(this.modifiedUnchangedRange);\n\n\t\tlet originalStartLineNumber = this.originalLineNumber;\n\t\tlet modifiedStartLineNumber = this.modifiedLineNumber;\n\t\tconst modifiedEndLineNumberEx = this.modifiedLineNumber + this.lineCount;\n\t\tif (hiddenModified.ranges.length === 0) {\n\t\t\tthis.showAll(tx);\n\t\t\tresult.push(this);\n\t\t} else {\n\t\t\tlet i = 0;\n\t\t\tfor (const r of hiddenModified.ranges) {\n\t\t\t\tconst isLast = i === hiddenModified.ranges.length - 1;\n\t\t\t\ti++;\n\n\t\t\t\tconst length = (isLast ? modifiedEndLineNumberEx : r.endLineNumberExclusive) - modifiedStartLineNumber;\n\n\t\t\t\tconst newR = new UnchangedRegion(originalStartLineNumber, modifiedStartLineNumber, length, 0, 0);\n\t\t\t\tnewR.setHiddenModifiedRange(r, tx);\n\t\t\t\tresult.push(newR);\n\n\t\t\t\toriginalStartLineNumber = newR.originalUnchangedRange.endLineNumberExclusive;\n\t\t\t\tmodifiedStartLineNumber = newR.modifiedUnchangedRange.endLineNumberExclusive;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic shouldHideControls(reader: IReader | undefined): boolean {\n\t\treturn this._shouldHideControls.read(reader);\n\t}\n\n\tpublic getHiddenOriginalRange(reader: IReader | undefined): LineRange {\n\t\treturn LineRange.ofLength(\n\t\t\tthis.originalLineNumber + this._visibleLineCountTop.read(reader),\n\t\t\tthis.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader),\n\t\t);\n\t}\n\n\tpublic getHiddenModifiedRange(reader: IReader | undefined): LineRange {\n\t\treturn LineRange.ofLength(\n\t\t\tthis.modifiedLineNumber + this._visibleLineCountTop.read(reader),\n\t\t\tthis.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader),\n\t\t);\n\t}\n\n\tpublic setHiddenModifiedRange(range: LineRange, tx: ITransaction) {\n\t\tconst visibleLineCountTop = range.startLineNumber - this.modifiedLineNumber;\n\t\tconst visibleLineCountBottom = (this.modifiedLineNumber + this.lineCount) - range.endLineNumberExclusive;\n\t\tthis.setState(visibleLineCountTop, visibleLineCountBottom, tx);\n\t}\n\n\tpublic getMaxVisibleLineCountTop() {\n\t\treturn this.lineCount - this._visibleLineCountBottom.get();\n\t}\n\n\tpublic getMaxVisibleLineCountBottom() {\n\t\treturn this.lineCount - this._visibleLineCountTop.get();\n\t}\n\n\tpublic showMoreAbove(count = 10, tx: ITransaction | undefined): void {\n\t\tconst maxVisibleLineCountTop = this.getMaxVisibleLineCountTop();\n\t\tthis._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + count, maxVisibleLineCountTop), tx);\n\t}\n\n\tpublic showMoreBelow(count = 10, tx: ITransaction | undefined): void {\n\t\tconst maxVisibleLineCountBottom = this.lineCount - this._visibleLineCountTop.get();\n\t\tthis._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + count, maxVisibleLineCountBottom), tx);\n\t}\n\n\tpublic showAll(tx: ITransaction | undefined): void {\n\t\tthis._visibleLineCountBottom.set(this.lineCount - this._visibleLineCountTop.get(), tx);\n\t}\n\n\tpublic showModifiedLine(lineNumber: number, preference: RevealPreference, tx: ITransaction | undefined): void {\n\t\tconst top = lineNumber + 1 - (this.modifiedLineNumber + this._visibleLineCountTop.get());\n\t\tconst bottom = (this.modifiedLineNumber - this._visibleLineCountBottom.get() + this.lineCount) - lineNumber;\n\t\tif (preference === RevealPreference.FromCloserSide && top < bottom || preference === RevealPreference.FromTop) {\n\t\t\tthis._visibleLineCountTop.set(this._visibleLineCountTop.get() + top, tx);\n\t\t} else {\n\t\t\tthis._visibleLineCountBottom.set(this._visibleLineCountBottom.get() + bottom, tx);\n\t\t}\n\t}\n\n\tpublic showOriginalLine(lineNumber: number, preference: RevealPreference, tx: ITransaction | undefined): void {\n\t\tconst top = lineNumber - this.originalLineNumber;\n\t\tconst bottom = (this.originalLineNumber + this.lineCount) - lineNumber;\n\t\tif (preference === RevealPreference.FromCloserSide && top < bottom || preference === RevealPreference.FromTop) {\n\t\t\tthis._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + bottom - top, this.getMaxVisibleLineCountTop()), tx);\n\t\t} else {\n\t\t\tthis._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + top - bottom, this.getMaxVisibleLineCountBottom()), tx);\n\t\t}\n\t}\n\n\tpublic collapseAll(tx: ITransaction | undefined): void {\n\t\tthis._visibleLineCountTop.set(0, tx);\n\t\tthis._visibleLineCountBottom.set(0, tx);\n\t}\n\n\tpublic setState(visibleLineCountTop: number, visibleLineCountBottom: number, tx: ITransaction | undefined): void {\n\t\tvisibleLineCountTop = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n\t\tvisibleLineCountBottom = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n\n\t\tthis._visibleLineCountTop.set(visibleLineCountTop, tx);\n\t\tthis._visibleLineCountBottom.set(visibleLineCountBottom, tx);\n\t}\n}\n\nexport const enum RevealPreference {\n\tFromCloserSide,\n\tFromTop,\n\tFromBottom,\n}\n\nfunction applyOriginalEdits(diff: IDocumentDiff, textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): IDocumentDiff | undefined {\n\treturn undefined;\n\t/*\n\tTODO@hediet\n\tif (textEdits.length === 0) {\n\t\treturn diff;\n\t}\n\n\tconst diff2 = flip(diff);\n\tconst diff3 = applyModifiedEdits(diff2, textEdits, modifiedTextModel, originalTextModel);\n\tif (!diff3) {\n\t\treturn undefined;\n\t}\n\treturn flip(diff3);*/\n}\n/*\nfunction flip(diff: IDocumentDiff): IDocumentDiff {\n\treturn {\n\t\tchanges: diff.changes.map(c => c.flip()),\n\t\tmoves: diff.moves.map(m => m.flip()),\n\t\tidentical: diff.identical,\n\t\tquitEarly: diff.quitEarly,\n\t};\n}\n*/\nfunction applyModifiedEdits(diff: IDocumentDiff, textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): IDocumentDiff | undefined {\n\treturn undefined;\n\t/*\n\tTODO@hediet\n\tif (textEdits.length === 0) {\n\t\treturn diff;\n\t}\n\tif (diff.changes.some(c => !c.innerChanges) || diff.moves.length > 0) {\n\t\t// TODO support these cases\n\t\treturn undefined;\n\t}\n\n\tconst changes = applyModifiedEditsToLineRangeMappings(diff.changes, textEdits, originalTextModel, modifiedTextModel);\n\n\tconst moves = diff.moves.map(m => {\n\t\tconst newModifiedRange = applyEditToLineRange(m.lineRangeMapping.modified, textEdits);\n\t\treturn newModifiedRange ? new MovedText(\n\t\t\tnew SimpleLineRangeMapping(m.lineRangeMapping.original, newModifiedRange),\n\t\t\tapplyModifiedEditsToLineRangeMappings(m.changes, textEdits, originalTextModel, modifiedTextModel),\n\t\t) : undefined;\n\t}).filter(isDefined);\n\n\treturn {\n\t\tidentical: false,\n\t\tquitEarly: false,\n\t\tchanges,\n\t\tmoves,\n\t};*/\n}\n/*\nfunction applyEditToLineRange(range: LineRange, textEdits: TextEditInfo[]): LineRange | undefined {\n\tlet rangeStartLineNumber = range.startLineNumber;\n\tlet rangeEndLineNumberEx = range.endLineNumberExclusive;\n\n\tfor (let i = textEdits.length - 1; i >= 0; i--) {\n\t\tconst textEdit = textEdits[i];\n\t\tconst textEditStartLineNumber = lengthGetLineCount(textEdit.startOffset) + 1;\n\t\tconst textEditEndLineNumber = lengthGetLineCount(textEdit.endOffset) + 1;\n\t\tconst newLengthLineCount = lengthGetLineCount(textEdit.newLength);\n\t\tconst delta = newLengthLineCount - (textEditEndLineNumber - textEditStartLineNumber);\n\n\t\tif (textEditEndLineNumber < rangeStartLineNumber) {\n\t\t\t// the text edit is before us\n\t\t\trangeStartLineNumber += delta;\n\t\t\trangeEndLineNumberEx += delta;\n\t\t} else if (textEditStartLineNumber > rangeEndLineNumberEx) {\n\t\t\t// the text edit is after us\n\t\t\t// NOOP\n\t\t} else if (textEditStartLineNumber < rangeStartLineNumber && rangeEndLineNumberEx < textEditEndLineNumber) {\n\t\t\t// the range is fully contained in the text edit\n\t\t\treturn undefined;\n\t\t} else if (textEditStartLineNumber < rangeStartLineNumber && textEditEndLineNumber <= rangeEndLineNumberEx) {\n\t\t\t// the text edit ends inside our range\n\t\t\trangeStartLineNumber = textEditEndLineNumber + 1;\n\t\t\trangeStartLineNumber += delta;\n\t\t\trangeEndLineNumberEx += delta;\n\t\t} else if (rangeStartLineNumber <= textEditStartLineNumber && textEditEndLineNumber < rangeStartLineNumber) {\n\t\t\t// the text edit starts inside our range\n\t\t\trangeEndLineNumberEx = textEditStartLineNumber;\n\t\t} else {\n\t\t\trangeEndLineNumberEx += delta;\n\t\t}\n\t}\n\n\treturn new LineRange(rangeStartLineNumber, rangeEndLineNumberEx);\n}\n\nfunction applyModifiedEditsToLineRangeMappings(changes: readonly LineRangeMapping[], textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): LineRangeMapping[] {\n\tconst diffTextEdits = changes.flatMap(c => c.innerChanges!.map(c => new TextEditInfo(\n\t\tpositionToLength(c.originalRange.getStartPosition()),\n\t\tpositionToLength(c.originalRange.getEndPosition()),\n\t\tlengthOfRange(c.modifiedRange).toLength(),\n\t)));\n\n\tconst combined = combineTextEditInfos(diffTextEdits, textEdits);\n\n\tlet lastOriginalEndOffset = lengthZero;\n\tlet lastModifiedEndOffset = lengthZero;\n\tconst rangeMappings = combined.map(c => {\n\t\tconst modifiedStartOffset = lengthAdd(lastModifiedEndOffset, lengthDiffNonNegative(lastOriginalEndOffset, c.startOffset));\n\t\tlastOriginalEndOffset = c.endOffset;\n\t\tlastModifiedEndOffset = lengthAdd(modifiedStartOffset, c.newLength);\n\n\t\treturn new RangeMapping(\n\t\t\tRange.fromPositions(lengthToPosition(c.startOffset), lengthToPosition(c.endOffset)),\n\t\t\tRange.fromPositions(lengthToPosition(modifiedStartOffset), lengthToPosition(lastModifiedEndOffset)),\n\t\t);\n\t});\n\n\tconst newChanges = lineRangeMappingFromRangeMappings(\n\t\trangeMappings,\n\t\toriginalTextModel.getLinesContent(),\n\t\tmodifiedTextModel.getLinesContent(),\n\t);\n\treturn newChanges;\n}\n*/\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IObservable, IReader, ISettableObservable, ITransaction, autorun, autorunWithStore, derived, observableSignal, observableSignalFromEvent, observableValue, transaction, waitForState } from '../../../../base/common/observable.js';\nimport { IDiffProviderFactoryService } from './diffProviderFactoryService.js';\nimport { filterWithPrevious } from './utils.js';\nimport { readHotReloadableExport } from '../../../../base/common/hotReloadHelpers.js';\nimport { ISerializedLineRange, LineRange, LineRangeSet } from '../../../common/core/ranges/lineRange.js';\nimport { DefaultLinesDiffComputer } from '../../../common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js';\nimport { IDocumentDiff } from '../../../common/diff/documentDiffProvider.js';\nimport { MovedText } from '../../../common/diff/linesDiffComputer.js';\nimport { DetailedLineRangeMapping, LineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { IDiffEditorModel, IDiffEditorViewModel } from '../../../common/editorCommon.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { TextEditInfo } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js';\nimport { combineTextEditInfos } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/combineTextEditInfos.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { optimizeSequenceDiffs } from '../../../common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { groupAdjacentBy } from '../../../../base/common/arrays.js';\nimport { softAssert } from '../../../../base/common/assert.js';\n\nexport class DiffEditorViewModel extends Disposable implements IDiffEditorViewModel {\n\tprivate readonly _isDiffUpToDate = observableValue<boolean>(this, false);\n\tpublic readonly isDiffUpToDate: IObservable<boolean> = this._isDiffUpToDate;\n\n\tprivate _lastDiff: IDocumentDiff | undefined;\n\tprivate readonly _diff = observableValue<DiffState | undefined>(this, undefined);\n\tpublic readonly diff: IObservable<DiffState | undefined> = this._diff;\n\n\tprivate readonly _unchangedRegions = observableValue<{ regions: UnchangedRegion[]; originalDecorationIds: string[]; modifiedDecorationIds: string[] } | undefined>(this, undefined);\n\tpublic readonly unchangedRegions: IObservable<UnchangedRegion[]> = derived(this, r => {\n\t\tif (this._options.hideUnchangedRegions.read(r)) {\n\t\t\treturn this._unchangedRegions.read(r)?.regions ?? [];\n\t\t} else {\n\t\t\t// Reset state\n\t\t\ttransaction(tx => {\n\t\t\t\tfor (const r of this._unchangedRegions.get()?.regions || []) {\n\t\t\t\t\tr.collapseAll(tx);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn [];\n\t\t}\n\t}\n\t);\n\n\tpublic readonly movedTextToCompare = observableValue<MovedText | undefined>(this, undefined);\n\n\tprivate readonly _activeMovedText = observableValue<MovedText | undefined>(this, undefined);\n\tprivate readonly _hoveredMovedText = observableValue<MovedText | undefined>(this, undefined);\n\n\n\tpublic readonly activeMovedText = derived(this, r => this.movedTextToCompare.read(r) ?? this._hoveredMovedText.read(r) ?? this._activeMovedText.read(r));\n\n\tpublic setActiveMovedText(movedText: MovedText | undefined): void {\n\t\tthis._activeMovedText.set(movedText, undefined);\n\t}\n\n\tprivate readonly _cancellationTokenSource = new CancellationTokenSource();\n\n\tprivate readonly _diffProvider = derived(this, reader => {\n\t\tconst diffProvider = this._diffProviderFactoryService.createDiffProvider({\n\t\t\tdiffAlgorithm: this._options.diffAlgorithm.read(reader)\n\t\t});\n\t\tconst onChangeSignal = observableSignalFromEvent('onDidChange', diffProvider.onDidChange);\n\t\treturn {\n\t\t\tdiffProvider,\n\t\t\tonChangeSignal,\n\t\t};\n\t});\n\n\tconstructor(\n\t\tpublic readonly model: IDiffEditorModel,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\t@IDiffProviderFactoryService private readonly _diffProviderFactoryService: IDiffProviderFactoryService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(toDisposable(() => this._cancellationTokenSource.cancel()));\n\n\t\tconst contentChangedSignal = observableSignal('contentChangedSignal');\n\t\tconst debouncer = this._register(new RunOnceScheduler(() => contentChangedSignal.trigger(undefined), 200));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description collapse touching unchanged ranges */\n\n\t\t\tconst lastUnchangedRegions = this._unchangedRegions.read(reader);\n\t\t\tif (!lastUnchangedRegions || lastUnchangedRegions.regions.some(r => r.isDragged.read(reader))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n\t\t\t\t.map(id => model.original.getDecorationRange(id))\n\t\t\t\t.map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n\t\t\tconst lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n\t\t\t\t.map(id => model.modified.getDecorationRange(id))\n\t\t\t\t.map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n\t\t\tconst updatedLastUnchangedRegions = lastUnchangedRegions.regions.map((r, idx) =>\n\t\t\t\t(!lastUnchangedRegionsOrigRanges[idx] || !lastUnchangedRegionsModRanges[idx]) ? undefined :\n\t\t\t\t\tnew UnchangedRegion(\n\t\t\t\t\t\tlastUnchangedRegionsOrigRanges[idx]!.startLineNumber,\n\t\t\t\t\t\tlastUnchangedRegionsModRanges[idx]!.startLineNumber,\n\t\t\t\t\t\tlastUnchangedRegionsOrigRanges[idx]!.length,\n\t\t\t\t\t\tr.visibleLineCountTop.read(reader),\n\t\t\t\t\t\tr.visibleLineCountBottom.read(reader),\n\t\t\t\t\t)).filter(isDefined);\n\n\t\t\tconst newRanges: UnchangedRegion[] = [];\n\n\t\t\tlet didChange = false;\n\t\t\tfor (const touching of groupAdjacentBy(updatedLastUnchangedRegions, (a, b) => a.getHiddenModifiedRange(reader).endLineNumberExclusive === b.getHiddenModifiedRange(reader).startLineNumber)) {\n\t\t\t\tif (touching.length > 1) {\n\t\t\t\t\tdidChange = true;\n\t\t\t\t\tconst sumLineCount = touching.reduce((sum, r) => sum + r.lineCount, 0);\n\t\t\t\t\tconst r = new UnchangedRegion(touching[0].originalLineNumber, touching[0].modifiedLineNumber, sumLineCount, touching[0].visibleLineCountTop.get(), touching[touching.length - 1].visibleLineCountBottom.get());\n\t\t\t\t\tnewRanges.push(r);\n\t\t\t\t} else {\n\t\t\t\t\tnewRanges.push(touching[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (didChange) {\n\t\t\t\tconst originalDecorationIds = model.original.deltaDecorations(\n\t\t\t\t\tlastUnchangedRegions.originalDecorationIds,\n\t\t\t\t\tnewRanges.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange()!, options: { description: 'unchanged' } }))\n\t\t\t\t);\n\t\t\t\tconst modifiedDecorationIds = model.modified.deltaDecorations(\n\t\t\t\t\tlastUnchangedRegions.modifiedDecorationIds,\n\t\t\t\t\tnewRanges.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange()!, options: { description: 'unchanged' } }))\n\t\t\t\t);\n\n\t\t\t\ttransaction(tx => {\n\t\t\t\t\tthis._unchangedRegions.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tregions: newRanges,\n\t\t\t\t\t\t\toriginalDecorationIds,\n\t\t\t\t\t\t\tmodifiedDecorationIds\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttx\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tconst updateUnchangedRegions = (result: IDocumentDiff, tx: ITransaction, reader?: IReader) => {\n\t\t\tconst newUnchangedRegions = UnchangedRegion.fromDiffs(\n\t\t\t\tresult.changes,\n\t\t\t\tmodel.original.getLineCount(),\n\t\t\t\tmodel.modified.getLineCount(),\n\t\t\t\tthis._options.hideUnchangedRegionsMinimumLineCount.read(reader),\n\t\t\t\tthis._options.hideUnchangedRegionsContextLineCount.read(reader),\n\t\t\t);\n\n\t\t\t// Transfer state from cur state\n\t\t\tlet visibleRegions: LineRangeMapping[] | undefined = undefined;\n\n\t\t\tconst lastUnchangedRegions = this._unchangedRegions.get();\n\t\t\tif (lastUnchangedRegions) {\n\t\t\t\tconst lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n\t\t\t\t\t.map(id => model.original.getDecorationRange(id))\n\t\t\t\t\t.map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n\t\t\t\tconst lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n\t\t\t\t\t.map(id => model.modified.getDecorationRange(id))\n\t\t\t\t\t.map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n\t\t\t\tconst updatedLastUnchangedRegions = filterWithPrevious(\n\t\t\t\t\tlastUnchangedRegions.regions\n\t\t\t\t\t\t.map((r, idx) => {\n\t\t\t\t\t\t\tif (!lastUnchangedRegionsOrigRanges[idx] || !lastUnchangedRegionsModRanges[idx]) { return undefined; }\n\t\t\t\t\t\t\tconst length = lastUnchangedRegionsOrigRanges[idx]!.length;\n\t\t\t\t\t\t\treturn new UnchangedRegion(\n\t\t\t\t\t\t\t\tlastUnchangedRegionsOrigRanges[idx]!.startLineNumber,\n\t\t\t\t\t\t\t\tlastUnchangedRegionsModRanges[idx]!.startLineNumber,\n\t\t\t\t\t\t\t\tlength,\n\t\t\t\t\t\t\t\t// The visible area can shrink by edits -> we have to account for this\n\t\t\t\t\t\t\t\tMath.min(r.visibleLineCountTop.get(), length),\n\t\t\t\t\t\t\t\tMath.min(r.visibleLineCountBottom.get(), length - r.visibleLineCountTop.get()),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t).filter(isDefined),\n\t\t\t\t\t(cur, prev) => !prev || (cur.modifiedLineNumber >= prev.modifiedLineNumber + prev.lineCount && cur.originalLineNumber >= prev.originalLineNumber + prev.lineCount)\n\t\t\t\t);\n\n\t\t\t\tlet hiddenRegions = updatedLastUnchangedRegions.map(r => new LineRangeMapping(r.getHiddenOriginalRange(reader), r.getHiddenModifiedRange(reader)));\n\t\t\t\thiddenRegions = LineRangeMapping.clip(hiddenRegions, LineRange.ofLength(1, model.original.getLineCount()), LineRange.ofLength(1, model.modified.getLineCount()));\n\t\t\t\tvisibleRegions = LineRangeMapping.inverse(hiddenRegions, model.original.getLineCount(), model.modified.getLineCount());\n\t\t\t}\n\n\t\t\tconst newUnchangedRegions2 = [];\n\t\t\tif (visibleRegions) {\n\t\t\t\tfor (const r of newUnchangedRegions) {\n\t\t\t\t\tconst intersecting = visibleRegions.filter(f => f.original.intersectsStrict(r.originalUnchangedRange) && f.modified.intersectsStrict(r.modifiedUnchangedRange));\n\t\t\t\t\tnewUnchangedRegions2.push(...r.setVisibleRanges(intersecting, tx));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewUnchangedRegions2.push(...newUnchangedRegions);\n\t\t\t}\n\n\t\t\tconst originalDecorationIds = model.original.deltaDecorations(\n\t\t\t\tlastUnchangedRegions?.originalDecorationIds || [],\n\t\t\t\tnewUnchangedRegions2.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange()!, options: { description: 'unchanged' } }))\n\t\t\t);\n\t\t\tconst modifiedDecorationIds = model.modified.deltaDecorations(\n\t\t\t\tlastUnchangedRegions?.modifiedDecorationIds || [],\n\t\t\t\tnewUnchangedRegions2.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange()!, options: { description: 'unchanged' } }))\n\t\t\t);\n\n\t\t\tthis._unchangedRegions.set(\n\t\t\t\t{\n\t\t\t\t\tregions: newUnchangedRegions2,\n\t\t\t\t\toriginalDecorationIds,\n\t\t\t\t\tmodifiedDecorationIds\n\t\t\t\t},\n\t\t\t\ttx\n\t\t\t);\n\t\t};\n\n\t\tthis._register(model.modified.onDidChangeContent((e) => {\n\t\t\tconst diff = this._diff.get();\n\t\t\tif (diff) {\n\t\t\t\tconst textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n\t\t\t\tconst result = applyModifiedEdits(this._lastDiff!, textEdits, model.original, model.modified);\n\t\t\t\tif (result) {\n\t\t\t\t\tthis._lastDiff = result;\n\t\t\t\t\ttransaction(tx => {\n\t\t\t\t\t\tthis._diff.set(DiffState.fromDiffResult(this._lastDiff!), tx);\n\t\t\t\t\t\tupdateUnchangedRegions(result, tx);\n\t\t\t\t\t\tconst currentSyncedMovedText = this.movedTextToCompare.get();\n\t\t\t\t\t\tthis.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff!.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._isDiffUpToDate.set(false, undefined);\n\t\t\tdebouncer.schedule();\n\t\t}));\n\t\tthis._register(model.original.onDidChangeContent((e) => {\n\t\t\tconst diff = this._diff.get();\n\t\t\tif (diff) {\n\t\t\t\tconst textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n\t\t\t\tconst result = applyOriginalEdits(this._lastDiff!, textEdits, model.original, model.modified);\n\t\t\t\tif (result) {\n\t\t\t\t\tthis._lastDiff = result;\n\t\t\t\t\ttransaction(tx => {\n\t\t\t\t\t\tthis._diff.set(DiffState.fromDiffResult(this._lastDiff!), tx);\n\t\t\t\t\t\tupdateUnchangedRegions(result, tx);\n\t\t\t\t\t\tconst currentSyncedMovedText = this.movedTextToCompare.get();\n\t\t\t\t\t\tthis.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff!.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._isDiffUpToDate.set(false, undefined);\n\t\t\tdebouncer.schedule();\n\t\t}));\n\n\t\tthis._register(autorunWithStore(async (reader, store) => {\n\t\t\t/** @description compute diff */\n\n\t\t\t// So that they get recomputed when these settings change\n\t\t\tthis._options.hideUnchangedRegionsMinimumLineCount.read(reader);\n\t\t\tthis._options.hideUnchangedRegionsContextLineCount.read(reader);\n\n\t\t\tdebouncer.cancel();\n\t\t\tcontentChangedSignal.read(reader);\n\t\t\tconst documentDiffProvider = this._diffProvider.read(reader);\n\t\t\tdocumentDiffProvider.onChangeSignal.read(reader);\n\n\t\t\treadHotReloadableExport(DefaultLinesDiffComputer, reader);\n\t\t\treadHotReloadableExport(optimizeSequenceDiffs, reader);\n\n\t\t\tthis._isDiffUpToDate.set(false, undefined);\n\n\t\t\tlet originalTextEditInfos: TextEditInfo[] = [];\n\t\t\tstore.add(model.original.onDidChangeContent((e) => {\n\t\t\t\tconst edits = TextEditInfo.fromModelContentChanges(e.changes);\n\t\t\t\toriginalTextEditInfos = combineTextEditInfos(originalTextEditInfos, edits);\n\t\t\t}));\n\n\t\t\tlet modifiedTextEditInfos: TextEditInfo[] = [];\n\t\t\tstore.add(model.modified.onDidChangeContent((e) => {\n\t\t\t\tconst edits = TextEditInfo.fromModelContentChanges(e.changes);\n\t\t\t\tmodifiedTextEditInfos = combineTextEditInfos(modifiedTextEditInfos, edits);\n\t\t\t}));\n\n\t\t\tlet result = await documentDiffProvider.diffProvider.computeDiff(model.original, model.modified, {\n\t\t\t\tignoreTrimWhitespace: this._options.ignoreTrimWhitespace.read(reader),\n\t\t\t\tmaxComputationTimeMs: this._options.maxComputationTimeMs.read(reader),\n\t\t\t\tcomputeMoves: this._options.showMoves.read(reader),\n\t\t\t}, this._cancellationTokenSource.token);\n\n\t\t\tif (this._cancellationTokenSource.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (model.original.isDisposed() || model.modified.isDisposed()) {\n\t\t\t\t// TODO@hediet fishy?\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = normalizeDocumentDiff(result, model.original, model.modified);\n\t\t\tresult = applyOriginalEdits(result, originalTextEditInfos, model.original, model.modified) ?? result;\n\t\t\tresult = applyModifiedEdits(result, modifiedTextEditInfos, model.original, model.modified) ?? result;\n\n\t\t\ttransaction(tx => {\n\t\t\t\t/** @description write diff result */\n\t\t\t\tupdateUnchangedRegions(result, tx);\n\n\t\t\t\tthis._lastDiff = result;\n\t\t\t\tconst state = DiffState.fromDiffResult(result);\n\t\t\t\tthis._diff.set(state, tx);\n\t\t\t\tthis._isDiffUpToDate.set(true, tx);\n\t\t\t\tconst currentSyncedMovedText = this.movedTextToCompare.get();\n\t\t\t\tthis.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n\t\t\t});\n\t\t}));\n\t}\n\n\tpublic ensureModifiedLineIsVisible(lineNumber: number, preference: RevealPreference, tx: ITransaction | undefined): void {\n\t\tif (this.diff.get()?.mappings.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tconst unchangedRegions = this._unchangedRegions.get()?.regions || [];\n\t\tfor (const r of unchangedRegions) {\n\t\t\tif (r.getHiddenModifiedRange(undefined).contains(lineNumber)) {\n\t\t\t\tr.showModifiedLine(lineNumber, preference, tx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic ensureOriginalLineIsVisible(lineNumber: number, preference: RevealPreference, tx: ITransaction | undefined): void {\n\t\tif (this.diff.get()?.mappings.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tconst unchangedRegions = this._unchangedRegions.get()?.regions || [];\n\t\tfor (const r of unchangedRegions) {\n\t\t\tif (r.getHiddenOriginalRange(undefined).contains(lineNumber)) {\n\t\t\t\tr.showOriginalLine(lineNumber, preference, tx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async waitForDiff(): Promise<void> {\n\t\tawait waitForState(this.isDiffUpToDate, s => s);\n\t}\n\n\tpublic serializeState(): SerializedState {\n\t\tconst regions = this._unchangedRegions.get();\n\t\treturn {\n\t\t\tcollapsedRegions: regions?.regions.map(r => ({ range: r.getHiddenModifiedRange(undefined).serialize() }))\n\t\t};\n\t}\n\n\tpublic restoreSerializedState(state: SerializedState): void {\n\t\tconst ranges = state.collapsedRegions?.map(r => LineRange.deserialize(r.range));\n\t\tconst regions = this._unchangedRegions.get();\n\t\tif (!regions || !ranges) {\n\t\t\treturn;\n\t\t}\n\t\ttransaction(tx => {\n\t\t\tfor (const r of regions.regions) {\n\t\t\t\tfor (const range of ranges) {\n\t\t\t\t\tif (r.modifiedUnchangedRange.intersect(range)) {\n\t\t\t\t\t\tr.setHiddenModifiedRange(range, tx);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction normalizeDocumentDiff(diff: IDocumentDiff, original: ITextModel, modified: ITextModel): IDocumentDiff {\n\treturn {\n\t\tchanges: diff.changes.map(c => new DetailedLineRangeMapping(\n\t\t\tc.original,\n\t\t\tc.modified,\n\t\t\tc.innerChanges ? c.innerChanges.map(i => normalizeRangeMapping(i, original, modified)) : undefined\n\t\t)),\n\t\tmoves: diff.moves,\n\t\tidentical: diff.identical,\n\t\tquitEarly: diff.quitEarly,\n\t};\n}\n\nfunction normalizeRangeMapping(rangeMapping: RangeMapping, original: ITextModel, modified: ITextModel): RangeMapping {\n\tlet originalRange = rangeMapping.originalRange;\n\tlet modifiedRange = rangeMapping.modifiedRange;\n\tif (\n\t\toriginalRange.startColumn === 1 && modifiedRange.startColumn === 1 &&\n\t\t(originalRange.endColumn !== 1 || modifiedRange.endColumn !== 1) &&\n\t\toriginalRange.endColumn === original.getLineMaxColumn(originalRange.endLineNumber)\n\t\t&& modifiedRange.endColumn === modified.getLineMaxColumn(modifiedRange.endLineNumber)\n\t\t&& originalRange.endLineNumber < original.getLineCount()\n\t\t&& modifiedRange.endLineNumber < modified.getLineCount()\n\t) {\n\t\toriginalRange = originalRange.setEndPosition(originalRange.endLineNumber + 1, 1);\n\t\tmodifiedRange = modifiedRange.setEndPosition(modifiedRange.endLineNumber + 1, 1);\n\t}\n\treturn new RangeMapping(originalRange, modifiedRange);\n}\n\ninterface SerializedState {\n\tcollapsedRegions: { range: ISerializedLineRange }[] | undefined;\n}\n\nexport class DiffState {\n\tpublic static fromDiffResult(result: IDocumentDiff): DiffState {\n\t\treturn new DiffState(\n\t\t\tresult.changes.map(c => new DiffMapping(c)),\n\t\t\tresult.moves || [],\n\t\t\tresult.identical,\n\t\t\tresult.quitEarly,\n\t\t);\n\t}\n\n\tconstructor(\n\t\tpublic readonly mappings: readonly DiffMapping[],\n\t\tpublic readonly movedTexts: readonly MovedText[],\n\t\tpublic readonly identical: boolean,\n\t\tpublic readonly quitEarly: boolean,\n\t) { }\n}\n\nexport class DiffMapping {\n\tconstructor(\n\t\treadonly lineRangeMapping: DetailedLineRangeMapping,\n\t) {\n\t\t/*\n\t\treadonly movedTo: MovedText | undefined,\n\t\treadonly movedFrom: MovedText | undefined,\n\n\t\tif (movedTo) {\n\t\t\tassertFn(() =>\n\t\t\t\tmovedTo.lineRangeMapping.modifiedRange.equals(lineRangeMapping.modifiedRange)\n\t\t\t\t&& lineRangeMapping.originalRange.isEmpty\n\t\t\t\t&& !movedFrom\n\t\t\t);\n\t\t} else if (movedFrom) {\n\t\t\tassertFn(() =>\n\t\t\t\tmovedFrom.lineRangeMapping.originalRange.equals(lineRangeMapping.originalRange)\n\t\t\t\t&& lineRangeMapping.modifiedRange.isEmpty\n\t\t\t\t&& !movedTo\n\t\t\t);\n\t\t}\n\t\t*/\n\t}\n}\n\nexport class UnchangedRegion {\n\tpublic static fromDiffs(\n\t\tchanges: readonly DetailedLineRangeMapping[],\n\t\toriginalLineCount: number,\n\t\tmodifiedLineCount: number,\n\t\tminHiddenLineCount: number,\n\t\tminContext: number,\n\t): UnchangedRegion[] {\n\t\tconst inversedMappings = DetailedLineRangeMapping.inverse(changes, originalLineCount, modifiedLineCount);\n\t\tconst result: UnchangedRegion[] = [];\n\n\t\tfor (const mapping of inversedMappings) {\n\t\t\tlet origStart = mapping.original.startLineNumber;\n\t\t\tlet modStart = mapping.modified.startLineNumber;\n\t\t\tlet length = mapping.original.length;\n\n\t\t\tconst atStart = origStart === 1 && modStart === 1;\n\t\t\tconst atEnd = origStart + length === originalLineCount + 1 && modStart + length === modifiedLineCount + 1;\n\n\t\t\tif ((atStart || atEnd) && length >= minContext + minHiddenLineCount) {\n\t\t\t\tif (atStart && !atEnd) {\n\t\t\t\t\tlength -= minContext;\n\t\t\t\t}\n\t\t\t\tif (atEnd && !atStart) {\n\t\t\t\t\torigStart += minContext;\n\t\t\t\t\tmodStart += minContext;\n\t\t\t\t\tlength -= minContext;\n\t\t\t\t}\n\t\t\t\tresult.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n\t\t\t} else if (length >= minContext * 2 + minHiddenLineCount) {\n\t\t\t\torigStart += minContext;\n\t\t\t\tmodStart += minContext;\n\t\t\t\tlength -= minContext * 2;\n\t\t\t\tresult.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic get originalUnchangedRange(): LineRange {\n\t\treturn LineRange.ofLength(this.originalLineNumber, this.lineCount);\n\t}\n\n\tpublic get modifiedUnchangedRange(): LineRange {\n\t\treturn LineRange.ofLength(this.modifiedLineNumber, this.lineCount);\n\t}\n\n\tprivate readonly _visibleLineCountTop = observableValue<number>(this, 0);\n\tpublic readonly visibleLineCountTop: ISettableObservable<number> = this._visibleLineCountTop;\n\n\tprivate readonly _visibleLineCountBottom = observableValue<number>(this, 0);\n\tpublic readonly visibleLineCountBottom: ISettableObservable<number> = this._visibleLineCountBottom;\n\n\tprivate readonly _shouldHideControls = derived(this, reader => /** @description isVisible */\n\t\tthis.visibleLineCountTop.read(reader) + this.visibleLineCountBottom.read(reader) === this.lineCount && !this.isDragged.read(reader));\n\n\tpublic readonly isDragged = observableValue<undefined | 'bottom' | 'top'>(this, undefined);\n\n\tconstructor(\n\t\tpublic readonly originalLineNumber: number,\n\t\tpublic readonly modifiedLineNumber: number,\n\t\tpublic readonly lineCount: number,\n\t\tvisibleLineCountTop: number,\n\t\tvisibleLineCountBottom: number,\n\t) {\n\t\tconst visibleLineCountTop2 = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n\t\tconst visibleLineCountBottom2 = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n\n\t\tsoftAssert(visibleLineCountTop === visibleLineCountTop2);\n\t\tsoftAssert(visibleLineCountBottom === visibleLineCountBottom2);\n\n\t\tthis._visibleLineCountTop.set(visibleLineCountTop2, undefined);\n\t\tthis._visibleLineCountBottom.set(visibleLineCountBottom2, undefined);\n\t}\n\n\tpublic setVisibleRanges(visibleRanges: LineRangeMapping[], tx: ITransaction): UnchangedRegion[] {\n\t\tconst result: UnchangedRegion[] = [];\n\n\t\tconst hiddenModified = new LineRangeSet(visibleRanges.map(r => r.modified)).subtractFrom(this.modifiedUnchangedRange);\n\n\t\tlet originalStartLineNumber = this.originalLineNumber;\n\t\tlet modifiedStartLineNumber = this.modifiedLineNumber;\n\t\tconst modifiedEndLineNumberEx = this.modifiedLineNumber + this.lineCount;\n\t\tif (hiddenModified.ranges.length === 0) {\n\t\t\tthis.showAll(tx);\n\t\t\tresult.push(this);\n\t\t} else {\n\t\t\tlet i = 0;\n\t\t\tfor (const r of hiddenModified.ranges) {\n\t\t\t\tconst isLast = i === hiddenModified.ranges.length - 1;\n\t\t\t\ti++;\n\n\t\t\t\tconst length = (isLast ? modifiedEndLineNumberEx : r.endLineNumberExclusive) - modifiedStartLineNumber;\n\n\t\t\t\tconst newR = new UnchangedRegion(originalStartLineNumber, modifiedStartLineNumber, length, 0, 0);\n\t\t\t\tnewR.setHiddenModifiedRange(r, tx);\n\t\t\t\tresult.push(newR);\n\n\t\t\t\toriginalStartLineNumber = newR.originalUnchangedRange.endLineNumberExclusive;\n\t\t\t\tmodifiedStartLineNumber = newR.modifiedUnchangedRange.endLineNumberExclusive;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic shouldHideControls(reader: IReader | undefined): boolean {\n\t\treturn this._shouldHideControls.read(reader);\n\t}\n\n\tpublic getHiddenOriginalRange(reader: IReader | undefined): LineRange {\n\t\treturn LineRange.ofLength(\n\t\t\tthis.originalLineNumber + this._visibleLineCountTop.read(reader),\n\t\t\tthis.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader),\n\t\t);\n\t}\n\n\tpublic getHiddenModifiedRange(reader: IReader | undefined): LineRange {\n\t\treturn LineRange.ofLength(\n\t\t\tthis.modifiedLineNumber + this._visibleLineCountTop.read(reader),\n\t\t\tthis.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader),\n\t\t);\n\t}\n\n\tpublic setHiddenModifiedRange(range: LineRange, tx: ITransaction) {\n\t\tconst visibleLineCountTop = range.startLineNumber - this.modifiedLineNumber;\n\t\tconst visibleLineCountBottom = (this.modifiedLineNumber + this.lineCount) - range.endLineNumberExclusive;\n\t\tthis.setState(visibleLineCountTop, visibleLineCountBottom, tx);\n\t}\n\n\tpublic getMaxVisibleLineCountTop() {\n\t\treturn this.lineCount - this._visibleLineCountBottom.get();\n\t}\n\n\tpublic getMaxVisibleLineCountBottom() {\n\t\treturn this.lineCount - this._visibleLineCountTop.get();\n\t}\n\n\tpublic showMoreAbove(count = 10, tx: ITransaction | undefined): void {\n\t\tconst maxVisibleLineCountTop = this.getMaxVisibleLineCountTop();\n\t\tthis._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + count, maxVisibleLineCountTop), tx);\n\t}\n\n\tpublic showMoreBelow(count = 10, tx: ITransaction | undefined): void {\n\t\tconst maxVisibleLineCountBottom = this.lineCount - this._visibleLineCountTop.get();\n\t\tthis._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + count, maxVisibleLineCountBottom), tx);\n\t}\n\n\tpublic showAll(tx: ITransaction | undefined): void {\n\t\tthis._visibleLineCountBottom.set(this.lineCount - this._visibleLineCountTop.get(), tx);\n\t}\n\n\tpublic showModifiedLine(lineNumber: number, preference: RevealPreference, tx: ITransaction | undefined): void {\n\t\tconst top = lineNumber + 1 - (this.modifiedLineNumber + this._visibleLineCountTop.get());\n\t\tconst bottom = (this.modifiedLineNumber - this._visibleLineCountBottom.get() + this.lineCount) - lineNumber;\n\t\tif (preference === RevealPreference.FromCloserSide && top < bottom || preference === RevealPreference.FromTop) {\n\t\t\tthis._visibleLineCountTop.set(this._visibleLineCountTop.get() + top, tx);\n\t\t} else {\n\t\t\tthis._visibleLineCountBottom.set(this._visibleLineCountBottom.get() + bottom, tx);\n\t\t}\n\t}\n\n\tpublic showOriginalLine(lineNumber: number, preference: RevealPreference, tx: ITransaction | undefined): void {\n\t\tconst top = lineNumber - this.originalLineNumber;\n\t\tconst bottom = (this.originalLineNumber + this.lineCount) - lineNumber;\n\t\tif (preference === RevealPreference.FromCloserSide && top < bottom || preference === RevealPreference.FromTop) {\n\t\t\tthis._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + bottom - top, this.getMaxVisibleLineCountTop()), tx);\n\t\t} else {\n\t\t\tthis._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + top - bottom, this.getMaxVisibleLineCountBottom()), tx);\n\t\t}\n\t}\n\n\tpublic collapseAll(tx: ITransaction | undefined): void {\n\t\tthis._visibleLineCountTop.set(0, tx);\n\t\tthis._visibleLineCountBottom.set(0, tx);\n\t}\n\n\tpublic setState(visibleLineCountTop: number, visibleLineCountBottom: number, tx: ITransaction | undefined): void {\n\t\tvisibleLineCountTop = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n\t\tvisibleLineCountBottom = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n\n\t\tthis._visibleLineCountTop.set(visibleLineCountTop, tx);\n\t\tthis._visibleLineCountBottom.set(visibleLineCountBottom, tx);\n\t}\n}\n\nexport const enum RevealPreference {\n\tFromCloserSide,\n\tFromTop,\n\tFromBottom,\n}\n\nfunction applyOriginalEdits(diff: IDocumentDiff, textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): IDocumentDiff | undefined {\n\treturn undefined;\n\t/*\n\tTODO@hediet\n\tif (textEdits.length === 0) {\n\t\treturn diff;\n\t}\n\n\tconst diff2 = flip(diff);\n\tconst diff3 = applyModifiedEdits(diff2, textEdits, modifiedTextModel, originalTextModel);\n\tif (!diff3) {\n\t\treturn undefined;\n\t}\n\treturn flip(diff3);*/\n}\n/*\nfunction flip(diff: IDocumentDiff): IDocumentDiff {\n\treturn {\n\t\tchanges: diff.changes.map(c => c.flip()),\n\t\tmoves: diff.moves.map(m => m.flip()),\n\t\tidentical: diff.identical,\n\t\tquitEarly: diff.quitEarly,\n\t};\n}\n*/\nfunction applyModifiedEdits(diff: IDocumentDiff, textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): IDocumentDiff | undefined {\n\treturn undefined;\n\t/*\n\tTODO@hediet\n\tif (textEdits.length === 0) {\n\t\treturn diff;\n\t}\n\tif (diff.changes.some(c => !c.innerChanges) || diff.moves.length > 0) {\n\t\t// TODO support these cases\n\t\treturn undefined;\n\t}\n\n\tconst changes = applyModifiedEditsToLineRangeMappings(diff.changes, textEdits, originalTextModel, modifiedTextModel);\n\n\tconst moves = diff.moves.map(m => {\n\t\tconst newModifiedRange = applyEditToLineRange(m.lineRangeMapping.modified, textEdits);\n\t\treturn newModifiedRange ? new MovedText(\n\t\t\tnew SimpleLineRangeMapping(m.lineRangeMapping.original, newModifiedRange),\n\t\t\tapplyModifiedEditsToLineRangeMappings(m.changes, textEdits, originalTextModel, modifiedTextModel),\n\t\t) : undefined;\n\t}).filter(isDefined);\n\n\treturn {\n\t\tidentical: false,\n\t\tquitEarly: false,\n\t\tchanges,\n\t\tmoves,\n\t};*/\n}\n/*\nfunction applyEditToLineRange(range: LineRange, textEdits: TextEditInfo[]): LineRange | undefined {\n\tlet rangeStartLineNumber = range.startLineNumber;\n\tlet rangeEndLineNumberEx = range.endLineNumberExclusive;\n\n\tfor (let i = textEdits.length - 1; i >= 0; i--) {\n\t\tconst textEdit = textEdits[i];\n\t\tconst textEditStartLineNumber = lengthGetLineCount(textEdit.startOffset) + 1;\n\t\tconst textEditEndLineNumber = lengthGetLineCount(textEdit.endOffset) + 1;\n\t\tconst newLengthLineCount = lengthGetLineCount(textEdit.newLength);\n\t\tconst delta = newLengthLineCount - (textEditEndLineNumber - textEditStartLineNumber);\n\n\t\tif (textEditEndLineNumber < rangeStartLineNumber) {\n\t\t\t// the text edit is before us\n\t\t\trangeStartLineNumber += delta;\n\t\t\trangeEndLineNumberEx += delta;\n\t\t} else if (textEditStartLineNumber > rangeEndLineNumberEx) {\n\t\t\t// the text edit is after us\n\t\t\t// NOOP\n\t\t} else if (textEditStartLineNumber < rangeStartLineNumber && rangeEndLineNumberEx < textEditEndLineNumber) {\n\t\t\t// the range is fully contained in the text edit\n\t\t\treturn undefined;\n\t\t} else if (textEditStartLineNumber < rangeStartLineNumber && textEditEndLineNumber <= rangeEndLineNumberEx) {\n\t\t\t// the text edit ends inside our range\n\t\t\trangeStartLineNumber = textEditEndLineNumber + 1;\n\t\t\trangeStartLineNumber += delta;\n\t\t\trangeEndLineNumberEx += delta;\n\t\t} else if (rangeStartLineNumber <= textEditStartLineNumber && textEditEndLineNumber < rangeStartLineNumber) {\n\t\t\t// the text edit starts inside our range\n\t\t\trangeEndLineNumberEx = textEditStartLineNumber;\n\t\t} else {\n\t\t\trangeEndLineNumberEx += delta;\n\t\t}\n\t}\n\n\treturn new LineRange(rangeStartLineNumber, rangeEndLineNumberEx);\n}\n\nfunction applyModifiedEditsToLineRangeMappings(changes: readonly LineRangeMapping[], textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): LineRangeMapping[] {\n\tconst diffTextEdits = changes.flatMap(c => c.innerChanges!.map(c => new TextEditInfo(\n\t\tpositionToLength(c.originalRange.getStartPosition()),\n\t\tpositionToLength(c.originalRange.getEndPosition()),\n\t\tlengthOfRange(c.modifiedRange).toLength(),\n\t)));\n\n\tconst combined = combineTextEditInfos(diffTextEdits, textEdits);\n\n\tlet lastOriginalEndOffset = lengthZero;\n\tlet lastModifiedEndOffset = lengthZero;\n\tconst rangeMappings = combined.map(c => {\n\t\tconst modifiedStartOffset = lengthAdd(lastModifiedEndOffset, lengthDiffNonNegative(lastOriginalEndOffset, c.startOffset));\n\t\tlastOriginalEndOffset = c.endOffset;\n\t\tlastModifiedEndOffset = lengthAdd(modifiedStartOffset, c.newLength);\n\n\t\treturn new RangeMapping(\n\t\t\tRange.fromPositions(lengthToPosition(c.startOffset), lengthToPosition(c.endOffset)),\n\t\t\tRange.fromPositions(lengthToPosition(modifiedStartOffset), lengthToPosition(lastModifiedEndOffset)),\n\t\t);\n\t});\n\n\tconst newChanges = lineRangeMappingFromRangeMappings(\n\t\trangeMappings,\n\t\toriginalTextModel.getLinesContent(),\n\t\tmodifiedTextModel.getLinesContent(),\n\t);\n\treturn newChanges;\n}\n*/\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4128, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/inlineDiffDeletedCodeMargin.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/inlineDiffDeletedCodeMargin.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { addStandardDisposableListener, getDomNodePagePosition } from '../../../../../../base/browser/dom.js';\nimport { Action } from '../../../../../../base/common/actions.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { Disposable } from '../../../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { IEditorMouseEvent, MouseTargetType } from '../../../../editorBrowser.js';\nimport { CodeEditorWidget } from '../../../codeEditor/codeEditorWidget.js';\nimport { DiffEditorWidget } from '../../diffEditorWidget.js';\nimport { EditorOption } from '../../../../../common/config/editorOptions.js';\nimport { DetailedLineRangeMapping } from '../../../../../common/diff/rangeMapping.js';\nimport { EndOfLineSequence, ITextModel } from '../../../../../common/model.js';\nimport { localize } from '../../../../../../nls.js';\nimport { IClipboardService } from '../../../../../../platform/clipboard/common/clipboardService.js';\nimport { IContextMenuService } from '../../../../../../platform/contextview/browser/contextView.js';\n\nexport class InlineDiffDeletedCodeMargin extends Disposable {\n\tprivate readonly _diffActions: HTMLElement;\n\n\tprivate _visibility: boolean = false;\n\n\tget visibility(): boolean {\n\t\treturn this._visibility;\n\t}\n\n\tset visibility(_visibility: boolean) {\n\t\tif (this._visibility !== _visibility) {\n\t\t\tthis._visibility = _visibility;\n\t\t\tthis._diffActions.style.visibility = _visibility ? 'visible' : 'hidden';\n\t\t}\n\t}\n\n\tconstructor(\n\t\tprivate readonly _getViewZoneId: () => string,\n\t\tprivate readonly _marginDomNode: HTMLElement,\n\t\tprivate readonly _modifiedEditor: CodeEditorWidget,\n\t\tprivate readonly _diff: DetailedLineRangeMapping,\n\t\tprivate readonly _editor: DiffEditorWidget,\n\t\tprivate readonly _viewLineCounts: number[],\n\t\tprivate readonly _originalTextModel: ITextModel,\n\t\tprivate readonly _contextMenuService: IContextMenuService,\n\t\tprivate readonly _clipboardService: IClipboardService,\n\t) {\n\t\tsuper();\n\n\t\t// make sure the diff margin shows above overlay.\n\t\tthis._marginDomNode.style.zIndex = '10';\n\n\t\tthis._diffActions = document.createElement('div');\n\t\tthis._diffActions.className = ThemeIcon.asClassName(Codicon.lightBulb) + ' lightbulb-glyph';\n\t\tthis._diffActions.style.position = 'absolute';\n\t\tconst lineHeight = this._modifiedEditor.getOption(EditorOption.lineHeight);\n\t\tthis._diffActions.style.right = '0px';\n\t\tthis._diffActions.style.visibility = 'hidden';\n\t\tthis._diffActions.style.height = `${lineHeight}px`;\n\t\tthis._diffActions.style.lineHeight = `${lineHeight}px`;\n\t\tthis._marginDomNode.appendChild(this._diffActions);\n\n\t\tlet currentLineNumberOffset = 0;\n\n\t\tconst useShadowDOM = _modifiedEditor.getOption(EditorOption.useShadowDOM) && !isIOS; // Do not use shadow dom on IOS #122035\n\t\tconst showContextMenu = (x: number, y: number) => {\n\t\t\tthis._contextMenuService.showContextMenu({\n\t\t\t\tdomForShadowRoot: useShadowDOM ? _modifiedEditor.getDomNode() ?? undefined : undefined,\n\t\t\t\tgetAnchor: () => ({ x, y }),\n\t\t\t\tgetActions: () => {\n\t\t\t\t\tconst actions: Action[] = [];\n\t\t\t\t\tconst isDeletion = _diff.modified.isEmpty;\n\n\t\t\t\t\t// default action\n\t\t\t\t\tactions.push(new Action(\n\t\t\t\t\t\t'diff.clipboard.copyDeletedContent',\n\t\t\t\t\t\tisDeletion\n\t\t\t\t\t\t\t? (_diff.original.length > 1\n\t\t\t\t\t\t\t\t? localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\n\t\t\t\t\t\t\t\t: localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"))\n\t\t\t\t\t\t\t: (_diff.original.length > 1\n\t\t\t\t\t\t\t\t? localize('diff.clipboard.copyChangedLinesContent.label', \"Copy changed lines\")\n\t\t\t\t\t\t\t\t: localize('diff.clipboard.copyChangedLinesContent.single.label', \"Copy changed line\")),\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\tconst originalText = this._originalTextModel.getValueInRange(_diff.original.toExclusiveRange());\n\t\t\t\t\t\t\tawait this._clipboardService.writeText(originalText);\n\t\t\t\t\t\t}\n\t\t\t\t\t));\n\n\t\t\t\t\tif (_diff.original.length > 1) {\n\t\t\t\t\t\tactions.push(new Action(\n\t\t\t\t\t\t\t'diff.clipboard.copyDeletedLineContent',\n\t\t\t\t\t\t\tisDeletion\n\t\t\t\t\t\t\t\t? localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\",\n\t\t\t\t\t\t\t\t\t_diff.original.startLineNumber + currentLineNumberOffset)\n\t\t\t\t\t\t\t\t: localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\",\n\t\t\t\t\t\t\t\t\t_diff.original.startLineNumber + currentLineNumberOffset),\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\t\tlet lineContent = this._originalTextModel.getLineContent(_diff.original.startLineNumber + currentLineNumberOffset);\n\t\t\t\t\t\t\t\tif (lineContent === '') {\n\t\t\t\t\t\t\t\t\t// empty line -> new line\n\t\t\t\t\t\t\t\t\tconst eof = this._originalTextModel.getEndOfLineSequence();\n\t\t\t\t\t\t\t\t\tlineContent = eof === EndOfLineSequence.LF ? '\\n' : '\\r\\n';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tawait this._clipboardService.writeText(lineContent);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t\tconst readOnly = _modifiedEditor.getOption(EditorOption.readOnly);\n\t\t\t\t\tif (!readOnly) {\n\t\t\t\t\t\tactions.push(new Action(\n\t\t\t\t\t\t\t'diff.inline.revertChange',\n\t\t\t\t\t\t\tlocalize('diff.inline.revertChange.label', \"Revert this change\"),\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\t\tthis._editor.revert(this._diff);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn actions;\n\t\t\t\t},\n\t\t\t\tautoSelectFirstItem: true\n\t\t\t});\n\t\t};\n\n\t\tthis._register(addStandardDisposableListener(this._diffActions, 'mousedown', e => {\n\t\t\tif (!e.leftButton) { return; }\n\n\t\t\tconst { top, height } = getDomNodePagePosition(this._diffActions);\n\t\t\tconst pad = Math.floor(lineHeight / 3);\n\t\t\te.preventDefault();\n\t\t\tshowContextMenu(e.posx, top + height + pad);\n\t\t}));\n\n\t\tthis._register(_modifiedEditor.onMouseMove((e: IEditorMouseEvent) => {\n\t\t\tif ((e.target.type === MouseTargetType.CONTENT_VIEW_ZONE || e.target.type === MouseTargetType.GUTTER_VIEW_ZONE) && e.target.detail.viewZoneId === this._getViewZoneId()) {\n\t\t\t\tcurrentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n\t\t\t\tthis.visibility = true;\n\t\t\t} else {\n\t\t\t\tthis.visibility = false;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(_modifiedEditor.onMouseDown((e: IEditorMouseEvent) => {\n\t\t\tif (!e.event.leftButton) { return; }\n\n\t\t\tif (e.target.type === MouseTargetType.CONTENT_VIEW_ZONE || e.target.type === MouseTargetType.GUTTER_VIEW_ZONE) {\n\t\t\t\tconst viewZoneId = e.target.detail.viewZoneId;\n\n\t\t\t\tif (viewZoneId === this._getViewZoneId()) {\n\t\t\t\t\te.event.preventDefault();\n\t\t\t\t\tcurrentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n\t\t\t\t\tshowContextMenu(e.event.posx, e.event.posy + lineHeight);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _updateLightBulbPosition(marginDomNode: HTMLElement, y: number, lineHeight: number): number {\n\t\tconst { top } = getDomNodePagePosition(marginDomNode);\n\t\tconst offset = y - top;\n\t\tconst lineNumberOffset = Math.floor(offset / lineHeight);\n\t\tconst newTop = lineNumberOffset * lineHeight;\n\t\tthis._diffActions.style.top = `${newTop}px`;\n\t\tif (this._viewLineCounts) {\n\t\t\tlet acc = 0;\n\t\t\tfor (let i = 0; i < this._viewLineCounts.length; i++) {\n\t\t\t\tacc += this._viewLineCounts[i];\n\t\t\t\tif (lineNumberOffset < acc) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn lineNumberOffset;\n\t}\n}\n"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;AAEhG,OAAO,EAAE,6BAA6B,EAAE,sBAAsB,EAAE,MAAM,uCAAuC,CAAC;AAC9G,OAAO,EAAE,MAAM,EAAE,MAAM,0CAA0C,CAAC;AAClE,OAAO,EAAE,OAAO,EAAE,MAAM,2CAA2C,CAAC;AACpE,OAAO,EAAE,UAAU,EAAE,MAAM,4CAA4C,CAAC;AACxE,OAAO,EAAE,KAAK,EAAE,MAAM,2CAA2C,CAAC;AAClE,OAAO,EAAE,SAAS,EAAE,MAAM,4CAA4C,CAAC;AAOvE,OAAO,EAAE,QAAQ,EAAE,MAAM,0BAA0B,CAAC;;;;;;;;AAI9C,MAAO,2BAA4B,SAAQ,0LAAU;IAK1D,IAAI,UAAU,GAAA;QACb,OAAO,IAAI,CAAC,WAAW,CAAC;IACzB,CAAC;IAED,IAAI,UAAU,CAAC,WAAoB,EAAA;QAClC,IAAI,IAAI,CAAC,WAAW,KAAK,WAAW,EAAE,CAAC;YACtC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,UAAU,GAAG,WAAW,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC;QACzE,CAAC;IACF,CAAC;IAED,YACkB,cAA4B,EAC5B,cAA2B,EAC3B,eAAiC,EACjC,KAA+B,EAC/B,OAAyB,EACzB,eAAyB,EACzB,kBAA8B,EAC9B,mBAAwC,EACxC,iBAAoC,CAAA;QAErD,KAAK,EAAE,CAAC;QAVS,IAAA,CAAA,cAAc,GAAd,cAAc,CAAc;QAC5B,IAAA,CAAA,cAAc,GAAd,cAAc,CAAa;QAC3B,IAAA,CAAA,eAAe,GAAf,eAAe,CAAkB;QACjC,IAAA,CAAA,KAAK,GAAL,KAAK,CAA0B;QAC/B,IAAA,CAAA,OAAO,GAAP,OAAO,CAAkB;QACzB,IAAA,CAAA,eAAe,GAAf,eAAe,CAAU;QACzB,IAAA,CAAA,kBAAkB,GAAlB,kBAAkB,CAAY;QAC9B,IAAA,CAAA,mBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,IAAA,CAAA,iBAAiB,GAAjB,iBAAiB,CAAmB;QAtB9C,IAAA,CAAA,WAAW,GAAY,KAAK,CAAC;QA0BpC,iDAAiD;QACjD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;QAExC,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAClD,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,yLAAS,CAAC,WAAW,CAAC,sLAAO,CAAC,SAAS,CAAC,GAAG,kBAAkB,CAAC;QAC5F,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QAC9C,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAA,GAAA,2BAAA,GAAyB,CAAC;QAC3E,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QACtC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;QAC9C,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,UAAU,CAAA,EAAA,CAAI,CAAC;QACnD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,UAAU,CAAA,EAAA,CAAI,CAAC;QACvD,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAEnD,IAAI,uBAAuB,GAAG,CAAC,CAAC;QAEhC,MAAM,YAAY,GAAG,eAAe,CAAC,SAAS,CAAA,IAAA,6BAAA,GAA2B,KAAI,CAAC,oLAAK,CAAC,CAAC,uCAAuC;QAC5H,MAAM,eAAe,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,EAAE;YAChD,IAAI,CAAC,mBAAmB,CAAC,eAAe,CAAC;gBACxC,gBAAgB,EAAE,YAAY,CAAC,CAAC,CAAC,eAAe,CAAC,UAAU,EAAE,IAAI,SAAS,CAAC,CAAC,CAAC,SAAS;gBACtF,SAAS,EAAE,GAAG,CAAG,CAAD,AAAE;wBAAE,CAAC;wBAAE,CAAC;oBAAA,CAAE,CAAC;gBAC3B,UAAU,EAAE,GAAG,EAAE;oBAChB,MAAM,OAAO,GAAa,EAAE,CAAC;oBAC7B,MAAM,UAAU,GAAG,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC;oBAE1C,iBAAiB;oBACjB,OAAO,CAAC,IAAI,CAAC,IAAI,oLAAM,CACtB,mCAAmC,EACnC,UAAU,GACN,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,OACzB,gLAAQ,EAAC,GAA8C,EAAE,oBAAoB,CAAC,OAC9E,gLAAQ,EAAC,GAAqD,EAAE,mBAAmB,CAAC,CAAC,EACrF,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,OACzB,gLAAQ,EAAC,GAA8C,EAAE,oBAAoB,CAAC,OAC9E,gLAAQ,EAAC,GAAqD,EAAE,mBAAmB,CAAC,CAAC,CACzF,SAAS,EACT,IAAI,EACJ,KAAK,IAAI,EAAE;wBACV,MAAM,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,gBAAgB,EAAE,CAAC,CAAC;wBAChG,MAAM,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;oBACtD,CAAC,CACD,CAAC,CAAC;oBAEH,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;wBAC/B,OAAO,CAAC,IAAI,CAAC,IAAI,oLAAM,CACtB,uCAAuC,EACvC,UAAU,OACP,gLAAQ,EAAC,GAA6C,EAAE,yBAAyB,EAClF,KAAK,CAAC,QAAQ,CAAC,eAAe,GAAG,uBAAuB,CAAC,OACxD,gLAAQ,EAAC,GAA6C,EAAE,yBAAyB,EAClF,KAAK,CAAC,QAAQ,CAAC,eAAe,GAAG,uBAAuB,CAAC,EAC3D,SAAS,EACT,IAAI,EACJ,KAAK,IAAI,EAAE;4BACV,IAAI,WAAW,GAAG,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,GAAG,uBAAuB,CAAC,CAAC;4BACnH,IAAI,WAAW,KAAK,EAAE,EAAE,CAAC;gCACxB,yBAAyB;gCACzB,MAAM,GAAG,GAAG,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,EAAE,CAAC;gCAC3D,WAAW,GAAG,GAAG,KAAA,EAAA,wBAAA,EAAyB,CAAC,CAAC,EAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC;4BAC5D,CAAC;4BACD,MAAM,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;wBACrD,CAAC,CACD,CAAC,CAAC;oBACJ,CAAC;oBACD,MAAM,QAAQ,GAAG,eAAe,CAAC,SAAS,CAAA,IAAA,yBAAA,GAAuB,CAAC;oBAClE,IAAI,CAAC,QAAQ,EAAE,CAAC;wBACf,OAAO,CAAC,IAAI,CAAC,IAAI,oLAAM,CACtB,0BAA0B,MAC1B,gLAAQ,EAAC,GAAgC,EAAE,oBAAoB,CAAC,EAChE,SAAS,EACT,IAAI,EACJ,KAAK,IAAI,EAAE;4BACV,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;wBACjC,CAAC,CAAC,CACF,CAAC;oBACH,CAAC;oBACD,OAAO,OAAO,CAAC;gBAChB,CAAC;gBACD,mBAAmB,EAAE,IAAI;aACzB,CAAC,CAAC;QACJ,CAAC,CAAC;QAEF,IAAI,CAAC,SAAS,KAAC,wMAA6B,EAAC,IAAI,CAAC,YAAY,EAAE,WAAW,GAAE,CAAC,CAAC,EAAE;YAChF,IAAI,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;gBAAC,OAAO;YAAC,CAAC;YAE9B,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,OAAG,iMAAsB,EAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAClE,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;YACvC,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,eAAe,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,GAAG,MAAM,GAAG,GAAG,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAoB,EAAE,EAAE;YACnE,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,KAAA,EAAA,qCAAA,EAAsC,KAAI,CAAC,CAAC,MAAM,CAAC,IAAI,KAAA,EAAA,oCAAA,GAAqC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,KAAK,IAAI,CAAC,cAAc,EAAE,EAAE,CAAC;gBACzK,uBAAuB,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC;gBACjH,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACxB,CAAC,MAAM,CAAC;gBACP,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACzB,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAoB,EAAE,EAAE;YACnE,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;gBAAC,OAAO;YAAC,CAAC;YAEpC,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,KAAA,EAAA,qCAAA,EAAsC,KAAI,CAAC,CAAC,MAAM,CAAC,IAAI,KAAA,EAAA,oCAAA,EAAqC,GAAE,CAAC;gBAC/G,MAAM,UAAU,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC;gBAE9C,IAAI,UAAU,KAAK,IAAI,CAAC,cAAc,EAAE,EAAE,CAAC;oBAC1C,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;oBACzB,uBAAuB,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC;oBACjH,eAAe,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC,CAAC;gBAC1D,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,wBAAwB,CAAC,aAA0B,EAAE,CAAS,EAAE,UAAkB,EAAA;QACzF,MAAM,EAAE,GAAG,EAAE,OAAG,iMAAsB,EAAC,aAAa,CAAC,CAAC;QACtD,MAAM,MAAM,GAAG,CAAC,GAAG,GAAG,CAAC;QACvB,MAAM,gBAAgB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC;QACzD,MAAM,MAAM,GAAG,gBAAgB,GAAG,UAAU,CAAC;QAC7C,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,MAAM,CAAA,EAAA,CAAI,CAAC;QAC5C,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,IAAI,GAAG,GAAG,CAAC,CAAC;YACZ,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;gBACtD,GAAG,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;gBAC/B,IAAI,gBAAgB,GAAG,GAAG,EAAE,CAAC;oBAC5B,OAAO,CAAC,CAAC;gBACV,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,gBAAgB,CAAC;IACzB,CAAC;CACD","debugId":null}},
    {"offset": {"line": 4274, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/renderLines.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/renderLines.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/renderLines.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createTrustedTypesPolicy } from '../../../../../../base/browser/trustedTypes.js';\nimport { applyFontInfo } from '../../../../config/domFontInfo.js';\nimport { ICodeEditor } from '../../../../editorBrowser.js';\nimport { EditorFontLigatures, EditorOption, FindComputedEditorOptionValueById } from '../../../../../common/config/editorOptions.js';\nimport { FontInfo } from '../../../../../common/config/fontInfo.js';\nimport { StringBuilder } from '../../../../../common/core/stringBuilder.js';\nimport { ModelLineProjectionData } from '../../../../../common/modelLineProjectionData.js';\nimport { IViewLineTokens, LineTokens } from '../../../../../common/tokens/lineTokens.js';\nimport { LineDecoration } from '../../../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../../../common/viewModel.js';\nimport { InlineDecoration } from '../../../../../common/viewModel/inlineDecorations.js';\n\nconst ttPolicy = createTrustedTypesPolicy('diffEditorWidget', { createHTML: value => value });\n\nexport function renderLines(source: LineSource, options: RenderOptions, decorations: InlineDecoration[], domNode: HTMLElement, noExtra = false): RenderLinesResult {\n\tapplyFontInfo(domNode, options.fontInfo);\n\n\tconst hasCharChanges = (decorations.length > 0);\n\n\tconst sb = new StringBuilder(10000);\n\tlet maxCharsPerLine = 0;\n\tlet renderedLineCount = 0;\n\tconst viewLineCounts: number[] = [];\n\tfor (let lineIndex = 0; lineIndex < source.lineTokens.length; lineIndex++) {\n\t\tconst lineNumber = lineIndex + 1;\n\t\tconst lineTokens = source.lineTokens[lineIndex];\n\t\tconst lineBreakData = source.lineBreakData[lineIndex];\n\t\tconst actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, Number.MAX_SAFE_INTEGER);\n\n\t\tif (lineBreakData) {\n\t\t\tlet lastBreakOffset = 0;\n\t\t\tfor (const breakOffset of lineBreakData.breakOffsets) {\n\t\t\t\tconst viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n\t\t\t\tmaxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(\n\t\t\t\t\trenderedLineCount,\n\t\t\t\t\tviewLineTokens,\n\t\t\t\t\tLineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset),\n\t\t\t\t\thasCharChanges,\n\t\t\t\t\tsource.mightContainNonBasicASCII,\n\t\t\t\t\tsource.mightContainRTL,\n\t\t\t\t\toptions,\n\t\t\t\t\tsb,\n\t\t\t\t\tnoExtra,\n\t\t\t\t));\n\t\t\t\trenderedLineCount++;\n\t\t\t\tlastBreakOffset = breakOffset;\n\t\t\t}\n\t\t\tviewLineCounts.push(lineBreakData.breakOffsets.length);\n\t\t} else {\n\t\t\tviewLineCounts.push(1);\n\t\t\tmaxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(\n\t\t\t\trenderedLineCount,\n\t\t\t\tlineTokens,\n\t\t\t\tactualDecorations,\n\t\t\t\thasCharChanges,\n\t\t\t\tsource.mightContainNonBasicASCII,\n\t\t\t\tsource.mightContainRTL,\n\t\t\t\toptions,\n\t\t\t\tsb,\n\t\t\t\tnoExtra,\n\t\t\t));\n\t\t\trenderedLineCount++;\n\t\t}\n\t}\n\tmaxCharsPerLine += options.scrollBeyondLastColumn;\n\n\tconst html = sb.build();\n\tconst trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n\tdomNode.innerHTML = trustedhtml as string;\n\tconst minWidthInPx = (maxCharsPerLine * options.typicalHalfwidthCharacterWidth);\n\n\treturn {\n\t\theightInLines: renderedLineCount,\n\t\tminWidthInPx,\n\t\tviewLineCounts,\n\t};\n}\n\n\nexport class LineSource {\n\tconstructor(\n\t\tpublic readonly lineTokens: LineTokens[],\n\t\tpublic readonly lineBreakData: (ModelLineProjectionData | null)[] = lineTokens.map(t => null),\n\t\tpublic readonly mightContainNonBasicASCII: boolean = true,\n\t\tpublic readonly mightContainRTL: boolean = true,\n\t) { }\n}\n\nexport class RenderOptions {\n\tpublic static fromEditor(editor: ICodeEditor): RenderOptions {\n\n\t\tconst modifiedEditorOptions = editor.getOptions();\n\t\tconst fontInfo = modifiedEditorOptions.get(EditorOption.fontInfo);\n\t\tconst layoutInfo = modifiedEditorOptions.get(EditorOption.layoutInfo);\n\n\t\treturn new RenderOptions(\n\t\t\teditor.getModel()?.getOptions().tabSize || 0,\n\t\t\tfontInfo,\n\t\t\tmodifiedEditorOptions.get(EditorOption.disableMonospaceOptimizations),\n\t\t\tfontInfo.typicalHalfwidthCharacterWidth,\n\t\t\tmodifiedEditorOptions.get(EditorOption.scrollBeyondLastColumn),\n\n\t\t\tmodifiedEditorOptions.get(EditorOption.lineHeight),\n\n\t\t\tlayoutInfo.decorationsWidth,\n\t\t\tmodifiedEditorOptions.get(EditorOption.stopRenderingLineAfter),\n\t\t\tmodifiedEditorOptions.get(EditorOption.renderWhitespace),\n\t\t\tmodifiedEditorOptions.get(EditorOption.renderControlCharacters),\n\t\t\tmodifiedEditorOptions.get(EditorOption.fontLigatures),\n\t\t\tmodifiedEditorOptions.get(EditorOption.scrollbar).verticalScrollbarSize,\n\t\t);\n\t}\n\n\tconstructor(\n\t\tpublic readonly tabSize: number,\n\t\tpublic readonly fontInfo: FontInfo,\n\t\tpublic readonly disableMonospaceOptimizations: boolean,\n\t\tpublic readonly typicalHalfwidthCharacterWidth: number,\n\t\tpublic readonly scrollBeyondLastColumn: number,\n\t\tpublic readonly lineHeight: number,\n\t\tpublic readonly lineDecorationsWidth: number,\n\t\tpublic readonly stopRenderingLineAfter: number,\n\t\tpublic readonly renderWhitespace: FindComputedEditorOptionValueById<EditorOption.renderWhitespace>,\n\t\tpublic readonly renderControlCharacters: boolean,\n\t\tpublic readonly fontLigatures: FindComputedEditorOptionValueById<EditorOption.fontLigatures>,\n\t\tpublic readonly verticalScrollbarSize: number,\n\t\tpublic readonly setWidth = true,\n\t) { }\n\n\tpublic withSetWidth(setWidth: boolean): RenderOptions {\n\t\treturn new RenderOptions(\n\t\t\tthis.tabSize,\n\t\t\tthis.fontInfo,\n\t\t\tthis.disableMonospaceOptimizations,\n\t\t\tthis.typicalHalfwidthCharacterWidth,\n\t\t\tthis.scrollBeyondLastColumn,\n\t\t\tthis.lineHeight,\n\t\t\tthis.lineDecorationsWidth,\n\t\t\tthis.stopRenderingLineAfter,\n\t\t\tthis.renderWhitespace,\n\t\t\tthis.renderControlCharacters,\n\t\t\tthis.fontLigatures,\n\t\t\tthis.verticalScrollbarSize,\n\t\t\tsetWidth,\n\t\t);\n\t}\n\n\tpublic withScrollBeyondLastColumn(scrollBeyondLastColumn: number): RenderOptions {\n\t\treturn new RenderOptions(\n\t\t\tthis.tabSize,\n\t\t\tthis.fontInfo,\n\t\t\tthis.disableMonospaceOptimizations,\n\t\t\tthis.typicalHalfwidthCharacterWidth,\n\t\t\tscrollBeyondLastColumn,\n\t\t\tthis.lineHeight,\n\t\t\tthis.lineDecorationsWidth,\n\t\t\tthis.stopRenderingLineAfter,\n\t\t\tthis.renderWhitespace,\n\t\t\tthis.renderControlCharacters,\n\t\t\tthis.fontLigatures,\n\t\t\tthis.verticalScrollbarSize,\n\t\t\tthis.setWidth,\n\t\t);\n\t}\n}\n\nexport interface RenderLinesResult {\n\tminWidthInPx: number;\n\theightInLines: number;\n\tviewLineCounts: number[];\n}\n\nfunction renderOriginalLine(\n\tviewLineIdx: number,\n\tlineTokens: IViewLineTokens,\n\tdecorations: LineDecoration[],\n\thasCharChanges: boolean,\n\tmightContainNonBasicASCII: boolean,\n\tmightContainRTL: boolean,\n\toptions: RenderOptions,\n\tsb: StringBuilder,\n\tnoExtra: boolean,\n): number {\n\n\tsb.appendString('<div class=\"view-line');\n\tif (!noExtra && !hasCharChanges) {\n\t\t// No char changes\n\t\tsb.appendString(' char-delete');\n\t}\n\tsb.appendString('\" style=\"top:');\n\tsb.appendString(String(viewLineIdx * options.lineHeight));\n\tif (options.setWidth) {\n\t\tsb.appendString('px;width:1000000px;\">');\n\t} else {\n\t\tsb.appendString('px;\">');\n\t}\n\n\tconst lineContent = lineTokens.getLineContent();\n\tconst isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n\tconst containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n\tconst output = renderViewLine(new RenderLineInput(\n\t\t(options.fontInfo.isMonospace && !options.disableMonospaceOptimizations),\n\t\toptions.fontInfo.canUseHalfwidthRightwardsArrow,\n\t\tlineContent,\n\t\tfalse,\n\t\tisBasicASCII,\n\t\tcontainsRTL,\n\t\t0,\n\t\tlineTokens,\n\t\tdecorations,\n\t\toptions.tabSize,\n\t\t0,\n\t\toptions.fontInfo.spaceWidth,\n\t\toptions.fontInfo.middotWidth,\n\t\toptions.fontInfo.wsmiddotWidth,\n\t\toptions.stopRenderingLineAfter,\n\t\toptions.renderWhitespace,\n\t\toptions.renderControlCharacters,\n\t\toptions.fontLigatures !== EditorFontLigatures.OFF,\n\t\tnull, // Send no selections, original line cannot be selected\n\t\tnull,\n\t\toptions.verticalScrollbarSize\n\t), sb);\n\n\tsb.appendString('</div>');\n\n\treturn output.characterMapping.getHorizontalOffset(output.characterMapping.length);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createTrustedTypesPolicy } from '../../../../../../base/browser/trustedTypes.js';\nimport { applyFontInfo } from '../../../../config/domFontInfo.js';\nimport { ICodeEditor } from '../../../../editorBrowser.js';\nimport { EditorFontLigatures, EditorOption, FindComputedEditorOptionValueById } from '../../../../../common/config/editorOptions.js';\nimport { FontInfo } from '../../../../../common/config/fontInfo.js';\nimport { StringBuilder } from '../../../../../common/core/stringBuilder.js';\nimport { ModelLineProjectionData } from '../../../../../common/modelLineProjectionData.js';\nimport { IViewLineTokens, LineTokens } from '../../../../../common/tokens/lineTokens.js';\nimport { LineDecoration } from '../../../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../../../common/viewModel.js';\nimport { InlineDecoration } from '../../../../../common/viewModel/inlineDecorations.js';\n\nconst ttPolicy = createTrustedTypesPolicy('diffEditorWidget', { createHTML: value => value });\n\nexport function renderLines(source: LineSource, options: RenderOptions, decorations: InlineDecoration[], domNode: HTMLElement, noExtra = false): RenderLinesResult {\n\tapplyFontInfo(domNode, options.fontInfo);\n\n\tconst hasCharChanges = (decorations.length > 0);\n\n\tconst sb = new StringBuilder(10000);\n\tlet maxCharsPerLine = 0;\n\tlet renderedLineCount = 0;\n\tconst viewLineCounts: number[] = [];\n\tfor (let lineIndex = 0; lineIndex < source.lineTokens.length; lineIndex++) {\n\t\tconst lineNumber = lineIndex + 1;\n\t\tconst lineTokens = source.lineTokens[lineIndex];\n\t\tconst lineBreakData = source.lineBreakData[lineIndex];\n\t\tconst actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, Number.MAX_SAFE_INTEGER);\n\n\t\tif (lineBreakData) {\n\t\t\tlet lastBreakOffset = 0;\n\t\t\tfor (const breakOffset of lineBreakData.breakOffsets) {\n\t\t\t\tconst viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n\t\t\t\tmaxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(\n\t\t\t\t\trenderedLineCount,\n\t\t\t\t\tviewLineTokens,\n\t\t\t\t\tLineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset),\n\t\t\t\t\thasCharChanges,\n\t\t\t\t\tsource.mightContainNonBasicASCII,\n\t\t\t\t\tsource.mightContainRTL,\n\t\t\t\t\toptions,\n\t\t\t\t\tsb,\n\t\t\t\t\tnoExtra,\n\t\t\t\t));\n\t\t\t\trenderedLineCount++;\n\t\t\t\tlastBreakOffset = breakOffset;\n\t\t\t}\n\t\t\tviewLineCounts.push(lineBreakData.breakOffsets.length);\n\t\t} else {\n\t\t\tviewLineCounts.push(1);\n\t\t\tmaxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(\n\t\t\t\trenderedLineCount,\n\t\t\t\tlineTokens,\n\t\t\t\tactualDecorations,\n\t\t\t\thasCharChanges,\n\t\t\t\tsource.mightContainNonBasicASCII,\n\t\t\t\tsource.mightContainRTL,\n\t\t\t\toptions,\n\t\t\t\tsb,\n\t\t\t\tnoExtra,\n\t\t\t));\n\t\t\trenderedLineCount++;\n\t\t}\n\t}\n\tmaxCharsPerLine += options.scrollBeyondLastColumn;\n\n\tconst html = sb.build();\n\tconst trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n\tdomNode.innerHTML = trustedhtml as string;\n\tconst minWidthInPx = (maxCharsPerLine * options.typicalHalfwidthCharacterWidth);\n\n\treturn {\n\t\theightInLines: renderedLineCount,\n\t\tminWidthInPx,\n\t\tviewLineCounts,\n\t};\n}\n\n\nexport class LineSource {\n\tconstructor(\n\t\tpublic readonly lineTokens: LineTokens[],\n\t\tpublic readonly lineBreakData: (ModelLineProjectionData | null)[] = lineTokens.map(t => null),\n\t\tpublic readonly mightContainNonBasicASCII: boolean = true,\n\t\tpublic readonly mightContainRTL: boolean = true,\n\t) { }\n}\n\nexport class RenderOptions {\n\tpublic static fromEditor(editor: ICodeEditor): RenderOptions {\n\n\t\tconst modifiedEditorOptions = editor.getOptions();\n\t\tconst fontInfo = modifiedEditorOptions.get(EditorOption.fontInfo);\n\t\tconst layoutInfo = modifiedEditorOptions.get(EditorOption.layoutInfo);\n\n\t\treturn new RenderOptions(\n\t\t\teditor.getModel()?.getOptions().tabSize || 0,\n\t\t\tfontInfo,\n\t\t\tmodifiedEditorOptions.get(EditorOption.disableMonospaceOptimizations),\n\t\t\tfontInfo.typicalHalfwidthCharacterWidth,\n\t\t\tmodifiedEditorOptions.get(EditorOption.scrollBeyondLastColumn),\n\n\t\t\tmodifiedEditorOptions.get(EditorOption.lineHeight),\n\n\t\t\tlayoutInfo.decorationsWidth,\n\t\t\tmodifiedEditorOptions.get(EditorOption.stopRenderingLineAfter),\n\t\t\tmodifiedEditorOptions.get(EditorOption.renderWhitespace),\n\t\t\tmodifiedEditorOptions.get(EditorOption.renderControlCharacters),\n\t\t\tmodifiedEditorOptions.get(EditorOption.fontLigatures),\n\t\t\tmodifiedEditorOptions.get(EditorOption.scrollbar).verticalScrollbarSize,\n\t\t);\n\t}\n\n\tconstructor(\n\t\tpublic readonly tabSize: number,\n\t\tpublic readonly fontInfo: FontInfo,\n\t\tpublic readonly disableMonospaceOptimizations: boolean,\n\t\tpublic readonly typicalHalfwidthCharacterWidth: number,\n\t\tpublic readonly scrollBeyondLastColumn: number,\n\t\tpublic readonly lineHeight: number,\n\t\tpublic readonly lineDecorationsWidth: number,\n\t\tpublic readonly stopRenderingLineAfter: number,\n\t\tpublic readonly renderWhitespace: FindComputedEditorOptionValueById<EditorOption.renderWhitespace>,\n\t\tpublic readonly renderControlCharacters: boolean,\n\t\tpublic readonly fontLigatures: FindComputedEditorOptionValueById<EditorOption.fontLigatures>,\n\t\tpublic readonly verticalScrollbarSize: number,\n\t\tpublic readonly setWidth = true,\n\t) { }\n\n\tpublic withSetWidth(setWidth: boolean): RenderOptions {\n\t\treturn new RenderOptions(\n\t\t\tthis.tabSize,\n\t\t\tthis.fontInfo,\n\t\t\tthis.disableMonospaceOptimizations,\n\t\t\tthis.typicalHalfwidthCharacterWidth,\n\t\t\tthis.scrollBeyondLastColumn,\n\t\t\tthis.lineHeight,\n\t\t\tthis.lineDecorationsWidth,\n\t\t\tthis.stopRenderingLineAfter,\n\t\t\tthis.renderWhitespace,\n\t\t\tthis.renderControlCharacters,\n\t\t\tthis.fontLigatures,\n\t\t\tthis.verticalScrollbarSize,\n\t\t\tsetWidth,\n\t\t);\n\t}\n\n\tpublic withScrollBeyondLastColumn(scrollBeyondLastColumn: number): RenderOptions {\n\t\treturn new RenderOptions(\n\t\t\tthis.tabSize,\n\t\t\tthis.fontInfo,\n\t\t\tthis.disableMonospaceOptimizations,\n\t\t\tthis.typicalHalfwidthCharacterWidth,\n\t\t\tscrollBeyondLastColumn,\n\t\t\tthis.lineHeight,\n\t\t\tthis.lineDecorationsWidth,\n\t\t\tthis.stopRenderingLineAfter,\n\t\t\tthis.renderWhitespace,\n\t\t\tthis.renderControlCharacters,\n\t\t\tthis.fontLigatures,\n\t\t\tthis.verticalScrollbarSize,\n\t\t\tthis.setWidth,\n\t\t);\n\t}\n}\n\nexport interface RenderLinesResult {\n\tminWidthInPx: number;\n\theightInLines: number;\n\tviewLineCounts: number[];\n}\n\nfunction renderOriginalLine(\n\tviewLineIdx: number,\n\tlineTokens: IViewLineTokens,\n\tdecorations: LineDecoration[],\n\thasCharChanges: boolean,\n\tmightContainNonBasicASCII: boolean,\n\tmightContainRTL: boolean,\n\toptions: RenderOptions,\n\tsb: StringBuilder,\n\tnoExtra: boolean,\n): number {\n\n\tsb.appendString('<div class=\"view-line');\n\tif (!noExtra && !hasCharChanges) {\n\t\t// No char changes\n\t\tsb.appendString(' char-delete');\n\t}\n\tsb.appendString('\" style=\"top:');\n\tsb.appendString(String(viewLineIdx * options.lineHeight));\n\tif (options.setWidth) {\n\t\tsb.appendString('px;width:1000000px;\">');\n\t} else {\n\t\tsb.appendString('px;\">');\n\t}\n\n\tconst lineContent = lineTokens.getLineContent();\n\tconst isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n\tconst containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n\tconst output = renderViewLine(new RenderLineInput(\n\t\t(options.fontInfo.isMonospace && !options.disableMonospaceOptimizations),\n\t\toptions.fontInfo.canUseHalfwidthRightwardsArrow,\n\t\tlineContent,\n\t\tfalse,\n\t\tisBasicASCII,\n\t\tcontainsRTL,\n\t\t0,\n\t\tlineTokens,\n\t\tdecorations,\n\t\toptions.tabSize,\n\t\t0,\n\t\toptions.fontInfo.spaceWidth,\n\t\toptions.fontInfo.middotWidth,\n\t\toptions.fontInfo.wsmiddotWidth,\n\t\toptions.stopRenderingLineAfter,\n\t\toptions.renderWhitespace,\n\t\toptions.renderControlCharacters,\n\t\toptions.fontLigatures !== EditorFontLigatures.OFF,\n\t\tnull, // Send no selections, original line cannot be selected\n\t\tnull,\n\t\toptions.verticalScrollbarSize\n\t), sb);\n\n\tsb.appendString('</div>');\n\n\treturn output.characterMapping.getHorizontalOffset(output.characterMapping.length);\n}\n"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;AAEhG,OAAO,EAAE,wBAAwB,EAAE,MAAM,gDAAgD,CAAC;AAC1F,OAAO,EAAE,aAAa,EAAE,MAAM,mCAAmC,CAAC;AAElE,OAAO,EAAE,mBAAmB,EAAmD,MAAM,+CAA+C,CAAC;AAErI,OAAO,EAAE,aAAa,EAAE,MAAM,6CAA6C,CAAC;AAG5E,OAAO,EAAE,cAAc,EAAE,MAAM,qDAAqD,CAAC;AACrF,OAAO,EAAE,eAAe,EAAE,cAAc,EAAE,MAAM,sDAAsD,CAAC;AACvG,OAAO,EAAE,qBAAqB,EAAE,MAAM,oCAAoC,CAAC;;;;;;;;AAG3E,MAAM,QAAQ,OAAG,4MAAwB,EAAC,kBAAkB,EAAE;IAAE,UAAU,GAAE,KAAK,CAAC,EAAE,AAAC,KAAK;AAAA,CAAE,CAAC,CAAC;AAExF,SAAU,WAAW,CAAC,MAAkB,EAAE,OAAsB,EAAE,WAA+B,EAAE,OAAoB,EAAE,OAAO,GAAG,KAAK;QAC7I,4MAAa,EAAC,OAAO,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;IAEzC,MAAM,cAAc,GAAG,AAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAEhD,MAAM,EAAE,GAAG,IAAI,2MAAa,CAAC,KAAK,CAAC,CAAC;IACpC,IAAI,eAAe,GAAG,CAAC,CAAC;IACxB,IAAI,iBAAiB,GAAG,CAAC,CAAC;IAC1B,MAAM,cAAc,GAAa,EAAE,CAAC;IACpC,IAAK,IAAI,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,SAAS,EAAE,CAAE,CAAC;QAC3E,MAAM,UAAU,GAAG,SAAS,GAAG,CAAC,CAAC;QACjC,MAAM,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAChD,MAAM,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QACtD,MAAM,iBAAiB,GAAG,oNAAc,CAAC,MAAM,CAAC,WAAW,EAAE,UAAU,EAAE,CAAC,EAAE,MAAM,CAAC,gBAAgB,CAAC,CAAC;QAErG,IAAI,aAAa,EAAE,CAAC;YACnB,IAAI,eAAe,GAAG,CAAC,CAAC;YACxB,KAAK,MAAM,WAAW,IAAI,aAAa,CAAC,YAAY,CAAE,CAAC;gBACtD,MAAM,cAAc,GAAG,UAAU,CAAC,eAAe,CAAC,eAAe,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC;gBACnF,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,kBAAkB,CAC7D,iBAAiB,EACjB,cAAc,EACd,oNAAc,CAAC,cAAc,CAAC,iBAAiB,EAAE,eAAe,EAAE,WAAW,CAAC,EAC9E,cAAc,EACd,MAAM,CAAC,yBAAyB,EAChC,MAAM,CAAC,eAAe,EACtB,OAAO,EACP,EAAE,EACF,OAAO,CACP,CAAC,CAAC;gBACH,iBAAiB,EAAE,CAAC;gBACpB,eAAe,GAAG,WAAW,CAAC;YAC/B,CAAC;YACD,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QACxD,CAAC,MAAM,CAAC;YACP,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACvB,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,kBAAkB,CAC7D,iBAAiB,EACjB,UAAU,EACV,iBAAiB,EACjB,cAAc,EACd,MAAM,CAAC,yBAAyB,EAChC,MAAM,CAAC,eAAe,EACtB,OAAO,EACP,EAAE,EACF,OAAO,CACP,CAAC,CAAC;YACH,iBAAiB,EAAE,CAAC;QACrB,CAAC;IACF,CAAC;IACD,eAAe,IAAI,OAAO,CAAC,sBAAsB,CAAC;IAElD,MAAM,IAAI,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC;IACxB,MAAM,WAAW,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAChE,OAAO,CAAC,SAAS,GAAG,WAAqB,CAAC;IAC1C,MAAM,YAAY,GAAI,AAAD,eAAgB,GAAG,OAAO,CAAC,8BAA8B,CAAC,CAAC;IAEhF,OAAO;QACN,aAAa,EAAE,iBAAiB;QAChC,YAAY;QACZ,cAAc;KACd,CAAC;AACH,CAAC;AAGK,MAAO,UAAU;IACtB,YACiB,UAAwB,EACxB,gBAAoD,UAAU,CAAC,GAAG,EAAC,CAAC,CAAC,EAAE,AAAC,IAAI,CAAC,EAC7E,4BAAqC,IAAI,EACzC,kBAA2B,IAAI,CAAA;QAH/B,IAAA,CAAA,UAAU,GAAV,UAAU,CAAc;QACxB,IAAA,CAAA,aAAa,GAAb,aAAa,CAAgE;QAC7E,IAAA,CAAA,yBAAyB,GAAzB,yBAAyB,CAAgB;QACzC,IAAA,CAAA,eAAe,GAAf,eAAe,CAAgB;IAC5C,CAAC;CACL;AAEK,MAAO,aAAa;IAClB,MAAM,CAAC,UAAU,CAAC,MAAmB,EAAA;QAE3C,MAAM,qBAAqB,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;QAClD,MAAM,QAAQ,GAAG,qBAAqB,CAAC,GAAG,CAAA,GAAA,yBAAA,GAAuB,CAAC;QAClE,MAAM,UAAU,GAAG,qBAAqB,CAAC,GAAG,CAAA,IAAA,2BAAA,GAAyB,CAAC;QAEtE,OAAO,IAAI,aAAa,CACvB,MAAM,CAAC,QAAQ,EAAE,EAAE,UAAU,EAAE,CAAC,OAAO,IAAI,CAAC,EAC5C,QAAQ,EACR,qBAAqB,CAAC,GAAG,CAAA,GAAA,8CAAA,GAA4C,GACrE,QAAQ,CAAC,8BAA8B,EACvC,qBAAqB,CAAC,GAAG,CAAA,IAAA,uCAAA,GAAqC,GAE9D,qBAAqB,CAAC,GAAG,CAAA,GAAA,2BAAA,GAAyB,GAElD,UAAU,CAAC,gBAAgB,EAC3B,qBAAqB,CAAC,GAAG,CAAA,IAAA,uCAAA,GAAqC,GAC9D,qBAAqB,CAAC,GAAG,CAAA,IAAA,iCAAA,GAA+B,GACxD,qBAAqB,CAAC,GAAG,CAAA,IAAA,wCAAA,GAAsC,GAC/D,qBAAqB,CAAC,GAAG,CAAA,GAAA,8BAAA,GAA4B,GACrD,qBAAqB,CAAC,GAAG,CAAA,IAAA,0BAAA,GAAwB,EAAC,qBAAqB,CACvE,CAAC;IACH,CAAC;IAED,YACiB,OAAe,EACf,QAAkB,EAClB,6BAAsC,EACtC,8BAAsC,EACtC,sBAA8B,EAC9B,UAAkB,EAClB,oBAA4B,EAC5B,sBAA8B,EAC9B,gBAAkF,EAClF,uBAAgC,EAChC,aAA4E,EAC5E,qBAA6B,EAC7B,WAAW,IAAI,CAAA;QAZf,IAAA,CAAA,OAAO,GAAP,OAAO,CAAQ;QACf,IAAA,CAAA,QAAQ,GAAR,QAAQ,CAAU;QAClB,IAAA,CAAA,6BAA6B,GAA7B,6BAA6B,CAAS;QACtC,IAAA,CAAA,8BAA8B,GAA9B,8BAA8B,CAAQ;QACtC,IAAA,CAAA,sBAAsB,GAAtB,sBAAsB,CAAQ;QAC9B,IAAA,CAAA,UAAU,GAAV,UAAU,CAAQ;QAClB,IAAA,CAAA,oBAAoB,GAApB,oBAAoB,CAAQ;QAC5B,IAAA,CAAA,sBAAsB,GAAtB,sBAAsB,CAAQ;QAC9B,IAAA,CAAA,gBAAgB,GAAhB,gBAAgB,CAAkE;QAClF,IAAA,CAAA,uBAAuB,GAAvB,uBAAuB,CAAS;QAChC,IAAA,CAAA,aAAa,GAAb,aAAa,CAA+D;QAC5E,IAAA,CAAA,qBAAqB,GAArB,qBAAqB,CAAQ;QAC7B,IAAA,CAAA,QAAQ,GAAR,QAAQ,CAAO;IAC5B,CAAC;IAEE,YAAY,CAAC,QAAiB,EAAA;QACpC,OAAO,IAAI,aAAa,CACvB,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,6BAA6B,EAClC,IAAI,CAAC,8BAA8B,EACnC,IAAI,CAAC,sBAAsB,EAC3B,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,oBAAoB,EACzB,IAAI,CAAC,sBAAsB,EAC3B,IAAI,CAAC,gBAAgB,EACrB,IAAI,CAAC,uBAAuB,EAC5B,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,qBAAqB,EAC1B,QAAQ,CACR,CAAC;IACH,CAAC;IAEM,0BAA0B,CAAC,sBAA8B,EAAA;QAC/D,OAAO,IAAI,aAAa,CACvB,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,6BAA6B,EAClC,IAAI,CAAC,8BAA8B,EACnC,sBAAsB,EACtB,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,oBAAoB,EACzB,IAAI,CAAC,sBAAsB,EAC3B,IAAI,CAAC,gBAAgB,EACrB,IAAI,CAAC,uBAAuB,EAC5B,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,qBAAqB,EAC1B,IAAI,CAAC,QAAQ,CACb,CAAC;IACH,CAAC;CACD;AAQD,SAAS,kBAAkB,CAC1B,WAAmB,EACnB,UAA2B,EAC3B,WAA6B,EAC7B,cAAuB,EACvB,yBAAkC,EAClC,eAAwB,EACxB,OAAsB,EACtB,EAAiB,EACjB,OAAgB;IAGhB,EAAE,CAAC,YAAY,CAAC,uBAAuB,CAAC,CAAC;IACzC,IAAI,CAAC,OAAO,IAAI,CAAC,cAAc,EAAE,CAAC;QACjC,kBAAkB;QAClB,EAAE,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;IACjC,CAAC;IACD,EAAE,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;IACjC,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;IAC1D,IAAI,OAAO,CAAC,QAAQ,EAAE,CAAC;QACtB,EAAE,CAAC,YAAY,CAAC,uBAAuB,CAAC,CAAC;IAC1C,CAAC,MAAM,CAAC;QACP,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IAC1B,CAAC;IAED,MAAM,WAAW,GAAG,UAAU,CAAC,cAAc,EAAE,CAAC;IAChD,MAAM,YAAY,GAAG,uMAAqB,CAAC,YAAY,CAAC,WAAW,EAAE,yBAAyB,CAAC,CAAC;IAChG,MAAM,WAAW,GAAG,uMAAqB,CAAC,WAAW,CAAC,WAAW,EAAE,YAAY,EAAE,eAAe,CAAC,CAAC;IAClG,MAAM,MAAM,OAAG,qNAAc,EAAC,IAAI,sNAAe,CAChD,AAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,IAAI,CAAC,OAAO,CAAC,6BAA6B,CAAC,CACxE,OAAO,CAAC,QAAQ,CAAC,8BAA8B,EAC/C,WAAW,EACX,KAAK,EACL,YAAY,EACZ,WAAW,EACX,CAAC,EACD,UAAU,EACV,WAAW,EACX,OAAO,CAAC,OAAO,EACf,CAAC,EACD,OAAO,CAAC,QAAQ,CAAC,UAAU,EAC3B,OAAO,CAAC,QAAQ,CAAC,WAAW,EAC5B,OAAO,CAAC,QAAQ,CAAC,aAAa,EAC9B,OAAO,CAAC,sBAAsB,EAC9B,OAAO,CAAC,gBAAgB,EACxB,OAAO,CAAC,uBAAuB,EAC/B,OAAO,CAAC,aAAa,KAAK,mNAAmB,CAAC,GAAG,EACjD,IAAI,EAAE,AACN,IAAI,EACJ,OAAO,CAAC,qBAAqB,CAC7B,EAAE,EAAE,CAAC,CAAC,aAHuD;IAK9D,EAAE,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;IAE1B,OAAO,MAAM,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;AACpF,CAAC","debugId":null}},
    {"offset": {"line": 4401, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/diffEditorViewZones.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/diffEditorViewZones.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/diffEditorViewZones.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, addDisposableListener } from '../../../../../../base/browser/dom.js';\nimport { ArrayQueue } from '../../../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../../../base/common/async.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { IObservable, autorun, derived, observableFromEvent, observableValue } from '../../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { assertReturnsDefined } from '../../../../../../base/common/types.js';\nimport { applyFontInfo } from '../../../../config/domFontInfo.js';\nimport { CodeEditorWidget } from '../../../codeEditor/codeEditorWidget.js';\nimport { diffDeleteDecoration, diffRemoveIcon } from '../../registrations.contribution.js';\nimport { DiffEditorEditors } from '../diffEditorEditors.js';\nimport { DiffEditorViewModel, DiffMapping } from '../../diffEditorViewModel.js';\nimport { DiffEditorWidget } from '../../diffEditorWidget.js';\nimport { InlineDiffDeletedCodeMargin } from './inlineDiffDeletedCodeMargin.js';\nimport { LineSource, RenderOptions, renderLines } from './renderLines.js';\nimport { IObservableViewZone, animatedObservable, joinCombine } from '../../utils.js';\nimport { EditorOption } from '../../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../../common/core/ranges/lineRange.js';\nimport { Position } from '../../../../../common/core/position.js';\nimport { DetailedLineRangeMapping } from '../../../../../common/diff/rangeMapping.js';\nimport { ScrollType } from '../../../../../common/editorCommon.js';\nimport { BackgroundTokenizationState } from '../../../../../common/tokenizationTextModelPart.js';\nimport { IClipboardService } from '../../../../../../platform/clipboard/common/clipboardService.js';\nimport { IContextMenuService } from '../../../../../../platform/contextview/browser/contextView.js';\nimport { DiffEditorOptions } from '../../diffEditorOptions.js';\nimport { Range } from '../../../../../common/core/range.js';\nimport { InlineDecoration, InlineDecorationType } from '../../../../../common/viewModel/inlineDecorations.js';\n\n/**\n * Ensures both editors have the same height by aligning unchanged lines.\n * In inline view mode, inserts viewzones to show deleted code from the original text model in the modified code editor.\n * Synchronizes scrolling.\n *\n * Make sure to add the view zones!\n */\nexport class DiffEditorViewZones extends Disposable {\n\tprivate readonly _originalTopPadding;\n\tprivate readonly _originalScrollTop: IObservable<number>;\n\tprivate readonly _originalScrollOffset;\n\tprivate readonly _originalScrollOffsetAnimated;\n\n\tprivate readonly _modifiedTopPadding;\n\tprivate readonly _modifiedScrollTop: IObservable<number>;\n\tprivate readonly _modifiedScrollOffset;\n\tprivate readonly _modifiedScrollOffsetAnimated;\n\n\tpublic readonly viewZones: IObservable<{ orig: IObservableViewZone[]; mod: IObservableViewZone[] }>;\n\n\tconstructor(\n\t\tprivate readonly _targetWindow: Window,\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tprivate readonly _diffEditorWidget: DiffEditorWidget,\n\t\tprivate readonly _canIgnoreViewZoneUpdateEvent: () => boolean,\n\t\tprivate readonly _origViewZonesToIgnore: Set<string>,\n\t\tprivate readonly _modViewZonesToIgnore: Set<string>,\n\t\t@IClipboardService private readonly _clipboardService: IClipboardService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper();\n\t\tthis._originalTopPadding = observableValue(this, 0);\n\t\tthis._originalScrollOffset = observableValue<number, boolean>(this, 0);\n\t\tthis._originalScrollOffsetAnimated = animatedObservable(this._targetWindow, this._originalScrollOffset, this._store);\n\t\tthis._modifiedTopPadding = observableValue(this, 0);\n\t\tthis._modifiedScrollOffset = observableValue<number, boolean>(this, 0);\n\t\tthis._modifiedScrollOffsetAnimated = animatedObservable(this._targetWindow, this._modifiedScrollOffset, this._store);\n\n\t\tconst state = observableValue('invalidateAlignmentsState', 0);\n\n\t\tconst updateImmediately = this._register(new RunOnceScheduler(() => {\n\t\t\tstate.set(state.get() + 1, undefined);\n\t\t}, 0));\n\n\t\tthis._register(this._editors.original.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) { updateImmediately.schedule(); } }));\n\t\tthis._register(this._editors.modified.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) { updateImmediately.schedule(); } }));\n\t\tthis._register(this._editors.original.onDidChangeConfiguration((args) => {\n\t\t\tif (args.hasChanged(EditorOption.wrappingInfo) || args.hasChanged(EditorOption.lineHeight)) { updateImmediately.schedule(); }\n\t\t}));\n\t\tthis._register(this._editors.modified.onDidChangeConfiguration((args) => {\n\t\t\tif (args.hasChanged(EditorOption.wrappingInfo) || args.hasChanged(EditorOption.lineHeight)) { updateImmediately.schedule(); }\n\t\t}));\n\n\t\tconst originalModelTokenizationCompleted = this._diffModel.map(m =>\n\t\t\tm ? observableFromEvent(this, m.model.original.onDidChangeTokens, () => m.model.original.tokenization.backgroundTokenizationState === BackgroundTokenizationState.Completed) : undefined\n\t\t).map((m, reader) => m?.read(reader));\n\n\t\tconst alignments = derived<ILineRangeAlignment[] | null>((reader) => {\n\t\t\t/** @description alignments */\n\t\t\tconst diffModel = this._diffModel.read(reader);\n\t\t\tconst diff = diffModel?.diff.read(reader);\n\t\t\tif (!diffModel || !diff) { return null; }\n\t\t\tstate.read(reader);\n\t\t\tconst renderSideBySide = this._options.renderSideBySide.read(reader);\n\t\t\tconst innerHunkAlignment = renderSideBySide;\n\t\t\treturn computeRangeAlignment(\n\t\t\t\tthis._editors.original,\n\t\t\t\tthis._editors.modified,\n\t\t\t\tdiff.mappings,\n\t\t\t\tthis._origViewZonesToIgnore,\n\t\t\t\tthis._modViewZonesToIgnore,\n\t\t\t\tinnerHunkAlignment\n\t\t\t);\n\t\t});\n\n\t\tconst alignmentsSyncedMovedText = derived<ILineRangeAlignment[] | null>((reader) => {\n\t\t\t/** @description alignmentsSyncedMovedText */\n\t\t\tconst syncedMovedText = this._diffModel.read(reader)?.movedTextToCompare.read(reader);\n\t\t\tif (!syncedMovedText) { return null; }\n\t\t\tstate.read(reader);\n\t\t\tconst mappings = syncedMovedText.changes.map(c => new DiffMapping(c));\n\t\t\t// TODO dont include alignments outside syncedMovedText\n\t\t\treturn computeRangeAlignment(\n\t\t\t\tthis._editors.original,\n\t\t\t\tthis._editors.modified,\n\t\t\t\tmappings,\n\t\t\t\tthis._origViewZonesToIgnore,\n\t\t\t\tthis._modViewZonesToIgnore,\n\t\t\t\ttrue\n\t\t\t);\n\t\t});\n\n\t\tfunction createFakeLinesDiv(): HTMLElement {\n\t\t\tconst r = document.createElement('div');\n\t\t\tr.className = 'diagonal-fill';\n\t\t\treturn r;\n\t\t}\n\n\t\tconst alignmentViewZonesDisposables = this._register(new DisposableStore());\n\t\tthis.viewZones = derived<{ orig: IObservableViewZone[]; mod: IObservableViewZone[] }>(this, (reader) => {\n\t\t\talignmentViewZonesDisposables.clear();\n\n\t\t\tconst alignmentsVal = alignments.read(reader) || [];\n\n\t\t\tconst origViewZones: IObservableViewZone[] = [];\n\t\t\tconst modViewZones: IObservableViewZone[] = [];\n\n\t\t\tconst modifiedTopPaddingVal = this._modifiedTopPadding.read(reader);\n\t\t\tif (modifiedTopPaddingVal > 0) {\n\t\t\t\tmodViewZones.push({\n\t\t\t\t\tafterLineNumber: 0,\n\t\t\t\t\tdomNode: document.createElement('div'),\n\t\t\t\t\theightInPx: modifiedTopPaddingVal,\n\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst originalTopPaddingVal = this._originalTopPadding.read(reader);\n\t\t\tif (originalTopPaddingVal > 0) {\n\t\t\t\torigViewZones.push({\n\t\t\t\t\tafterLineNumber: 0,\n\t\t\t\t\tdomNode: document.createElement('div'),\n\t\t\t\t\theightInPx: originalTopPaddingVal,\n\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst renderSideBySide = this._options.renderSideBySide.read(reader);\n\n\t\t\tconst deletedCodeLineBreaksComputer = !renderSideBySide ? this._editors.modified._getViewModel()?.createLineBreaksComputer() : undefined;\n\t\t\tif (deletedCodeLineBreaksComputer) {\n\t\t\t\tconst originalModel = this._editors.original.getModel()!;\n\t\t\t\tfor (const a of alignmentsVal) {\n\t\t\t\t\tif (a.diff) {\n\t\t\t\t\t\tfor (let i = a.originalRange.startLineNumber; i < a.originalRange.endLineNumberExclusive; i++) {\n\t\t\t\t\t\t\t// `i` can be out of bound when the diff has not been updated yet.\n\t\t\t\t\t\t\t// In this case, we do an early return.\n\t\t\t\t\t\t\t// TODO@hediet: Fix this by applying the edit directly to the diff model, so that the diff is always valid.\n\t\t\t\t\t\t\tif (i > originalModel.getLineCount()) {\n\t\t\t\t\t\t\t\treturn { orig: origViewZones, mod: modViewZones };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdeletedCodeLineBreaksComputer?.addRequest(originalModel.getLineContent(i), null, null);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst lineBreakData = deletedCodeLineBreaksComputer?.finalize() ?? [];\n\t\t\tlet lineBreakDataIdx = 0;\n\n\t\t\tconst modLineHeight = this._editors.modified.getOption(EditorOption.lineHeight);\n\n\t\t\tconst syncedMovedText = this._diffModel.read(reader)?.movedTextToCompare.read(reader);\n\n\t\t\tconst mightContainNonBasicASCII = this._editors.original.getModel()?.mightContainNonBasicASCII() ?? false;\n\t\t\tconst mightContainRTL = this._editors.original.getModel()?.mightContainRTL() ?? false;\n\t\t\tconst renderOptions = RenderOptions.fromEditor(this._editors.modified);\n\n\t\t\tfor (const a of alignmentsVal) {\n\t\t\t\tif (a.diff && !renderSideBySide && (!this._options.useTrueInlineDiffRendering.read(reader) || !allowsTrueInlineDiffRendering(a.diff))) {\n\t\t\t\t\tif (!a.originalRange.isEmpty) {\n\t\t\t\t\t\toriginalModelTokenizationCompleted.read(reader); // Update view-zones once tokenization completes\n\n\t\t\t\t\t\tconst deletedCodeDomNode = document.createElement('div');\n\t\t\t\t\t\tdeletedCodeDomNode.classList.add('view-lines', 'line-delete', 'monaco-mouse-cursor-text');\n\t\t\t\t\t\tconst originalModel = this._editors.original.getModel()!;\n\t\t\t\t\t\t// `a.originalRange` can be out of bound when the diff has not been updated yet.\n\t\t\t\t\t\t// In this case, we do an early return.\n\t\t\t\t\t\t// TODO@hediet: Fix this by applying the edit directly to the diff model, so that the diff is always valid.\n\t\t\t\t\t\tif (a.originalRange.endLineNumberExclusive - 1 > originalModel.getLineCount()) {\n\t\t\t\t\t\t\treturn { orig: origViewZones, mod: modViewZones };\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst source = new LineSource(\n\t\t\t\t\t\t\ta.originalRange.mapToLineArray(l => originalModel.tokenization.getLineTokens(l)),\n\t\t\t\t\t\t\ta.originalRange.mapToLineArray(_ => lineBreakData[lineBreakDataIdx++]),\n\t\t\t\t\t\t\tmightContainNonBasicASCII,\n\t\t\t\t\t\t\tmightContainRTL,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst decorations: InlineDecoration[] = [];\n\t\t\t\t\t\tfor (const i of a.diff.innerChanges || []) {\n\t\t\t\t\t\t\tdecorations.push(new InlineDecoration(\n\t\t\t\t\t\t\t\ti.originalRange.delta(-(a.diff.original.startLineNumber - 1)),\n\t\t\t\t\t\t\t\tdiffDeleteDecoration.className!,\n\t\t\t\t\t\t\t\tInlineDecorationType.Regular\n\t\t\t\t\t\t\t));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst result = renderLines(source, renderOptions, decorations, deletedCodeDomNode);\n\n\t\t\t\t\t\tconst marginDomNode = document.createElement('div');\n\t\t\t\t\t\tmarginDomNode.className = 'inline-deleted-margin-view-zone';\n\t\t\t\t\t\tapplyFontInfo(marginDomNode, renderOptions.fontInfo);\n\n\t\t\t\t\t\tif (this._options.renderIndicators.read(reader)) {\n\t\t\t\t\t\t\tfor (let i = 0; i < result.heightInLines; i++) {\n\t\t\t\t\t\t\t\tconst marginElement = document.createElement('div');\n\t\t\t\t\t\t\t\tmarginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n\t\t\t\t\t\t\t\tmarginElement.setAttribute('style', `position:absolute;top:${i * modLineHeight}px;width:${renderOptions.lineDecorationsWidth}px;height:${modLineHeight}px;right:0;`);\n\t\t\t\t\t\t\t\tmarginDomNode.appendChild(marginElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet zoneId: string | undefined = undefined;\n\t\t\t\t\t\talignmentViewZonesDisposables.add(\n\t\t\t\t\t\t\tnew InlineDiffDeletedCodeMargin(\n\t\t\t\t\t\t\t\t() => assertReturnsDefined(zoneId),\n\t\t\t\t\t\t\t\tmarginDomNode,\n\t\t\t\t\t\t\t\tthis._editors.modified,\n\t\t\t\t\t\t\t\ta.diff,\n\t\t\t\t\t\t\t\tthis._diffEditorWidget,\n\t\t\t\t\t\t\t\tresult.viewLineCounts,\n\t\t\t\t\t\t\t\tthis._editors.original.getModel()!,\n\t\t\t\t\t\t\t\tthis._contextMenuService,\n\t\t\t\t\t\t\t\tthis._clipboardService,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tfor (let i = 0; i < result.viewLineCounts.length; i++) {\n\t\t\t\t\t\t\tconst count = result.viewLineCounts[i];\n\t\t\t\t\t\t\t// Account for wrapped lines in the (collapsed) original editor (which doesn't wrap lines).\n\t\t\t\t\t\t\tif (count > 1) {\n\t\t\t\t\t\t\t\torigViewZones.push({\n\t\t\t\t\t\t\t\t\tafterLineNumber: a.originalRange.startLineNumber + i,\n\t\t\t\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\t\t\t\theightInPx: (count - 1) * modLineHeight,\n\t\t\t\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodViewZones.push({\n\t\t\t\t\t\t\tafterLineNumber: a.modifiedRange.startLineNumber - 1,\n\t\t\t\t\t\t\tdomNode: deletedCodeDomNode,\n\t\t\t\t\t\t\theightInPx: result.heightInLines * modLineHeight,\n\t\t\t\t\t\t\tminWidthInPx: result.minWidthInPx,\n\t\t\t\t\t\t\tmarginDomNode,\n\t\t\t\t\t\t\tsetZoneId(id) { zoneId = id; },\n\t\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tconst marginDomNode = document.createElement('div');\n\t\t\t\t\tmarginDomNode.className = 'gutter-delete';\n\n\t\t\t\t\torigViewZones.push({\n\t\t\t\t\t\tafterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\theightInPx: a.modifiedHeightInPx,\n\t\t\t\t\t\tmarginDomNode,\n\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst delta = a.modifiedHeightInPx - a.originalHeightInPx;\n\t\t\t\t\tif (delta > 0) {\n\t\t\t\t\t\tif (syncedMovedText?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(a.originalRange.endLineNumberExclusive - 1)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\torigViewZones.push({\n\t\t\t\t\t\t\tafterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\t\theightInPx: delta,\n\t\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (syncedMovedText?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(a.modifiedRange.endLineNumberExclusive - 1)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction createViewZoneMarginArrow(): HTMLElement {\n\t\t\t\t\t\t\tconst arrow = document.createElement('div');\n\t\t\t\t\t\t\tarrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\n\t\t\t\t\t\t\treader.store.add(addDisposableListener(arrow, 'mousedown', e => e.stopPropagation()));\n\t\t\t\t\t\t\treader.store.add(addDisposableListener(arrow, 'click', e => {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t_diffEditorWidget.revert(a.diff!);\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\treturn $('div', {}, arrow);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet marginDomNode: HTMLElement | undefined = undefined;\n\t\t\t\t\t\tif (a.diff && a.diff.modified.isEmpty && this._options.shouldRenderOldRevertArrows.read(reader)) {\n\t\t\t\t\t\t\tmarginDomNode = createViewZoneMarginArrow();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodViewZones.push({\n\t\t\t\t\t\t\tafterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\t\theightInPx: -delta,\n\t\t\t\t\t\t\tmarginDomNode,\n\t\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const a of alignmentsSyncedMovedText.read(reader) ?? []) {\n\t\t\t\tif (!syncedMovedText?.lineRangeMapping.original.intersect(a.originalRange)\n\t\t\t\t\t|| !syncedMovedText?.lineRangeMapping.modified.intersect(a.modifiedRange)) {\n\t\t\t\t\t// ignore unrelated alignments outside the synced moved text\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst delta = a.modifiedHeightInPx - a.originalHeightInPx;\n\t\t\t\tif (delta > 0) {\n\t\t\t\t\torigViewZones.push({\n\t\t\t\t\t\tafterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\theightInPx: delta,\n\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmodViewZones.push({\n\t\t\t\t\t\tafterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\theightInPx: -delta,\n\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { orig: origViewZones, mod: modViewZones };\n\t\t});\n\n\t\tlet ignoreChange = false;\n\t\tthis._register(this._editors.original.onDidScrollChange(e => {\n\t\t\tif (e.scrollLeftChanged && !ignoreChange) {\n\t\t\t\tignoreChange = true;\n\t\t\t\tthis._editors.modified.setScrollLeft(e.scrollLeft);\n\t\t\t\tignoreChange = false;\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._editors.modified.onDidScrollChange(e => {\n\t\t\tif (e.scrollLeftChanged && !ignoreChange) {\n\t\t\t\tignoreChange = true;\n\t\t\t\tthis._editors.original.setScrollLeft(e.scrollLeft);\n\t\t\t\tignoreChange = false;\n\t\t\t}\n\t\t}));\n\n\t\tthis._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => /** @description original.getScrollTop */ this._editors.original.getScrollTop());\n\t\tthis._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this._editors.modified.getScrollTop());\n\n\t\t// origExtraHeight + origOffset - origScrollTop = modExtraHeight + modOffset - modScrollTop\n\n\t\t// origScrollTop = origExtraHeight + origOffset - modExtraHeight - modOffset + modScrollTop\n\t\t// modScrollTop = modExtraHeight + modOffset - origExtraHeight - origOffset + origScrollTop\n\n\t\t// origOffset - modOffset = heightOfLines(1..Y) - heightOfLines(1..X)\n\t\t// origScrollTop >= 0, modScrollTop >= 0\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update scroll modified */\n\t\t\tconst newScrollTopModified = this._originalScrollTop.read(reader)\n\t\t\t\t- (this._originalScrollOffsetAnimated.get() - this._modifiedScrollOffsetAnimated.read(reader))\n\t\t\t\t- (this._originalTopPadding.get() - this._modifiedTopPadding.read(reader));\n\t\t\tif (newScrollTopModified !== this._editors.modified.getScrollTop()) {\n\t\t\t\tthis._editors.modified.setScrollTop(newScrollTopModified, ScrollType.Immediate);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update scroll original */\n\t\t\tconst newScrollTopOriginal = this._modifiedScrollTop.read(reader)\n\t\t\t\t- (this._modifiedScrollOffsetAnimated.get() - this._originalScrollOffsetAnimated.read(reader))\n\t\t\t\t- (this._modifiedTopPadding.get() - this._originalTopPadding.read(reader));\n\t\t\tif (newScrollTopOriginal !== this._editors.original.getScrollTop()) {\n\t\t\t\tthis._editors.original.setScrollTop(newScrollTopOriginal, ScrollType.Immediate);\n\t\t\t}\n\t\t}));\n\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update editor top offsets */\n\t\t\tconst m = this._diffModel.read(reader)?.movedTextToCompare.read(reader);\n\n\t\t\tlet deltaOrigToMod = 0;\n\t\t\tif (m) {\n\t\t\t\tconst trueTopOriginal = this._editors.original.getTopForLineNumber(m.lineRangeMapping.original.startLineNumber, true) - this._originalTopPadding.get();\n\t\t\t\tconst trueTopModified = this._editors.modified.getTopForLineNumber(m.lineRangeMapping.modified.startLineNumber, true) - this._modifiedTopPadding.get();\n\t\t\t\tdeltaOrigToMod = trueTopModified - trueTopOriginal;\n\t\t\t}\n\n\t\t\tif (deltaOrigToMod > 0) {\n\t\t\t\tthis._modifiedTopPadding.set(0, undefined);\n\t\t\t\tthis._originalTopPadding.set(deltaOrigToMod, undefined);\n\t\t\t} else if (deltaOrigToMod < 0) {\n\t\t\t\tthis._modifiedTopPadding.set(-deltaOrigToMod, undefined);\n\t\t\t\tthis._originalTopPadding.set(0, undefined);\n\t\t\t} else {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._modifiedTopPadding.set(0, undefined);\n\t\t\t\t\tthis._originalTopPadding.set(0, undefined);\n\t\t\t\t}, 400);\n\t\t\t}\n\n\t\t\tif (this._editors.modified.hasTextFocus()) {\n\t\t\t\tthis._originalScrollOffset.set(this._modifiedScrollOffset.get() - deltaOrigToMod, undefined, true);\n\t\t\t} else {\n\t\t\t\tthis._modifiedScrollOffset.set(this._originalScrollOffset.get() + deltaOrigToMod, undefined, true);\n\t\t\t}\n\t\t}));\n\t}\n}\n\ninterface ILineRangeAlignment {\n\toriginalRange: LineRange;\n\tmodifiedRange: LineRange;\n\n\t// accounts for foreign viewzones and line wrapping\n\toriginalHeightInPx: number;\n\tmodifiedHeightInPx: number;\n\n\t/**\n\t * If this range alignment is a direct result of a diff, then this is the diff's line mapping.\n\t * Only used for inline-view.\n\t */\n\tdiff?: DetailedLineRangeMapping;\n}\n\nfunction computeRangeAlignment(\n\toriginalEditor: CodeEditorWidget,\n\tmodifiedEditor: CodeEditorWidget,\n\tdiffs: readonly DiffMapping[],\n\toriginalEditorAlignmentViewZones: ReadonlySet<string>,\n\tmodifiedEditorAlignmentViewZones: ReadonlySet<string>,\n\tinnerHunkAlignment: boolean,\n): ILineRangeAlignment[] {\n\tconst originalLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(originalEditor, originalEditorAlignmentViewZones));\n\tconst modifiedLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(modifiedEditor, modifiedEditorAlignmentViewZones));\n\n\tconst origLineHeight = originalEditor.getOption(EditorOption.lineHeight);\n\tconst modLineHeight = modifiedEditor.getOption(EditorOption.lineHeight);\n\n\tconst result: ILineRangeAlignment[] = [];\n\n\tlet lastOriginalLineNumber = 0;\n\tlet lastModifiedLineNumber = 0;\n\n\tfunction handleAlignmentsOutsideOfDiffs(untilOriginalLineNumberExclusive: number, untilModifiedLineNumberExclusive: number) {\n\t\twhile (true) {\n\t\t\tlet origNext = originalLineHeightOverrides.peek();\n\t\t\tlet modNext = modifiedLineHeightOverrides.peek();\n\t\t\tif (origNext && origNext.lineNumber >= untilOriginalLineNumberExclusive) {\n\t\t\t\torigNext = undefined;\n\t\t\t}\n\t\t\tif (modNext && modNext.lineNumber >= untilModifiedLineNumberExclusive) {\n\t\t\t\tmodNext = undefined;\n\t\t\t}\n\t\t\tif (!origNext && !modNext) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst distOrig = origNext ? origNext.lineNumber - lastOriginalLineNumber : Number.MAX_VALUE;\n\t\t\tconst distNext = modNext ? modNext.lineNumber - lastModifiedLineNumber : Number.MAX_VALUE;\n\n\t\t\tif (distOrig < distNext) {\n\t\t\t\toriginalLineHeightOverrides.dequeue();\n\t\t\t\tmodNext = {\n\t\t\t\t\tlineNumber: origNext!.lineNumber - lastOriginalLineNumber + lastModifiedLineNumber,\n\t\t\t\t\theightInPx: 0,\n\t\t\t\t};\n\t\t\t} else if (distOrig > distNext) {\n\t\t\t\tmodifiedLineHeightOverrides.dequeue();\n\t\t\t\torigNext = {\n\t\t\t\t\tlineNumber: modNext!.lineNumber - lastModifiedLineNumber + lastOriginalLineNumber,\n\t\t\t\t\theightInPx: 0,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toriginalLineHeightOverrides.dequeue();\n\t\t\t\tmodifiedLineHeightOverrides.dequeue();\n\t\t\t}\n\n\t\t\tresult.push({\n\t\t\t\toriginalRange: LineRange.ofLength(origNext!.lineNumber, 1),\n\t\t\t\tmodifiedRange: LineRange.ofLength(modNext!.lineNumber, 1),\n\t\t\t\toriginalHeightInPx: origLineHeight + origNext!.heightInPx,\n\t\t\t\tmodifiedHeightInPx: modLineHeight + modNext!.heightInPx,\n\t\t\t\tdiff: undefined,\n\t\t\t});\n\t\t}\n\t}\n\n\tfor (const m of diffs) {\n\t\tconst c = m.lineRangeMapping;\n\t\thandleAlignmentsOutsideOfDiffs(c.original.startLineNumber, c.modified.startLineNumber);\n\n\t\tlet first = true;\n\t\tlet lastModLineNumber = c.modified.startLineNumber;\n\t\tlet lastOrigLineNumber = c.original.startLineNumber;\n\n\t\tfunction emitAlignment(origLineNumberExclusive: number, modLineNumberExclusive: number, forceAlignment = false) {\n\t\t\tif (origLineNumberExclusive < lastOrigLineNumber || modLineNumberExclusive < lastModLineNumber) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (first) {\n\t\t\t\tfirst = false;\n\t\t\t} else if (!forceAlignment && (origLineNumberExclusive === lastOrigLineNumber || modLineNumberExclusive === lastModLineNumber)) {\n\t\t\t\t// This causes a re-alignment of an already aligned line.\n\t\t\t\t// However, we don't care for the final alignment.\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst originalRange = new LineRange(lastOrigLineNumber, origLineNumberExclusive);\n\t\t\tconst modifiedRange = new LineRange(lastModLineNumber, modLineNumberExclusive);\n\t\t\tif (originalRange.isEmpty && modifiedRange.isEmpty) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst originalAdditionalHeight = originalLineHeightOverrides\n\t\t\t\t.takeWhile(v => v.lineNumber < origLineNumberExclusive)\n\t\t\t\t?.reduce((p, c) => p + c.heightInPx, 0) ?? 0;\n\t\t\tconst modifiedAdditionalHeight = modifiedLineHeightOverrides\n\t\t\t\t.takeWhile(v => v.lineNumber < modLineNumberExclusive)\n\t\t\t\t?.reduce((p, c) => p + c.heightInPx, 0) ?? 0;\n\n\t\t\tresult.push({\n\t\t\t\toriginalRange,\n\t\t\t\tmodifiedRange,\n\t\t\t\toriginalHeightInPx: originalRange.length * origLineHeight + originalAdditionalHeight,\n\t\t\t\tmodifiedHeightInPx: modifiedRange.length * modLineHeight + modifiedAdditionalHeight,\n\t\t\t\tdiff: m.lineRangeMapping,\n\t\t\t});\n\n\t\t\tlastOrigLineNumber = origLineNumberExclusive;\n\t\t\tlastModLineNumber = modLineNumberExclusive;\n\t\t}\n\n\t\tif (innerHunkAlignment) {\n\t\t\tfor (const i of c.innerChanges || []) {\n\t\t\t\tif (i.originalRange.startColumn > 1 && i.modifiedRange.startColumn > 1) {\n\t\t\t\t\t// There is some unmodified text on this line before the diff\n\t\t\t\t\temitAlignment(i.originalRange.startLineNumber, i.modifiedRange.startLineNumber);\n\t\t\t\t}\n\t\t\t\tconst originalModel = originalEditor.getModel()!;\n\t\t\t\t// When the diff is invalid, the ranges might be out of bounds (this should be fixed in the diff model by applying edits directly).\n\t\t\t\tconst maxColumn = i.originalRange.endLineNumber <= originalModel.getLineCount() ? originalModel.getLineMaxColumn(i.originalRange.endLineNumber) : Number.MAX_SAFE_INTEGER;\n\t\t\t\tif (i.originalRange.endColumn < maxColumn) {\n\t\t\t\t\t// // There is some unmodified text on this line after the diff\n\t\t\t\t\temitAlignment(i.originalRange.endLineNumber, i.modifiedRange.endLineNumber);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\temitAlignment(c.original.endLineNumberExclusive, c.modified.endLineNumberExclusive, true);\n\n\t\tlastOriginalLineNumber = c.original.endLineNumberExclusive;\n\t\tlastModifiedLineNumber = c.modified.endLineNumberExclusive;\n\t}\n\thandleAlignmentsOutsideOfDiffs(Number.MAX_VALUE, Number.MAX_VALUE);\n\n\treturn result;\n}\n\ninterface AdditionalLineHeightInfo {\n\tlineNumber: number;\n\theightInPx: number;\n}\n\nfunction getAdditionalLineHeights(editor: CodeEditorWidget, viewZonesToIgnore: ReadonlySet<string>): readonly AdditionalLineHeightInfo[] {\n\tconst viewZoneHeights: { lineNumber: number; heightInPx: number }[] = [];\n\tconst wrappingZoneHeights: { lineNumber: number; heightInPx: number }[] = [];\n\n\tconst hasWrapping = editor.getOption(EditorOption.wrappingInfo).wrappingColumn !== -1;\n\tconst coordinatesConverter = editor._getViewModel()!.coordinatesConverter;\n\tconst editorLineHeight = editor.getOption(EditorOption.lineHeight);\n\tif (hasWrapping) {\n\t\tfor (let i = 1; i <= editor.getModel()!.getLineCount(); i++) {\n\t\t\tconst lineCount = coordinatesConverter.getModelLineViewLineCount(i);\n\t\t\tif (lineCount > 1) {\n\t\t\t\twrappingZoneHeights.push({ lineNumber: i, heightInPx: editorLineHeight * (lineCount - 1) });\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (const w of editor.getWhitespaces()) {\n\t\tif (viewZonesToIgnore.has(w.id)) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst modelLineNumber = w.afterLineNumber === 0 ? 0 : coordinatesConverter.convertViewPositionToModelPosition(\n\t\t\tnew Position(w.afterLineNumber, 1)\n\t\t).lineNumber;\n\t\tviewZoneHeights.push({ lineNumber: modelLineNumber, heightInPx: w.height });\n\t}\n\n\tconst result = joinCombine(\n\t\tviewZoneHeights,\n\t\twrappingZoneHeights,\n\t\tv => v.lineNumber,\n\t\t(v1, v2) => ({ lineNumber: v1.lineNumber, heightInPx: v1.heightInPx + v2.heightInPx })\n\t);\n\n\treturn result;\n}\n\nexport function allowsTrueInlineDiffRendering(mapping: DetailedLineRangeMapping): boolean {\n\tif (!mapping.innerChanges) {\n\t\treturn false;\n\t}\n\treturn mapping.innerChanges.every(c =>\n\t\t(rangeIsSingleLine(c.modifiedRange) && rangeIsSingleLine(c.originalRange))\n\t\t|| c.originalRange.equalsRange(new Range(1, 1, 1, 1))\n\t);\n}\n\nexport function rangeIsSingleLine(range: Range): boolean {\n\treturn range.startLineNumber === range.endLineNumber;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, addDisposableListener } from '../../../../../../base/browser/dom.js';\nimport { ArrayQueue } from '../../../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../../../base/common/async.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { IObservable, autorun, derived, observableFromEvent, observableValue } from '../../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { assertReturnsDefined } from '../../../../../../base/common/types.js';\nimport { applyFontInfo } from '../../../../config/domFontInfo.js';\nimport { CodeEditorWidget } from '../../../codeEditor/codeEditorWidget.js';\nimport { diffDeleteDecoration, diffRemoveIcon } from '../../registrations.contribution.js';\nimport { DiffEditorEditors } from '../diffEditorEditors.js';\nimport { DiffEditorViewModel, DiffMapping } from '../../diffEditorViewModel.js';\nimport { DiffEditorWidget } from '../../diffEditorWidget.js';\nimport { InlineDiffDeletedCodeMargin } from './inlineDiffDeletedCodeMargin.js';\nimport { LineSource, RenderOptions, renderLines } from './renderLines.js';\nimport { IObservableViewZone, animatedObservable, joinCombine } from '../../utils.js';\nimport { EditorOption } from '../../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../../common/core/ranges/lineRange.js';\nimport { Position } from '../../../../../common/core/position.js';\nimport { DetailedLineRangeMapping } from '../../../../../common/diff/rangeMapping.js';\nimport { ScrollType } from '../../../../../common/editorCommon.js';\nimport { BackgroundTokenizationState } from '../../../../../common/tokenizationTextModelPart.js';\nimport { IClipboardService } from '../../../../../../platform/clipboard/common/clipboardService.js';\nimport { IContextMenuService } from '../../../../../../platform/contextview/browser/contextView.js';\nimport { DiffEditorOptions } from '../../diffEditorOptions.js';\nimport { Range } from '../../../../../common/core/range.js';\nimport { InlineDecoration, InlineDecorationType } from '../../../../../common/viewModel/inlineDecorations.js';\n\n/**\n * Ensures both editors have the same height by aligning unchanged lines.\n * In inline view mode, inserts viewzones to show deleted code from the original text model in the modified code editor.\n * Synchronizes scrolling.\n *\n * Make sure to add the view zones!\n */\nexport class DiffEditorViewZones extends Disposable {\n\tprivate readonly _originalTopPadding;\n\tprivate readonly _originalScrollTop: IObservable<number>;\n\tprivate readonly _originalScrollOffset;\n\tprivate readonly _originalScrollOffsetAnimated;\n\n\tprivate readonly _modifiedTopPadding;\n\tprivate readonly _modifiedScrollTop: IObservable<number>;\n\tprivate readonly _modifiedScrollOffset;\n\tprivate readonly _modifiedScrollOffsetAnimated;\n\n\tpublic readonly viewZones: IObservable<{ orig: IObservableViewZone[]; mod: IObservableViewZone[] }>;\n\n\tconstructor(\n\t\tprivate readonly _targetWindow: Window,\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tprivate readonly _diffEditorWidget: DiffEditorWidget,\n\t\tprivate readonly _canIgnoreViewZoneUpdateEvent: () => boolean,\n\t\tprivate readonly _origViewZonesToIgnore: Set<string>,\n\t\tprivate readonly _modViewZonesToIgnore: Set<string>,\n\t\t@IClipboardService private readonly _clipboardService: IClipboardService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper();\n\t\tthis._originalTopPadding = observableValue(this, 0);\n\t\tthis._originalScrollOffset = observableValue<number, boolean>(this, 0);\n\t\tthis._originalScrollOffsetAnimated = animatedObservable(this._targetWindow, this._originalScrollOffset, this._store);\n\t\tthis._modifiedTopPadding = observableValue(this, 0);\n\t\tthis._modifiedScrollOffset = observableValue<number, boolean>(this, 0);\n\t\tthis._modifiedScrollOffsetAnimated = animatedObservable(this._targetWindow, this._modifiedScrollOffset, this._store);\n\n\t\tconst state = observableValue('invalidateAlignmentsState', 0);\n\n\t\tconst updateImmediately = this._register(new RunOnceScheduler(() => {\n\t\t\tstate.set(state.get() + 1, undefined);\n\t\t}, 0));\n\n\t\tthis._register(this._editors.original.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) { updateImmediately.schedule(); } }));\n\t\tthis._register(this._editors.modified.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) { updateImmediately.schedule(); } }));\n\t\tthis._register(this._editors.original.onDidChangeConfiguration((args) => {\n\t\t\tif (args.hasChanged(EditorOption.wrappingInfo) || args.hasChanged(EditorOption.lineHeight)) { updateImmediately.schedule(); }\n\t\t}));\n\t\tthis._register(this._editors.modified.onDidChangeConfiguration((args) => {\n\t\t\tif (args.hasChanged(EditorOption.wrappingInfo) || args.hasChanged(EditorOption.lineHeight)) { updateImmediately.schedule(); }\n\t\t}));\n\n\t\tconst originalModelTokenizationCompleted = this._diffModel.map(m =>\n\t\t\tm ? observableFromEvent(this, m.model.original.onDidChangeTokens, () => m.model.original.tokenization.backgroundTokenizationState === BackgroundTokenizationState.Completed) : undefined\n\t\t).map((m, reader) => m?.read(reader));\n\n\t\tconst alignments = derived<ILineRangeAlignment[] | null>((reader) => {\n\t\t\t/** @description alignments */\n\t\t\tconst diffModel = this._diffModel.read(reader);\n\t\t\tconst diff = diffModel?.diff.read(reader);\n\t\t\tif (!diffModel || !diff) { return null; }\n\t\t\tstate.read(reader);\n\t\t\tconst renderSideBySide = this._options.renderSideBySide.read(reader);\n\t\t\tconst innerHunkAlignment = renderSideBySide;\n\t\t\treturn computeRangeAlignment(\n\t\t\t\tthis._editors.original,\n\t\t\t\tthis._editors.modified,\n\t\t\t\tdiff.mappings,\n\t\t\t\tthis._origViewZonesToIgnore,\n\t\t\t\tthis._modViewZonesToIgnore,\n\t\t\t\tinnerHunkAlignment\n\t\t\t);\n\t\t});\n\n\t\tconst alignmentsSyncedMovedText = derived<ILineRangeAlignment[] | null>((reader) => {\n\t\t\t/** @description alignmentsSyncedMovedText */\n\t\t\tconst syncedMovedText = this._diffModel.read(reader)?.movedTextToCompare.read(reader);\n\t\t\tif (!syncedMovedText) { return null; }\n\t\t\tstate.read(reader);\n\t\t\tconst mappings = syncedMovedText.changes.map(c => new DiffMapping(c));\n\t\t\t// TODO dont include alignments outside syncedMovedText\n\t\t\treturn computeRangeAlignment(\n\t\t\t\tthis._editors.original,\n\t\t\t\tthis._editors.modified,\n\t\t\t\tmappings,\n\t\t\t\tthis._origViewZonesToIgnore,\n\t\t\t\tthis._modViewZonesToIgnore,\n\t\t\t\ttrue\n\t\t\t);\n\t\t});\n\n\t\tfunction createFakeLinesDiv(): HTMLElement {\n\t\t\tconst r = document.createElement('div');\n\t\t\tr.className = 'diagonal-fill';\n\t\t\treturn r;\n\t\t}\n\n\t\tconst alignmentViewZonesDisposables = this._register(new DisposableStore());\n\t\tthis.viewZones = derived<{ orig: IObservableViewZone[]; mod: IObservableViewZone[] }>(this, (reader) => {\n\t\t\talignmentViewZonesDisposables.clear();\n\n\t\t\tconst alignmentsVal = alignments.read(reader) || [];\n\n\t\t\tconst origViewZones: IObservableViewZone[] = [];\n\t\t\tconst modViewZones: IObservableViewZone[] = [];\n\n\t\t\tconst modifiedTopPaddingVal = this._modifiedTopPadding.read(reader);\n\t\t\tif (modifiedTopPaddingVal > 0) {\n\t\t\t\tmodViewZones.push({\n\t\t\t\t\tafterLineNumber: 0,\n\t\t\t\t\tdomNode: document.createElement('div'),\n\t\t\t\t\theightInPx: modifiedTopPaddingVal,\n\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst originalTopPaddingVal = this._originalTopPadding.read(reader);\n\t\t\tif (originalTopPaddingVal > 0) {\n\t\t\t\torigViewZones.push({\n\t\t\t\t\tafterLineNumber: 0,\n\t\t\t\t\tdomNode: document.createElement('div'),\n\t\t\t\t\theightInPx: originalTopPaddingVal,\n\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst renderSideBySide = this._options.renderSideBySide.read(reader);\n\n\t\t\tconst deletedCodeLineBreaksComputer = !renderSideBySide ? this._editors.modified._getViewModel()?.createLineBreaksComputer() : undefined;\n\t\t\tif (deletedCodeLineBreaksComputer) {\n\t\t\t\tconst originalModel = this._editors.original.getModel()!;\n\t\t\t\tfor (const a of alignmentsVal) {\n\t\t\t\t\tif (a.diff) {\n\t\t\t\t\t\tfor (let i = a.originalRange.startLineNumber; i < a.originalRange.endLineNumberExclusive; i++) {\n\t\t\t\t\t\t\t// `i` can be out of bound when the diff has not been updated yet.\n\t\t\t\t\t\t\t// In this case, we do an early return.\n\t\t\t\t\t\t\t// TODO@hediet: Fix this by applying the edit directly to the diff model, so that the diff is always valid.\n\t\t\t\t\t\t\tif (i > originalModel.getLineCount()) {\n\t\t\t\t\t\t\t\treturn { orig: origViewZones, mod: modViewZones };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdeletedCodeLineBreaksComputer?.addRequest(originalModel.getLineContent(i), null, null);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst lineBreakData = deletedCodeLineBreaksComputer?.finalize() ?? [];\n\t\t\tlet lineBreakDataIdx = 0;\n\n\t\t\tconst modLineHeight = this._editors.modified.getOption(EditorOption.lineHeight);\n\n\t\t\tconst syncedMovedText = this._diffModel.read(reader)?.movedTextToCompare.read(reader);\n\n\t\t\tconst mightContainNonBasicASCII = this._editors.original.getModel()?.mightContainNonBasicASCII() ?? false;\n\t\t\tconst mightContainRTL = this._editors.original.getModel()?.mightContainRTL() ?? false;\n\t\t\tconst renderOptions = RenderOptions.fromEditor(this._editors.modified);\n\n\t\t\tfor (const a of alignmentsVal) {\n\t\t\t\tif (a.diff && !renderSideBySide && (!this._options.useTrueInlineDiffRendering.read(reader) || !allowsTrueInlineDiffRendering(a.diff))) {\n\t\t\t\t\tif (!a.originalRange.isEmpty) {\n\t\t\t\t\t\toriginalModelTokenizationCompleted.read(reader); // Update view-zones once tokenization completes\n\n\t\t\t\t\t\tconst deletedCodeDomNode = document.createElement('div');\n\t\t\t\t\t\tdeletedCodeDomNode.classList.add('view-lines', 'line-delete', 'monaco-mouse-cursor-text');\n\t\t\t\t\t\tconst originalModel = this._editors.original.getModel()!;\n\t\t\t\t\t\t// `a.originalRange` can be out of bound when the diff has not been updated yet.\n\t\t\t\t\t\t// In this case, we do an early return.\n\t\t\t\t\t\t// TODO@hediet: Fix this by applying the edit directly to the diff model, so that the diff is always valid.\n\t\t\t\t\t\tif (a.originalRange.endLineNumberExclusive - 1 > originalModel.getLineCount()) {\n\t\t\t\t\t\t\treturn { orig: origViewZones, mod: modViewZones };\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst source = new LineSource(\n\t\t\t\t\t\t\ta.originalRange.mapToLineArray(l => originalModel.tokenization.getLineTokens(l)),\n\t\t\t\t\t\t\ta.originalRange.mapToLineArray(_ => lineBreakData[lineBreakDataIdx++]),\n\t\t\t\t\t\t\tmightContainNonBasicASCII,\n\t\t\t\t\t\t\tmightContainRTL,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst decorations: InlineDecoration[] = [];\n\t\t\t\t\t\tfor (const i of a.diff.innerChanges || []) {\n\t\t\t\t\t\t\tdecorations.push(new InlineDecoration(\n\t\t\t\t\t\t\t\ti.originalRange.delta(-(a.diff.original.startLineNumber - 1)),\n\t\t\t\t\t\t\t\tdiffDeleteDecoration.className!,\n\t\t\t\t\t\t\t\tInlineDecorationType.Regular\n\t\t\t\t\t\t\t));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst result = renderLines(source, renderOptions, decorations, deletedCodeDomNode);\n\n\t\t\t\t\t\tconst marginDomNode = document.createElement('div');\n\t\t\t\t\t\tmarginDomNode.className = 'inline-deleted-margin-view-zone';\n\t\t\t\t\t\tapplyFontInfo(marginDomNode, renderOptions.fontInfo);\n\n\t\t\t\t\t\tif (this._options.renderIndicators.read(reader)) {\n\t\t\t\t\t\t\tfor (let i = 0; i < result.heightInLines; i++) {\n\t\t\t\t\t\t\t\tconst marginElement = document.createElement('div');\n\t\t\t\t\t\t\t\tmarginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n\t\t\t\t\t\t\t\tmarginElement.setAttribute('style', `position:absolute;top:${i * modLineHeight}px;width:${renderOptions.lineDecorationsWidth}px;height:${modLineHeight}px;right:0;`);\n\t\t\t\t\t\t\t\tmarginDomNode.appendChild(marginElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet zoneId: string | undefined = undefined;\n\t\t\t\t\t\talignmentViewZonesDisposables.add(\n\t\t\t\t\t\t\tnew InlineDiffDeletedCodeMargin(\n\t\t\t\t\t\t\t\t() => assertReturnsDefined(zoneId),\n\t\t\t\t\t\t\t\tmarginDomNode,\n\t\t\t\t\t\t\t\tthis._editors.modified,\n\t\t\t\t\t\t\t\ta.diff,\n\t\t\t\t\t\t\t\tthis._diffEditorWidget,\n\t\t\t\t\t\t\t\tresult.viewLineCounts,\n\t\t\t\t\t\t\t\tthis._editors.original.getModel()!,\n\t\t\t\t\t\t\t\tthis._contextMenuService,\n\t\t\t\t\t\t\t\tthis._clipboardService,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tfor (let i = 0; i < result.viewLineCounts.length; i++) {\n\t\t\t\t\t\t\tconst count = result.viewLineCounts[i];\n\t\t\t\t\t\t\t// Account for wrapped lines in the (collapsed) original editor (which doesn't wrap lines).\n\t\t\t\t\t\t\tif (count > 1) {\n\t\t\t\t\t\t\t\torigViewZones.push({\n\t\t\t\t\t\t\t\t\tafterLineNumber: a.originalRange.startLineNumber + i,\n\t\t\t\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\t\t\t\theightInPx: (count - 1) * modLineHeight,\n\t\t\t\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodViewZones.push({\n\t\t\t\t\t\t\tafterLineNumber: a.modifiedRange.startLineNumber - 1,\n\t\t\t\t\t\t\tdomNode: deletedCodeDomNode,\n\t\t\t\t\t\t\theightInPx: result.heightInLines * modLineHeight,\n\t\t\t\t\t\t\tminWidthInPx: result.minWidthInPx,\n\t\t\t\t\t\t\tmarginDomNode,\n\t\t\t\t\t\t\tsetZoneId(id) { zoneId = id; },\n\t\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tconst marginDomNode = document.createElement('div');\n\t\t\t\t\tmarginDomNode.className = 'gutter-delete';\n\n\t\t\t\t\torigViewZones.push({\n\t\t\t\t\t\tafterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\theightInPx: a.modifiedHeightInPx,\n\t\t\t\t\t\tmarginDomNode,\n\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst delta = a.modifiedHeightInPx - a.originalHeightInPx;\n\t\t\t\t\tif (delta > 0) {\n\t\t\t\t\t\tif (syncedMovedText?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(a.originalRange.endLineNumberExclusive - 1)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\torigViewZones.push({\n\t\t\t\t\t\t\tafterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\t\theightInPx: delta,\n\t\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (syncedMovedText?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(a.modifiedRange.endLineNumberExclusive - 1)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction createViewZoneMarginArrow(): HTMLElement {\n\t\t\t\t\t\t\tconst arrow = document.createElement('div');\n\t\t\t\t\t\t\tarrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\n\t\t\t\t\t\t\treader.store.add(addDisposableListener(arrow, 'mousedown', e => e.stopPropagation()));\n\t\t\t\t\t\t\treader.store.add(addDisposableListener(arrow, 'click', e => {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t_diffEditorWidget.revert(a.diff!);\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\treturn $('div', {}, arrow);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet marginDomNode: HTMLElement | undefined = undefined;\n\t\t\t\t\t\tif (a.diff && a.diff.modified.isEmpty && this._options.shouldRenderOldRevertArrows.read(reader)) {\n\t\t\t\t\t\t\tmarginDomNode = createViewZoneMarginArrow();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodViewZones.push({\n\t\t\t\t\t\t\tafterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\t\theightInPx: -delta,\n\t\t\t\t\t\t\tmarginDomNode,\n\t\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const a of alignmentsSyncedMovedText.read(reader) ?? []) {\n\t\t\t\tif (!syncedMovedText?.lineRangeMapping.original.intersect(a.originalRange)\n\t\t\t\t\t|| !syncedMovedText?.lineRangeMapping.modified.intersect(a.modifiedRange)) {\n\t\t\t\t\t// ignore unrelated alignments outside the synced moved text\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst delta = a.modifiedHeightInPx - a.originalHeightInPx;\n\t\t\t\tif (delta > 0) {\n\t\t\t\t\torigViewZones.push({\n\t\t\t\t\t\tafterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\theightInPx: delta,\n\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmodViewZones.push({\n\t\t\t\t\t\tafterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\theightInPx: -delta,\n\t\t\t\t\t\tshowInHiddenAreas: true,\n\t\t\t\t\t\tsuppressMouseDown: true,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { orig: origViewZones, mod: modViewZones };\n\t\t});\n\n\t\tlet ignoreChange = false;\n\t\tthis._register(this._editors.original.onDidScrollChange(e => {\n\t\t\tif (e.scrollLeftChanged && !ignoreChange) {\n\t\t\t\tignoreChange = true;\n\t\t\t\tthis._editors.modified.setScrollLeft(e.scrollLeft);\n\t\t\t\tignoreChange = false;\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._editors.modified.onDidScrollChange(e => {\n\t\t\tif (e.scrollLeftChanged && !ignoreChange) {\n\t\t\t\tignoreChange = true;\n\t\t\t\tthis._editors.original.setScrollLeft(e.scrollLeft);\n\t\t\t\tignoreChange = false;\n\t\t\t}\n\t\t}));\n\n\t\tthis._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => /** @description original.getScrollTop */ this._editors.original.getScrollTop());\n\t\tthis._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this._editors.modified.getScrollTop());\n\n\t\t// origExtraHeight + origOffset - origScrollTop = modExtraHeight + modOffset - modScrollTop\n\n\t\t// origScrollTop = origExtraHeight + origOffset - modExtraHeight - modOffset + modScrollTop\n\t\t// modScrollTop = modExtraHeight + modOffset - origExtraHeight - origOffset + origScrollTop\n\n\t\t// origOffset - modOffset = heightOfLines(1..Y) - heightOfLines(1..X)\n\t\t// origScrollTop >= 0, modScrollTop >= 0\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update scroll modified */\n\t\t\tconst newScrollTopModified = this._originalScrollTop.read(reader)\n\t\t\t\t- (this._originalScrollOffsetAnimated.get() - this._modifiedScrollOffsetAnimated.read(reader))\n\t\t\t\t- (this._originalTopPadding.get() - this._modifiedTopPadding.read(reader));\n\t\t\tif (newScrollTopModified !== this._editors.modified.getScrollTop()) {\n\t\t\t\tthis._editors.modified.setScrollTop(newScrollTopModified, ScrollType.Immediate);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update scroll original */\n\t\t\tconst newScrollTopOriginal = this._modifiedScrollTop.read(reader)\n\t\t\t\t- (this._modifiedScrollOffsetAnimated.get() - this._originalScrollOffsetAnimated.read(reader))\n\t\t\t\t- (this._modifiedTopPadding.get() - this._originalTopPadding.read(reader));\n\t\t\tif (newScrollTopOriginal !== this._editors.original.getScrollTop()) {\n\t\t\t\tthis._editors.original.setScrollTop(newScrollTopOriginal, ScrollType.Immediate);\n\t\t\t}\n\t\t}));\n\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update editor top offsets */\n\t\t\tconst m = this._diffModel.read(reader)?.movedTextToCompare.read(reader);\n\n\t\t\tlet deltaOrigToMod = 0;\n\t\t\tif (m) {\n\t\t\t\tconst trueTopOriginal = this._editors.original.getTopForLineNumber(m.lineRangeMapping.original.startLineNumber, true) - this._originalTopPadding.get();\n\t\t\t\tconst trueTopModified = this._editors.modified.getTopForLineNumber(m.lineRangeMapping.modified.startLineNumber, true) - this._modifiedTopPadding.get();\n\t\t\t\tdeltaOrigToMod = trueTopModified - trueTopOriginal;\n\t\t\t}\n\n\t\t\tif (deltaOrigToMod > 0) {\n\t\t\t\tthis._modifiedTopPadding.set(0, undefined);\n\t\t\t\tthis._originalTopPadding.set(deltaOrigToMod, undefined);\n\t\t\t} else if (deltaOrigToMod < 0) {\n\t\t\t\tthis._modifiedTopPadding.set(-deltaOrigToMod, undefined);\n\t\t\t\tthis._originalTopPadding.set(0, undefined);\n\t\t\t} else {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._modifiedTopPadding.set(0, undefined);\n\t\t\t\t\tthis._originalTopPadding.set(0, undefined);\n\t\t\t\t}, 400);\n\t\t\t}\n\n\t\t\tif (this._editors.modified.hasTextFocus()) {\n\t\t\t\tthis._originalScrollOffset.set(this._modifiedScrollOffset.get() - deltaOrigToMod, undefined, true);\n\t\t\t} else {\n\t\t\t\tthis._modifiedScrollOffset.set(this._originalScrollOffset.get() + deltaOrigToMod, undefined, true);\n\t\t\t}\n\t\t}));\n\t}\n}\n\ninterface ILineRangeAlignment {\n\toriginalRange: LineRange;\n\tmodifiedRange: LineRange;\n\n\t// accounts for foreign viewzones and line wrapping\n\toriginalHeightInPx: number;\n\tmodifiedHeightInPx: number;\n\n\t/**\n\t * If this range alignment is a direct result of a diff, then this is the diff's line mapping.\n\t * Only used for inline-view.\n\t */\n\tdiff?: DetailedLineRangeMapping;\n}\n\nfunction computeRangeAlignment(\n\toriginalEditor: CodeEditorWidget,\n\tmodifiedEditor: CodeEditorWidget,\n\tdiffs: readonly DiffMapping[],\n\toriginalEditorAlignmentViewZones: ReadonlySet<string>,\n\tmodifiedEditorAlignmentViewZones: ReadonlySet<string>,\n\tinnerHunkAlignment: boolean,\n): ILineRangeAlignment[] {\n\tconst originalLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(originalEditor, originalEditorAlignmentViewZones));\n\tconst modifiedLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(modifiedEditor, modifiedEditorAlignmentViewZones));\n\n\tconst origLineHeight = originalEditor.getOption(EditorOption.lineHeight);\n\tconst modLineHeight = modifiedEditor.getOption(EditorOption.lineHeight);\n\n\tconst result: ILineRangeAlignment[] = [];\n\n\tlet lastOriginalLineNumber = 0;\n\tlet lastModifiedLineNumber = 0;\n\n\tfunction handleAlignmentsOutsideOfDiffs(untilOriginalLineNumberExclusive: number, untilModifiedLineNumberExclusive: number) {\n\t\twhile (true) {\n\t\t\tlet origNext = originalLineHeightOverrides.peek();\n\t\t\tlet modNext = modifiedLineHeightOverrides.peek();\n\t\t\tif (origNext && origNext.lineNumber >= untilOriginalLineNumberExclusive) {\n\t\t\t\torigNext = undefined;\n\t\t\t}\n\t\t\tif (modNext && modNext.lineNumber >= untilModifiedLineNumberExclusive) {\n\t\t\t\tmodNext = undefined;\n\t\t\t}\n\t\t\tif (!origNext && !modNext) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst distOrig = origNext ? origNext.lineNumber - lastOriginalLineNumber : Number.MAX_VALUE;\n\t\t\tconst distNext = modNext ? modNext.lineNumber - lastModifiedLineNumber : Number.MAX_VALUE;\n\n\t\t\tif (distOrig < distNext) {\n\t\t\t\toriginalLineHeightOverrides.dequeue();\n\t\t\t\tmodNext = {\n\t\t\t\t\tlineNumber: origNext!.lineNumber - lastOriginalLineNumber + lastModifiedLineNumber,\n\t\t\t\t\theightInPx: 0,\n\t\t\t\t};\n\t\t\t} else if (distOrig > distNext) {\n\t\t\t\tmodifiedLineHeightOverrides.dequeue();\n\t\t\t\torigNext = {\n\t\t\t\t\tlineNumber: modNext!.lineNumber - lastModifiedLineNumber + lastOriginalLineNumber,\n\t\t\t\t\theightInPx: 0,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toriginalLineHeightOverrides.dequeue();\n\t\t\t\tmodifiedLineHeightOverrides.dequeue();\n\t\t\t}\n\n\t\t\tresult.push({\n\t\t\t\toriginalRange: LineRange.ofLength(origNext!.lineNumber, 1),\n\t\t\t\tmodifiedRange: LineRange.ofLength(modNext!.lineNumber, 1),\n\t\t\t\toriginalHeightInPx: origLineHeight + origNext!.heightInPx,\n\t\t\t\tmodifiedHeightInPx: modLineHeight + modNext!.heightInPx,\n\t\t\t\tdiff: undefined,\n\t\t\t});\n\t\t}\n\t}\n\n\tfor (const m of diffs) {\n\t\tconst c = m.lineRangeMapping;\n\t\thandleAlignmentsOutsideOfDiffs(c.original.startLineNumber, c.modified.startLineNumber);\n\n\t\tlet first = true;\n\t\tlet lastModLineNumber = c.modified.startLineNumber;\n\t\tlet lastOrigLineNumber = c.original.startLineNumber;\n\n\t\tfunction emitAlignment(origLineNumberExclusive: number, modLineNumberExclusive: number, forceAlignment = false) {\n\t\t\tif (origLineNumberExclusive < lastOrigLineNumber || modLineNumberExclusive < lastModLineNumber) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (first) {\n\t\t\t\tfirst = false;\n\t\t\t} else if (!forceAlignment && (origLineNumberExclusive === lastOrigLineNumber || modLineNumberExclusive === lastModLineNumber)) {\n\t\t\t\t// This causes a re-alignment of an already aligned line.\n\t\t\t\t// However, we don't care for the final alignment.\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst originalRange = new LineRange(lastOrigLineNumber, origLineNumberExclusive);\n\t\t\tconst modifiedRange = new LineRange(lastModLineNumber, modLineNumberExclusive);\n\t\t\tif (originalRange.isEmpty && modifiedRange.isEmpty) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst originalAdditionalHeight = originalLineHeightOverrides\n\t\t\t\t.takeWhile(v => v.lineNumber < origLineNumberExclusive)\n\t\t\t\t?.reduce((p, c) => p + c.heightInPx, 0) ?? 0;\n\t\t\tconst modifiedAdditionalHeight = modifiedLineHeightOverrides\n\t\t\t\t.takeWhile(v => v.lineNumber < modLineNumberExclusive)\n\t\t\t\t?.reduce((p, c) => p + c.heightInPx, 0) ?? 0;\n\n\t\t\tresult.push({\n\t\t\t\toriginalRange,\n\t\t\t\tmodifiedRange,\n\t\t\t\toriginalHeightInPx: originalRange.length * origLineHeight + originalAdditionalHeight,\n\t\t\t\tmodifiedHeightInPx: modifiedRange.length * modLineHeight + modifiedAdditionalHeight,\n\t\t\t\tdiff: m.lineRangeMapping,\n\t\t\t});\n\n\t\t\tlastOrigLineNumber = origLineNumberExclusive;\n\t\t\tlastModLineNumber = modLineNumberExclusive;\n\t\t}\n\n\t\tif (innerHunkAlignment) {\n\t\t\tfor (const i of c.innerChanges || []) {\n\t\t\t\tif (i.originalRange.startColumn > 1 && i.modifiedRange.startColumn > 1) {\n\t\t\t\t\t// There is some unmodified text on this line before the diff\n\t\t\t\t\temitAlignment(i.originalRange.startLineNumber, i.modifiedRange.startLineNumber);\n\t\t\t\t}\n\t\t\t\tconst originalModel = originalEditor.getModel()!;\n\t\t\t\t// When the diff is invalid, the ranges might be out of bounds (this should be fixed in the diff model by applying edits directly).\n\t\t\t\tconst maxColumn = i.originalRange.endLineNumber <= originalModel.getLineCount() ? originalModel.getLineMaxColumn(i.originalRange.endLineNumber) : Number.MAX_SAFE_INTEGER;\n\t\t\t\tif (i.originalRange.endColumn < maxColumn) {\n\t\t\t\t\t// // There is some unmodified text on this line after the diff\n\t\t\t\t\temitAlignment(i.originalRange.endLineNumber, i.modifiedRange.endLineNumber);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\temitAlignment(c.original.endLineNumberExclusive, c.modified.endLineNumberExclusive, true);\n\n\t\tlastOriginalLineNumber = c.original.endLineNumberExclusive;\n\t\tlastModifiedLineNumber = c.modified.endLineNumberExclusive;\n\t}\n\thandleAlignmentsOutsideOfDiffs(Number.MAX_VALUE, Number.MAX_VALUE);\n\n\treturn result;\n}\n\ninterface AdditionalLineHeightInfo {\n\tlineNumber: number;\n\theightInPx: number;\n}\n\nfunction getAdditionalLineHeights(editor: CodeEditorWidget, viewZonesToIgnore: ReadonlySet<string>): readonly AdditionalLineHeightInfo[] {\n\tconst viewZoneHeights: { lineNumber: number; heightInPx: number }[] = [];\n\tconst wrappingZoneHeights: { lineNumber: number; heightInPx: number }[] = [];\n\n\tconst hasWrapping = editor.getOption(EditorOption.wrappingInfo).wrappingColumn !== -1;\n\tconst coordinatesConverter = editor._getViewModel()!.coordinatesConverter;\n\tconst editorLineHeight = editor.getOption(EditorOption.lineHeight);\n\tif (hasWrapping) {\n\t\tfor (let i = 1; i <= editor.getModel()!.getLineCount(); i++) {\n\t\t\tconst lineCount = coordinatesConverter.getModelLineViewLineCount(i);\n\t\t\tif (lineCount > 1) {\n\t\t\t\twrappingZoneHeights.push({ lineNumber: i, heightInPx: editorLineHeight * (lineCount - 1) });\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (const w of editor.getWhitespaces()) {\n\t\tif (viewZonesToIgnore.has(w.id)) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst modelLineNumber = w.afterLineNumber === 0 ? 0 : coordinatesConverter.convertViewPositionToModelPosition(\n\t\t\tnew Position(w.afterLineNumber, 1)\n\t\t).lineNumber;\n\t\tviewZoneHeights.push({ lineNumber: modelLineNumber, heightInPx: w.height });\n\t}\n\n\tconst result = joinCombine(\n\t\tviewZoneHeights,\n\t\twrappingZoneHeights,\n\t\tv => v.lineNumber,\n\t\t(v1, v2) => ({ lineNumber: v1.lineNumber, heightInPx: v1.heightInPx + v2.heightInPx })\n\t);\n\n\treturn result;\n}\n\nexport function allowsTrueInlineDiffRendering(mapping: DetailedLineRangeMapping): boolean {\n\tif (!mapping.innerChanges) {\n\t\treturn false;\n\t}\n\treturn mapping.innerChanges.every(c =>\n\t\t(rangeIsSingleLine(c.modifiedRange) && rangeIsSingleLine(c.originalRange))\n\t\t|| c.originalRange.equalsRange(new Range(1, 1, 1, 1))\n\t);\n}\n\nexport function rangeIsSingleLine(range: Range): boolean {\n\treturn range.startLineNumber === range.endLineNumber;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4952, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/movedBlocksLinesFeature.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/vs/editor/browser/widget/diffEditor/features/movedBlocksLinesFeature.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h } from '../../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../../base/common/actions.js';\nimport { booleanComparator, compareBy, numberComparator, tieBreakComparators } from '../../../../../base/common/arrays.js';\nimport { findMaxIdx } from '../../../../../base/common/arraysFind.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, autorun, autorunHandleChanges, autorunWithStore, constObservable, derived, observableFromEvent, observableSignalFromEvent, observableValue, recomputeInitiallyAndOnChange } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { ICodeEditor } from '../../../editorBrowser.js';\nimport { DiffEditorEditors } from '../components/diffEditorEditors.js';\nimport { DiffEditorViewModel } from '../diffEditorViewModel.js';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyStyle, applyViewZones } from '../utils.js';\nimport { EditorLayoutInfo } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/ranges/lineRange.js';\nimport { OffsetRange, OffsetRangeSet } from '../../../../common/core/ranges/offsetRange.js';\nimport { MovedText } from '../../../../common/diff/linesDiffComputer.js';\nimport { localize } from '../../../../../nls.js';\n\nexport class MovedBlocksLinesFeature extends Disposable {\n\tpublic static readonly movedCodeBlockPadding = 4;\n\n\tprivate readonly _element: SVGElement;\n\tprivate readonly _originalScrollTop;\n\tprivate readonly _modifiedScrollTop;\n\tprivate readonly _viewZonesChanged;\n\n\tpublic readonly width;\n\n\tconstructor(\n\t\tprivate readonly _rootElement: HTMLElement,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _originalEditorLayoutInfo: IObservable<EditorLayoutInfo | null>,\n\t\tprivate readonly _modifiedEditorLayoutInfo: IObservable<EditorLayoutInfo | null>,\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t) {\n\t\tsuper();\n\t\tthis._originalScrollTop = observableFromEvent(this, this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n\t\tthis._modifiedScrollTop = observableFromEvent(this, this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n\t\tthis._viewZonesChanged = observableSignalFromEvent('onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n\t\tthis.width = observableValue(this, 0);\n\t\tthis._modifiedViewZonesChangedSignal = observableSignalFromEvent('modified.onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n\t\tthis._originalViewZonesChangedSignal = observableSignalFromEvent('original.onDidChangeViewZones', this._editors.original.onDidChangeViewZones);\n\t\tthis._state = derived(this, (reader) => {\n\t\t\t/** @description state */\n\n\t\t\tthis._element.replaceChildren();\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tconst moves = model?.diff.read(reader)?.movedTexts;\n\t\t\tif (!moves || moves.length === 0) {\n\t\t\t\tthis.width.set(0, undefined);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._viewZonesChanged.read(reader);\n\n\t\t\tconst infoOrig = this._originalEditorLayoutInfo.read(reader);\n\t\t\tconst infoMod = this._modifiedEditorLayoutInfo.read(reader);\n\t\t\tif (!infoOrig || !infoMod) {\n\t\t\t\tthis.width.set(0, undefined);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._modifiedViewZonesChangedSignal.read(reader);\n\t\t\tthis._originalViewZonesChangedSignal.read(reader);\n\n\t\t\tconst lines = moves.map((move) => {\n\t\t\t\tfunction computeLineStart(range: LineRange, editor: ICodeEditor) {\n\t\t\t\t\tconst t1 = editor.getTopForLineNumber(range.startLineNumber, true);\n\t\t\t\t\tconst t2 = editor.getTopForLineNumber(range.endLineNumberExclusive, true);\n\t\t\t\t\treturn (t1 + t2) / 2;\n\t\t\t\t}\n\n\t\t\t\tconst start = computeLineStart(move.lineRangeMapping.original, this._editors.original);\n\t\t\t\tconst startOffset = this._originalScrollTop.read(reader);\n\t\t\t\tconst end = computeLineStart(move.lineRangeMapping.modified, this._editors.modified);\n\t\t\t\tconst endOffset = this._modifiedScrollTop.read(reader);\n\n\t\t\t\tconst from = start - startOffset;\n\t\t\t\tconst to = end - endOffset;\n\n\t\t\t\tconst top = Math.min(start, end);\n\t\t\t\tconst bottom = Math.max(start, end);\n\n\t\t\t\treturn { range: new OffsetRange(top, bottom), from, to, fromWithoutScroll: start, toWithoutScroll: end, move };\n\t\t\t});\n\n\t\t\tlines.sort(tieBreakComparators(\n\t\t\t\tcompareBy(l => l.fromWithoutScroll > l.toWithoutScroll, booleanComparator),\n\t\t\t\tcompareBy(l => l.fromWithoutScroll > l.toWithoutScroll ? l.fromWithoutScroll : -l.toWithoutScroll, numberComparator)\n\t\t\t));\n\n\t\t\tconst layout = LinesLayout.compute(lines.map(l => l.range));\n\n\t\t\tconst padding = 10;\n\t\t\tconst lineAreaLeft = infoOrig.verticalScrollbarWidth;\n\t\t\tconst lineAreaWidth = (layout.getTrackCount() - 1) * 10 + padding * 2;\n\t\t\tconst width = lineAreaLeft + lineAreaWidth + (infoMod.contentLeft - MovedBlocksLinesFeature.movedCodeBlockPadding);\n\n\t\t\tlet idx = 0;\n\t\t\tfor (const line of lines) {\n\t\t\t\tconst track = layout.getTrack(idx);\n\t\t\t\tconst verticalY = lineAreaLeft + padding + track * 10;\n\n\t\t\t\tconst arrowHeight = 15;\n\t\t\t\tconst arrowWidth = 15;\n\t\t\t\tconst right = width;\n\n\t\t\t\tconst rectWidth = infoMod.glyphMarginWidth + infoMod.lineNumbersWidth;\n\t\t\t\tconst rectHeight = 18;\n\t\t\t\tconst rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\t\t\t\trect.classList.add('arrow-rectangle');\n\t\t\t\trect.setAttribute('x', `${right - rectWidth}`);\n\t\t\t\trect.setAttribute('y', `${line.to - rectHeight / 2}`);\n\t\t\t\trect.setAttribute('width', `${rectWidth}`);\n\t\t\t\trect.setAttribute('height', `${rectHeight}`);\n\t\t\t\tthis._element.appendChild(rect);\n\n\t\t\t\tconst g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n\n\t\t\t\tconst path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\n\t\t\t\tpath.setAttribute('d', `M ${0} ${line.from} L ${verticalY} ${line.from} L ${verticalY} ${line.to} L ${right - arrowWidth} ${line.to}`);\n\t\t\t\tpath.setAttribute('fill', 'none');\n\t\t\t\tg.appendChild(path);\n\n\t\t\t\tconst arrowRight = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n\t\t\t\tarrowRight.classList.add('arrow');\n\n\t\t\t\treader.store.add(autorun(reader => {\n\t\t\t\t\tpath.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n\t\t\t\t\tarrowRight.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n\t\t\t\t}));\n\n\t\t\t\tarrowRight.setAttribute('points', `${right - arrowWidth},${line.to - arrowHeight / 2} ${right},${line.to} ${right - arrowWidth},${line.to + arrowHeight / 2}`);\n\t\t\t\tg.appendChild(arrowRight);\n\n\t\t\t\tthis._element.appendChild(g);\n\n\t\t\t\t/*\n\t\t\t\tTODO@hediet\n\t\t\t\tpath.addEventListener('mouseenter', () => {\n\t\t\t\t\tmodel.setHoveredMovedText(line.move);\n\t\t\t\t});\n\t\t\t\tpath.addEventListener('mouseleave', () => {\n\t\t\t\t\tmodel.setHoveredMovedText(undefined);\n\t\t\t\t});*/\n\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tthis.width.set(lineAreaWidth, undefined);\n\t\t});\n\n\t\tthis._element = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t\tthis._element.setAttribute('class', 'moved-blocks-lines');\n\t\tthis._rootElement.appendChild(this._element);\n\t\tthis._register(toDisposable(() => this._element.remove()));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update moved blocks lines positioning */\n\t\t\tconst info = this._originalEditorLayoutInfo.read(reader);\n\t\t\tconst info2 = this._modifiedEditorLayoutInfo.read(reader);\n\t\t\tif (!info || !info2) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._element.style.left = `${info.width - info.verticalScrollbarWidth}px`;\n\t\t\tthis._element.style.height = `${info.height}px`;\n\t\t\tthis._element.style.width = `${info.verticalScrollbarWidth + info.contentLeft - MovedBlocksLinesFeature.movedCodeBlockPadding + this.width.read(reader)}px`;\n\t\t}));\n\n\t\tthis._register(recomputeInitiallyAndOnChange(this._state));\n\n\t\tconst movedBlockViewZones = derived(reader => {\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tconst d = model?.diff.read(reader);\n\t\t\tif (!d) { return []; }\n\t\t\treturn d.movedTexts.map(move => ({\n\t\t\t\tmove,\n\t\t\t\toriginal: new PlaceholderViewZone(constObservable(move.lineRangeMapping.original.startLineNumber - 1), 18),\n\t\t\t\tmodified: new PlaceholderViewZone(constObservable(move.lineRangeMapping.modified.startLineNumber - 1), 18),\n\t\t\t}));\n\t\t});\n\n\t\tthis._register(applyViewZones(this._editors.original, movedBlockViewZones.map(zones => /** @description movedBlockViewZones.original */ zones.map(z => z.original))));\n\t\tthis._register(applyViewZones(this._editors.modified, movedBlockViewZones.map(zones => /** @description movedBlockViewZones.modified */ zones.map(z => z.modified))));\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tconst blocks = movedBlockViewZones.read(reader);\n\t\t\tfor (const b of blocks) {\n\t\t\t\tstore.add(new MovedBlockOverlayWidget(this._editors.original, b.original, b.move, 'original', this._diffModel.get()!));\n\t\t\t\tstore.add(new MovedBlockOverlayWidget(this._editors.modified, b.modified, b.move, 'modified', this._diffModel.get()!));\n\t\t\t}\n\t\t}));\n\n\t\tconst originalHasFocus = observableSignalFromEvent(\n\t\t\t'original.onDidFocusEditorWidget',\n\t\t\te => this._editors.original.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0))\n\t\t);\n\t\tconst modifiedHasFocus = observableSignalFromEvent(\n\t\t\t'modified.onDidFocusEditorWidget',\n\t\t\te => this._editors.modified.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0))\n\t\t);\n\n\t\tlet lastChangedEditor: 'original' | 'modified' = 'modified';\n\n\t\tthis._register(autorunHandleChanges({\n\t\t\tchangeTracker: {\n\t\t\t\tcreateChangeSummary: () => undefined,\n\t\t\t\thandleChange: (ctx, summary) => {\n\t\t\t\t\tif (ctx.didChange(originalHasFocus)) { lastChangedEditor = 'original'; }\n\t\t\t\t\tif (ctx.didChange(modifiedHasFocus)) { lastChangedEditor = 'modified'; }\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}, reader => {\n\t\t\t/** @description MovedBlocksLines.setActiveMovedTextFromCursor */\n\t\t\toriginalHasFocus.read(reader);\n\t\t\tmodifiedHasFocus.read(reader);\n\n\t\t\tconst m = this._diffModel.read(reader);\n\t\t\tif (!m) { return; }\n\t\t\tconst diff = m.diff.read(reader);\n\n\t\t\tlet movedText: MovedText | undefined = undefined;\n\n\t\t\tif (diff && lastChangedEditor === 'original') {\n\t\t\t\tconst originalPos = this._editors.originalCursor.read(reader);\n\t\t\t\tif (originalPos) {\n\t\t\t\t\tmovedText = diff.movedTexts.find(m => m.lineRangeMapping.original.contains(originalPos.lineNumber));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (diff && lastChangedEditor === 'modified') {\n\t\t\t\tconst modifiedPos = this._editors.modifiedCursor.read(reader);\n\t\t\t\tif (modifiedPos) {\n\t\t\t\t\tmovedText = diff.movedTexts.find(m => m.lineRangeMapping.modified.contains(modifiedPos.lineNumber));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (movedText !== m.movedTextToCompare.get()) {\n\t\t\t\tm.movedTextToCompare.set(undefined, undefined);\n\t\t\t}\n\t\t\tm.setActiveMovedText(movedText);\n\t\t}));\n\t}\n\n\tprivate readonly _modifiedViewZonesChangedSignal;\n\tprivate readonly _originalViewZonesChangedSignal;\n\n\tprivate readonly _state;\n}\n\nclass LinesLayout {\n\tpublic static compute(lines: OffsetRange[]): LinesLayout {\n\t\tconst setsPerTrack: OffsetRangeSet[] = [];\n\t\tconst trackPerLineIdx: number[] = [];\n\n\t\tfor (const line of lines) {\n\t\t\tlet trackIdx = setsPerTrack.findIndex(set => !set.intersectsStrict(line));\n\t\t\tif (trackIdx === -1) {\n\t\t\t\tconst maxTrackCount = 6;\n\t\t\t\tif (setsPerTrack.length >= maxTrackCount) {\n\t\t\t\t\ttrackIdx = findMaxIdx(setsPerTrack, compareBy(set => set.intersectWithRangeLength(line), numberComparator));\n\t\t\t\t} else {\n\t\t\t\t\ttrackIdx = setsPerTrack.length;\n\t\t\t\t\tsetsPerTrack.push(new OffsetRangeSet());\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetsPerTrack[trackIdx].addRange(line);\n\t\t\ttrackPerLineIdx.push(trackIdx);\n\t\t}\n\n\t\treturn new LinesLayout(setsPerTrack.length, trackPerLineIdx);\n\t}\n\n\tprivate constructor(\n\t\tprivate readonly _trackCount: number,\n\t\tprivate readonly trackPerLineIdx: number[]\n\t) { }\n\n\tgetTrack(lineIdx: number): number {\n\t\treturn this.trackPerLineIdx[lineIdx];\n\t}\n\n\tgetTrackCount(): number {\n\t\treturn this._trackCount;\n\t}\n}\n\nclass MovedBlockOverlayWidget extends ViewZoneOverlayWidget {\n\tprivate readonly _nodes = h('div.diff-moved-code-block', { style: { marginRight: '4px' } }, [\n\t\th('div.text-content@textContent'),\n\t\th('div.action-bar@actionBar'),\n\t]);\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t_viewZone: PlaceholderViewZone,\n\t\tprivate readonly _move: MovedText,\n\t\tprivate readonly _kind: 'original' | 'modified',\n\t\tprivate readonly _diffModel: DiffEditorViewModel,\n\t) {\n\t\tconst root = h('div.diff-hidden-lines-widget');\n\t\tsuper(_editor, _viewZone, root.root);\n\t\troot.root.appendChild(this._nodes.root);\n\n\t\tconst editorLayout = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n\n\t\tthis._register(applyStyle(this._nodes.root, {\n\t\t\tpaddingRight: editorLayout.map(l => l.verticalScrollbarWidth)\n\t\t}));\n\n\t\tlet text: string;\n\n\t\tif (_move.changes.length > 0) {\n\t\t\ttext = this._kind === 'original' ? localize(\n\t\t\t\t'codeMovedToWithChanges',\n\t\t\t\t'Code moved with changes to line {0}-{1}',\n\t\t\t\tthis._move.lineRangeMapping.modified.startLineNumber,\n\t\t\t\tthis._move.lineRangeMapping.modified.endLineNumberExclusive - 1,\n\t\t\t) : localize(\n\t\t\t\t'codeMovedFromWithChanges',\n\t\t\t\t'Code moved with changes from line {0}-{1}',\n\t\t\t\tthis._move.lineRangeMapping.original.startLineNumber,\n\t\t\t\tthis._move.lineRangeMapping.original.endLineNumberExclusive - 1,\n\t\t\t);\n\t\t} else {\n\t\t\ttext = this._kind === 'original' ? localize(\n\t\t\t\t'codeMovedTo',\n\t\t\t\t'Code moved to line {0}-{1}',\n\t\t\t\tthis._move.lineRangeMapping.modified.startLineNumber,\n\t\t\t\tthis._move.lineRangeMapping.modified.endLineNumberExclusive - 1,\n\t\t\t) : localize(\n\t\t\t\t'codeMovedFrom',\n\t\t\t\t'Code moved from line {0}-{1}',\n\t\t\t\tthis._move.lineRangeMapping.original.startLineNumber,\n\t\t\t\tthis._move.lineRangeMapping.original.endLineNumberExclusive - 1,\n\t\t\t);\n\t\t}\n\n\t\tconst actionBar = this._register(new ActionBar(this._nodes.actionBar, {\n\t\t\thighlightToggledItems: true,\n\t\t}));\n\n\t\tconst caption = new Action(\n\t\t\t'',\n\t\t\ttext,\n\t\t\t'',\n\t\t\tfalse,\n\t\t);\n\t\tactionBar.push(caption, { icon: false, label: true });\n\n\t\tconst actionCompare = new Action(\n\t\t\t'',\n\t\t\t'Compare',\n\t\t\tThemeIcon.asClassName(Codicon.compareChanges),\n\t\t\ttrue,\n\t\t\t() => {\n\t\t\t\tthis._editor.focus();\n\t\t\t\tthis._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get() === _move ? undefined : this._move, undefined);\n\t\t\t},\n\t\t);\n\t\tthis._register(autorun(reader => {\n\t\t\tconst isActive = this._diffModel.movedTextToCompare.read(reader) === _move;\n\t\t\tactionCompare.checked = isActive;\n\t\t}));\n\n\t\tactionBar.push(actionCompare, { icon: false, label: true });\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5252, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorDecorations.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/components/diffEditorDecorations.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/vs/editor/browser/widget/diffEditor/components/diffEditorDecorations.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, derived } from '../../../../../base/common/observable.js';\nimport { DiffEditorEditors } from './diffEditorEditors.js';\nimport { allowsTrueInlineDiffRendering } from './diffEditorViewZones/diffEditorViewZones.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\nimport { DiffEditorViewModel } from '../diffEditorViewModel.js';\nimport { DiffEditorWidget } from '../diffEditorWidget.js';\nimport { MovedBlocksLinesFeature } from '../features/movedBlocksLinesFeature.js';\nimport { diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackground, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackground, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from '../registrations.contribution.js';\nimport { applyObservableDecorations } from '../utils.js';\nimport { IModelDeltaDecoration } from '../../../../common/model.js';\n\nexport class DiffEditorDecorations extends Disposable {\n\tconstructor(\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\twidget: DiffEditorWidget,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(applyObservableDecorations(this._editors.original, this._decorations.map(d => d?.originalDecorations || [])));\n\t\tthis._register(applyObservableDecorations(this._editors.modified, this._decorations.map(d => d?.modifiedDecorations || [])));\n\t}\n\n\tprivate readonly _decorations = derived(this, (reader) => {\n\t\tconst diffModel = this._diffModel.read(reader);\n\t\tconst diff = diffModel?.diff.read(reader);\n\t\tif (!diff) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst movedTextToCompare = this._diffModel.read(reader)!.movedTextToCompare.read(reader);\n\t\tconst renderIndicators = this._options.renderIndicators.read(reader);\n\t\tconst showEmptyDecorations = this._options.showEmptyDecorations.read(reader);\n\n\t\tconst originalDecorations: IModelDeltaDecoration[] = [];\n\t\tconst modifiedDecorations: IModelDeltaDecoration[] = [];\n\t\tif (!movedTextToCompare) {\n\t\t\tfor (const m of diff.mappings) {\n\t\t\t\tif (!m.lineRangeMapping.original.isEmpty) {\n\t\t\t\t\toriginalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange()!, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n\t\t\t\t}\n\t\t\t\tif (!m.lineRangeMapping.modified.isEmpty) {\n\t\t\t\t\tmodifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange()!, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n\t\t\t\t}\n\n\t\t\t\tif (m.lineRangeMapping.modified.isEmpty || m.lineRangeMapping.original.isEmpty) {\n\t\t\t\t\tif (!m.lineRangeMapping.original.isEmpty) {\n\t\t\t\t\t\toriginalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange()!, options: diffWholeLineDeleteDecoration });\n\t\t\t\t\t}\n\t\t\t\t\tif (!m.lineRangeMapping.modified.isEmpty) {\n\t\t\t\t\t\tmodifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange()!, options: diffWholeLineAddDecoration });\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst useInlineDiff = this._options.useTrueInlineDiffRendering.read(reader) && allowsTrueInlineDiffRendering(m.lineRangeMapping);\n\t\t\t\t\tfor (const i of m.lineRangeMapping.innerChanges || []) {\n\t\t\t\t\t\t// Don't show empty markers outside the line range\n\t\t\t\t\t\tif (m.lineRangeMapping.original.contains(i.originalRange.startLineNumber)) {\n\t\t\t\t\t\t\toriginalDecorations.push({ range: i.originalRange, options: (i.originalRange.isEmpty() && showEmptyDecorations) ? diffDeleteDecorationEmpty : diffDeleteDecoration });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (m.lineRangeMapping.modified.contains(i.modifiedRange.startLineNumber)) {\n\t\t\t\t\t\t\tmodifiedDecorations.push({ range: i.modifiedRange, options: (i.modifiedRange.isEmpty() && showEmptyDecorations && !useInlineDiff) ? diffAddDecorationEmpty : diffAddDecoration });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (useInlineDiff) {\n\t\t\t\t\t\t\tconst deletedText = diffModel!.model.original.getValueInRange(i.originalRange);\n\t\t\t\t\t\t\tmodifiedDecorations.push({\n\t\t\t\t\t\t\t\trange: i.modifiedRange,\n\t\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\t\tdescription: 'deleted-text',\n\t\t\t\t\t\t\t\t\tbefore: {\n\t\t\t\t\t\t\t\t\t\tcontent: deletedText,\n\t\t\t\t\t\t\t\t\t\tinlineClassName: 'inline-deleted-text',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tzIndex: 100000,\n\t\t\t\t\t\t\t\t\tshowIfCollapsed: true,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (movedTextToCompare) {\n\t\t\tfor (const m of movedTextToCompare.changes) {\n\t\t\t\tconst fullRangeOriginal = m.original.toInclusiveRange();\n\t\t\t\tif (fullRangeOriginal) {\n\t\t\t\t\toriginalDecorations.push({ range: fullRangeOriginal, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n\t\t\t\t}\n\t\t\t\tconst fullRangeModified = m.modified.toInclusiveRange();\n\t\t\t\tif (fullRangeModified) {\n\t\t\t\t\tmodifiedDecorations.push({ range: fullRangeModified, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n\t\t\t\t}\n\n\t\t\t\tfor (const i of m.innerChanges || []) {\n\t\t\t\t\toriginalDecorations.push({ range: i.originalRange, options: diffDeleteDecoration });\n\t\t\t\t\tmodifiedDecorations.push({ range: i.modifiedRange, options: diffAddDecoration });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst activeMovedText = this._diffModel.read(reader)!.activeMovedText.read(reader);\n\n\t\tfor (const m of diff.movedTexts) {\n\t\t\toriginalDecorations.push({\n\t\t\t\trange: m.lineRangeMapping.original.toInclusiveRange()!, options: {\n\t\t\t\t\tdescription: 'moved',\n\t\t\t\t\tblockClassName: 'movedOriginal' + (m === activeMovedText ? ' currentMove' : ''),\n\t\t\t\t\tblockPadding: [MovedBlocksLinesFeature.movedCodeBlockPadding, 0, MovedBlocksLinesFeature.movedCodeBlockPadding, MovedBlocksLinesFeature.movedCodeBlockPadding],\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmodifiedDecorations.push({\n\t\t\t\trange: m.lineRangeMapping.modified.toInclusiveRange()!, options: {\n\t\t\t\t\tdescription: 'moved',\n\t\t\t\t\tblockClassName: 'movedModified' + (m === activeMovedText ? ' currentMove' : ''),\n\t\t\t\t\tblockPadding: [4, 0, 4, 4],\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn { originalDecorations, modifiedDecorations };\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, derived } from '../../../../../base/common/observable.js';\nimport { DiffEditorEditors } from './diffEditorEditors.js';\nimport { allowsTrueInlineDiffRendering } from './diffEditorViewZones/diffEditorViewZones.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\nimport { DiffEditorViewModel } from '../diffEditorViewModel.js';\nimport { DiffEditorWidget } from '../diffEditorWidget.js';\nimport { MovedBlocksLinesFeature } from '../features/movedBlocksLinesFeature.js';\nimport { diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackground, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackground, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from '../registrations.contribution.js';\nimport { applyObservableDecorations } from '../utils.js';\nimport { IModelDeltaDecoration } from '../../../../common/model.js';\n\nexport class DiffEditorDecorations extends Disposable {\n\tconstructor(\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\twidget: DiffEditorWidget,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(applyObservableDecorations(this._editors.original, this._decorations.map(d => d?.originalDecorations || [])));\n\t\tthis._register(applyObservableDecorations(this._editors.modified, this._decorations.map(d => d?.modifiedDecorations || [])));\n\t}\n\n\tprivate readonly _decorations = derived(this, (reader) => {\n\t\tconst diffModel = this._diffModel.read(reader);\n\t\tconst diff = diffModel?.diff.read(reader);\n\t\tif (!diff) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst movedTextToCompare = this._diffModel.read(reader)!.movedTextToCompare.read(reader);\n\t\tconst renderIndicators = this._options.renderIndicators.read(reader);\n\t\tconst showEmptyDecorations = this._options.showEmptyDecorations.read(reader);\n\n\t\tconst originalDecorations: IModelDeltaDecoration[] = [];\n\t\tconst modifiedDecorations: IModelDeltaDecoration[] = [];\n\t\tif (!movedTextToCompare) {\n\t\t\tfor (const m of diff.mappings) {\n\t\t\t\tif (!m.lineRangeMapping.original.isEmpty) {\n\t\t\t\t\toriginalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange()!, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n\t\t\t\t}\n\t\t\t\tif (!m.lineRangeMapping.modified.isEmpty) {\n\t\t\t\t\tmodifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange()!, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n\t\t\t\t}\n\n\t\t\t\tif (m.lineRangeMapping.modified.isEmpty || m.lineRangeMapping.original.isEmpty) {\n\t\t\t\t\tif (!m.lineRangeMapping.original.isEmpty) {\n\t\t\t\t\t\toriginalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange()!, options: diffWholeLineDeleteDecoration });\n\t\t\t\t\t}\n\t\t\t\t\tif (!m.lineRangeMapping.modified.isEmpty) {\n\t\t\t\t\t\tmodifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange()!, options: diffWholeLineAddDecoration });\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst useInlineDiff = this._options.useTrueInlineDiffRendering.read(reader) && allowsTrueInlineDiffRendering(m.lineRangeMapping);\n\t\t\t\t\tfor (const i of m.lineRangeMapping.innerChanges || []) {\n\t\t\t\t\t\t// Don't show empty markers outside the line range\n\t\t\t\t\t\tif (m.lineRangeMapping.original.contains(i.originalRange.startLineNumber)) {\n\t\t\t\t\t\t\toriginalDecorations.push({ range: i.originalRange, options: (i.originalRange.isEmpty() && showEmptyDecorations) ? diffDeleteDecorationEmpty : diffDeleteDecoration });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (m.lineRangeMapping.modified.contains(i.modifiedRange.startLineNumber)) {\n\t\t\t\t\t\t\tmodifiedDecorations.push({ range: i.modifiedRange, options: (i.modifiedRange.isEmpty() && showEmptyDecorations && !useInlineDiff) ? diffAddDecorationEmpty : diffAddDecoration });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (useInlineDiff) {\n\t\t\t\t\t\t\tconst deletedText = diffModel!.model.original.getValueInRange(i.originalRange);\n\t\t\t\t\t\t\tmodifiedDecorations.push({\n\t\t\t\t\t\t\t\trange: i.modifiedRange,\n\t\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\t\tdescription: 'deleted-text',\n\t\t\t\t\t\t\t\t\tbefore: {\n\t\t\t\t\t\t\t\t\t\tcontent: deletedText,\n\t\t\t\t\t\t\t\t\t\tinlineClassName: 'inline-deleted-text',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tzIndex: 100000,\n\t\t\t\t\t\t\t\t\tshowIfCollapsed: true,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (movedTextToCompare) {\n\t\t\tfor (const m of movedTextToCompare.changes) {\n\t\t\t\tconst fullRangeOriginal = m.original.toInclusiveRange();\n\t\t\t\tif (fullRangeOriginal) {\n\t\t\t\t\toriginalDecorations.push({ range: fullRangeOriginal, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n\t\t\t\t}\n\t\t\t\tconst fullRangeModified = m.modified.toInclusiveRange();\n\t\t\t\tif (fullRangeModified) {\n\t\t\t\t\tmodifiedDecorations.push({ range: fullRangeModified, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n\t\t\t\t}\n\n\t\t\t\tfor (const i of m.innerChanges || []) {\n\t\t\t\t\toriginalDecorations.push({ range: i.originalRange, options: diffDeleteDecoration });\n\t\t\t\t\tmodifiedDecorations.push({ range: i.modifiedRange, options: diffAddDecoration });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst activeMovedText = this._diffModel.read(reader)!.activeMovedText.read(reader);\n\n\t\tfor (const m of diff.movedTexts) {\n\t\t\toriginalDecorations.push({\n\t\t\t\trange: m.lineRangeMapping.original.toInclusiveRange()!, options: {\n\t\t\t\t\tdescription: 'moved',\n\t\t\t\t\tblockClassName: 'movedOriginal' + (m === activeMovedText ? ' currentMove' : ''),\n\t\t\t\t\tblockPadding: [MovedBlocksLinesFeature.movedCodeBlockPadding, 0, MovedBlocksLinesFeature.movedCodeBlockPadding, MovedBlocksLinesFeature.movedCodeBlockPadding],\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmodifiedDecorations.push({\n\t\t\t\trange: m.lineRangeMapping.modified.toInclusiveRange()!, options: {\n\t\t\t\t\tdescription: 'moved',\n\t\t\t\t\tblockClassName: 'movedModified' + (m === activeMovedText ? ' currentMove' : ''),\n\t\t\t\t\tblockPadding: [4, 0, 4, 4],\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn { originalDecorations, modifiedDecorations };\n\t});\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5421, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/overviewRulerFeature.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/features/overviewRulerFeature.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/vs/editor/browser/widget/diffEditor/features/overviewRulerFeature.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { EventType, addDisposableListener, addStandardDisposableListener, h } from '../../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../../base/browser/fastDomNode.js';\nimport { IMouseWheelEvent } from '../../../../../base/browser/mouseEvent.js';\nimport { ScrollbarState } from '../../../../../base/browser/ui/scrollbar/scrollbarState.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, autorun, autorunWithStore, derived, observableFromEvent, observableSignalFromEvent } from '../../../../../base/common/observable.js';\nimport { CodeEditorWidget } from '../../codeEditor/codeEditorWidget.js';\nimport { DiffEditorEditors } from '../components/diffEditorEditors.js';\nimport { DiffEditorViewModel } from '../diffEditorViewModel.js';\nimport { appendRemoveOnDispose } from '../utils.js';\nimport { EditorLayoutInfo, EditorOption } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/ranges/lineRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { OverviewRulerZone } from '../../../../common/viewModel/overviewZoneManager.js';\nimport { defaultInsertColor, defaultRemoveColor, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\n\nexport class OverviewRulerFeature extends Disposable {\n\tprivate static readonly ONE_OVERVIEW_WIDTH = 15;\n\tpublic static readonly ENTIRE_DIFF_OVERVIEW_WIDTH = this.ONE_OVERVIEW_WIDTH * 2;\n\tpublic readonly width = OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH;\n\n\tconstructor(\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _rootElement: HTMLElement,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _rootWidth: IObservable<number>,\n\t\tprivate readonly _rootHeight: IObservable<number>,\n\t\tprivate readonly _modifiedEditorLayoutInfo: IObservable<EditorLayoutInfo | null>,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t) {\n\t\tsuper();\n\n\t\tconst currentColorTheme = observableFromEvent(this._themeService.onDidColorThemeChange, () => this._themeService.getColorTheme());\n\n\t\tconst currentColors = derived(reader => {\n\t\t\t/** @description colors */\n\t\t\tconst theme = currentColorTheme.read(reader);\n\t\t\tconst insertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n\t\t\tconst removeColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n\t\t\treturn { insertColor, removeColor };\n\t\t});\n\n\t\tconst viewportDomElement = createFastDomNode(document.createElement('div'));\n\t\tviewportDomElement.setClassName('diffViewport');\n\t\tviewportDomElement.setPosition('absolute');\n\n\t\tconst diffOverviewRoot = h('div.diffOverview', {\n\t\t\tstyle: { position: 'absolute', top: '0px', width: OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px' }\n\t\t}).root;\n\t\tthis._register(appendRemoveOnDispose(diffOverviewRoot, viewportDomElement.domNode));\n\t\tthis._register(addStandardDisposableListener(diffOverviewRoot, EventType.POINTER_DOWN, (e) => {\n\t\t\tthis._editors.modified.delegateVerticalScrollbarPointerDown(e);\n\t\t}));\n\t\tthis._register(addDisposableListener(diffOverviewRoot, EventType.MOUSE_WHEEL, (e: IMouseWheelEvent) => {\n\t\t\tthis._editors.modified.delegateScrollFromMouseWheelEvent(e);\n\t\t}, { passive: false }));\n\t\tthis._register(appendRemoveOnDispose(this._rootElement, diffOverviewRoot));\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\t/** @description recreate overview rules when model changes */\n\t\t\tconst m = this._diffModel.read(reader);\n\n\t\t\tconst originalOverviewRuler = this._editors.original.createOverviewRuler('original diffOverviewRuler');\n\t\t\tif (originalOverviewRuler) {\n\t\t\t\tstore.add(originalOverviewRuler);\n\t\t\t\tstore.add(appendRemoveOnDispose(diffOverviewRoot, originalOverviewRuler.getDomNode()));\n\t\t\t}\n\n\t\t\tconst modifiedOverviewRuler = this._editors.modified.createOverviewRuler('modified diffOverviewRuler');\n\t\t\tif (modifiedOverviewRuler) {\n\t\t\t\tstore.add(modifiedOverviewRuler);\n\t\t\t\tstore.add(appendRemoveOnDispose(diffOverviewRoot, modifiedOverviewRuler.getDomNode()));\n\t\t\t}\n\n\t\t\tif (!originalOverviewRuler || !modifiedOverviewRuler) {\n\t\t\t\t// probably no model\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst origViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.original.onDidChangeViewZones);\n\t\t\tconst modViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.modified.onDidChangeViewZones);\n\t\t\tconst origHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.original.onDidChangeHiddenAreas);\n\t\t\tconst modHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.modified.onDidChangeHiddenAreas);\n\n\t\t\tstore.add(autorun(reader => {\n\t\t\t\t/** @description set overview ruler zones */\n\t\t\t\torigViewZonesChanged.read(reader);\n\t\t\t\tmodViewZonesChanged.read(reader);\n\t\t\t\torigHiddenRangesChanged.read(reader);\n\t\t\t\tmodHiddenRangesChanged.read(reader);\n\n\t\t\t\tconst colors = currentColors.read(reader);\n\t\t\t\tconst diff = m?.diff.read(reader)?.mappings;\n\n\t\t\t\tfunction createZones(ranges: LineRange[], color: Color, editor: CodeEditorWidget) {\n\t\t\t\t\tconst vm = editor._getViewModel();\n\t\t\t\t\tif (!vm) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t\treturn ranges\n\t\t\t\t\t\t.filter(d => d.length > 0)\n\t\t\t\t\t\t.map(r => {\n\t\t\t\t\t\t\tconst start = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.startLineNumber, 1));\n\t\t\t\t\t\t\tconst end = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.endLineNumberExclusive, 1));\n\t\t\t\t\t\t\t// By computing the lineCount, we won't ask the view model later for the bottom vertical position.\n\t\t\t\t\t\t\t// (The view model will take into account the alignment viewzones, which will give\n\t\t\t\t\t\t\t// modifications and deletetions always the same height.)\n\t\t\t\t\t\t\tconst lineCount = end.lineNumber - start.lineNumber;\n\t\t\t\t\t\t\treturn new OverviewRulerZone(start.lineNumber, end.lineNumber, lineCount, color.toString());\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst originalZones = createZones((diff || []).map(d => d.lineRangeMapping.original), colors.removeColor, this._editors.original);\n\t\t\t\tconst modifiedZones = createZones((diff || []).map(d => d.lineRangeMapping.modified), colors.insertColor, this._editors.modified);\n\t\t\t\toriginalOverviewRuler?.setZones(originalZones);\n\t\t\t\tmodifiedOverviewRuler?.setZones(modifiedZones);\n\t\t\t}));\n\n\t\t\tstore.add(autorun(reader => {\n\t\t\t\t/** @description layout overview ruler */\n\t\t\t\tconst height = this._rootHeight.read(reader);\n\t\t\t\tconst width = this._rootWidth.read(reader);\n\t\t\t\tconst layoutInfo = this._modifiedEditorLayoutInfo.read(reader);\n\t\t\t\tif (layoutInfo) {\n\t\t\t\t\tconst freeSpace = OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * OverviewRulerFeature.ONE_OVERVIEW_WIDTH;\n\t\t\t\t\toriginalOverviewRuler.setLayout({\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\theight: height,\n\t\t\t\t\t\tright: freeSpace + OverviewRulerFeature.ONE_OVERVIEW_WIDTH,\n\t\t\t\t\t\twidth: OverviewRulerFeature.ONE_OVERVIEW_WIDTH,\n\t\t\t\t\t});\n\t\t\t\t\tmodifiedOverviewRuler.setLayout({\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\theight: height,\n\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\twidth: OverviewRulerFeature.ONE_OVERVIEW_WIDTH,\n\t\t\t\t\t});\n\t\t\t\t\tconst scrollTop = this._editors.modifiedScrollTop.read(reader);\n\t\t\t\t\tconst scrollHeight = this._editors.modifiedScrollHeight.read(reader);\n\n\t\t\t\t\tconst scrollBarOptions = this._editors.modified.getOption(EditorOption.scrollbar);\n\t\t\t\t\tconst state = new ScrollbarState(\n\t\t\t\t\t\tscrollBarOptions.verticalHasArrows ? scrollBarOptions.arrowSize : 0,\n\t\t\t\t\t\tscrollBarOptions.verticalScrollbarSize,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tlayoutInfo.height,\n\t\t\t\t\t\tscrollHeight,\n\t\t\t\t\t\tscrollTop\n\t\t\t\t\t);\n\n\t\t\t\t\tviewportDomElement.setTop(state.getSliderPosition());\n\t\t\t\t\tviewportDomElement.setHeight(state.getSliderSize());\n\t\t\t\t} else {\n\t\t\t\t\tviewportDomElement.setTop(0);\n\t\t\t\t\tviewportDomElement.setHeight(0);\n\t\t\t\t}\n\n\t\t\t\tdiffOverviewRoot.style.height = height + 'px';\n\t\t\t\tdiffOverviewRoot.style.left = (width - OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n\t\t\t\tviewportDomElement.setWidth(OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH);\n\t\t\t}));\n\t\t}));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { EventType, addDisposableListener, addStandardDisposableListener, h } from '../../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../../base/browser/fastDomNode.js';\nimport { IMouseWheelEvent } from '../../../../../base/browser/mouseEvent.js';\nimport { ScrollbarState } from '../../../../../base/browser/ui/scrollbar/scrollbarState.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, autorun, autorunWithStore, derived, observableFromEvent, observableSignalFromEvent } from '../../../../../base/common/observable.js';\nimport { CodeEditorWidget } from '../../codeEditor/codeEditorWidget.js';\nimport { DiffEditorEditors } from '../components/diffEditorEditors.js';\nimport { DiffEditorViewModel } from '../diffEditorViewModel.js';\nimport { appendRemoveOnDispose } from '../utils.js';\nimport { EditorLayoutInfo, EditorOption } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/ranges/lineRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { OverviewRulerZone } from '../../../../common/viewModel/overviewZoneManager.js';\nimport { defaultInsertColor, defaultRemoveColor, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\n\nexport class OverviewRulerFeature extends Disposable {\n\tprivate static readonly ONE_OVERVIEW_WIDTH = 15;\n\tpublic static readonly ENTIRE_DIFF_OVERVIEW_WIDTH = this.ONE_OVERVIEW_WIDTH * 2;\n\tpublic readonly width = OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH;\n\n\tconstructor(\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _rootElement: HTMLElement,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _rootWidth: IObservable<number>,\n\t\tprivate readonly _rootHeight: IObservable<number>,\n\t\tprivate readonly _modifiedEditorLayoutInfo: IObservable<EditorLayoutInfo | null>,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t) {\n\t\tsuper();\n\n\t\tconst currentColorTheme = observableFromEvent(this._themeService.onDidColorThemeChange, () => this._themeService.getColorTheme());\n\n\t\tconst currentColors = derived(reader => {\n\t\t\t/** @description colors */\n\t\t\tconst theme = currentColorTheme.read(reader);\n\t\t\tconst insertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n\t\t\tconst removeColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n\t\t\treturn { insertColor, removeColor };\n\t\t});\n\n\t\tconst viewportDomElement = createFastDomNode(document.createElement('div'));\n\t\tviewportDomElement.setClassName('diffViewport');\n\t\tviewportDomElement.setPosition('absolute');\n\n\t\tconst diffOverviewRoot = h('div.diffOverview', {\n\t\t\tstyle: { position: 'absolute', top: '0px', width: OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px' }\n\t\t}).root;\n\t\tthis._register(appendRemoveOnDispose(diffOverviewRoot, viewportDomElement.domNode));\n\t\tthis._register(addStandardDisposableListener(diffOverviewRoot, EventType.POINTER_DOWN, (e) => {\n\t\t\tthis._editors.modified.delegateVerticalScrollbarPointerDown(e);\n\t\t}));\n\t\tthis._register(addDisposableListener(diffOverviewRoot, EventType.MOUSE_WHEEL, (e: IMouseWheelEvent) => {\n\t\t\tthis._editors.modified.delegateScrollFromMouseWheelEvent(e);\n\t\t}, { passive: false }));\n\t\tthis._register(appendRemoveOnDispose(this._rootElement, diffOverviewRoot));\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\t/** @description recreate overview rules when model changes */\n\t\t\tconst m = this._diffModel.read(reader);\n\n\t\t\tconst originalOverviewRuler = this._editors.original.createOverviewRuler('original diffOverviewRuler');\n\t\t\tif (originalOverviewRuler) {\n\t\t\t\tstore.add(originalOverviewRuler);\n\t\t\t\tstore.add(appendRemoveOnDispose(diffOverviewRoot, originalOverviewRuler.getDomNode()));\n\t\t\t}\n\n\t\t\tconst modifiedOverviewRuler = this._editors.modified.createOverviewRuler('modified diffOverviewRuler');\n\t\t\tif (modifiedOverviewRuler) {\n\t\t\t\tstore.add(modifiedOverviewRuler);\n\t\t\t\tstore.add(appendRemoveOnDispose(diffOverviewRoot, modifiedOverviewRuler.getDomNode()));\n\t\t\t}\n\n\t\t\tif (!originalOverviewRuler || !modifiedOverviewRuler) {\n\t\t\t\t// probably no model\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst origViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.original.onDidChangeViewZones);\n\t\t\tconst modViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.modified.onDidChangeViewZones);\n\t\t\tconst origHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.original.onDidChangeHiddenAreas);\n\t\t\tconst modHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.modified.onDidChangeHiddenAreas);\n\n\t\t\tstore.add(autorun(reader => {\n\t\t\t\t/** @description set overview ruler zones */\n\t\t\t\torigViewZonesChanged.read(reader);\n\t\t\t\tmodViewZonesChanged.read(reader);\n\t\t\t\torigHiddenRangesChanged.read(reader);\n\t\t\t\tmodHiddenRangesChanged.read(reader);\n\n\t\t\t\tconst colors = currentColors.read(reader);\n\t\t\t\tconst diff = m?.diff.read(reader)?.mappings;\n\n\t\t\t\tfunction createZones(ranges: LineRange[], color: Color, editor: CodeEditorWidget) {\n\t\t\t\t\tconst vm = editor._getViewModel();\n\t\t\t\t\tif (!vm) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t\treturn ranges\n\t\t\t\t\t\t.filter(d => d.length > 0)\n\t\t\t\t\t\t.map(r => {\n\t\t\t\t\t\t\tconst start = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.startLineNumber, 1));\n\t\t\t\t\t\t\tconst end = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.endLineNumberExclusive, 1));\n\t\t\t\t\t\t\t// By computing the lineCount, we won't ask the view model later for the bottom vertical position.\n\t\t\t\t\t\t\t// (The view model will take into account the alignment viewzones, which will give\n\t\t\t\t\t\t\t// modifications and deletetions always the same height.)\n\t\t\t\t\t\t\tconst lineCount = end.lineNumber - start.lineNumber;\n\t\t\t\t\t\t\treturn new OverviewRulerZone(start.lineNumber, end.lineNumber, lineCount, color.toString());\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst originalZones = createZones((diff || []).map(d => d.lineRangeMapping.original), colors.removeColor, this._editors.original);\n\t\t\t\tconst modifiedZones = createZones((diff || []).map(d => d.lineRangeMapping.modified), colors.insertColor, this._editors.modified);\n\t\t\t\toriginalOverviewRuler?.setZones(originalZones);\n\t\t\t\tmodifiedOverviewRuler?.setZones(modifiedZones);\n\t\t\t}));\n\n\t\t\tstore.add(autorun(reader => {\n\t\t\t\t/** @description layout overview ruler */\n\t\t\t\tconst height = this._rootHeight.read(reader);\n\t\t\t\tconst width = this._rootWidth.read(reader);\n\t\t\t\tconst layoutInfo = this._modifiedEditorLayoutInfo.read(reader);\n\t\t\t\tif (layoutInfo) {\n\t\t\t\t\tconst freeSpace = OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * OverviewRulerFeature.ONE_OVERVIEW_WIDTH;\n\t\t\t\t\toriginalOverviewRuler.setLayout({\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\theight: height,\n\t\t\t\t\t\tright: freeSpace + OverviewRulerFeature.ONE_OVERVIEW_WIDTH,\n\t\t\t\t\t\twidth: OverviewRulerFeature.ONE_OVERVIEW_WIDTH,\n\t\t\t\t\t});\n\t\t\t\t\tmodifiedOverviewRuler.setLayout({\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\theight: height,\n\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\twidth: OverviewRulerFeature.ONE_OVERVIEW_WIDTH,\n\t\t\t\t\t});\n\t\t\t\t\tconst scrollTop = this._editors.modifiedScrollTop.read(reader);\n\t\t\t\t\tconst scrollHeight = this._editors.modifiedScrollHeight.read(reader);\n\n\t\t\t\t\tconst scrollBarOptions = this._editors.modified.getOption(EditorOption.scrollbar);\n\t\t\t\t\tconst state = new ScrollbarState(\n\t\t\t\t\t\tscrollBarOptions.verticalHasArrows ? scrollBarOptions.arrowSize : 0,\n\t\t\t\t\t\tscrollBarOptions.verticalScrollbarSize,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tlayoutInfo.height,\n\t\t\t\t\t\tscrollHeight,\n\t\t\t\t\t\tscrollTop\n\t\t\t\t\t);\n\n\t\t\t\t\tviewportDomElement.setTop(state.getSliderPosition());\n\t\t\t\t\tviewportDomElement.setHeight(state.getSliderSize());\n\t\t\t\t} else {\n\t\t\t\t\tviewportDomElement.setTop(0);\n\t\t\t\t\tviewportDomElement.setHeight(0);\n\t\t\t\t}\n\n\t\t\t\tdiffOverviewRoot.style.height = height + 'px';\n\t\t\t\tdiffOverviewRoot.style.left = (width - OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n\t\t\t\tviewportDomElement.setWidth(OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH);\n\t\t\t}));\n\t\t}));\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5603, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorEditors.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/vs/editor/browser/widget/diffEditor/components/diffEditorEditors.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IReader, autorunHandleChanges, derived, derivedOpts, observableFromEvent } from '../../../../../base/common/observable.js';\nimport { IEditorConstructionOptions } from '../../../config/editorConfiguration.js';\nimport { IDiffEditorConstructionOptions } from '../../../editorBrowser.js';\nimport { observableCodeEditor } from '../../../observableCodeEditor.js';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from '../../codeEditor/codeEditorWidget.js';\nimport { IDiffCodeEditorWidgetOptions } from '../diffEditorWidget.js';\nimport { OverviewRulerFeature } from '../features/overviewRulerFeature.js';\nimport { EditorOptions, IEditorOptions } from '../../../../common/config/editorOptions.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { IContentSizeChangedEvent } from '../../../../common/editorCommon.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\n\nexport class DiffEditorEditors extends Disposable {\n\tpublic readonly original;\n\tpublic readonly modified;\n\n\tprivate readonly _onDidContentSizeChange;\n\tpublic get onDidContentSizeChange() { return this._onDidContentSizeChange.event; }\n\n\tpublic readonly modifiedScrollTop;\n\tpublic readonly modifiedScrollHeight;\n\n\tpublic readonly modifiedObs;\n\tpublic readonly originalObs;\n\n\tpublic readonly modifiedModel;\n\n\tpublic readonly modifiedSelections;\n\tpublic readonly modifiedCursor;\n\n\tpublic readonly originalCursor;\n\n\tpublic readonly isOriginalFocused;\n\tpublic readonly isModifiedFocused;\n\n\tpublic readonly isFocused;\n\n\tconstructor(\n\t\tprivate readonly originalEditorElement: HTMLElement,\n\t\tprivate readonly modifiedEditorElement: HTMLElement,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tprivate _argCodeEditorWidgetOptions: IDiffCodeEditorWidgetOptions,\n\t\tprivate readonly _createInnerEditor: (instantiationService: IInstantiationService, container: HTMLElement, options: Readonly<IEditorOptions>, editorWidgetOptions: ICodeEditorWidgetOptions) => CodeEditorWidget,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService\n\t) {\n\t\tsuper();\n\t\tthis.original = this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(), this._argCodeEditorWidgetOptions.originalEditor || {}));\n\t\tthis.modified = this._register(this._createRightHandSideEditor(this._options.editorOptions.get(), this._argCodeEditorWidgetOptions.modifiedEditor || {}));\n\t\tthis._onDidContentSizeChange = this._register(new Emitter<IContentSizeChangedEvent>());\n\t\tthis.modifiedScrollTop = observableFromEvent(this, this.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this.modified.getScrollTop());\n\t\tthis.modifiedScrollHeight = observableFromEvent(this, this.modified.onDidScrollChange, () => /** @description modified.getScrollHeight */ this.modified.getScrollHeight());\n\t\tthis.modifiedObs = observableCodeEditor(this.modified);\n\t\tthis.originalObs = observableCodeEditor(this.original);\n\t\tthis.modifiedModel = this.modifiedObs.model;\n\t\tthis.modifiedSelections = observableFromEvent(this, this.modified.onDidChangeCursorSelection, () => this.modified.getSelections() ?? []);\n\t\tthis.modifiedCursor = derivedOpts({ owner: this, equalsFn: Position.equals }, reader => this.modifiedSelections.read(reader)[0]?.getPosition() ?? new Position(1, 1));\n\t\tthis.originalCursor = observableFromEvent(this, this.original.onDidChangeCursorPosition, () => this.original.getPosition() ?? new Position(1, 1));\n\t\tthis.isOriginalFocused = observableCodeEditor(this.original).isFocused;\n\t\tthis.isModifiedFocused = observableCodeEditor(this.modified).isFocused;\n\t\tthis.isFocused = derived(this, reader => this.isOriginalFocused.read(reader) || this.isModifiedFocused.read(reader));\n\n\t\tthis._argCodeEditorWidgetOptions = null as any;\n\n\t\tthis._register(autorunHandleChanges({\n\t\t\tchangeTracker: {\n\t\t\t\tcreateChangeSummary: (): IDiffEditorConstructionOptions => ({}),\n\t\t\t\thandleChange: (ctx, changeSummary) => {\n\t\t\t\t\tif (ctx.didChange(_options.editorOptions)) {\n\t\t\t\t\t\tObject.assign(changeSummary, ctx.change.changedOptions);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}, (reader, changeSummary) => {\n\t\t\t/** @description update editor options */\n\t\t\t_options.editorOptions.read(reader);\n\n\t\t\tthis._options.renderSideBySide.read(reader);\n\n\t\t\tthis.modified.updateOptions(this._adjustOptionsForRightHandSide(reader, changeSummary));\n\t\t\tthis.original.updateOptions(this._adjustOptionsForLeftHandSide(reader, changeSummary));\n\t\t}));\n\t}\n\n\tprivate _createLeftHandSideEditor(options: Readonly<IDiffEditorConstructionOptions>, codeEditorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst leftHandSideOptions = this._adjustOptionsForLeftHandSide(undefined, options);\n\t\tconst editor = this._constructInnerEditor(this._instantiationService, this.originalEditorElement, leftHandSideOptions, codeEditorWidgetOptions);\n\n\t\tconst isInDiffLeftEditorKey = this._contextKeyService.createKey<boolean>('isInDiffLeftEditor', editor.hasWidgetFocus());\n\t\tthis._register(editor.onDidFocusEditorWidget(() => isInDiffLeftEditorKey.set(true)));\n\t\tthis._register(editor.onDidBlurEditorWidget(() => isInDiffLeftEditorKey.set(false)));\n\n\t\treturn editor;\n\t}\n\n\tprivate _createRightHandSideEditor(options: Readonly<IDiffEditorConstructionOptions>, codeEditorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst rightHandSideOptions = this._adjustOptionsForRightHandSide(undefined, options);\n\t\tconst editor = this._constructInnerEditor(this._instantiationService, this.modifiedEditorElement, rightHandSideOptions, codeEditorWidgetOptions);\n\n\t\tconst isInDiffRightEditorKey = this._contextKeyService.createKey<boolean>('isInDiffRightEditor', editor.hasWidgetFocus());\n\t\tthis._register(editor.onDidFocusEditorWidget(() => isInDiffRightEditorKey.set(true)));\n\t\tthis._register(editor.onDidBlurEditorWidget(() => isInDiffRightEditorKey.set(false)));\n\n\t\treturn editor;\n\t}\n\n\tprivate _constructInnerEditor(instantiationService: IInstantiationService, container: HTMLElement, options: Readonly<IEditorConstructionOptions>, editorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst editor = this._createInnerEditor(instantiationService, container, options, editorWidgetOptions);\n\n\t\tthis._register(editor.onDidContentSizeChange(e => {\n\t\t\tconst width = this.original.getContentWidth() + this.modified.getContentWidth() + OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH;\n\t\t\tconst height = Math.max(this.modified.getContentHeight(), this.original.getContentHeight());\n\n\t\t\tthis._onDidContentSizeChange.fire({\n\t\t\t\tcontentHeight: height,\n\t\t\t\tcontentWidth: width,\n\t\t\t\tcontentHeightChanged: e.contentHeightChanged,\n\t\t\t\tcontentWidthChanged: e.contentWidthChanged\n\t\t\t});\n\t\t}));\n\t\treturn editor;\n\t}\n\n\tprivate _adjustOptionsForLeftHandSide(_reader: IReader | undefined, changedOptions: Readonly<IDiffEditorConstructionOptions>): IEditorConstructionOptions {\n\t\tconst result = this._adjustOptionsForSubEditor(changedOptions);\n\t\tif (!this._options.renderSideBySide.get()) {\n\t\t\t// never wrap hidden editor\n\t\t\tresult.wordWrapOverride1 = 'off';\n\t\t\tresult.wordWrapOverride2 = 'off';\n\t\t\tresult.stickyScroll = { enabled: false };\n\n\t\t\t// Disable unicode highlighting for the original side in inline mode, as they are not shown anyway.\n\t\t\tresult.unicodeHighlight = { nonBasicASCII: false, ambiguousCharacters: false, invisibleCharacters: false };\n\t\t} else {\n\t\t\tresult.unicodeHighlight = this._options.editorOptions.get().unicodeHighlight || {};\n\t\t\tresult.wordWrapOverride1 = this._options.diffWordWrap.get();\n\t\t}\n\t\tresult.glyphMargin = this._options.renderSideBySide.get();\n\n\t\tif (changedOptions.originalAriaLabel) {\n\t\t\tresult.ariaLabel = changedOptions.originalAriaLabel;\n\t\t}\n\t\tresult.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n\t\tresult.readOnly = !this._options.originalEditable.get();\n\t\tresult.dropIntoEditor = { enabled: !result.readOnly };\n\t\tresult.extraEditorClassName = 'original-in-monaco-diff-editor';\n\t\treturn result;\n\t}\n\n\tprivate _adjustOptionsForRightHandSide(reader: IReader | undefined, changedOptions: Readonly<IDiffEditorConstructionOptions>): IEditorConstructionOptions {\n\t\tconst result = this._adjustOptionsForSubEditor(changedOptions);\n\t\tif (changedOptions.modifiedAriaLabel) {\n\t\t\tresult.ariaLabel = changedOptions.modifiedAriaLabel;\n\t\t}\n\t\tresult.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n\t\tresult.wordWrapOverride1 = this._options.diffWordWrap.get();\n\t\tresult.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH;\n\t\tresult.scrollbar!.verticalHasArrows = false;\n\t\tresult.extraEditorClassName = 'modified-in-monaco-diff-editor';\n\t\treturn result;\n\t}\n\n\tprivate _adjustOptionsForSubEditor(options: Readonly<IDiffEditorConstructionOptions>): IEditorConstructionOptions {\n\t\tconst clonedOptions = {\n\t\t\t...options,\n\t\t\tdimension: {\n\t\t\t\theight: 0,\n\t\t\t\twidth: 0\n\t\t\t},\n\t\t};\n\t\tclonedOptions.inDiffEditor = true;\n\t\tclonedOptions.automaticLayout = false;\n\t\tclonedOptions.allowVariableLineHeights = false;\n\t\tclonedOptions.allowVariableFonts = false;\n\t\tclonedOptions.allowVariableFontsInAccessibilityMode = false;\n\n\t\t// Clone scrollbar options before changing them\n\t\tclonedOptions.scrollbar = { ...(clonedOptions.scrollbar || {}) };\n\t\tclonedOptions.folding = false;\n\t\tclonedOptions.codeLens = this._options.diffCodeLens.get();\n\t\tclonedOptions.fixedOverflowWidgets = true;\n\n\t\t// Clone minimap options before changing them\n\t\tclonedOptions.minimap = { ...(clonedOptions.minimap || {}) };\n\t\tclonedOptions.minimap.enabled = false;\n\n\t\tif (this._options.hideUnchangedRegions.get()) {\n\t\t\tclonedOptions.stickyScroll = { enabled: false };\n\t\t} else {\n\t\t\tclonedOptions.stickyScroll = this._options.editorOptions.get().stickyScroll;\n\t\t}\n\t\treturn clonedOptions;\n\t}\n\n\tprivate _updateAriaLabel(ariaLabel: string | undefined): string | undefined {\n\t\tif (!ariaLabel) {\n\t\t\tariaLabel = '';\n\t\t}\n\t\tconst ariaNavigationTip = localize('diff-aria-navigation-tip', ' use {0} to open the accessibility help.', this._keybindingService.lookupKeybinding('editor.action.accessibilityHelp')?.getAriaLabel());\n\t\tif (this._options.accessibilityVerbose.get()) {\n\t\t\treturn ariaLabel + ariaNavigationTip;\n\t\t} else if (ariaLabel) {\n\t\t\treturn ariaLabel.replaceAll(ariaNavigationTip, '');\n\t\t}\n\t\treturn '';\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5824, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorSash.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/components/diffEditorSash.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/vs/editor/browser/widget/diffEditor/components/diffEditorSash.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IBoundarySashes, ISashEvent, Orientation, Sash, SashState } from '../../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, IReader, ISettableObservable, autorun, derivedWithSetter, observableValue } from '../../../../../base/common/observable.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\n\nexport class SashLayout {\n\tpublic readonly sashLeft = derivedWithSetter(this, reader => {\n\t\tconst ratio = this._sashRatio.read(reader) ?? this._options.splitViewDefaultRatio.read(reader);\n\t\treturn this._computeSashLeft(ratio, reader);\n\t}, (value, tx) => {\n\t\tconst contentWidth = this.dimensions.width.get();\n\t\tthis._sashRatio.set(value / contentWidth, tx);\n\t});\n\n\tprivate readonly _sashRatio = observableValue<number | undefined>(this, undefined);\n\n\tpublic resetSash(): void {\n\t\tthis._sashRatio.set(undefined, undefined);\n\t}\n\n\tconstructor(\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tpublic readonly dimensions: { height: IObservable<number>; width: IObservable<number> },\n\t) {\n\t}\n\n\t/** @pure */\n\tprivate _computeSashLeft(desiredRatio: number, reader: IReader | undefined): number {\n\t\tconst contentWidth = this.dimensions.width.read(reader);\n\t\tconst midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n\t\tconst sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n\n\t\tconst MINIMUM_EDITOR_WIDTH = 100;\n\t\tif (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n\t\t\treturn midPoint;\n\t\t}\n\t\tif (sashLeft < MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\tif (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn contentWidth - MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\treturn sashLeft;\n\t}\n}\n\nexport class DiffEditorSash extends Disposable {\n\tprivate readonly _sash;\n\n\tprivate _startSashPosition: number | undefined;\n\n\tconstructor(\n\t\tprivate readonly _domNode: HTMLElement,\n\t\tprivate readonly _dimensions: { height: IObservable<number>; width: IObservable<number> },\n\t\tprivate readonly _enabled: IObservable<boolean>,\n\t\tprivate readonly _boundarySashes: IObservable<IBoundarySashes | undefined>,\n\t\tpublic readonly sashLeft: ISettableObservable<number>,\n\t\tprivate readonly _resetSash: () => void,\n\t) {\n\t\tsuper();\n\t\tthis._sash = this._register(new Sash(this._domNode, {\n\t\t\tgetVerticalSashTop: (_sash: Sash): number => 0,\n\t\t\tgetVerticalSashLeft: (_sash: Sash): number => this.sashLeft.get(),\n\t\t\tgetVerticalSashHeight: (_sash: Sash): number => this._dimensions.height.get(),\n\t\t}, { orientation: Orientation.VERTICAL }));\n\t\tthis._startSashPosition = undefined;\n\n\t\tthis._register(this._sash.onDidStart(() => {\n\t\t\tthis._startSashPosition = this.sashLeft.get();\n\t\t}));\n\t\tthis._register(this._sash.onDidChange((e: ISashEvent) => {\n\t\t\tthis.sashLeft.set(this._startSashPosition! + (e.currentX - e.startX), undefined);\n\t\t}));\n\t\tthis._register(this._sash.onDidEnd(() => this._sash.layout()));\n\t\tthis._register(this._sash.onDidReset(() => this._resetSash()));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst sashes = this._boundarySashes.read(reader);\n\t\t\tif (sashes) {\n\t\t\t\tthis._sash.orthogonalEndSash = sashes.bottom;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description DiffEditorSash.layoutSash */\n\t\t\tconst enabled = this._enabled.read(reader);\n\t\t\tthis._sash.state = enabled ? SashState.Enabled : SashState.Disabled;\n\t\t\tthis.sashLeft.read(reader);\n\t\t\tthis._dimensions.height.read(reader);\n\t\t\tthis._sash.layout();\n\t\t}));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IBoundarySashes, ISashEvent, Orientation, Sash, SashState } from '../../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, IReader, ISettableObservable, autorun, derivedWithSetter, observableValue } from '../../../../../base/common/observable.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\n\nexport class SashLayout {\n\tpublic readonly sashLeft = derivedWithSetter(this, reader => {\n\t\tconst ratio = this._sashRatio.read(reader) ?? this._options.splitViewDefaultRatio.read(reader);\n\t\treturn this._computeSashLeft(ratio, reader);\n\t}, (value, tx) => {\n\t\tconst contentWidth = this.dimensions.width.get();\n\t\tthis._sashRatio.set(value / contentWidth, tx);\n\t});\n\n\tprivate readonly _sashRatio = observableValue<number | undefined>(this, undefined);\n\n\tpublic resetSash(): void {\n\t\tthis._sashRatio.set(undefined, undefined);\n\t}\n\n\tconstructor(\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tpublic readonly dimensions: { height: IObservable<number>; width: IObservable<number> },\n\t) {\n\t}\n\n\t/** @pure */\n\tprivate _computeSashLeft(desiredRatio: number, reader: IReader | undefined): number {\n\t\tconst contentWidth = this.dimensions.width.read(reader);\n\t\tconst midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n\t\tconst sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n\n\t\tconst MINIMUM_EDITOR_WIDTH = 100;\n\t\tif (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n\t\t\treturn midPoint;\n\t\t}\n\t\tif (sashLeft < MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\tif (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn contentWidth - MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\treturn sashLeft;\n\t}\n}\n\nexport class DiffEditorSash extends Disposable {\n\tprivate readonly _sash;\n\n\tprivate _startSashPosition: number | undefined;\n\n\tconstructor(\n\t\tprivate readonly _domNode: HTMLElement,\n\t\tprivate readonly _dimensions: { height: IObservable<number>; width: IObservable<number> },\n\t\tprivate readonly _enabled: IObservable<boolean>,\n\t\tprivate readonly _boundarySashes: IObservable<IBoundarySashes | undefined>,\n\t\tpublic readonly sashLeft: ISettableObservable<number>,\n\t\tprivate readonly _resetSash: () => void,\n\t) {\n\t\tsuper();\n\t\tthis._sash = this._register(new Sash(this._domNode, {\n\t\t\tgetVerticalSashTop: (_sash: Sash): number => 0,\n\t\t\tgetVerticalSashLeft: (_sash: Sash): number => this.sashLeft.get(),\n\t\t\tgetVerticalSashHeight: (_sash: Sash): number => this._dimensions.height.get(),\n\t\t}, { orientation: Orientation.VERTICAL }));\n\t\tthis._startSashPosition = undefined;\n\n\t\tthis._register(this._sash.onDidStart(() => {\n\t\t\tthis._startSashPosition = this.sashLeft.get();\n\t\t}));\n\t\tthis._register(this._sash.onDidChange((e: ISashEvent) => {\n\t\t\tthis.sashLeft.set(this._startSashPosition! + (e.currentX - e.startX), undefined);\n\t\t}));\n\t\tthis._register(this._sash.onDidEnd(() => this._sash.layout()));\n\t\tthis._register(this._sash.onDidReset(() => this._resetSash()));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst sashes = this._boundarySashes.read(reader);\n\t\t\tif (sashes) {\n\t\t\t\tthis._sash.orthogonalEndSash = sashes.bottom;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description DiffEditorSash.layoutSash */\n\t\t\tconst enabled = this._enabled.read(reader);\n\t\t\tthis._sash.state = enabled ? SashState.Enabled : SashState.Disabled;\n\t\t\tthis.sashLeft.read(reader);\n\t\t\tthis._dimensions.height.read(reader);\n\t\t\tthis._sash.layout();\n\t\t}));\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5917, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/delegatingEditorImpl.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/delegatingEditorImpl.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/vs/editor/browser/widget/diffEditor/delegatingEditorImpl.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { CodeEditorWidget } from '../codeEditor/codeEditorWidget.js';\nimport { IEditorOptions } from '../../../common/config/editorOptions.js';\nimport { IDimension } from '../../../common/core/2d/dimension.js';\nimport { IPosition, Position } from '../../../common/core/position.js';\nimport { IRange, Range } from '../../../common/core/range.js';\nimport { ISelection, Selection } from '../../../common/core/selection.js';\nimport { IDiffEditorViewModel, IEditor, IEditorAction, IEditorDecorationsCollection, IEditorModel, IEditorViewState, ScrollType } from '../../../common/editorCommon.js';\nimport { IModelDecorationsChangeAccessor, IModelDeltaDecoration } from '../../../common/model.js';\n\nexport abstract class DelegatingEditor extends Disposable implements IEditor {\n\tprivate static idCounter = 0;\n\tprivate readonly _id = ++DelegatingEditor.idCounter;\n\n\tprivate readonly _onDidDispose = this._register(new Emitter<void>());\n\tpublic readonly onDidDispose = this._onDidDispose.event;\n\n\tprotected abstract get _targetEditor(): CodeEditorWidget;\n\n\tgetId(): string { return this.getEditorType() + ':v2:' + this._id; }\n\n\tabstract getEditorType(): string;\n\tabstract updateOptions(newOptions: IEditorOptions): void;\n\tabstract layout(dimension?: IDimension | undefined): void;\n\tabstract hasTextFocus(): boolean;\n\tabstract saveViewState(): IEditorViewState | null;\n\tabstract restoreViewState(state: IEditorViewState | null): void;\n\tabstract getModel(): IEditorModel | null;\n\tabstract setModel(model: IEditorModel | null | IDiffEditorViewModel): void;\n\n\t// #region editorBrowser.IDiffEditor: Delegating to modified Editor\n\n\tpublic getVisibleColumnFromPosition(position: IPosition): number {\n\t\treturn this._targetEditor.getVisibleColumnFromPosition(position);\n\t}\n\n\tpublic getPosition(): Position | null {\n\t\treturn this._targetEditor.getPosition();\n\t}\n\n\tpublic setPosition(position: IPosition, source: string = 'api'): void {\n\t\tthis._targetEditor.setPosition(position, source);\n\t}\n\n\tpublic revealLine(lineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLine(lineNumber, scrollType);\n\t}\n\n\tpublic revealLineInCenter(lineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLineInCenter(lineNumber, scrollType);\n\t}\n\n\tpublic revealLineInCenterIfOutsideViewport(lineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n\t}\n\n\tpublic revealLineNearTop(lineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLineNearTop(lineNumber, scrollType);\n\t}\n\n\tpublic revealPosition(position: IPosition, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealPosition(position, scrollType);\n\t}\n\n\tpublic revealPositionInCenter(position: IPosition, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealPositionInCenter(position, scrollType);\n\t}\n\n\tpublic revealPositionInCenterIfOutsideViewport(position: IPosition, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n\t}\n\n\tpublic revealPositionNearTop(position: IPosition, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealPositionNearTop(position, scrollType);\n\t}\n\n\tpublic getSelection(): Selection | null {\n\t\treturn this._targetEditor.getSelection();\n\t}\n\n\tpublic getSelections(): Selection[] | null {\n\t\treturn this._targetEditor.getSelections();\n\t}\n\n\tpublic setSelection(range: IRange, source?: string): void;\n\tpublic setSelection(editorRange: Range, source?: string): void;\n\tpublic setSelection(selection: ISelection, source?: string): void;\n\tpublic setSelection(editorSelection: Selection, source?: string): void;\n\tpublic setSelection(something: any, source: string = 'api'): void {\n\t\tthis._targetEditor.setSelection(something, source);\n\t}\n\n\tpublic setSelections(ranges: readonly ISelection[], source: string = 'api'): void {\n\t\tthis._targetEditor.setSelections(ranges, source);\n\t}\n\n\tpublic revealLines(startLineNumber: number, endLineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealLinesInCenter(startLineNumber: number, endLineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealLinesInCenterIfOutsideViewport(startLineNumber: number, endLineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealLinesNearTop(startLineNumber: number, endLineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealRange(range: IRange, scrollType: ScrollType = ScrollType.Smooth, revealVerticalInCenter: boolean = false, revealHorizontal: boolean = true): void {\n\t\tthis._targetEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n\t}\n\n\tpublic revealRangeInCenter(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeInCenter(range, scrollType);\n\t}\n\n\tpublic revealRangeInCenterIfOutsideViewport(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n\t}\n\n\tpublic revealRangeNearTop(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeNearTop(range, scrollType);\n\t}\n\n\tpublic revealRangeNearTopIfOutsideViewport(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n\t}\n\n\tpublic revealRangeAtTop(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeAtTop(range, scrollType);\n\t}\n\n\tpublic getSupportedActions(): IEditorAction[] {\n\t\treturn this._targetEditor.getSupportedActions();\n\t}\n\n\tpublic focus(): void {\n\t\tthis._targetEditor.focus();\n\t}\n\n\tpublic trigger(source: string | null | undefined, handlerId: string, payload: any): void {\n\t\tthis._targetEditor.trigger(source, handlerId, payload);\n\t}\n\n\tpublic createDecorationsCollection(decorations?: IModelDeltaDecoration[]): IEditorDecorationsCollection {\n\t\treturn this._targetEditor.createDecorationsCollection(decorations);\n\t}\n\n\tpublic changeDecorations(callback: (changeAccessor: IModelDecorationsChangeAccessor) => any): any {\n\t\treturn this._targetEditor.changeDecorations(callback);\n\t}\n\n\t// #endregion\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { CodeEditorWidget } from '../codeEditor/codeEditorWidget.js';\nimport { IEditorOptions } from '../../../common/config/editorOptions.js';\nimport { IDimension } from '../../../common/core/2d/dimension.js';\nimport { IPosition, Position } from '../../../common/core/position.js';\nimport { IRange, Range } from '../../../common/core/range.js';\nimport { ISelection, Selection } from '../../../common/core/selection.js';\nimport { IDiffEditorViewModel, IEditor, IEditorAction, IEditorDecorationsCollection, IEditorModel, IEditorViewState, ScrollType } from '../../../common/editorCommon.js';\nimport { IModelDecorationsChangeAccessor, IModelDeltaDecoration } from '../../../common/model.js';\n\nexport abstract class DelegatingEditor extends Disposable implements IEditor {\n\tprivate static idCounter = 0;\n\tprivate readonly _id = ++DelegatingEditor.idCounter;\n\n\tprivate readonly _onDidDispose = this._register(new Emitter<void>());\n\tpublic readonly onDidDispose = this._onDidDispose.event;\n\n\tprotected abstract get _targetEditor(): CodeEditorWidget;\n\n\tgetId(): string { return this.getEditorType() + ':v2:' + this._id; }\n\n\tabstract getEditorType(): string;\n\tabstract updateOptions(newOptions: IEditorOptions): void;\n\tabstract layout(dimension?: IDimension | undefined): void;\n\tabstract hasTextFocus(): boolean;\n\tabstract saveViewState(): IEditorViewState | null;\n\tabstract restoreViewState(state: IEditorViewState | null): void;\n\tabstract getModel(): IEditorModel | null;\n\tabstract setModel(model: IEditorModel | null | IDiffEditorViewModel): void;\n\n\t// #region editorBrowser.IDiffEditor: Delegating to modified Editor\n\n\tpublic getVisibleColumnFromPosition(position: IPosition): number {\n\t\treturn this._targetEditor.getVisibleColumnFromPosition(position);\n\t}\n\n\tpublic getPosition(): Position | null {\n\t\treturn this._targetEditor.getPosition();\n\t}\n\n\tpublic setPosition(position: IPosition, source: string = 'api'): void {\n\t\tthis._targetEditor.setPosition(position, source);\n\t}\n\n\tpublic revealLine(lineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLine(lineNumber, scrollType);\n\t}\n\n\tpublic revealLineInCenter(lineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLineInCenter(lineNumber, scrollType);\n\t}\n\n\tpublic revealLineInCenterIfOutsideViewport(lineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n\t}\n\n\tpublic revealLineNearTop(lineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLineNearTop(lineNumber, scrollType);\n\t}\n\n\tpublic revealPosition(position: IPosition, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealPosition(position, scrollType);\n\t}\n\n\tpublic revealPositionInCenter(position: IPosition, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealPositionInCenter(position, scrollType);\n\t}\n\n\tpublic revealPositionInCenterIfOutsideViewport(position: IPosition, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n\t}\n\n\tpublic revealPositionNearTop(position: IPosition, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealPositionNearTop(position, scrollType);\n\t}\n\n\tpublic getSelection(): Selection | null {\n\t\treturn this._targetEditor.getSelection();\n\t}\n\n\tpublic getSelections(): Selection[] | null {\n\t\treturn this._targetEditor.getSelections();\n\t}\n\n\tpublic setSelection(range: IRange, source?: string): void;\n\tpublic setSelection(editorRange: Range, source?: string): void;\n\tpublic setSelection(selection: ISelection, source?: string): void;\n\tpublic setSelection(editorSelection: Selection, source?: string): void;\n\tpublic setSelection(something: any, source: string = 'api'): void {\n\t\tthis._targetEditor.setSelection(something, source);\n\t}\n\n\tpublic setSelections(ranges: readonly ISelection[], source: string = 'api'): void {\n\t\tthis._targetEditor.setSelections(ranges, source);\n\t}\n\n\tpublic revealLines(startLineNumber: number, endLineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealLinesInCenter(startLineNumber: number, endLineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealLinesInCenterIfOutsideViewport(startLineNumber: number, endLineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealLinesNearTop(startLineNumber: number, endLineNumber: number, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealRange(range: IRange, scrollType: ScrollType = ScrollType.Smooth, revealVerticalInCenter: boolean = false, revealHorizontal: boolean = true): void {\n\t\tthis._targetEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n\t}\n\n\tpublic revealRangeInCenter(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeInCenter(range, scrollType);\n\t}\n\n\tpublic revealRangeInCenterIfOutsideViewport(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n\t}\n\n\tpublic revealRangeNearTop(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeNearTop(range, scrollType);\n\t}\n\n\tpublic revealRangeNearTopIfOutsideViewport(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n\t}\n\n\tpublic revealRangeAtTop(range: IRange, scrollType: ScrollType = ScrollType.Smooth): void {\n\t\tthis._targetEditor.revealRangeAtTop(range, scrollType);\n\t}\n\n\tpublic getSupportedActions(): IEditorAction[] {\n\t\treturn this._targetEditor.getSupportedActions();\n\t}\n\n\tpublic focus(): void {\n\t\tthis._targetEditor.focus();\n\t}\n\n\tpublic trigger(source: string | null | undefined, handlerId: string, payload: any): void {\n\t\tthis._targetEditor.trigger(source, handlerId, payload);\n\t}\n\n\tpublic createDecorationsCollection(decorations?: IModelDeltaDecoration[]): IEditorDecorationsCollection {\n\t\treturn this._targetEditor.createDecorationsCollection(decorations);\n\t}\n\n\tpublic changeDecorations(callback: (changeAccessor: IModelDecorationsChangeAccessor) => any): any {\n\t\treturn this._targetEditor.changeDecorations(callback);\n\t}\n\n\t// #endregion\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6038, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorOptions.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/diffEditorOptions.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/vs/editor/browser/widget/diffEditor/diffEditorOptions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IObservable, IObservableWithChange, ISettableObservable, derived, derivedConstOnceDefined, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { Constants } from '../../../../base/common/uint.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { diffEditorDefaultOptions } from '../../../common/config/diffEditor.js';\nimport { IDiffEditorBaseOptions, IDiffEditorOptions, IEditorOptions, ValidDiffEditorBaseOptions, clampedFloat, clampedInt, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../../common/config/editorOptions.js';\nimport { LineRangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { allowsTrueInlineDiffRendering } from './components/diffEditorViewZones/diffEditorViewZones.js';\nimport { DiffEditorViewModel, DiffState } from './diffEditorViewModel.js';\n\nexport class DiffEditorOptions {\n\tprivate readonly _options: ISettableObservable<IEditorOptions & Required<IDiffEditorBaseOptions>, { changedOptions: IDiffEditorOptions }>;\n\n\tpublic get editorOptions(): IObservableWithChange<IEditorOptions, { changedOptions: IEditorOptions }> { return this._options; }\n\n\tprivate readonly _diffEditorWidth;\n\n\tprivate readonly _screenReaderMode;\n\n\tconstructor(\n\t\toptions: Readonly<IDiffEditorOptions>,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService,\n\t) {\n\t\tthis._diffEditorWidth = observableValue<number>(this, 0);\n\t\tthis._screenReaderMode = observableFromEvent(this, this._accessibilityService.onDidChangeScreenReaderOptimized, () => this._accessibilityService.isScreenReaderOptimized());\n\t\tthis.couldShowInlineViewBecauseOfSize = derived(this, reader =>\n\t\t\tthis._options.read(reader).renderSideBySide && this._diffEditorWidth.read(reader) <= this._options.read(reader).renderSideBySideInlineBreakpoint\n\t\t);\n\t\tthis.renderOverviewRuler = derived(this, reader => this._options.read(reader).renderOverviewRuler);\n\t\tthis.renderSideBySide = derived(this, reader => {\n\t\t\tif (this.compactMode.read(reader)) {\n\t\t\t\tif (this.shouldRenderInlineViewInSmartMode.read(reader)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this._options.read(reader).renderSideBySide\n\t\t\t\t&& !(this._options.read(reader).useInlineViewWhenSpaceIsLimited && this.couldShowInlineViewBecauseOfSize.read(reader) && !this._screenReaderMode.read(reader));\n\t\t});\n\t\tthis.readOnly = derived(this, reader => this._options.read(reader).readOnly);\n\t\tthis.shouldRenderOldRevertArrows = derived(this, reader => {\n\t\t\tif (!this._options.read(reader).renderMarginRevertIcon) { return false; }\n\t\t\tif (!this.renderSideBySide.read(reader)) { return false; }\n\t\t\tif (this.readOnly.read(reader)) { return false; }\n\t\t\tif (this.shouldRenderGutterMenu.read(reader)) { return false; }\n\t\t\treturn true;\n\t\t});\n\t\tthis.shouldRenderGutterMenu = derived(this, reader => this._options.read(reader).renderGutterMenu);\n\t\tthis.renderIndicators = derived(this, reader => this._options.read(reader).renderIndicators);\n\t\tthis.enableSplitViewResizing = derived(this, reader => this._options.read(reader).enableSplitViewResizing);\n\t\tthis.splitViewDefaultRatio = derived(this, reader => this._options.read(reader).splitViewDefaultRatio);\n\t\tthis.ignoreTrimWhitespace = derived(this, reader => this._options.read(reader).ignoreTrimWhitespace);\n\t\tthis.maxComputationTimeMs = derived(this, reader => this._options.read(reader).maxComputationTime);\n\t\tthis.showMoves = derived(this, reader => this._options.read(reader).experimental.showMoves! && this.renderSideBySide.read(reader));\n\t\tthis.isInEmbeddedEditor = derived(this, reader => this._options.read(reader).isInEmbeddedEditor);\n\t\tthis.diffWordWrap = derived(this, reader => this._options.read(reader).diffWordWrap);\n\t\tthis.originalEditable = derived(this, reader => this._options.read(reader).originalEditable);\n\t\tthis.diffCodeLens = derived(this, reader => this._options.read(reader).diffCodeLens);\n\t\tthis.accessibilityVerbose = derived(this, reader => this._options.read(reader).accessibilityVerbose);\n\t\tthis.diffAlgorithm = derived(this, reader => this._options.read(reader).diffAlgorithm);\n\t\tthis.showEmptyDecorations = derived(this, reader => this._options.read(reader).experimental.showEmptyDecorations!);\n\t\tthis.onlyShowAccessibleDiffViewer = derived(this, reader => this._options.read(reader).onlyShowAccessibleDiffViewer);\n\t\tthis.compactMode = derived(this, reader => this._options.read(reader).compactMode);\n\t\tthis.trueInlineDiffRenderingEnabled = derived(this, reader =>\n\t\t\tthis._options.read(reader).experimental.useTrueInlineView!\n\t\t);\n\t\tthis.useTrueInlineDiffRendering = derived(this, reader =>\n\t\t\t!this.renderSideBySide.read(reader) && this.trueInlineDiffRenderingEnabled.read(reader)\n\t\t);\n\t\tthis.hideUnchangedRegions = derived(this, reader => this._options.read(reader).hideUnchangedRegions.enabled!);\n\t\tthis.hideUnchangedRegionsRevealLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.revealLineCount!);\n\t\tthis.hideUnchangedRegionsContextLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.contextLineCount!);\n\t\tthis.hideUnchangedRegionsMinimumLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.minimumLineCount!);\n\t\tthis._model = observableValue<DiffEditorViewModel | undefined>(this, undefined);\n\t\tthis.shouldRenderInlineViewInSmartMode = this._model\n\t\t\t.map(this, model => derivedConstOnceDefined(this, reader => {\n\t\t\t\tconst diffs = model?.diff.read(reader);\n\t\t\t\treturn diffs ? isSimpleDiff(diffs, this.trueInlineDiffRenderingEnabled.read(reader)) : undefined;\n\t\t\t}))\n\t\t\t.flatten()\n\t\t\t.map(this, v => !!v);\n\t\tthis.inlineViewHideOriginalLineNumbers = this.compactMode;\n\t\tconst optionsCopy = { ...options, ...validateDiffEditorOptions(options, diffEditorDefaultOptions) };\n\t\tthis._options = observableValue(this, optionsCopy);\n\t}\n\n\tpublic readonly couldShowInlineViewBecauseOfSize;\n\n\tpublic readonly renderOverviewRuler;\n\tpublic readonly renderSideBySide;\n\tpublic readonly readOnly;\n\n\tpublic readonly shouldRenderOldRevertArrows;\n\n\tpublic readonly shouldRenderGutterMenu;\n\tpublic readonly renderIndicators;\n\tpublic readonly enableSplitViewResizing;\n\tpublic readonly splitViewDefaultRatio;\n\tpublic readonly ignoreTrimWhitespace;\n\tpublic readonly maxComputationTimeMs;\n\tpublic readonly showMoves;\n\tpublic readonly isInEmbeddedEditor;\n\tpublic readonly diffWordWrap;\n\tpublic readonly originalEditable;\n\tpublic readonly diffCodeLens;\n\tpublic readonly accessibilityVerbose;\n\tpublic readonly diffAlgorithm;\n\tpublic readonly showEmptyDecorations;\n\tpublic readonly onlyShowAccessibleDiffViewer;\n\tpublic readonly compactMode;\n\tprivate readonly trueInlineDiffRenderingEnabled: IObservable<boolean>;\n\n\tpublic readonly useTrueInlineDiffRendering: IObservable<boolean>;\n\n\tpublic readonly hideUnchangedRegions;\n\tpublic readonly hideUnchangedRegionsRevealLineCount;\n\tpublic readonly hideUnchangedRegionsContextLineCount;\n\tpublic readonly hideUnchangedRegionsMinimumLineCount;\n\n\tpublic updateOptions(changedOptions: IDiffEditorOptions): void {\n\t\tconst newDiffEditorOptions = validateDiffEditorOptions(changedOptions, this._options.get());\n\t\tconst newOptions = { ...this._options.get(), ...changedOptions, ...newDiffEditorOptions };\n\t\tthis._options.set(newOptions, undefined, { changedOptions: changedOptions });\n\t}\n\n\tpublic setWidth(width: number): void {\n\t\tthis._diffEditorWidth.set(width, undefined);\n\t}\n\n\tprivate readonly _model;\n\n\tpublic setModel(model: DiffEditorViewModel | undefined) {\n\t\tthis._model.set(model, undefined);\n\t}\n\n\tprivate readonly shouldRenderInlineViewInSmartMode;\n\n\tpublic readonly inlineViewHideOriginalLineNumbers;\n}\n\nfunction isSimpleDiff(diff: DiffState, supportsTrueDiffRendering: boolean): boolean {\n\treturn diff.mappings.every(m => isInsertion(m.lineRangeMapping) || isDeletion(m.lineRangeMapping) || (supportsTrueDiffRendering && allowsTrueInlineDiffRendering(m.lineRangeMapping)));\n}\n\nfunction isInsertion(mapping: LineRangeMapping): boolean {\n\treturn mapping.original.length === 0;\n}\n\nfunction isDeletion(mapping: LineRangeMapping): boolean {\n\treturn mapping.modified.length === 0;\n}\n\nfunction validateDiffEditorOptions(options: Readonly<IDiffEditorOptions>, defaults: typeof diffEditorDefaultOptions | ValidDiffEditorBaseOptions): ValidDiffEditorBaseOptions {\n\treturn {\n\t\tenableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\n\t\tsplitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\n\t\trenderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\n\t\trenderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\n\t\tmaxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\tmaxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\tignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\n\t\trenderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\n\t\toriginalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\n\t\tdiffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\n\t\trenderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\n\t\tdiffWordWrap: validateStringSetOption<'off' | 'on' | 'inherit'>(options.diffWordWrap, defaults.diffWordWrap, ['off', 'on', 'inherit']),\n\t\tdiffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\n\t\taccessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\n\t\texperimental: {\n\t\t\tshowMoves: validateBooleanOption(options.experimental?.showMoves, defaults.experimental.showMoves!),\n\t\t\tshowEmptyDecorations: validateBooleanOption(options.experimental?.showEmptyDecorations, defaults.experimental.showEmptyDecorations!),\n\t\t\tuseTrueInlineView: validateBooleanOption(options.experimental?.useTrueInlineView, defaults.experimental.useTrueInlineView!),\n\t\t},\n\t\thideUnchangedRegions: {\n\t\t\tenabled: validateBooleanOption(options.hideUnchangedRegions?.enabled ?? (options.experimental as any)?.collapseUnchangedRegions, defaults.hideUnchangedRegions.enabled!),\n\t\t\tcontextLineCount: clampedInt(options.hideUnchangedRegions?.contextLineCount, defaults.hideUnchangedRegions.contextLineCount!, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t\tminimumLineCount: clampedInt(options.hideUnchangedRegions?.minimumLineCount, defaults.hideUnchangedRegions.minimumLineCount!, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t\trevealLineCount: clampedInt(options.hideUnchangedRegions?.revealLineCount, defaults.hideUnchangedRegions.revealLineCount!, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t},\n\t\tisInEmbeddedEditor: validateBooleanOption(options.isInEmbeddedEditor, defaults.isInEmbeddedEditor),\n\t\tonlyShowAccessibleDiffViewer: validateBooleanOption(options.onlyShowAccessibleDiffViewer, defaults.onlyShowAccessibleDiffViewer),\n\t\trenderSideBySideInlineBreakpoint: clampedInt(options.renderSideBySideInlineBreakpoint, defaults.renderSideBySideInlineBreakpoint, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\tuseInlineViewWhenSpaceIsLimited: validateBooleanOption(options.useInlineViewWhenSpaceIsLimited, defaults.useInlineViewWhenSpaceIsLimited),\n\t\trenderGutterMenu: validateBooleanOption(options.renderGutterMenu, defaults.renderGutterMenu),\n\t\tcompactMode: validateBooleanOption(options.compactMode, defaults.compactMode),\n\t};\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IObservable, IObservableWithChange, ISettableObservable, derived, derivedConstOnceDefined, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { Constants } from '../../../../base/common/uint.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { diffEditorDefaultOptions } from '../../../common/config/diffEditor.js';\nimport { IDiffEditorBaseOptions, IDiffEditorOptions, IEditorOptions, ValidDiffEditorBaseOptions, clampedFloat, clampedInt, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../../common/config/editorOptions.js';\nimport { LineRangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { allowsTrueInlineDiffRendering } from './components/diffEditorViewZones/diffEditorViewZones.js';\nimport { DiffEditorViewModel, DiffState } from './diffEditorViewModel.js';\n\nexport class DiffEditorOptions {\n\tprivate readonly _options: ISettableObservable<IEditorOptions & Required<IDiffEditorBaseOptions>, { changedOptions: IDiffEditorOptions }>;\n\n\tpublic get editorOptions(): IObservableWithChange<IEditorOptions, { changedOptions: IEditorOptions }> { return this._options; }\n\n\tprivate readonly _diffEditorWidth;\n\n\tprivate readonly _screenReaderMode;\n\n\tconstructor(\n\t\toptions: Readonly<IDiffEditorOptions>,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService,\n\t) {\n\t\tthis._diffEditorWidth = observableValue<number>(this, 0);\n\t\tthis._screenReaderMode = observableFromEvent(this, this._accessibilityService.onDidChangeScreenReaderOptimized, () => this._accessibilityService.isScreenReaderOptimized());\n\t\tthis.couldShowInlineViewBecauseOfSize = derived(this, reader =>\n\t\t\tthis._options.read(reader).renderSideBySide && this._diffEditorWidth.read(reader) <= this._options.read(reader).renderSideBySideInlineBreakpoint\n\t\t);\n\t\tthis.renderOverviewRuler = derived(this, reader => this._options.read(reader).renderOverviewRuler);\n\t\tthis.renderSideBySide = derived(this, reader => {\n\t\t\tif (this.compactMode.read(reader)) {\n\t\t\t\tif (this.shouldRenderInlineViewInSmartMode.read(reader)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this._options.read(reader).renderSideBySide\n\t\t\t\t&& !(this._options.read(reader).useInlineViewWhenSpaceIsLimited && this.couldShowInlineViewBecauseOfSize.read(reader) && !this._screenReaderMode.read(reader));\n\t\t});\n\t\tthis.readOnly = derived(this, reader => this._options.read(reader).readOnly);\n\t\tthis.shouldRenderOldRevertArrows = derived(this, reader => {\n\t\t\tif (!this._options.read(reader).renderMarginRevertIcon) { return false; }\n\t\t\tif (!this.renderSideBySide.read(reader)) { return false; }\n\t\t\tif (this.readOnly.read(reader)) { return false; }\n\t\t\tif (this.shouldRenderGutterMenu.read(reader)) { return false; }\n\t\t\treturn true;\n\t\t});\n\t\tthis.shouldRenderGutterMenu = derived(this, reader => this._options.read(reader).renderGutterMenu);\n\t\tthis.renderIndicators = derived(this, reader => this._options.read(reader).renderIndicators);\n\t\tthis.enableSplitViewResizing = derived(this, reader => this._options.read(reader).enableSplitViewResizing);\n\t\tthis.splitViewDefaultRatio = derived(this, reader => this._options.read(reader).splitViewDefaultRatio);\n\t\tthis.ignoreTrimWhitespace = derived(this, reader => this._options.read(reader).ignoreTrimWhitespace);\n\t\tthis.maxComputationTimeMs = derived(this, reader => this._options.read(reader).maxComputationTime);\n\t\tthis.showMoves = derived(this, reader => this._options.read(reader).experimental.showMoves! && this.renderSideBySide.read(reader));\n\t\tthis.isInEmbeddedEditor = derived(this, reader => this._options.read(reader).isInEmbeddedEditor);\n\t\tthis.diffWordWrap = derived(this, reader => this._options.read(reader).diffWordWrap);\n\t\tthis.originalEditable = derived(this, reader => this._options.read(reader).originalEditable);\n\t\tthis.diffCodeLens = derived(this, reader => this._options.read(reader).diffCodeLens);\n\t\tthis.accessibilityVerbose = derived(this, reader => this._options.read(reader).accessibilityVerbose);\n\t\tthis.diffAlgorithm = derived(this, reader => this._options.read(reader).diffAlgorithm);\n\t\tthis.showEmptyDecorations = derived(this, reader => this._options.read(reader).experimental.showEmptyDecorations!);\n\t\tthis.onlyShowAccessibleDiffViewer = derived(this, reader => this._options.read(reader).onlyShowAccessibleDiffViewer);\n\t\tthis.compactMode = derived(this, reader => this._options.read(reader).compactMode);\n\t\tthis.trueInlineDiffRenderingEnabled = derived(this, reader =>\n\t\t\tthis._options.read(reader).experimental.useTrueInlineView!\n\t\t);\n\t\tthis.useTrueInlineDiffRendering = derived(this, reader =>\n\t\t\t!this.renderSideBySide.read(reader) && this.trueInlineDiffRenderingEnabled.read(reader)\n\t\t);\n\t\tthis.hideUnchangedRegions = derived(this, reader => this._options.read(reader).hideUnchangedRegions.enabled!);\n\t\tthis.hideUnchangedRegionsRevealLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.revealLineCount!);\n\t\tthis.hideUnchangedRegionsContextLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.contextLineCount!);\n\t\tthis.hideUnchangedRegionsMinimumLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.minimumLineCount!);\n\t\tthis._model = observableValue<DiffEditorViewModel | undefined>(this, undefined);\n\t\tthis.shouldRenderInlineViewInSmartMode = this._model\n\t\t\t.map(this, model => derivedConstOnceDefined(this, reader => {\n\t\t\t\tconst diffs = model?.diff.read(reader);\n\t\t\t\treturn diffs ? isSimpleDiff(diffs, this.trueInlineDiffRenderingEnabled.read(reader)) : undefined;\n\t\t\t}))\n\t\t\t.flatten()\n\t\t\t.map(this, v => !!v);\n\t\tthis.inlineViewHideOriginalLineNumbers = this.compactMode;\n\t\tconst optionsCopy = { ...options, ...validateDiffEditorOptions(options, diffEditorDefaultOptions) };\n\t\tthis._options = observableValue(this, optionsCopy);\n\t}\n\n\tpublic readonly couldShowInlineViewBecauseOfSize;\n\n\tpublic readonly renderOverviewRuler;\n\tpublic readonly renderSideBySide;\n\tpublic readonly readOnly;\n\n\tpublic readonly shouldRenderOldRevertArrows;\n\n\tpublic readonly shouldRenderGutterMenu;\n\tpublic readonly renderIndicators;\n\tpublic readonly enableSplitViewResizing;\n\tpublic readonly splitViewDefaultRatio;\n\tpublic readonly ignoreTrimWhitespace;\n\tpublic readonly maxComputationTimeMs;\n\tpublic readonly showMoves;\n\tpublic readonly isInEmbeddedEditor;\n\tpublic readonly diffWordWrap;\n\tpublic readonly originalEditable;\n\tpublic readonly diffCodeLens;\n\tpublic readonly accessibilityVerbose;\n\tpublic readonly diffAlgorithm;\n\tpublic readonly showEmptyDecorations;\n\tpublic readonly onlyShowAccessibleDiffViewer;\n\tpublic readonly compactMode;\n\tprivate readonly trueInlineDiffRenderingEnabled: IObservable<boolean>;\n\n\tpublic readonly useTrueInlineDiffRendering: IObservable<boolean>;\n\n\tpublic readonly hideUnchangedRegions;\n\tpublic readonly hideUnchangedRegionsRevealLineCount;\n\tpublic readonly hideUnchangedRegionsContextLineCount;\n\tpublic readonly hideUnchangedRegionsMinimumLineCount;\n\n\tpublic updateOptions(changedOptions: IDiffEditorOptions): void {\n\t\tconst newDiffEditorOptions = validateDiffEditorOptions(changedOptions, this._options.get());\n\t\tconst newOptions = { ...this._options.get(), ...changedOptions, ...newDiffEditorOptions };\n\t\tthis._options.set(newOptions, undefined, { changedOptions: changedOptions });\n\t}\n\n\tpublic setWidth(width: number): void {\n\t\tthis._diffEditorWidth.set(width, undefined);\n\t}\n\n\tprivate readonly _model;\n\n\tpublic setModel(model: DiffEditorViewModel | undefined) {\n\t\tthis._model.set(model, undefined);\n\t}\n\n\tprivate readonly shouldRenderInlineViewInSmartMode;\n\n\tpublic readonly inlineViewHideOriginalLineNumbers;\n}\n\nfunction isSimpleDiff(diff: DiffState, supportsTrueDiffRendering: boolean): boolean {\n\treturn diff.mappings.every(m => isInsertion(m.lineRangeMapping) || isDeletion(m.lineRangeMapping) || (supportsTrueDiffRendering && allowsTrueInlineDiffRendering(m.lineRangeMapping)));\n}\n\nfunction isInsertion(mapping: LineRangeMapping): boolean {\n\treturn mapping.original.length === 0;\n}\n\nfunction isDeletion(mapping: LineRangeMapping): boolean {\n\treturn mapping.modified.length === 0;\n}\n\nfunction validateDiffEditorOptions(options: Readonly<IDiffEditorOptions>, defaults: typeof diffEditorDefaultOptions | ValidDiffEditorBaseOptions): ValidDiffEditorBaseOptions {\n\treturn {\n\t\tenableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\n\t\tsplitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\n\t\trenderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\n\t\trenderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\n\t\tmaxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\tmaxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\tignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\n\t\trenderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\n\t\toriginalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\n\t\tdiffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\n\t\trenderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\n\t\tdiffWordWrap: validateStringSetOption<'off' | 'on' | 'inherit'>(options.diffWordWrap, defaults.diffWordWrap, ['off', 'on', 'inherit']),\n\t\tdiffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\n\t\taccessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\n\t\texperimental: {\n\t\t\tshowMoves: validateBooleanOption(options.experimental?.showMoves, defaults.experimental.showMoves!),\n\t\t\tshowEmptyDecorations: validateBooleanOption(options.experimental?.showEmptyDecorations, defaults.experimental.showEmptyDecorations!),\n\t\t\tuseTrueInlineView: validateBooleanOption(options.experimental?.useTrueInlineView, defaults.experimental.useTrueInlineView!),\n\t\t},\n\t\thideUnchangedRegions: {\n\t\t\tenabled: validateBooleanOption(options.hideUnchangedRegions?.enabled ?? (options.experimental as any)?.collapseUnchangedRegions, defaults.hideUnchangedRegions.enabled!),\n\t\t\tcontextLineCount: clampedInt(options.hideUnchangedRegions?.contextLineCount, defaults.hideUnchangedRegions.contextLineCount!, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t\tminimumLineCount: clampedInt(options.hideUnchangedRegions?.minimumLineCount, defaults.hideUnchangedRegions.minimumLineCount!, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t\trevealLineCount: clampedInt(options.hideUnchangedRegions?.revealLineCount, defaults.hideUnchangedRegions.revealLineCount!, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t},\n\t\tisInEmbeddedEditor: validateBooleanOption(options.isInEmbeddedEditor, defaults.isInEmbeddedEditor),\n\t\tonlyShowAccessibleDiffViewer: validateBooleanOption(options.onlyShowAccessibleDiffViewer, defaults.onlyShowAccessibleDiffViewer),\n\t\trenderSideBySideInlineBreakpoint: clampedInt(options.renderSideBySideInlineBreakpoint, defaults.renderSideBySideInlineBreakpoint, 0, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\tuseInlineViewWhenSpaceIsLimited: validateBooleanOption(options.useInlineViewWhenSpaceIsLimited, defaults.useInlineViewWhenSpaceIsLimited),\n\t\trenderGutterMenu: validateBooleanOption(options.renderGutterMenu, defaults.renderGutterMenu),\n\t\tcompactMode: validateBooleanOption(options.compactMode, defaults.compactMode),\n\t};\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6215, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/utils.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/multiDiffEditor/utils.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/vs/editor/browser/widget/multiDiffEditor/utils.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ActionRunner, IAction } from '../../../../base/common/actions.js';\n\nexport class ActionRunnerWithContext extends ActionRunner {\n\tconstructor(private readonly _getContext: () => unknown) {\n\t\tsuper();\n\t}\n\n\tprotected override runAction(action: IAction, _context?: unknown): Promise<void> {\n\t\tconst ctx = this._getContext();\n\t\treturn super.runAction(action, ctx);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ActionRunner, IAction } from '../../../../base/common/actions.js';\n\nexport class ActionRunnerWithContext extends ActionRunner {\n\tconstructor(private readonly _getContext: () => unknown) {\n\t\tsuper();\n\t}\n\n\tprotected override runAction(action: IAction, _context?: unknown): Promise<void> {\n\t\tconst ctx = this._getContext();\n\t\treturn super.runAction(action, ctx);\n\t}\n}\n"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;AAEhG,OAAO,EAAE,YAAY,EAAW,MAAM,oCAAoC,CAAC;;AAErE,MAAO,uBAAwB,SAAQ,0LAAY;IACxD,YAA6B,WAA0B,CAAA;QACtD,KAAK,EAAE,CAAC;QADoB,IAAA,CAAA,WAAW,GAAX,WAAW,CAAe;IAEvD,CAAC;IAEkB,SAAS,CAAC,MAAe,EAAE,QAAkB,EAAA;QAC/D,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAC/B,OAAO,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;IACrC,CAAC;CACD","debugId":null}},
    {"offset": {"line": 6238, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils/editorGutter.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/utils/editorGutter.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils/vs/editor/browser/widget/diffEditor/utils/editorGutter.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h, reset } from '../../../../../base/browser/dom.js';\nimport { Disposable, IDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, IObservable, IReader, ISettableObservable, observableFromEvent, observableSignal, observableSignalFromEvent, observableValue, transaction } from '../../../../../base/common/observable.js';\nimport { CodeEditorWidget } from '../../codeEditor/codeEditorWidget.js';\nimport { LineRange } from '../../../../common/core/ranges/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/ranges/offsetRange.js';\n\nexport class EditorGutter<T extends IGutterItemInfo = IGutterItemInfo> extends Disposable {\n\tprivate readonly scrollTop;\n\tprivate readonly isScrollTopZero;\n\tprivate readonly modelAttached;\n\n\tprivate readonly editorOnDidChangeViewZones;\n\tprivate readonly editorOnDidContentSizeChange;\n\tprivate readonly domNodeSizeChanged;\n\n\tconstructor(\n\t\tprivate readonly _editor: CodeEditorWidget,\n\t\tprivate readonly _domNode: HTMLElement,\n\t\tprivate readonly itemProvider: IGutterItemProvider<T>\n\t) {\n\t\tsuper();\n\t\tthis.scrollTop = observableFromEvent(this,\n\t\t\tthis._editor.onDidScrollChange,\n\t\t\t(e) => /** @description editor.onDidScrollChange */ this._editor.getScrollTop()\n\t\t);\n\t\tthis.isScrollTopZero = this.scrollTop.map((scrollTop) => /** @description isScrollTopZero */ scrollTop === 0);\n\t\tthis.modelAttached = observableFromEvent(this,\n\t\t\tthis._editor.onDidChangeModel,\n\t\t\t(e) => /** @description editor.onDidChangeModel */ this._editor.hasModel()\n\t\t);\n\t\tthis.editorOnDidChangeViewZones = observableSignalFromEvent('onDidChangeViewZones', this._editor.onDidChangeViewZones);\n\t\tthis.editorOnDidContentSizeChange = observableSignalFromEvent('onDidContentSizeChange', this._editor.onDidContentSizeChange);\n\t\tthis.domNodeSizeChanged = observableSignal('domNodeSizeChanged');\n\t\tthis.views = new Map<string, ManagedGutterItemView>();\n\t\tthis._domNode.className = 'gutter monaco-editor';\n\t\tconst scrollDecoration = this._domNode.appendChild(\n\t\t\th('div.scroll-decoration', { role: 'presentation', ariaHidden: 'true', style: { width: '100%' } })\n\t\t\t\t.root\n\t\t);\n\n\t\tconst o = new ResizeObserver(() => {\n\t\t\ttransaction(tx => {\n\t\t\t\t/** @description ResizeObserver: size changed */\n\t\t\t\tthis.domNodeSizeChanged.trigger(tx);\n\t\t\t});\n\t\t});\n\t\to.observe(this._domNode);\n\t\tthis._register(toDisposable(() => o.disconnect()));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update scroll decoration */\n\t\t\tscrollDecoration.className = this.isScrollTopZero.read(reader) ? '' : 'scroll-decoration';\n\t\t}));\n\n\t\tthis._register(autorun(reader => /** @description EditorGutter.Render */ this.render(reader)));\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\treset(this._domNode);\n\t}\n\n\tprivate readonly views;\n\n\tprivate render(reader: IReader): void {\n\t\tif (!this.modelAttached.read(reader)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.domNodeSizeChanged.read(reader);\n\t\tthis.editorOnDidChangeViewZones.read(reader);\n\t\tthis.editorOnDidContentSizeChange.read(reader);\n\n\t\tconst scrollTop = this.scrollTop.read(reader);\n\n\t\tconst visibleRanges = this._editor.getVisibleRanges();\n\t\tconst unusedIds = new Set(this.views.keys());\n\n\t\tconst viewRange = OffsetRange.ofStartAndLength(0, this._domNode.clientHeight);\n\n\t\tif (!viewRange.isEmpty) {\n\t\t\tfor (const visibleRange of visibleRanges) {\n\t\t\t\tconst visibleRange2 = new LineRange(\n\t\t\t\t\tvisibleRange.startLineNumber,\n\t\t\t\t\tvisibleRange.endLineNumber + 1\n\t\t\t\t);\n\n\t\t\t\tconst gutterItems = this.itemProvider.getIntersectingGutterItems(\n\t\t\t\t\tvisibleRange2,\n\t\t\t\t\treader\n\t\t\t\t);\n\n\t\t\t\ttransaction(tx => {\n\t\t\t\t\t/** EditorGutter.render */\n\n\t\t\t\t\tfor (const gutterItem of gutterItems) {\n\t\t\t\t\t\tif (!gutterItem.range.intersect(visibleRange2)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tunusedIds.delete(gutterItem.id);\n\t\t\t\t\t\tlet view = this.views.get(gutterItem.id);\n\t\t\t\t\t\tif (!view) {\n\t\t\t\t\t\t\tconst viewDomNode = document.createElement('div');\n\t\t\t\t\t\t\tthis._domNode.appendChild(viewDomNode);\n\t\t\t\t\t\t\tconst gutterItemObs = observableValue('item', gutterItem);\n\t\t\t\t\t\t\tconst itemView = this.itemProvider.createView(\n\t\t\t\t\t\t\t\tgutterItemObs,\n\t\t\t\t\t\t\t\tviewDomNode\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tview = new ManagedGutterItemView(gutterItemObs, itemView, viewDomNode);\n\t\t\t\t\t\t\tthis.views.set(gutterItem.id, view);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tview.item.set(gutterItem, tx);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst top =\n\t\t\t\t\t\t\tgutterItem.range.startLineNumber <= this._editor.getModel()!.getLineCount()\n\t\t\t\t\t\t\t\t? this._editor.getTopForLineNumber(gutterItem.range.startLineNumber, true) - scrollTop\n\t\t\t\t\t\t\t\t: gutterItem.range.startLineNumber > 1\n\t\t\t\t\t\t\t\t\t? this._editor.getBottomForLineNumber(gutterItem.range.startLineNumber - 1, false) - scrollTop\n\t\t\t\t\t\t\t\t\t: 0;\n\t\t\t\t\t\tconst bottom =\n\t\t\t\t\t\t\tgutterItem.range.endLineNumberExclusive === 1 ?\n\t\t\t\t\t\t\t\tMath.max(top, this._editor.getTopForLineNumber(gutterItem.range.startLineNumber, false) - scrollTop)\n\t\t\t\t\t\t\t\t: Math.max(top, this._editor.getBottomForLineNumber(gutterItem.range.endLineNumberExclusive - 1, true) - scrollTop);\n\n\t\t\t\t\t\tconst height = bottom - top;\n\t\t\t\t\t\tview.domNode.style.top = `${top}px`;\n\t\t\t\t\t\tview.domNode.style.height = `${height}px`;\n\n\t\t\t\t\t\tview.gutterItemView.layout(OffsetRange.ofStartAndLength(top, height), viewRange);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfor (const id of unusedIds) {\n\t\t\tconst view = this.views.get(id)!;\n\t\t\tview.gutterItemView.dispose();\n\t\t\tview.domNode.remove();\n\t\t\tthis.views.delete(id);\n\t\t}\n\t}\n}\n\nclass ManagedGutterItemView {\n\tconstructor(\n\t\tpublic readonly item: ISettableObservable<IGutterItemInfo>,\n\t\tpublic readonly gutterItemView: IGutterItemView,\n\t\tpublic readonly domNode: HTMLDivElement,\n\t) { }\n}\n\nexport interface IGutterItemProvider<TItem extends IGutterItemInfo> {\n\tgetIntersectingGutterItems(range: LineRange, reader: IReader): TItem[];\n\n\tcreateView(item: IObservable<TItem>, target: HTMLElement): IGutterItemView;\n}\n\nexport interface IGutterItemInfo {\n\tid: string;\n\trange: LineRange;\n}\n\nexport interface IGutterItemView extends IDisposable {\n\tlayout(itemRange: OffsetRange, viewRange: OffsetRange): void;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h, reset } from '../../../../../base/browser/dom.js';\nimport { Disposable, IDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, IObservable, IReader, ISettableObservable, observableFromEvent, observableSignal, observableSignalFromEvent, observableValue, transaction } from '../../../../../base/common/observable.js';\nimport { CodeEditorWidget } from '../../codeEditor/codeEditorWidget.js';\nimport { LineRange } from '../../../../common/core/ranges/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/ranges/offsetRange.js';\n\nexport class EditorGutter<T extends IGutterItemInfo = IGutterItemInfo> extends Disposable {\n\tprivate readonly scrollTop;\n\tprivate readonly isScrollTopZero;\n\tprivate readonly modelAttached;\n\n\tprivate readonly editorOnDidChangeViewZones;\n\tprivate readonly editorOnDidContentSizeChange;\n\tprivate readonly domNodeSizeChanged;\n\n\tconstructor(\n\t\tprivate readonly _editor: CodeEditorWidget,\n\t\tprivate readonly _domNode: HTMLElement,\n\t\tprivate readonly itemProvider: IGutterItemProvider<T>\n\t) {\n\t\tsuper();\n\t\tthis.scrollTop = observableFromEvent(this,\n\t\t\tthis._editor.onDidScrollChange,\n\t\t\t(e) => /** @description editor.onDidScrollChange */ this._editor.getScrollTop()\n\t\t);\n\t\tthis.isScrollTopZero = this.scrollTop.map((scrollTop) => /** @description isScrollTopZero */ scrollTop === 0);\n\t\tthis.modelAttached = observableFromEvent(this,\n\t\t\tthis._editor.onDidChangeModel,\n\t\t\t(e) => /** @description editor.onDidChangeModel */ this._editor.hasModel()\n\t\t);\n\t\tthis.editorOnDidChangeViewZones = observableSignalFromEvent('onDidChangeViewZones', this._editor.onDidChangeViewZones);\n\t\tthis.editorOnDidContentSizeChange = observableSignalFromEvent('onDidContentSizeChange', this._editor.onDidContentSizeChange);\n\t\tthis.domNodeSizeChanged = observableSignal('domNodeSizeChanged');\n\t\tthis.views = new Map<string, ManagedGutterItemView>();\n\t\tthis._domNode.className = 'gutter monaco-editor';\n\t\tconst scrollDecoration = this._domNode.appendChild(\n\t\t\th('div.scroll-decoration', { role: 'presentation', ariaHidden: 'true', style: { width: '100%' } })\n\t\t\t\t.root\n\t\t);\n\n\t\tconst o = new ResizeObserver(() => {\n\t\t\ttransaction(tx => {\n\t\t\t\t/** @description ResizeObserver: size changed */\n\t\t\t\tthis.domNodeSizeChanged.trigger(tx);\n\t\t\t});\n\t\t});\n\t\to.observe(this._domNode);\n\t\tthis._register(toDisposable(() => o.disconnect()));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update scroll decoration */\n\t\t\tscrollDecoration.className = this.isScrollTopZero.read(reader) ? '' : 'scroll-decoration';\n\t\t}));\n\n\t\tthis._register(autorun(reader => /** @description EditorGutter.Render */ this.render(reader)));\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\treset(this._domNode);\n\t}\n\n\tprivate readonly views;\n\n\tprivate render(reader: IReader): void {\n\t\tif (!this.modelAttached.read(reader)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.domNodeSizeChanged.read(reader);\n\t\tthis.editorOnDidChangeViewZones.read(reader);\n\t\tthis.editorOnDidContentSizeChange.read(reader);\n\n\t\tconst scrollTop = this.scrollTop.read(reader);\n\n\t\tconst visibleRanges = this._editor.getVisibleRanges();\n\t\tconst unusedIds = new Set(this.views.keys());\n\n\t\tconst viewRange = OffsetRange.ofStartAndLength(0, this._domNode.clientHeight);\n\n\t\tif (!viewRange.isEmpty) {\n\t\t\tfor (const visibleRange of visibleRanges) {\n\t\t\t\tconst visibleRange2 = new LineRange(\n\t\t\t\t\tvisibleRange.startLineNumber,\n\t\t\t\t\tvisibleRange.endLineNumber + 1\n\t\t\t\t);\n\n\t\t\t\tconst gutterItems = this.itemProvider.getIntersectingGutterItems(\n\t\t\t\t\tvisibleRange2,\n\t\t\t\t\treader\n\t\t\t\t);\n\n\t\t\t\ttransaction(tx => {\n\t\t\t\t\t/** EditorGutter.render */\n\n\t\t\t\t\tfor (const gutterItem of gutterItems) {\n\t\t\t\t\t\tif (!gutterItem.range.intersect(visibleRange2)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tunusedIds.delete(gutterItem.id);\n\t\t\t\t\t\tlet view = this.views.get(gutterItem.id);\n\t\t\t\t\t\tif (!view) {\n\t\t\t\t\t\t\tconst viewDomNode = document.createElement('div');\n\t\t\t\t\t\t\tthis._domNode.appendChild(viewDomNode);\n\t\t\t\t\t\t\tconst gutterItemObs = observableValue('item', gutterItem);\n\t\t\t\t\t\t\tconst itemView = this.itemProvider.createView(\n\t\t\t\t\t\t\t\tgutterItemObs,\n\t\t\t\t\t\t\t\tviewDomNode\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tview = new ManagedGutterItemView(gutterItemObs, itemView, viewDomNode);\n\t\t\t\t\t\t\tthis.views.set(gutterItem.id, view);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tview.item.set(gutterItem, tx);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst top =\n\t\t\t\t\t\t\tgutterItem.range.startLineNumber <= this._editor.getModel()!.getLineCount()\n\t\t\t\t\t\t\t\t? this._editor.getTopForLineNumber(gutterItem.range.startLineNumber, true) - scrollTop\n\t\t\t\t\t\t\t\t: gutterItem.range.startLineNumber > 1\n\t\t\t\t\t\t\t\t\t? this._editor.getBottomForLineNumber(gutterItem.range.startLineNumber - 1, false) - scrollTop\n\t\t\t\t\t\t\t\t\t: 0;\n\t\t\t\t\t\tconst bottom =\n\t\t\t\t\t\t\tgutterItem.range.endLineNumberExclusive === 1 ?\n\t\t\t\t\t\t\t\tMath.max(top, this._editor.getTopForLineNumber(gutterItem.range.startLineNumber, false) - scrollTop)\n\t\t\t\t\t\t\t\t: Math.max(top, this._editor.getBottomForLineNumber(gutterItem.range.endLineNumberExclusive - 1, true) - scrollTop);\n\n\t\t\t\t\t\tconst height = bottom - top;\n\t\t\t\t\t\tview.domNode.style.top = `${top}px`;\n\t\t\t\t\t\tview.domNode.style.height = `${height}px`;\n\n\t\t\t\t\t\tview.gutterItemView.layout(OffsetRange.ofStartAndLength(top, height), viewRange);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfor (const id of unusedIds) {\n\t\t\tconst view = this.views.get(id)!;\n\t\t\tview.gutterItemView.dispose();\n\t\t\tview.domNode.remove();\n\t\t\tthis.views.delete(id);\n\t\t}\n\t}\n}\n\nclass ManagedGutterItemView {\n\tconstructor(\n\t\tpublic readonly item: ISettableObservable<IGutterItemInfo>,\n\t\tpublic readonly gutterItemView: IGutterItemView,\n\t\tpublic readonly domNode: HTMLDivElement,\n\t) { }\n}\n\nexport interface IGutterItemProvider<TItem extends IGutterItemInfo> {\n\tgetIntersectingGutterItems(range: LineRange, reader: IReader): TItem[];\n\n\tcreateView(item: IObservable<TItem>, target: HTMLElement): IGutterItemView;\n}\n\nexport interface IGutterItemInfo {\n\tid: string;\n\trange: LineRange;\n}\n\nexport interface IGutterItemView extends IDisposable {\n\tlayout(itemRange: OffsetRange, viewRange: OffsetRange): void;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6354, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/gutterFeature.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/features/gutterFeature.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/vs/editor/browser/widget/diffEditor/features/gutterFeature.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { EventType, addDisposableListener, h } from '../../../../../base/browser/dom.js';\nimport { IMouseWheelEvent } from '../../../../../base/browser/mouseEvent.js';\nimport { ActionsOrientation } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { HoverPosition } from '../../../../../base/browser/ui/hover/hoverWidget.js';\nimport { IBoundarySashes } from '../../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, autorun, autorunWithStore, derived, derivedDisposable, derivedWithSetter, observableFromEvent, observableValue } from '../../../../../base/common/observable.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { HiddenItemStrategy, MenuWorkbenchToolBar } from '../../../../../platform/actions/browser/toolbar.js';\nimport { IMenuService, MenuId } from '../../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { WorkbenchHoverDelegate } from '../../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { EditorOption } from '../../../../common/config/editorOptions.js';\nimport { LineRange, LineRangeSet } from '../../../../common/core/ranges/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/ranges/offsetRange.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { TextEdit } from '../../../../common/core/edits/textEdit.js';\nimport { DetailedLineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { TextModelText } from '../../../../common/model/textModelText.js';\nimport { ActionRunnerWithContext } from '../../multiDiffEditor/utils.js';\nimport { DiffEditorEditors } from '../components/diffEditorEditors.js';\nimport { DiffEditorSash, SashLayout } from '../components/diffEditorSash.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\nimport { DiffEditorViewModel } from '../diffEditorViewModel.js';\nimport { appendRemoveOnDispose, applyStyle, prependRemoveOnDispose } from '../utils.js';\nimport { EditorGutter, IGutterItemInfo, IGutterItemView } from '../utils/editorGutter.js';\n\nconst emptyArr: never[] = [];\nconst width = 35;\n\nexport class DiffEditorGutter extends Disposable {\n\tprivate readonly _menu;\n\tprivate readonly _actions;\n\tprivate readonly _hasActions;\n\tprivate readonly _showSash;\n\n\tpublic readonly width;\n\n\tprivate readonly elements;\n\n\tconstructor(\n\t\tdiffEditorRoot: HTMLDivElement,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tprivate readonly _sashLayout: SashLayout,\n\t\tprivate readonly _boundarySashes: IObservable<IBoundarySashes | undefined>,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly _menuService: IMenuService,\n\t) {\n\t\tsuper();\n\t\tthis._menu = this._register(this._menuService.createMenu(MenuId.DiffEditorHunkToolbar, this._contextKeyService));\n\t\tthis._actions = observableFromEvent(this, this._menu.onDidChange, () => this._menu.getActions());\n\t\tthis._hasActions = this._actions.map(a => a.length > 0);\n\t\tthis._showSash = derived(this, reader => this._options.renderSideBySide.read(reader) && this._hasActions.read(reader));\n\t\tthis.width = derived(this, reader => this._hasActions.read(reader) ? width : 0);\n\t\tthis.elements = h('div.gutter@gutter', { style: { position: 'absolute', height: '100%', width: width + 'px' } }, []);\n\t\tthis._currentDiff = derived(this, (reader) => {\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tif (!model) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst mappings = model.diff.read(reader)?.mappings;\n\n\t\t\tconst cursorPosition = this._editors.modifiedCursor.read(reader);\n\t\t\tif (!cursorPosition) { return undefined; }\n\n\t\t\treturn mappings?.find(m => m.lineRangeMapping.modified.contains(cursorPosition.lineNumber));\n\t\t});\n\t\tthis._selectedDiffs = derived(this, (reader) => {\n\t\t\t/** @description selectedDiffs */\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tconst diff = model?.diff.read(reader);\n\t\t\t// Return `emptyArr` because it is a constant. [] is always a new array and would trigger a change.\n\t\t\tif (!diff) { return emptyArr; }\n\n\t\t\tconst selections = this._editors.modifiedSelections.read(reader);\n\t\t\tif (selections.every(s => s.isEmpty())) { return emptyArr; }\n\n\t\t\tconst selectedLineNumbers = new LineRangeSet(selections.map(s => LineRange.fromRangeInclusive(s)));\n\n\t\t\tconst selectedMappings = diff.mappings.filter(m =>\n\t\t\t\tm.lineRangeMapping.innerChanges && selectedLineNumbers.intersects(m.lineRangeMapping.modified)\n\t\t\t);\n\t\t\tconst result = selectedMappings.map(mapping => ({\n\t\t\t\tmapping,\n\t\t\t\trangeMappings: mapping.lineRangeMapping.innerChanges!.filter(\n\t\t\t\t\tc => selections.some(s => Range.areIntersecting(c.modifiedRange, s))\n\t\t\t\t)\n\t\t\t}));\n\t\t\tif (result.length === 0 || result.every(r => r.rangeMappings.length === 0)) { return emptyArr; }\n\t\t\treturn result;\n\t\t});\n\n\t\tthis._register(prependRemoveOnDispose(diffEditorRoot, this.elements.root));\n\n\t\tthis._register(addDisposableListener(this.elements.root, 'click', () => {\n\t\t\tthis._editors.modified.focus();\n\t\t}));\n\n\t\tthis._register(applyStyle(this.elements.root, { display: this._hasActions.map(a => a ? 'block' : 'none') }));\n\n\t\tderivedDisposable(this, reader => {\n\t\t\tconst showSash = this._showSash.read(reader);\n\t\t\treturn !showSash ? undefined : new DiffEditorSash(\n\t\t\t\tdiffEditorRoot,\n\t\t\t\tthis._sashLayout.dimensions,\n\t\t\t\tthis._options.enableSplitViewResizing,\n\t\t\t\tthis._boundarySashes,\n\t\t\t\tderivedWithSetter(\n\t\t\t\t\tthis, reader => this._sashLayout.sashLeft.read(reader) - width,\n\t\t\t\t\t(v, tx) => this._sashLayout.sashLeft.set(v + width, tx)\n\t\t\t\t),\n\t\t\t\t() => this._sashLayout.resetSash(),\n\t\t\t);\n\t\t}).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst gutterItems = derived(this, reader => {\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tif (!model) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tconst diffs = model.diff.read(reader);\n\t\t\tif (!diffs) { return []; }\n\n\t\t\tconst selection = this._selectedDiffs.read(reader);\n\t\t\tif (selection.length > 0) {\n\t\t\t\tconst m = DetailedLineRangeMapping.fromRangeMappings(selection.flatMap(s => s.rangeMappings));\n\t\t\t\treturn [\n\t\t\t\t\tnew DiffGutterItem(\n\t\t\t\t\t\tm,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tMenuId.DiffEditorSelectionToolbar,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tmodel.model.original.uri,\n\t\t\t\t\t\tmodel.model.modified.uri,\n\t\t\t\t\t)];\n\t\t\t}\n\n\t\t\tconst currentDiff = this._currentDiff.read(reader);\n\n\t\t\treturn diffs.mappings.map(m => new DiffGutterItem(\n\t\t\t\tm.lineRangeMapping.withInnerChangesFromLineRanges(),\n\t\t\t\tm.lineRangeMapping === currentDiff?.lineRangeMapping,\n\t\t\t\tMenuId.DiffEditorHunkToolbar,\n\t\t\t\tundefined,\n\t\t\t\tmodel.model.original.uri,\n\t\t\t\tmodel.model.modified.uri,\n\t\t\t));\n\t\t});\n\n\t\tthis._register(new EditorGutter<DiffGutterItem>(this._editors.modified, this.elements.root, {\n\t\t\tgetIntersectingGutterItems: (range, reader) => gutterItems.read(reader),\n\t\t\tcreateView: (item, target) => {\n\t\t\t\treturn this._instantiationService.createInstance(DiffToolBar, item, target, this);\n\t\t\t},\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.elements.gutter, EventType.MOUSE_WHEEL, (e: IMouseWheelEvent) => {\n\t\t\tif (this._editors.modified.getOption(EditorOption.scrollbar).handleMouseWheel) {\n\t\t\t\tthis._editors.modified.delegateScrollFromMouseWheelEvent(e);\n\t\t\t}\n\t\t}, { passive: false }));\n\t}\n\n\tpublic computeStagedValue(mapping: DetailedLineRangeMapping): string {\n\t\tconst c = mapping.innerChanges ?? [];\n\t\tconst modified = new TextModelText(this._editors.modifiedModel.get()!);\n\t\tconst original = new TextModelText(this._editors.original.getModel()!);\n\n\t\tconst edit = new TextEdit(c.map(c => c.toTextEdit(modified)));\n\t\tconst value = edit.apply(original);\n\t\treturn value;\n\t}\n\n\tprivate readonly _currentDiff;\n\n\tprivate readonly _selectedDiffs;\n\n\tlayout(left: number) {\n\t\tthis.elements.gutter.style.left = left + 'px';\n\t}\n}\n\nclass DiffGutterItem implements IGutterItemInfo {\n\tconstructor(\n\t\tpublic readonly mapping: DetailedLineRangeMapping,\n\t\tpublic readonly showAlways: boolean,\n\t\tpublic readonly menuId: MenuId,\n\t\tpublic readonly rangeOverride: LineRange | undefined,\n\t\tpublic readonly originalUri: URI,\n\t\tpublic readonly modifiedUri: URI,\n\t) {\n\t}\n\tget id(): string { return this.mapping.modified.toString(); }\n\tget range(): LineRange { return this.rangeOverride ?? this.mapping.modified; }\n}\n\n\nclass DiffToolBar extends Disposable implements IGutterItemView {\n\tprivate readonly _elements;\n\n\tprivate readonly _showAlways;\n\tprivate readonly _menuId;\n\n\tprivate readonly _isSmall;\n\n\tconstructor(\n\t\tprivate readonly _item: IObservable<DiffGutterItem>,\n\t\ttarget: HTMLElement,\n\t\tgutter: DiffEditorGutter,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis._elements = h('div.gutterItem', { style: { height: '20px', width: '34px' } }, [\n\t\t\th('div.background@background', {}, []),\n\t\t\th('div.buttons@buttons', {}, []),\n\t\t]);\n\t\tthis._showAlways = this._item.map(this, item => item.showAlways);\n\t\tthis._menuId = this._item.map(this, item => item.menuId);\n\t\tthis._isSmall = observableValue(this, false);\n\t\tthis._lastItemRange = undefined;\n\t\tthis._lastViewRange = undefined;\n\n\t\tconst hoverDelegate = this._register(instantiationService.createInstance(\n\t\t\tWorkbenchHoverDelegate,\n\t\t\t'element',\n\t\t\t{ instantHover: true },\n\t\t\t{ position: { hoverPosition: HoverPosition.RIGHT } }\n\t\t));\n\n\t\tthis._register(appendRemoveOnDispose(target, this._elements.root));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update showAlways */\n\t\t\tconst showAlways = this._showAlways.read(reader);\n\t\t\tthis._elements.root.classList.toggle('noTransition', true);\n\t\t\tthis._elements.root.classList.toggle('showAlways', showAlways);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._elements.root.classList.toggle('noTransition', false);\n\t\t\t}, 0);\n\t\t}));\n\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tthis._elements.buttons.replaceChildren();\n\t\t\tconst i = store.add(instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.buttons, this._menuId.read(reader), {\n\t\t\t\torientation: ActionsOrientation.VERTICAL,\n\t\t\t\thoverDelegate,\n\t\t\t\ttoolbarOptions: {\n\t\t\t\t\tprimaryGroup: g => g.startsWith('primary'),\n\t\t\t\t},\n\t\t\t\toverflowBehavior: { maxItems: this._isSmall.read(reader) ? 1 : 3 },\n\t\t\t\thiddenItemStrategy: HiddenItemStrategy.Ignore,\n\t\t\t\tactionRunner: store.add(new ActionRunnerWithContext(() => {\n\t\t\t\t\tconst item = this._item.get();\n\t\t\t\t\tconst mapping = item.mapping;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmapping,\n\t\t\t\t\t\toriginalWithModifiedChanges: gutter.computeStagedValue(mapping),\n\t\t\t\t\t\toriginalUri: item.originalUri,\n\t\t\t\t\t\tmodifiedUri: item.modifiedUri,\n\t\t\t\t\t} satisfies DiffEditorSelectionHunkToolbarContext;\n\t\t\t\t})),\n\t\t\t\tmenuOptions: {\n\t\t\t\t\tshouldForwardArgs: true,\n\t\t\t\t},\n\t\t\t}));\n\t\t\tstore.add(i.onDidChangeMenuItems(() => {\n\t\t\t\tif (this._lastItemRange) {\n\t\t\t\t\tthis.layout(this._lastItemRange, this._lastViewRange!);\n\t\t\t\t}\n\t\t\t}));\n\t\t}));\n\t}\n\n\tprivate _lastItemRange: OffsetRange | undefined;\n\tprivate _lastViewRange: OffsetRange | undefined;\n\n\tlayout(itemRange: OffsetRange, viewRange: OffsetRange): void {\n\t\tthis._lastItemRange = itemRange;\n\t\tthis._lastViewRange = viewRange;\n\n\t\tlet itemHeight = this._elements.buttons.clientHeight;\n\t\tthis._isSmall.set(this._item.get().mapping.original.startLineNumber === 1 && itemRange.length < 30, undefined);\n\t\t// Item might have changed\n\t\titemHeight = this._elements.buttons.clientHeight;\n\n\t\tconst middleHeight = itemRange.length / 2 - itemHeight / 2;\n\n\t\tconst margin = itemHeight;\n\n\t\tlet effectiveCheckboxTop = itemRange.start + middleHeight;\n\n\t\tconst preferredViewPortRange = OffsetRange.tryCreate(\n\t\t\tmargin,\n\t\t\tviewRange.endExclusive - margin - itemHeight\n\t\t);\n\n\t\tconst preferredParentRange = OffsetRange.tryCreate(\n\t\t\titemRange.start + margin,\n\t\t\titemRange.endExclusive - itemHeight - margin\n\t\t);\n\n\t\tif (preferredParentRange && preferredViewPortRange && preferredParentRange.start < preferredParentRange.endExclusive) {\n\t\t\teffectiveCheckboxTop = preferredViewPortRange!.clip(effectiveCheckboxTop);\n\t\t\teffectiveCheckboxTop = preferredParentRange!.clip(effectiveCheckboxTop);\n\t\t}\n\n\t\tthis._elements.buttons.style.top = `${effectiveCheckboxTop - itemRange.start}px`;\n\t}\n}\n\nexport interface DiffEditorSelectionHunkToolbarContext {\n\tmapping: DetailedLineRangeMapping;\n\n\t/**\n\t * The original text with the selected modified changes applied.\n\t*/\n\toriginalWithModifiedChanges: string;\n\n\tmodifiedUri: URI;\n\toriginalUri: URI;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { EventType, addDisposableListener, h } from '../../../../../base/browser/dom.js';\nimport { IMouseWheelEvent } from '../../../../../base/browser/mouseEvent.js';\nimport { ActionsOrientation } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { HoverPosition } from '../../../../../base/browser/ui/hover/hoverWidget.js';\nimport { IBoundarySashes } from '../../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, autorun, autorunWithStore, derived, derivedDisposable, derivedWithSetter, observableFromEvent, observableValue } from '../../../../../base/common/observable.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { HiddenItemStrategy, MenuWorkbenchToolBar } from '../../../../../platform/actions/browser/toolbar.js';\nimport { IMenuService, MenuId } from '../../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { WorkbenchHoverDelegate } from '../../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { EditorOption } from '../../../../common/config/editorOptions.js';\nimport { LineRange, LineRangeSet } from '../../../../common/core/ranges/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/ranges/offsetRange.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { TextEdit } from '../../../../common/core/edits/textEdit.js';\nimport { DetailedLineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { TextModelText } from '../../../../common/model/textModelText.js';\nimport { ActionRunnerWithContext } from '../../multiDiffEditor/utils.js';\nimport { DiffEditorEditors } from '../components/diffEditorEditors.js';\nimport { DiffEditorSash, SashLayout } from '../components/diffEditorSash.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\nimport { DiffEditorViewModel } from '../diffEditorViewModel.js';\nimport { appendRemoveOnDispose, applyStyle, prependRemoveOnDispose } from '../utils.js';\nimport { EditorGutter, IGutterItemInfo, IGutterItemView } from '../utils/editorGutter.js';\n\nconst emptyArr: never[] = [];\nconst width = 35;\n\nexport class DiffEditorGutter extends Disposable {\n\tprivate readonly _menu;\n\tprivate readonly _actions;\n\tprivate readonly _hasActions;\n\tprivate readonly _showSash;\n\n\tpublic readonly width;\n\n\tprivate readonly elements;\n\n\tconstructor(\n\t\tdiffEditorRoot: HTMLDivElement,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tprivate readonly _sashLayout: SashLayout,\n\t\tprivate readonly _boundarySashes: IObservable<IBoundarySashes | undefined>,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly _menuService: IMenuService,\n\t) {\n\t\tsuper();\n\t\tthis._menu = this._register(this._menuService.createMenu(MenuId.DiffEditorHunkToolbar, this._contextKeyService));\n\t\tthis._actions = observableFromEvent(this, this._menu.onDidChange, () => this._menu.getActions());\n\t\tthis._hasActions = this._actions.map(a => a.length > 0);\n\t\tthis._showSash = derived(this, reader => this._options.renderSideBySide.read(reader) && this._hasActions.read(reader));\n\t\tthis.width = derived(this, reader => this._hasActions.read(reader) ? width : 0);\n\t\tthis.elements = h('div.gutter@gutter', { style: { position: 'absolute', height: '100%', width: width + 'px' } }, []);\n\t\tthis._currentDiff = derived(this, (reader) => {\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tif (!model) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst mappings = model.diff.read(reader)?.mappings;\n\n\t\t\tconst cursorPosition = this._editors.modifiedCursor.read(reader);\n\t\t\tif (!cursorPosition) { return undefined; }\n\n\t\t\treturn mappings?.find(m => m.lineRangeMapping.modified.contains(cursorPosition.lineNumber));\n\t\t});\n\t\tthis._selectedDiffs = derived(this, (reader) => {\n\t\t\t/** @description selectedDiffs */\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tconst diff = model?.diff.read(reader);\n\t\t\t// Return `emptyArr` because it is a constant. [] is always a new array and would trigger a change.\n\t\t\tif (!diff) { return emptyArr; }\n\n\t\t\tconst selections = this._editors.modifiedSelections.read(reader);\n\t\t\tif (selections.every(s => s.isEmpty())) { return emptyArr; }\n\n\t\t\tconst selectedLineNumbers = new LineRangeSet(selections.map(s => LineRange.fromRangeInclusive(s)));\n\n\t\t\tconst selectedMappings = diff.mappings.filter(m =>\n\t\t\t\tm.lineRangeMapping.innerChanges && selectedLineNumbers.intersects(m.lineRangeMapping.modified)\n\t\t\t);\n\t\t\tconst result = selectedMappings.map(mapping => ({\n\t\t\t\tmapping,\n\t\t\t\trangeMappings: mapping.lineRangeMapping.innerChanges!.filter(\n\t\t\t\t\tc => selections.some(s => Range.areIntersecting(c.modifiedRange, s))\n\t\t\t\t)\n\t\t\t}));\n\t\t\tif (result.length === 0 || result.every(r => r.rangeMappings.length === 0)) { return emptyArr; }\n\t\t\treturn result;\n\t\t});\n\n\t\tthis._register(prependRemoveOnDispose(diffEditorRoot, this.elements.root));\n\n\t\tthis._register(addDisposableListener(this.elements.root, 'click', () => {\n\t\t\tthis._editors.modified.focus();\n\t\t}));\n\n\t\tthis._register(applyStyle(this.elements.root, { display: this._hasActions.map(a => a ? 'block' : 'none') }));\n\n\t\tderivedDisposable(this, reader => {\n\t\t\tconst showSash = this._showSash.read(reader);\n\t\t\treturn !showSash ? undefined : new DiffEditorSash(\n\t\t\t\tdiffEditorRoot,\n\t\t\t\tthis._sashLayout.dimensions,\n\t\t\t\tthis._options.enableSplitViewResizing,\n\t\t\t\tthis._boundarySashes,\n\t\t\t\tderivedWithSetter(\n\t\t\t\t\tthis, reader => this._sashLayout.sashLeft.read(reader) - width,\n\t\t\t\t\t(v, tx) => this._sashLayout.sashLeft.set(v + width, tx)\n\t\t\t\t),\n\t\t\t\t() => this._sashLayout.resetSash(),\n\t\t\t);\n\t\t}).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst gutterItems = derived(this, reader => {\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tif (!model) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tconst diffs = model.diff.read(reader);\n\t\t\tif (!diffs) { return []; }\n\n\t\t\tconst selection = this._selectedDiffs.read(reader);\n\t\t\tif (selection.length > 0) {\n\t\t\t\tconst m = DetailedLineRangeMapping.fromRangeMappings(selection.flatMap(s => s.rangeMappings));\n\t\t\t\treturn [\n\t\t\t\t\tnew DiffGutterItem(\n\t\t\t\t\t\tm,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tMenuId.DiffEditorSelectionToolbar,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tmodel.model.original.uri,\n\t\t\t\t\t\tmodel.model.modified.uri,\n\t\t\t\t\t)];\n\t\t\t}\n\n\t\t\tconst currentDiff = this._currentDiff.read(reader);\n\n\t\t\treturn diffs.mappings.map(m => new DiffGutterItem(\n\t\t\t\tm.lineRangeMapping.withInnerChangesFromLineRanges(),\n\t\t\t\tm.lineRangeMapping === currentDiff?.lineRangeMapping,\n\t\t\t\tMenuId.DiffEditorHunkToolbar,\n\t\t\t\tundefined,\n\t\t\t\tmodel.model.original.uri,\n\t\t\t\tmodel.model.modified.uri,\n\t\t\t));\n\t\t});\n\n\t\tthis._register(new EditorGutter<DiffGutterItem>(this._editors.modified, this.elements.root, {\n\t\t\tgetIntersectingGutterItems: (range, reader) => gutterItems.read(reader),\n\t\t\tcreateView: (item, target) => {\n\t\t\t\treturn this._instantiationService.createInstance(DiffToolBar, item, target, this);\n\t\t\t},\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.elements.gutter, EventType.MOUSE_WHEEL, (e: IMouseWheelEvent) => {\n\t\t\tif (this._editors.modified.getOption(EditorOption.scrollbar).handleMouseWheel) {\n\t\t\t\tthis._editors.modified.delegateScrollFromMouseWheelEvent(e);\n\t\t\t}\n\t\t}, { passive: false }));\n\t}\n\n\tpublic computeStagedValue(mapping: DetailedLineRangeMapping): string {\n\t\tconst c = mapping.innerChanges ?? [];\n\t\tconst modified = new TextModelText(this._editors.modifiedModel.get()!);\n\t\tconst original = new TextModelText(this._editors.original.getModel()!);\n\n\t\tconst edit = new TextEdit(c.map(c => c.toTextEdit(modified)));\n\t\tconst value = edit.apply(original);\n\t\treturn value;\n\t}\n\n\tprivate readonly _currentDiff;\n\n\tprivate readonly _selectedDiffs;\n\n\tlayout(left: number) {\n\t\tthis.elements.gutter.style.left = left + 'px';\n\t}\n}\n\nclass DiffGutterItem implements IGutterItemInfo {\n\tconstructor(\n\t\tpublic readonly mapping: DetailedLineRangeMapping,\n\t\tpublic readonly showAlways: boolean,\n\t\tpublic readonly menuId: MenuId,\n\t\tpublic readonly rangeOverride: LineRange | undefined,\n\t\tpublic readonly originalUri: URI,\n\t\tpublic readonly modifiedUri: URI,\n\t) {\n\t}\n\tget id(): string { return this.mapping.modified.toString(); }\n\tget range(): LineRange { return this.rangeOverride ?? this.mapping.modified; }\n}\n\n\nclass DiffToolBar extends Disposable implements IGutterItemView {\n\tprivate readonly _elements;\n\n\tprivate readonly _showAlways;\n\tprivate readonly _menuId;\n\n\tprivate readonly _isSmall;\n\n\tconstructor(\n\t\tprivate readonly _item: IObservable<DiffGutterItem>,\n\t\ttarget: HTMLElement,\n\t\tgutter: DiffEditorGutter,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis._elements = h('div.gutterItem', { style: { height: '20px', width: '34px' } }, [\n\t\t\th('div.background@background', {}, []),\n\t\t\th('div.buttons@buttons', {}, []),\n\t\t]);\n\t\tthis._showAlways = this._item.map(this, item => item.showAlways);\n\t\tthis._menuId = this._item.map(this, item => item.menuId);\n\t\tthis._isSmall = observableValue(this, false);\n\t\tthis._lastItemRange = undefined;\n\t\tthis._lastViewRange = undefined;\n\n\t\tconst hoverDelegate = this._register(instantiationService.createInstance(\n\t\t\tWorkbenchHoverDelegate,\n\t\t\t'element',\n\t\t\t{ instantHover: true },\n\t\t\t{ position: { hoverPosition: HoverPosition.RIGHT } }\n\t\t));\n\n\t\tthis._register(appendRemoveOnDispose(target, this._elements.root));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update showAlways */\n\t\t\tconst showAlways = this._showAlways.read(reader);\n\t\t\tthis._elements.root.classList.toggle('noTransition', true);\n\t\t\tthis._elements.root.classList.toggle('showAlways', showAlways);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._elements.root.classList.toggle('noTransition', false);\n\t\t\t}, 0);\n\t\t}));\n\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tthis._elements.buttons.replaceChildren();\n\t\t\tconst i = store.add(instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.buttons, this._menuId.read(reader), {\n\t\t\t\torientation: ActionsOrientation.VERTICAL,\n\t\t\t\thoverDelegate,\n\t\t\t\ttoolbarOptions: {\n\t\t\t\t\tprimaryGroup: g => g.startsWith('primary'),\n\t\t\t\t},\n\t\t\t\toverflowBehavior: { maxItems: this._isSmall.read(reader) ? 1 : 3 },\n\t\t\t\thiddenItemStrategy: HiddenItemStrategy.Ignore,\n\t\t\t\tactionRunner: store.add(new ActionRunnerWithContext(() => {\n\t\t\t\t\tconst item = this._item.get();\n\t\t\t\t\tconst mapping = item.mapping;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmapping,\n\t\t\t\t\t\toriginalWithModifiedChanges: gutter.computeStagedValue(mapping),\n\t\t\t\t\t\toriginalUri: item.originalUri,\n\t\t\t\t\t\tmodifiedUri: item.modifiedUri,\n\t\t\t\t\t} satisfies DiffEditorSelectionHunkToolbarContext;\n\t\t\t\t})),\n\t\t\t\tmenuOptions: {\n\t\t\t\t\tshouldForwardArgs: true,\n\t\t\t\t},\n\t\t\t}));\n\t\t\tstore.add(i.onDidChangeMenuItems(() => {\n\t\t\t\tif (this._lastItemRange) {\n\t\t\t\t\tthis.layout(this._lastItemRange, this._lastViewRange!);\n\t\t\t\t}\n\t\t\t}));\n\t\t}));\n\t}\n\n\tprivate _lastItemRange: OffsetRange | undefined;\n\tprivate _lastViewRange: OffsetRange | undefined;\n\n\tlayout(itemRange: OffsetRange, viewRange: OffsetRange): void {\n\t\tthis._lastItemRange = itemRange;\n\t\tthis._lastViewRange = viewRange;\n\n\t\tlet itemHeight = this._elements.buttons.clientHeight;\n\t\tthis._isSmall.set(this._item.get().mapping.original.startLineNumber === 1 && itemRange.length < 30, undefined);\n\t\t// Item might have changed\n\t\titemHeight = this._elements.buttons.clientHeight;\n\n\t\tconst middleHeight = itemRange.length / 2 - itemHeight / 2;\n\n\t\tconst margin = itemHeight;\n\n\t\tlet effectiveCheckboxTop = itemRange.start + middleHeight;\n\n\t\tconst preferredViewPortRange = OffsetRange.tryCreate(\n\t\t\tmargin,\n\t\t\tviewRange.endExclusive - margin - itemHeight\n\t\t);\n\n\t\tconst preferredParentRange = OffsetRange.tryCreate(\n\t\t\titemRange.start + margin,\n\t\t\titemRange.endExclusive - itemHeight - margin\n\t\t);\n\n\t\tif (preferredParentRange && preferredViewPortRange && preferredParentRange.start < preferredParentRange.endExclusive) {\n\t\t\teffectiveCheckboxTop = preferredViewPortRange!.clip(effectiveCheckboxTop);\n\t\t\teffectiveCheckboxTop = preferredParentRange!.clip(effectiveCheckboxTop);\n\t\t}\n\n\t\tthis._elements.buttons.style.top = `${effectiveCheckboxTop - itemRange.start}px`;\n\t}\n}\n\nexport interface DiffEditorSelectionHunkToolbarContext {\n\tmapping: DetailedLineRangeMapping;\n\n\t/**\n\t * The original text with the selected modified changes applied.\n\t*/\n\toriginalWithModifiedChanges: string;\n\n\tmodifiedUri: URI;\n\toriginalUri: URI;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6639, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/hideUnchangedRegionsFeature.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/vs/editor/browser/widget/diffEditor/features/hideUnchangedRegionsFeature.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, addDisposableListener, getWindow, h, reset } from '../../../../../base/browser/dom.js';\nimport { renderIcon, renderLabelWithIcons } from '../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, IReader, autorun, derived, derivedDisposable, observableValue, transaction } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { isDefined } from '../../../../../base/common/types.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { EditorOption } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/ranges/lineRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { CursorChangeReason } from '../../../../common/cursorEvents.js';\nimport { SymbolKind, SymbolKinds } from '../../../../common/languages.js';\nimport { IModelDecorationOptions, IModelDeltaDecoration, ITextModel } from '../../../../common/model.js';\nimport { ICodeEditor } from '../../../editorBrowser.js';\nimport { observableCodeEditor } from '../../../observableCodeEditor.js';\nimport { DiffEditorEditors } from '../components/diffEditorEditors.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\nimport { DiffEditorViewModel, RevealPreference, UnchangedRegion } from '../diffEditorViewModel.js';\nimport { IObservableViewZone, PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle } from '../utils.js';\n\n/**\n * Make sure to add the view zones to the editor!\n */\nexport class HideUnchangedRegionsFeature extends Disposable {\n\tprivate static readonly _breadcrumbsSourceFactory = observableValue<((textModel: ITextModel, instantiationService: IInstantiationService) => IDiffEditorBreadcrumbsSource)>(\n\t\tHideUnchangedRegionsFeature, () => ({\n\t\t\tdispose() {\n\t\t\t},\n\t\t\tgetBreadcrumbItems(startRange, reader) {\n\t\t\t\treturn [];\n\t\t\t},\n\t\t}));\n\tpublic static setBreadcrumbsSourceFactory(factory: (textModel: ITextModel, instantiationService: IInstantiationService) => IDiffEditorBreadcrumbsSource) {\n\t\tthis._breadcrumbsSourceFactory.set(factory, undefined);\n\t}\n\n\tprivate readonly _modifiedOutlineSource = derivedDisposable(this, (reader) => {\n\t\tconst m = this._editors.modifiedModel.read(reader);\n\t\tconst factory = HideUnchangedRegionsFeature._breadcrumbsSourceFactory.read(reader);\n\t\treturn (!m || !factory) ? undefined : factory(m, this._instantiationService);\n\t});\n\n\tpublic readonly viewZones: IObservable<{\n\t\torigViewZones: IObservableViewZone[];\n\t\tmodViewZones: IObservableViewZone[];\n\t}>;\n\n\tprivate _isUpdatingHiddenAreas = false;\n\tpublic get isUpdatingHiddenAreas() { return this._isUpdatingHiddenAreas; }\n\n\tconstructor(\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._editors.original.onDidChangeCursorPosition(e => {\n\t\t\tif (e.reason === CursorChangeReason.ContentFlush) { return; }\n\t\t\tconst m = this._diffModel.get();\n\t\t\ttransaction(tx => {\n\t\t\t\tfor (const s of this._editors.original.getSelections() || []) {\n\t\t\t\t\tm?.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, RevealPreference.FromCloserSide, tx);\n\t\t\t\t\tm?.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, RevealPreference.FromCloserSide, tx);\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this._editors.modified.onDidChangeCursorPosition(e => {\n\t\t\tif (e.reason === CursorChangeReason.ContentFlush) { return; }\n\t\t\tconst m = this._diffModel.get();\n\t\t\ttransaction(tx => {\n\t\t\t\tfor (const s of this._editors.modified.getSelections() || []) {\n\t\t\t\t\tm?.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, RevealPreference.FromCloserSide, tx);\n\t\t\t\t\tm?.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, RevealPreference.FromCloserSide, tx);\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tconst unchangedRegions = this._diffModel.map((m, reader) => {\n\t\t\tconst regions = m?.unchangedRegions.read(reader) ?? [];\n\t\t\tif (regions.length === 1 && regions[0].modifiedLineNumber === 1 && regions[0].lineCount === this._editors.modifiedModel.read(reader)?.getLineCount()) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn regions;\n\t\t});\n\n\t\tthis.viewZones = derived(this, (reader) => {\n\t\t\t/** @description view Zones */\n\t\t\tconst modifiedOutlineSource = this._modifiedOutlineSource.read(reader);\n\t\t\tif (!modifiedOutlineSource) { return { origViewZones: [], modViewZones: [] }; }\n\n\t\t\tconst origViewZones: IObservableViewZone[] = [];\n\t\t\tconst modViewZones: IObservableViewZone[] = [];\n\t\t\tconst sideBySide = this._options.renderSideBySide.read(reader);\n\n\t\t\tconst compactMode = this._options.compactMode.read(reader);\n\n\t\t\tconst curUnchangedRegions = unchangedRegions.read(reader);\n\t\t\tfor (let i = 0; i < curUnchangedRegions.length; i++) {\n\t\t\t\tconst r = curUnchangedRegions[i];\n\t\t\t\tif (r.shouldHideControls(reader)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (compactMode && (i === 0 || i === curUnchangedRegions.length - 1)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (compactMode) {\n\t\t\t\t\t{\n\t\t\t\t\t\tconst d = derived(this, reader => /** @description hiddenOriginalRangeStart */ r.getHiddenOriginalRange(reader).startLineNumber - 1);\n\t\t\t\t\t\tconst origVz = new PlaceholderViewZone(d, 12);\n\t\t\t\t\t\torigViewZones.push(origVz);\n\t\t\t\t\t\treader.store.add(new CompactCollapsedCodeOverlayWidget(\n\t\t\t\t\t\t\tthis._editors.original,\n\t\t\t\t\t\t\torigVz,\n\t\t\t\t\t\t\tr,\n\t\t\t\t\t\t\t!sideBySide,\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tconst d = derived(this, reader => /** @description hiddenModifiedRangeStart */ r.getHiddenModifiedRange(reader).startLineNumber - 1);\n\t\t\t\t\t\tconst modViewZone = new PlaceholderViewZone(d, 12);\n\t\t\t\t\t\tmodViewZones.push(modViewZone);\n\t\t\t\t\t\treader.store.add(new CompactCollapsedCodeOverlayWidget(\n\t\t\t\t\t\t\tthis._editors.modified,\n\t\t\t\t\t\t\tmodViewZone,\n\t\t\t\t\t\t\tr,\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t{\n\t\t\t\t\t\tconst d = derived(this, reader => /** @description hiddenOriginalRangeStart */ r.getHiddenOriginalRange(reader).startLineNumber - 1);\n\t\t\t\t\t\tconst origVz = new PlaceholderViewZone(d, 24);\n\t\t\t\t\t\torigViewZones.push(origVz);\n\t\t\t\t\t\treader.store.add(new CollapsedCodeOverlayWidget(\n\t\t\t\t\t\t\tthis._editors.original,\n\t\t\t\t\t\t\torigVz,\n\t\t\t\t\t\t\tr,\n\t\t\t\t\t\t\tr.originalUnchangedRange,\n\t\t\t\t\t\t\t!sideBySide,\n\t\t\t\t\t\t\tmodifiedOutlineSource,\n\t\t\t\t\t\t\tl => this._diffModel.get()!.ensureModifiedLineIsVisible(l, RevealPreference.FromBottom, undefined),\n\t\t\t\t\t\t\tthis._options,\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tconst d = derived(this, reader => /** @description hiddenModifiedRangeStart */ r.getHiddenModifiedRange(reader).startLineNumber - 1);\n\t\t\t\t\t\tconst modViewZone = new PlaceholderViewZone(d, 24);\n\t\t\t\t\t\tmodViewZones.push(modViewZone);\n\t\t\t\t\t\treader.store.add(new CollapsedCodeOverlayWidget(\n\t\t\t\t\t\t\tthis._editors.modified,\n\t\t\t\t\t\t\tmodViewZone,\n\t\t\t\t\t\t\tr,\n\t\t\t\t\t\t\tr.modifiedUnchangedRange,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tmodifiedOutlineSource,\n\t\t\t\t\t\t\tl => this._diffModel.get()!.ensureModifiedLineIsVisible(l, RevealPreference.FromBottom, undefined),\n\t\t\t\t\t\t\tthis._options,\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { origViewZones, modViewZones, };\n\t\t});\n\n\n\t\tconst unchangedLinesDecoration: IModelDecorationOptions = {\n\t\t\tdescription: 'unchanged lines',\n\t\t\tclassName: 'diff-unchanged-lines',\n\t\t\tisWholeLine: true,\n\t\t};\n\t\tconst unchangedLinesDecorationShow: IModelDecorationOptions = {\n\t\t\tdescription: 'Fold Unchanged',\n\t\t\tglyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\n\t\t\t\t.appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\n\t\t\tglyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\n\t\t\tzIndex: 10001,\n\t\t};\n\n\t\tthis._register(applyObservableDecorations(this._editors.original, derived(this, reader => {\n\t\t\t/** @description decorations */\n\t\t\tconst curUnchangedRegions = unchangedRegions.read(reader);\n\t\t\tconst result = curUnchangedRegions.map<IModelDeltaDecoration>(r => ({\n\t\t\t\trange: r.originalUnchangedRange.toInclusiveRange()!,\n\t\t\t\toptions: unchangedLinesDecoration,\n\t\t\t}));\n\t\t\tfor (const r of curUnchangedRegions) {\n\t\t\t\tif (r.shouldHideControls(reader)) {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\trange: Range.fromPositions(new Position(r.originalLineNumber, 1)),\n\t\t\t\t\t\toptions: unchangedLinesDecorationShow,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t})));\n\n\t\tthis._register(applyObservableDecorations(this._editors.modified, derived(this, reader => {\n\t\t\t/** @description decorations */\n\t\t\tconst curUnchangedRegions = unchangedRegions.read(reader);\n\t\t\tconst result = curUnchangedRegions.map<IModelDeltaDecoration>(r => ({\n\t\t\t\trange: r.modifiedUnchangedRange.toInclusiveRange()!,\n\t\t\t\toptions: unchangedLinesDecoration,\n\t\t\t}));\n\t\t\tfor (const r of curUnchangedRegions) {\n\t\t\t\tif (r.shouldHideControls(reader)) {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\trange: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange()!,\n\t\t\t\t\t\toptions: unchangedLinesDecorationShow,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t})));\n\n\t\tthis._register(autorun((reader) => {\n\t\t\t/** @description update folded unchanged regions */\n\t\t\tconst curUnchangedRegions = unchangedRegions.read(reader);\n\t\t\tthis._isUpdatingHiddenAreas = true;\n\t\t\ttry {\n\t\t\t\tthis._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\n\t\t\t\tthis._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\n\t\t\t} finally {\n\t\t\t\tthis._isUpdatingHiddenAreas = false;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._editors.modified.onMouseUp(event => {\n\t\t\tif (!event.event.rightButton && event.target.position && event.target.element?.className.includes('fold-unchanged')) {\n\t\t\t\tconst lineNumber = event.target.position.lineNumber;\n\t\t\t\tconst model = this._diffModel.get();\n\t\t\t\tif (!model) { return; }\n\t\t\t\tconst region = model.unchangedRegions.get().find(r => r.modifiedUnchangedRange.contains(lineNumber));\n\t\t\t\tif (!region) { return; }\n\t\t\t\tregion.collapseAll(undefined);\n\t\t\t\tevent.event.stopPropagation();\n\t\t\t\tevent.event.preventDefault();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._editors.original.onMouseUp(event => {\n\t\t\tif (!event.event.rightButton && event.target.position && event.target.element?.className.includes('fold-unchanged')) {\n\t\t\t\tconst lineNumber = event.target.position.lineNumber;\n\t\t\t\tconst model = this._diffModel.get();\n\t\t\t\tif (!model) { return; }\n\t\t\t\tconst region = model.unchangedRegions.get().find(r => r.originalUnchangedRange.contains(lineNumber));\n\t\t\t\tif (!region) { return; }\n\t\t\t\tregion.collapseAll(undefined);\n\t\t\t\tevent.event.stopPropagation();\n\t\t\t\tevent.event.preventDefault();\n\t\t\t}\n\t\t}));\n\t}\n}\n\nclass CompactCollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n\tprivate readonly _nodes = h('div.diff-hidden-lines-compact', [\n\t\th('div.line-left', []),\n\t\th('div.text@text', []),\n\t\th('div.line-right', [])\n\t]);\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t_viewZone: PlaceholderViewZone,\n\t\tprivate readonly _unchangedRegion: UnchangedRegion,\n\t\tprivate readonly _hide: boolean = false,\n\t) {\n\t\tconst root = h('div.diff-hidden-lines-widget');\n\t\tsuper(editor, _viewZone, root.root);\n\t\troot.root.appendChild(this._nodes.root);\n\n\t\tif (this._hide) {\n\t\t\tthis._nodes.root.replaceChildren();\n\t\t}\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update labels */\n\n\t\t\tif (!this._hide) {\n\t\t\t\tconst lineCount = this._unchangedRegion.getHiddenModifiedRange(reader).length;\n\t\t\t\tconst linesHiddenText = localize('hiddenLines', '{0} hidden lines', lineCount);\n\t\t\t\tthis._nodes.text.innerText = linesHiddenText;\n\t\t\t}\n\t\t}));\n\t}\n}\n\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n\tprivate readonly _nodes = h('div.diff-hidden-lines', [\n\t\th('div.top@top', { title: localize('diff.hiddenLines.top', 'Click or drag to show more above') }),\n\t\th('div.center@content', { style: { display: 'flex' } }, [\n\t\t\th('div@first', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center', flexShrink: '0' } },\n\t\t\t\t[$('a', { title: localize('showUnchangedRegion', 'Show Unchanged Region'), role: 'button', onclick: () => { this._unchangedRegion.showAll(undefined); } },\n\t\t\t\t\t...renderLabelWithIcons('$(unfold)'))]\n\t\t\t),\n\t\t\th('div@others', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }),\n\t\t]),\n\t\th('div.bottom@bottom', { title: localize('diff.bottom', 'Click or drag to show more below'), role: 'button' }),\n\t]);\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t_viewZone: PlaceholderViewZone,\n\t\tprivate readonly _unchangedRegion: UnchangedRegion,\n\t\tprivate readonly _unchangedRegionRange: LineRange,\n\t\tprivate readonly _hide: boolean,\n\t\tprivate readonly _modifiedOutlineSource: IDiffEditorBreadcrumbsSource,\n\t\tprivate readonly _revealModifiedHiddenLine: (lineNumber: number) => void,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t) {\n\t\tconst root = h('div.diff-hidden-lines-widget');\n\t\tsuper(_editor, _viewZone, root.root);\n\t\troot.root.appendChild(this._nodes.root);\n\n\t\tif (!this._hide) {\n\t\t\tthis._register(applyStyle(this._nodes.first, { width: observableCodeEditor(this._editor).layoutInfoContentLeft }));\n\t\t} else {\n\t\t\treset(this._nodes.first);\n\t\t}\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description Update CollapsedCodeOverlayWidget canMove* css classes */\n\t\t\tconst isFullyRevealed = this._unchangedRegion.visibleLineCountTop.read(reader) + this._unchangedRegion.visibleLineCountBottom.read(reader) === this._unchangedRegion.lineCount;\n\n\t\t\tthis._nodes.bottom.classList.toggle('canMoveTop', !isFullyRevealed);\n\t\t\tthis._nodes.bottom.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\n\t\t\tthis._nodes.top.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\n\t\t\tthis._nodes.top.classList.toggle('canMoveBottom', !isFullyRevealed);\n\t\t\tconst isDragged = this._unchangedRegion.isDragged.read(reader);\n\t\t\tconst domNode = this._editor.getDomNode();\n\t\t\tif (domNode) {\n\t\t\t\tdomNode.classList.toggle('draggingUnchangedRegion', !!isDragged);\n\t\t\t\tif (isDragged === 'top') {\n\t\t\t\t\tdomNode.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\n\t\t\t\t\tdomNode.classList.toggle('canMoveBottom', !isFullyRevealed);\n\t\t\t\t} else if (isDragged === 'bottom') {\n\t\t\t\t\tdomNode.classList.toggle('canMoveTop', !isFullyRevealed);\n\t\t\t\t\tdomNode.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\n\t\t\t\t} else {\n\t\t\t\t\tdomNode.classList.toggle('canMoveTop', false);\n\t\t\t\t\tdomNode.classList.toggle('canMoveBottom', false);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tconst editor = this._editor;\n\n\t\tthis._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\n\t\t\tif (e.button !== 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._nodes.top.classList.toggle('dragging', true);\n\t\t\tthis._nodes.root.classList.toggle('dragging', true);\n\t\t\te.preventDefault();\n\t\t\tconst startTop = e.clientY;\n\t\t\tlet didMove = false;\n\t\t\tconst cur = this._unchangedRegion.visibleLineCountTop.get();\n\t\t\tthis._unchangedRegion.isDragged.set('top', undefined);\n\n\t\t\tconst window = getWindow(this._nodes.top);\n\n\t\t\tconst mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n\t\t\t\tconst currentTop = e.clientY;\n\t\t\t\tconst delta = currentTop - startTop;\n\t\t\t\tdidMove = didMove || Math.abs(delta) > 2;\n\t\t\t\tconst lineDelta = Math.round(delta / editor.getOption(EditorOption.lineHeight));\n\t\t\t\tconst newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\n\t\t\t\tthis._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\n\t\t\t});\n\n\t\t\tconst mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n\t\t\t\tif (!didMove) {\n\t\t\t\t\tthis._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n\t\t\t\t}\n\t\t\t\tthis._nodes.top.classList.toggle('dragging', false);\n\t\t\t\tthis._nodes.root.classList.toggle('dragging', false);\n\t\t\t\tthis._unchangedRegion.isDragged.set(undefined, undefined);\n\t\t\t\tmouseMoveListener.dispose();\n\t\t\t\tmouseUpListener.dispose();\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\n\t\t\tif (e.button !== 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._nodes.bottom.classList.toggle('dragging', true);\n\t\t\tthis._nodes.root.classList.toggle('dragging', true);\n\t\t\te.preventDefault();\n\t\t\tconst startTop = e.clientY;\n\t\t\tlet didMove = false;\n\t\t\tconst cur = this._unchangedRegion.visibleLineCountBottom.get();\n\t\t\tthis._unchangedRegion.isDragged.set('bottom', undefined);\n\n\t\t\tconst window = getWindow(this._nodes.bottom);\n\n\t\t\tconst mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n\t\t\t\tconst currentTop = e.clientY;\n\t\t\t\tconst delta = currentTop - startTop;\n\t\t\t\tdidMove = didMove || Math.abs(delta) > 2;\n\t\t\t\tconst lineDelta = Math.round(delta / editor.getOption(EditorOption.lineHeight));\n\t\t\t\tconst newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\n\t\t\t\tconst top = this._unchangedRegionRange.endLineNumberExclusive > editor.getModel()!.getLineCount()\n\t\t\t\t\t? editor.getContentHeight()\n\t\t\t\t\t: editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n\t\t\t\tthis._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\n\t\t\t\tconst top2 = this._unchangedRegionRange.endLineNumberExclusive > editor.getModel()!.getLineCount()\n\t\t\t\t\t? editor.getContentHeight()\n\t\t\t\t\t: editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n\t\t\t\teditor.setScrollTop(editor.getScrollTop() + (top2 - top));\n\t\t\t});\n\n\t\t\tconst mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n\t\t\t\tthis._unchangedRegion.isDragged.set(undefined, undefined);\n\n\t\t\t\tif (!didMove) {\n\t\t\t\t\tconst top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n\n\t\t\t\t\tthis._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n\t\t\t\t\tconst top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n\t\t\t\t\teditor.setScrollTop(editor.getScrollTop() + (top2 - top));\n\t\t\t\t}\n\t\t\t\tthis._nodes.bottom.classList.toggle('dragging', false);\n\t\t\t\tthis._nodes.root.classList.toggle('dragging', false);\n\t\t\t\tmouseMoveListener.dispose();\n\t\t\t\tmouseUpListener.dispose();\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update labels */\n\n\t\t\tconst children: HTMLElement[] = [];\n\t\t\tif (!this._hide) {\n\t\t\t\tconst lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\n\t\t\t\tconst linesHiddenText = localize('hiddenLines', '{0} hidden lines', lineCount);\n\t\t\t\tconst span = $('span', { title: localize('diff.hiddenLines.expandAll', 'Double click to unfold') }, linesHiddenText);\n\t\t\t\tspan.addEventListener('dblclick', e => {\n\t\t\t\t\tif (e.button !== 0) { return; }\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis._unchangedRegion.showAll(undefined);\n\t\t\t\t});\n\t\t\t\tchildren.push(span);\n\n\t\t\t\tconst range = this._unchangedRegion.getHiddenModifiedRange(reader);\n\t\t\t\tconst items = this._modifiedOutlineSource.getBreadcrumbItems(range, reader);\n\n\t\t\t\tif (items.length > 0) {\n\t\t\t\t\tchildren.push($('span', undefined, '\\u00a0\\u00a0|\\u00a0\\u00a0'));\n\n\t\t\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\t\t\tconst item = items[i];\n\t\t\t\t\t\tconst icon = SymbolKinds.toIcon(item.kind);\n\t\t\t\t\t\tconst divItem = h('div.breadcrumb-item', {\n\t\t\t\t\t\t\tstyle: { display: 'flex', alignItems: 'center' },\n\t\t\t\t\t\t}, [\n\t\t\t\t\t\t\trenderIcon(icon),\n\t\t\t\t\t\t\t'\\u00a0',\n\t\t\t\t\t\t\titem.name,\n\t\t\t\t\t\t\t...(i === items.length - 1\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [renderIcon(Codicon.chevronRight)]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]).root;\n\t\t\t\t\t\tchildren.push(divItem);\n\t\t\t\t\t\tdivItem.onclick = () => {\n\t\t\t\t\t\t\tthis._revealModifiedHiddenLine(item.startLineNumber);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treset(this._nodes.others, ...children);\n\t\t}));\n\t}\n}\n\nexport interface IDiffEditorBreadcrumbsSource extends IDisposable {\n\tgetBreadcrumbItems(startRange: LineRange, reader: IReader): { name: string; kind: SymbolKind; startLineNumber: number }[];\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7125, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/revertButtonsFeature.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/vs/editor/browser/widget/diffEditor/features/revertButtonsFeature.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { addDisposableListener, h, EventType } from '../../../../../base/browser/dom.js';\nimport { renderIcon } from '../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, autorunWithStore, derived } from '../../../../../base/common/observable.js';\nimport { IGlyphMarginWidget, IGlyphMarginWidgetPosition } from '../../../editorBrowser.js';\nimport { DiffEditorEditors } from '../components/diffEditorEditors.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\nimport { DiffEditorViewModel } from '../diffEditorViewModel.js';\nimport { DiffEditorWidget } from '../diffEditorWidget.js';\nimport { LineRange, LineRangeSet } from '../../../../common/core/ranges/lineRange.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { LineRangeMapping, RangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { GlyphMarginLane } from '../../../../common/model.js';\nimport { localize } from '../../../../../nls.js';\n\nconst emptyArr: never[] = [];\n\nexport class RevertButtonsFeature extends Disposable {\n\tconstructor(\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tprivate readonly _widget: DiffEditorWidget\n\t) {\n\t\tsuper();\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tif (!this._options.shouldRenderOldRevertArrows.read(reader)) { return; }\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tconst diff = model?.diff.read(reader);\n\t\t\tif (!model || !diff) { return; }\n\t\t\tif (model.movedTextToCompare.read(reader)) { return; }\n\n\t\t\tconst glyphWidgetsModified: IGlyphMarginWidget[] = [];\n\n\t\t\tconst selectedDiffs = this._selectedDiffs.read(reader);\n\t\t\tconst selectedDiffsSet = new Set(selectedDiffs.map(d => d.mapping));\n\n\t\t\tif (selectedDiffs.length > 0) {\n\t\t\t\t// The button to revert the selection\n\t\t\t\tconst selections = this._editors.modifiedSelections.read(reader);\n\n\t\t\t\tconst btn = store.add(new RevertButton(\n\t\t\t\t\tselections[selections.length - 1].positionLineNumber,\n\t\t\t\t\tthis._widget,\n\t\t\t\t\tselectedDiffs.flatMap(d => d.rangeMappings),\n\t\t\t\t\ttrue\n\t\t\t\t));\n\t\t\t\tthis._editors.modified.addGlyphMarginWidget(btn);\n\t\t\t\tglyphWidgetsModified.push(btn);\n\t\t\t}\n\n\t\t\tfor (const m of diff.mappings) {\n\t\t\t\tif (selectedDiffsSet.has(m)) { continue; }\n\t\t\t\tif (!m.lineRangeMapping.modified.isEmpty && m.lineRangeMapping.innerChanges) {\n\t\t\t\t\tconst btn = store.add(new RevertButton(\n\t\t\t\t\t\tm.lineRangeMapping.modified.startLineNumber,\n\t\t\t\t\t\tthis._widget,\n\t\t\t\t\t\tm.lineRangeMapping,\n\t\t\t\t\t\tfalse\n\t\t\t\t\t));\n\t\t\t\t\tthis._editors.modified.addGlyphMarginWidget(btn);\n\t\t\t\t\tglyphWidgetsModified.push(btn);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstore.add(toDisposable(() => {\n\t\t\t\tfor (const w of glyphWidgetsModified) {\n\t\t\t\t\tthis._editors.modified.removeGlyphMarginWidget(w);\n\t\t\t\t}\n\t\t\t}));\n\t\t}));\n\t}\n\n\tprivate readonly _selectedDiffs = derived(this, (reader) => {\n\t\t/** @description selectedDiffs */\n\t\tconst model = this._diffModel.read(reader);\n\t\tconst diff = model?.diff.read(reader);\n\t\t// Return `emptyArr` because it is a constant. [] is always a new array and would trigger a change.\n\t\tif (!diff) { return emptyArr; }\n\n\t\tconst selections = this._editors.modifiedSelections.read(reader);\n\t\tif (selections.every(s => s.isEmpty())) { return emptyArr; }\n\n\t\tconst selectedLineNumbers = new LineRangeSet(selections.map(s => LineRange.fromRangeInclusive(s)));\n\n\t\tconst selectedMappings = diff.mappings.filter(m =>\n\t\t\tm.lineRangeMapping.innerChanges && selectedLineNumbers.intersects(m.lineRangeMapping.modified)\n\t\t);\n\t\tconst result = selectedMappings.map(mapping => ({\n\t\t\tmapping,\n\t\t\trangeMappings: mapping.lineRangeMapping.innerChanges!.filter(\n\t\t\t\tc => selections.some(s => Range.areIntersecting(c.modifiedRange, s))\n\t\t\t)\n\t\t}));\n\t\tif (result.length === 0 || result.every(r => r.rangeMappings.length === 0)) { return emptyArr; }\n\t\treturn result;\n\t});\n}\n\nexport class RevertButton extends Disposable implements IGlyphMarginWidget {\n\tpublic static counter = 0;\n\n\tprivate readonly _id: string;\n\n\tgetId(): string { return this._id; }\n\n\tprivate readonly _domNode;\n\n\tconstructor(\n\t\tprivate readonly _lineNumber: number,\n\t\tprivate readonly _widget: DiffEditorWidget,\n\t\tprivate readonly _diffs: RangeMapping[] | LineRangeMapping,\n\t\tprivate readonly _revertSelection: boolean,\n\t) {\n\t\tsuper();\n\t\tthis._id = `revertButton${RevertButton.counter++}`;\n\t\tthis._domNode = h('div.revertButton', {\n\t\t\ttitle: this._revertSelection\n\t\t\t\t? localize('revertSelectedChanges', 'Revert Selected Changes')\n\t\t\t\t: localize('revertChange', 'Revert Change')\n\t\t},\n\t\t\t[renderIcon(Codicon.arrowRight)]\n\t\t).root;\n\n\n\t\tthis._register(addDisposableListener(this._domNode, EventType.MOUSE_DOWN, e => {\n\t\t\t// don't prevent context menu from showing up\n\t\t\tif (e.button !== 2) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this._domNode, EventType.MOUSE_UP, e => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this._domNode, EventType.CLICK, (e) => {\n\t\t\tif (this._diffs instanceof LineRangeMapping) {\n\t\t\t\tthis._widget.revert(this._diffs);\n\t\t\t} else {\n\t\t\t\tthis._widget.revertRangeMappings(this._diffs);\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}));\n\t}\n\n\t/**\n\t * Get the dom node of the glyph widget.\n\t */\n\tgetDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\t/**\n\t * Get the placement of the glyph widget.\n\t */\n\tgetPosition(): IGlyphMarginWidgetPosition {\n\t\treturn {\n\t\t\tlane: GlyphMarginLane.Right,\n\t\t\trange: {\n\t\t\t\tstartColumn: 1,\n\t\t\t\tstartLineNumber: this._lineNumber,\n\t\t\t\tendColumn: 1,\n\t\t\t\tendLineNumber: this._lineNumber,\n\t\t\t},\n\t\t\tzIndex: 10001,\n\t\t};\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7289, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorWidget.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/diffEditor/diffEditorWidget.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/vs/editor/browser/widget/diffEditor/diffEditorWidget.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getWindow, h } from '../../../../base/browser/dom.js';\nimport { IBoundarySashes } from '../../../../base/browser/ui/sash/sash.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { BugIndicatingError, onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { readHotReloadableExport } from '../../../../base/common/hotReloadHelpers.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IObservable, ITransaction, autorun, autorunWithStore, derived, derivedDisposable, disposableObservableValue, observableFromEvent, observableValue, recomputeInitiallyAndOnChange, subtransaction, transaction } from '../../../../base/common/observable.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { bindContextKey } from '../../../../platform/observable/common/platformObservableUtils.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IDiffEditorOptions } from '../../../common/config/editorOptions.js';\nimport { IDimension } from '../../../common/core/2d/dimension.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CursorChangeReason, ICursorPositionChangedEvent } from '../../../common/cursorEvents.js';\nimport { ILineChange } from '../../../common/diff/legacyLinesDiffComputer.js';\nimport { LineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { EditorType, IDiffEditorModel, IDiffEditorViewModel, IDiffEditorViewState } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IIdentifiedSingleEditOperation } from '../../../common/model.js';\nimport { IEditorConstructionOptions } from '../../config/editorConfiguration.js';\nimport { ICodeEditor, IDiffEditor, IDiffEditorConstructionOptions } from '../../editorBrowser.js';\nimport { EditorExtensionsRegistry, IDiffEditorContributionDescription } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from '../codeEditor/codeEditorWidget.js';\nimport { AccessibleDiffViewer, AccessibleDiffViewerModelFromEditors } from './components/accessibleDiffViewer.js';\nimport { DiffEditorDecorations } from './components/diffEditorDecorations.js';\nimport { DiffEditorEditors } from './components/diffEditorEditors.js';\nimport { DiffEditorSash, SashLayout } from './components/diffEditorSash.js';\nimport { DiffEditorViewZones } from './components/diffEditorViewZones/diffEditorViewZones.js';\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { DiffEditorViewModel, DiffMapping, DiffState } from './diffEditorViewModel.js';\nimport { DiffEditorGutter } from './features/gutterFeature.js';\nimport { HideUnchangedRegionsFeature } from './features/hideUnchangedRegionsFeature.js';\nimport { MovedBlocksLinesFeature } from './features/movedBlocksLinesFeature.js';\nimport { OverviewRulerFeature } from './features/overviewRulerFeature.js';\nimport { RevertButtonsFeature } from './features/revertButtonsFeature.js';\nimport './style.css';\nimport { CSSStyle, ObservableElementSizeObserver, RefCounted, applyStyle, applyViewZones, translatePosition } from './utils.js';\n\nexport interface IDiffCodeEditorWidgetOptions {\n\toriginalEditor?: ICodeEditorWidgetOptions;\n\tmodifiedEditor?: ICodeEditorWidgetOptions;\n}\n\nexport class DiffEditorWidget extends DelegatingEditor implements IDiffEditor {\n\n\tprivate readonly elements;\n\tprivate readonly _diffModelSrc;\n\tprivate readonly _diffModel;\n\tpublic readonly onDidChangeModel;\n\n\tpublic get onDidContentSizeChange() { return this._editors.onDidContentSizeChange; }\n\n\tprivate readonly _contextKeyService;\n\tprivate readonly _instantiationService;\n\tprivate readonly _rootSizeObserver: ObservableElementSizeObserver;\n\n\n\tprivate readonly _sashLayout: SashLayout;\n\tprivate readonly _sash: IObservable<DiffEditorSash | undefined>;\n\tprivate readonly _boundarySashes;\n\n\tprivate _accessibleDiffViewerShouldBeVisible;\n\tprivate _accessibleDiffViewerVisible;\n\tprivate readonly _accessibleDiffViewer: IObservable<AccessibleDiffViewer>;\n\tprivate readonly _options: DiffEditorOptions;\n\tprivate readonly _editors: DiffEditorEditors;\n\n\tprivate readonly _overviewRulerPart: IObservable<OverviewRulerFeature | undefined>;\n\tprivate readonly _movedBlocksLinesPart;\n\n\tprivate readonly _gutter: IObservable<DiffEditorGutter | undefined>;\n\n\tconstructor(\n\t\tprivate readonly _domElement: HTMLElement,\n\t\toptions: Readonly<IDiffEditorConstructionOptions>,\n\t\tcodeEditorWidgetOptions: IDiffCodeEditorWidgetOptions,\n\t\t@IContextKeyService private readonly _parentContextKeyService: IContextKeyService,\n\t\t@IInstantiationService private readonly _parentInstantiationService: IInstantiationService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IAccessibilitySignalService private readonly _accessibilitySignalService: IAccessibilitySignalService,\n\t\t@IEditorProgressService private readonly _editorProgressService: IEditorProgressService,\n\t) {\n\t\tsuper();\n\t\tthis.elements = h('div.monaco-diff-editor.side-by-side', { style: { position: 'relative', height: '100%' } }, [\n\t\t\th('div.editor.original@original', { style: { position: 'absolute', height: '100%', } }),\n\t\t\th('div.editor.modified@modified', { style: { position: 'absolute', height: '100%', } }),\n\t\t\th('div.accessibleDiffViewer@accessibleDiffViewer', { style: { position: 'absolute', height: '100%' } }),\n\t\t]);\n\t\tthis._diffModelSrc = this._register(disposableObservableValue<RefCounted<DiffEditorViewModel> | undefined>(this, undefined));\n\t\tthis._diffModel = derived<DiffEditorViewModel | undefined>(this, reader => this._diffModelSrc.read(reader)?.object);\n\t\tthis.onDidChangeModel = Event.fromObservableLight(this._diffModel);\n\t\tthis._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._domElement));\n\t\tthis._instantiationService = this._register(this._parentInstantiationService.createChild(\n\t\t\tnew ServiceCollection([IContextKeyService, this._contextKeyService])\n\t\t));\n\t\tthis._boundarySashes = observableValue<IBoundarySashes | undefined>(this, undefined);\n\t\tthis._accessibleDiffViewerShouldBeVisible = observableValue(this, false);\n\t\tthis._accessibleDiffViewerVisible = derived(this, reader =>\n\t\t\tthis._options.onlyShowAccessibleDiffViewer.read(reader)\n\t\t\t\t? true\n\t\t\t\t: this._accessibleDiffViewerShouldBeVisible.read(reader)\n\t\t);\n\t\tthis._movedBlocksLinesPart = observableValue<MovedBlocksLinesFeature | undefined>(this, undefined);\n\t\tthis._layoutInfo = derived(this, reader => {\n\t\t\tconst fullWidth = this._rootSizeObserver.width.read(reader);\n\t\t\tconst fullHeight = this._rootSizeObserver.height.read(reader);\n\n\t\t\tif (this._rootSizeObserver.automaticLayout) {\n\t\t\t\tthis.elements.root.style.height = '100%';\n\t\t\t} else {\n\t\t\t\tthis.elements.root.style.height = fullHeight + 'px';\n\t\t\t}\n\n\t\t\tconst sash = this._sash.read(reader);\n\n\t\t\tconst gutter = this._gutter.read(reader);\n\t\t\tconst gutterWidth = gutter?.width.read(reader) ?? 0;\n\n\t\t\tconst overviewRulerPartWidth = this._overviewRulerPart.read(reader)?.width ?? 0;\n\n\t\t\tlet originalLeft: number, originalWidth: number, modifiedLeft: number, modifiedWidth: number, gutterLeft: number;\n\n\t\t\tconst sideBySide = !!sash;\n\t\t\tif (sideBySide) {\n\t\t\t\tconst sashLeft = sash.sashLeft.read(reader);\n\t\t\t\tconst movedBlocksLinesWidth = this._movedBlocksLinesPart.read(reader)?.width.read(reader) ?? 0;\n\n\t\t\t\toriginalLeft = 0;\n\t\t\t\toriginalWidth = sashLeft - gutterWidth - movedBlocksLinesWidth;\n\n\t\t\t\tgutterLeft = sashLeft - gutterWidth;\n\n\t\t\t\tmodifiedLeft = sashLeft;\n\t\t\t\tmodifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n\t\t\t} else {\n\t\t\t\tgutterLeft = 0;\n\n\t\t\t\tconst shouldHideOriginalLineNumbers = this._options.inlineViewHideOriginalLineNumbers.read(reader);\n\t\t\t\toriginalLeft = gutterWidth;\n\t\t\t\tif (shouldHideOriginalLineNumbers) {\n\t\t\t\t\toriginalWidth = 0;\n\t\t\t\t} else {\n\t\t\t\t\toriginalWidth = Math.max(5, this._editors.originalObs.layoutInfoDecorationsLeft.read(reader));\n\t\t\t\t}\n\n\t\t\t\tmodifiedLeft = gutterWidth + originalWidth;\n\t\t\t\tmodifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n\t\t\t}\n\n\t\t\tthis.elements.original.style.left = originalLeft + 'px';\n\t\t\tthis.elements.original.style.width = originalWidth + 'px';\n\t\t\tthis._editors.original.layout({ width: originalWidth, height: fullHeight }, true);\n\n\t\t\tgutter?.layout(gutterLeft);\n\n\t\t\tthis.elements.modified.style.left = modifiedLeft + 'px';\n\t\t\tthis.elements.modified.style.width = modifiedWidth + 'px';\n\t\t\tthis._editors.modified.layout({ width: modifiedWidth, height: fullHeight }, true);\n\n\t\t\treturn {\n\t\t\t\tmodifiedEditor: this._editors.modified.getLayoutInfo(),\n\t\t\t\toriginalEditor: this._editors.original.getLayoutInfo(),\n\t\t\t};\n\t\t});\n\t\tthis._diffValue = this._diffModel.map((m, r) => m?.diff.read(r));\n\t\tthis.onDidUpdateDiff = Event.fromObservableLight(this._diffValue);\n\t\tcodeEditorService.willCreateDiffEditor();\n\n\t\tthis._contextKeyService.createKey('isInDiffEditor', true);\n\n\t\tthis._domElement.appendChild(this.elements.root);\n\t\tthis._register(toDisposable(() => this.elements.root.remove()));\n\n\t\tthis._rootSizeObserver = this._register(new ObservableElementSizeObserver(this.elements.root, options.dimension));\n\t\tthis._rootSizeObserver.setAutomaticLayout(options.automaticLayout ?? false);\n\n\t\tthis._options = this._instantiationService.createInstance(DiffEditorOptions, options);\n\t\tthis._register(autorun(reader => {\n\t\t\tthis._options.setWidth(this._rootSizeObserver.width.read(reader));\n\t\t}));\n\n\t\tthis._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\n\t\tthis._register(bindContextKey(EditorContextKeys.isEmbeddedDiffEditor, this._contextKeyService,\n\t\t\treader => this._options.isInEmbeddedEditor.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.comparingMovedCode, this._contextKeyService,\n\t\t\treader => !!this._diffModel.read(reader)?.movedTextToCompare.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, this._contextKeyService,\n\t\t\treader => this._options.couldShowInlineViewBecauseOfSize.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorInlineMode, this._contextKeyService,\n\t\t\treader => !this._options.renderSideBySide.read(reader)\n\t\t));\n\n\t\tthis._register(bindContextKey(EditorContextKeys.hasChanges, this._contextKeyService,\n\t\t\treader => (this._diffModel.read(reader)?.diff.read(reader)?.mappings.length ?? 0) > 0\n\t\t));\n\n\t\tthis._editors = this._register(this._instantiationService.createInstance(\n\t\t\tDiffEditorEditors,\n\t\t\tthis.elements.original,\n\t\t\tthis.elements.modified,\n\t\t\tthis._options,\n\t\t\tcodeEditorWidgetOptions,\n\t\t\t(i, c, o, o2) => this._createInnerEditor(i, c, o, o2),\n\t\t));\n\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorOriginalWritable, this._contextKeyService,\n\t\t\treader => this._options.originalEditable.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorModifiedWritable, this._contextKeyService,\n\t\t\treader => !this._options.readOnly.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorOriginalUri, this._contextKeyService,\n\t\t\treader => this._diffModel.read(reader)?.model.original.uri.toString() ?? ''\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorModifiedUri, this._contextKeyService,\n\t\t\treader => this._diffModel.read(reader)?.model.modified.uri.toString() ?? ''\n\t\t));\n\n\t\tthis._overviewRulerPart = derivedDisposable(this, reader =>\n\t\t\t!this._options.renderOverviewRuler.read(reader)\n\t\t\t\t? undefined\n\t\t\t\t: this._instantiationService.createInstance(\n\t\t\t\t\treadHotReloadableExport(OverviewRulerFeature, reader),\n\t\t\t\t\tthis._editors,\n\t\t\t\t\tthis.elements.root,\n\t\t\t\t\tthis._diffModel,\n\t\t\t\t\tthis._rootSizeObserver.width,\n\t\t\t\t\tthis._rootSizeObserver.height,\n\t\t\t\t\tthis._layoutInfo.map(i => i.modifiedEditor),\n\t\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst dimensions = {\n\t\t\theight: this._rootSizeObserver.height,\n\t\t\twidth: this._rootSizeObserver.width.map((w, reader) => w - (this._overviewRulerPart.read(reader)?.width ?? 0)),\n\t\t};\n\n\t\tthis._sashLayout = new SashLayout(this._options, dimensions);\n\n\t\tthis._sash = derivedDisposable(this, reader => {\n\t\t\tconst showSash = this._options.renderSideBySide.read(reader);\n\t\t\tthis.elements.root.classList.toggle('side-by-side', showSash);\n\t\t\treturn !showSash ? undefined : new DiffEditorSash(\n\t\t\t\tthis.elements.root,\n\t\t\t\tdimensions,\n\t\t\t\tthis._options.enableSplitViewResizing,\n\t\t\t\tthis._boundarySashes,\n\t\t\t\tthis._sashLayout.sashLeft,\n\t\t\t\t() => this._sashLayout.resetSash(),\n\t\t\t);\n\t\t}).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst unchangedRangesFeature = derivedDisposable(this, reader => /** @description UnchangedRangesFeature */\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\treadHotReloadableExport(HideUnchangedRegionsFeature, reader),\n\t\t\t\tthis._editors, this._diffModel, this._options\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tderivedDisposable(this, reader => /** @description DiffEditorDecorations */\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\treadHotReloadableExport(DiffEditorDecorations, reader),\n\t\t\t\tthis._editors, this._diffModel, this._options, this,\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst origViewZoneIdsToIgnore = new Set<string>();\n\t\tconst modViewZoneIdsToIgnore = new Set<string>();\n\t\tlet isUpdatingViewZones = false;\n\t\tconst viewZoneManager = derivedDisposable(this, reader => /** @description ViewZoneManager */\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\treadHotReloadableExport(DiffEditorViewZones, reader),\n\t\t\t\tgetWindow(this._domElement),\n\t\t\t\tthis._editors,\n\t\t\t\tthis._diffModel,\n\t\t\t\tthis._options,\n\t\t\t\tthis,\n\t\t\t\t() => isUpdatingViewZones || unchangedRangesFeature.get().isUpdatingHiddenAreas,\n\t\t\t\torigViewZoneIdsToIgnore,\n\t\t\t\tmodViewZoneIdsToIgnore\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst originalViewZones = derived(this, (reader) => { /** @description originalViewZones */\n\t\t\tconst orig = viewZoneManager.read(reader).viewZones.read(reader).orig;\n\t\t\tconst orig2 = unchangedRangesFeature.read(reader).viewZones.read(reader).origViewZones;\n\t\t\treturn orig.concat(orig2);\n\t\t});\n\t\tconst modifiedViewZones = derived(this, (reader) => { /** @description modifiedViewZones */\n\t\t\tconst mod = viewZoneManager.read(reader).viewZones.read(reader).mod;\n\t\t\tconst mod2 = unchangedRangesFeature.read(reader).viewZones.read(reader).modViewZones;\n\t\t\treturn mod.concat(mod2);\n\t\t});\n\t\tthis._register(applyViewZones(this._editors.original, originalViewZones, isUpdatingOrigViewZones => {\n\t\t\tisUpdatingViewZones = isUpdatingOrigViewZones;\n\t\t}, origViewZoneIdsToIgnore));\n\t\tlet scrollState: StableEditorScrollState | undefined;\n\t\tthis._register(applyViewZones(this._editors.modified, modifiedViewZones, isUpdatingModViewZones => {\n\t\t\tisUpdatingViewZones = isUpdatingModViewZones;\n\t\t\tif (isUpdatingViewZones) {\n\t\t\t\tscrollState = StableEditorScrollState.capture(this._editors.modified);\n\t\t\t} else {\n\t\t\t\tscrollState?.restore(this._editors.modified);\n\t\t\t\tscrollState = undefined;\n\t\t\t}\n\t\t}, modViewZoneIdsToIgnore));\n\n\t\tthis._accessibleDiffViewer = derivedDisposable(this, reader =>\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\treadHotReloadableExport(AccessibleDiffViewer, reader),\n\t\t\t\tthis.elements.accessibleDiffViewer,\n\t\t\t\tthis._accessibleDiffViewerVisible,\n\t\t\t\t(visible, tx) => this._accessibleDiffViewerShouldBeVisible.set(visible, tx),\n\t\t\t\tthis._options.onlyShowAccessibleDiffViewer.map(v => !v),\n\t\t\t\tthis._rootSizeObserver.width,\n\t\t\t\tthis._rootSizeObserver.height,\n\t\t\t\tthis._diffModel.map((m, r) => m?.diff.read(r)?.mappings.map(m => m.lineRangeMapping)),\n\t\t\t\tnew AccessibleDiffViewerModelFromEditors(this._editors),\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst visibility = this._accessibleDiffViewerVisible.map<CSSStyle['visibility']>(v => v ? 'hidden' : 'visible');\n\t\tthis._register(applyStyle(this.elements.modified, { visibility }));\n\t\tthis._register(applyStyle(this.elements.original, { visibility }));\n\n\t\tthis._createDiffEditorContributions();\n\n\t\tcodeEditorService.addDiffEditor(this);\n\n\t\tthis._gutter = derivedDisposable(this, reader => {\n\t\t\treturn this._options.shouldRenderGutterMenu.read(reader)\n\t\t\t\t? this._instantiationService.createInstance(\n\t\t\t\t\treadHotReloadableExport(DiffEditorGutter, reader),\n\t\t\t\t\tthis.elements.root,\n\t\t\t\t\tthis._diffModel,\n\t\t\t\t\tthis._editors,\n\t\t\t\t\tthis._options,\n\t\t\t\t\tthis._sashLayout,\n\t\t\t\t\tthis._boundarySashes,\n\t\t\t\t)\n\t\t\t\t: undefined;\n\t\t});\n\n\t\tthis._register(recomputeInitiallyAndOnChange(this._layoutInfo));\n\n\t\tderivedDisposable(this, reader => /** @description MovedBlocksLinesPart */\n\t\t\tnew (readHotReloadableExport(MovedBlocksLinesFeature, reader))(\n\t\t\t\tthis.elements.root,\n\t\t\t\tthis._diffModel,\n\t\t\t\tthis._layoutInfo.map(i => i.originalEditor),\n\t\t\t\tthis._layoutInfo.map(i => i.modifiedEditor),\n\t\t\t\tthis._editors,\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store, value => {\n\t\t\t// This is to break the layout info <-> moved blocks lines part dependency cycle.\n\t\t\tthis._movedBlocksLinesPart.set(value, undefined);\n\t\t});\n\n\t\tthis._register(Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition, e => this._handleCursorPositionChange(e, true)));\n\t\tthis._register(Event.runAndSubscribe(this._editors.original.onDidChangeCursorPosition, e => this._handleCursorPositionChange(e, false)));\n\n\t\tconst isInitializingDiff = this._diffModel.map(this, (m, reader) => {\n\t\t\t/** @isInitializingDiff isDiffUpToDate */\n\t\t\tif (!m) { return undefined; }\n\t\t\treturn m.diff.read(reader) === undefined && !m.isDiffUpToDate.read(reader);\n\t\t});\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\t/** @description DiffEditorWidgetHelper.ShowProgress */\n\t\t\tif (isInitializingDiff.read(reader) === true) {\n\t\t\t\tconst r = this._editorProgressService.show(true, 1000);\n\t\t\t\tstore.add(toDisposable(() => r.done()));\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tstore.add(new (readHotReloadableExport(RevertButtonsFeature, reader))(this._editors, this._diffModel, this._options, this));\n\t\t}));\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tif (!model) { return; }\n\t\t\tfor (const m of [model.model.original, model.model.modified]) {\n\t\t\t\tstore.add(m.onWillDispose(e => {\n\t\t\t\t\tonUnexpectedError(new BugIndicatingError('TextModel got disposed before DiffEditorWidget model got reset'));\n\t\t\t\t\tthis.setModel(null);\n\t\t\t\t}));\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tthis._options.setModel(this._diffModel.read(reader));\n\t\t}));\n\t}\n\n\tprotected _createInnerEditor(instantiationService: IInstantiationService, container: HTMLElement, options: Readonly<IEditorConstructionOptions>, editorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n\t\treturn editor;\n\t}\n\n\tprivate readonly _layoutInfo;\n\n\tprivate _createDiffEditorContributions() {\n\t\tconst contributions: IDiffEditorContributionDescription[] = EditorExtensionsRegistry.getDiffEditorContributions();\n\t\tfor (const desc of contributions) {\n\t\t\ttry {\n\t\t\t\tthis._register(this._instantiationService.createInstance(desc.ctor, this));\n\t\t\t} catch (err) {\n\t\t\t\tonUnexpectedError(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override get _targetEditor(): CodeEditorWidget { return this._editors.modified; }\n\n\toverride getEditorType(): string { return EditorType.IDiffEditor; }\n\n\toverride layout(dimension?: IDimension | undefined): void {\n\t\tthis._rootSizeObserver.observe(dimension);\n\t}\n\n\toverride hasTextFocus(): boolean { return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus(); }\n\n\tpublic override saveViewState(): IDiffEditorViewState {\n\t\tconst originalViewState = this._editors.original.saveViewState();\n\t\tconst modifiedViewState = this._editors.modified.saveViewState();\n\t\treturn {\n\t\t\toriginal: originalViewState,\n\t\t\tmodified: modifiedViewState,\n\t\t\tmodelState: this._diffModel.get()?.serializeState(),\n\t\t};\n\t}\n\n\tpublic override restoreViewState(s: IDiffEditorViewState): void {\n\t\tif (s && s.original && s.modified) {\n\t\t\tconst diffEditorState = s as IDiffEditorViewState;\n\t\t\tthis._editors.original.restoreViewState(diffEditorState.original);\n\t\t\tthis._editors.modified.restoreViewState(diffEditorState.modified);\n\t\t\tif (diffEditorState.modelState) {\n\t\t\t\tthis._diffModel.get()?.restoreSerializedState(diffEditorState.modelState as any);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleInitialized(): void {\n\t\tthis._editors.original.handleInitialized();\n\t\tthis._editors.modified.handleInitialized();\n\t}\n\n\tpublic createViewModel(model: IDiffEditorModel): IDiffEditorViewModel {\n\t\treturn this._instantiationService.createInstance(DiffEditorViewModel, model, this._options);\n\t}\n\n\toverride getModel(): IDiffEditorModel | null { return this._diffModel.get()?.model ?? null; }\n\n\toverride setModel(model: IDiffEditorModel | null | IDiffEditorViewModel): void {\n\t\tconst vm = !model ? null\n\t\t\t: ('model' in model) ? RefCounted.create(model).createNewRef(this)\n\t\t\t\t: RefCounted.create(this.createViewModel(model), this);\n\t\tthis.setDiffModel(vm);\n\t}\n\n\tsetDiffModel(viewModel: RefCounted<IDiffEditorViewModel> | null, tx?: ITransaction): void {\n\t\tconst currentModel = this._diffModel.get();\n\n\t\tif (!viewModel && currentModel) {\n\t\t\t// Transitioning from a model to no-model\n\t\t\tthis._accessibleDiffViewer.get().close();\n\t\t}\n\n\t\tif (this._diffModel.get() !== viewModel?.object) {\n\t\t\tsubtransaction(tx, tx => {\n\t\t\t\tconst vm = viewModel?.object;\n\t\t\t\t/** @description DiffEditorWidget.setModel */\n\t\t\t\tobservableFromEvent.batchEventsGlobally(tx, () => {\n\t\t\t\t\tthis._editors.original.setModel(vm ? vm.model.original : null);\n\t\t\t\t\tthis._editors.modified.setModel(vm ? vm.model.modified : null);\n\t\t\t\t});\n\t\t\t\tconst prevValueRef = this._diffModelSrc.get()?.createNewRef(this);\n\t\t\t\tthis._diffModelSrc.set(viewModel?.createNewRef(this) as RefCounted<DiffEditorViewModel> | undefined, tx);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// async, so that this runs after the transaction finished.\n\t\t\t\t\t// TODO: use the transaction to schedule disposal\n\t\t\t\t\tprevValueRef?.dispose();\n\t\t\t\t}, 0);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @param changedOptions Only has values for top-level options that have actually changed.\n\t */\n\toverride updateOptions(changedOptions: IDiffEditorOptions): void {\n\t\tthis._options.updateOptions(changedOptions);\n\t}\n\tgetContainerDomNode(): HTMLElement { return this._domElement; }\n\tgetOriginalEditor(): ICodeEditor { return this._editors.original; }\n\tgetModifiedEditor(): ICodeEditor { return this._editors.modified; }\n\n\tprivate readonly _diffValue;\n\treadonly onDidUpdateDiff: Event<void>;\n\n\t/**\n\t * @deprecated Use `this.getDiffComputationResult().changes2` instead.\n\t */\n\tgetLineChanges(): ILineChange[] | null {\n\t\tconst diffState = this._diffModel.get()?.diff.get();\n\t\tif (!diffState) { return null; }\n\t\treturn toLineChanges(diffState);\n\t}\n\n\trevert(diff: LineRangeMapping): void {\n\t\tconst model = this._diffModel.get();\n\t\tif (!model || !model.isDiffUpToDate.get()) { return; }\n\n\t\tthis._editors.modified.executeEdits('diffEditor', [\n\t\t\t{\n\t\t\t\trange: diff.modified.toExclusiveRange(),\n\t\t\t\ttext: model.model.original.getValueInRange(diff.original.toExclusiveRange())\n\t\t\t}\n\t\t]);\n\t}\n\n\trevertRangeMappings(diffs: RangeMapping[]): void {\n\t\tconst model = this._diffModel.get();\n\t\tif (!model || !model.isDiffUpToDate.get()) { return; }\n\n\t\tconst changes: IIdentifiedSingleEditOperation[] = diffs.map<IIdentifiedSingleEditOperation>(c => ({\n\t\t\trange: c.modifiedRange,\n\t\t\ttext: model.model.original.getValueInRange(c.originalRange)\n\t\t}));\n\n\t\tthis._editors.modified.executeEdits('diffEditor', changes);\n\t}\n\n\tprivate _goTo(diff: DiffMapping): void {\n\t\tthis._editors.modified.setPosition(new Position(diff.lineRangeMapping.modified.startLineNumber, 1));\n\t\tthis._editors.modified.revealRangeInCenter(diff.lineRangeMapping.modified.toExclusiveRange());\n\t}\n\n\tgoToDiff(target: 'previous' | 'next'): void {\n\t\tconst diffs = this._diffModel.get()?.diff.get()?.mappings;\n\t\tif (!diffs || diffs.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst curLineNumber = this._editors.modified.getPosition()!.lineNumber;\n\t\tlet diff: DiffMapping | undefined;\n\t\tif (target === 'next') {\n\t\t\tconst modifiedLineCount = this._editors.modified.getModel()!.getLineCount();\n\t\t\tif (modifiedLineCount === curLineNumber) {\n\t\t\t\tdiff = diffs[0];\n\t\t\t} else {\n\t\t\t\tdiff = diffs.find(d => d.lineRangeMapping.modified.startLineNumber > curLineNumber) ?? diffs[0];\n\t\t\t}\n\t\t} else {\n\t\t\tdiff = findLast(diffs, d => d.lineRangeMapping.modified.startLineNumber < curLineNumber) ?? diffs[diffs.length - 1];\n\t\t}\n\t\tthis._goTo(diff);\n\n\t\tif (diff.lineRangeMapping.modified.isEmpty) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'diffEditor.goToDiff' });\n\t\t} else if (diff.lineRangeMapping.original.isEmpty) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'diffEditor.goToDiff' });\n\t\t} else if (diff) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, { source: 'diffEditor.goToDiff' });\n\t\t}\n\t}\n\n\trevealFirstDiff(): void {\n\t\tconst diffModel = this._diffModel.get();\n\t\tif (!diffModel) {\n\t\t\treturn;\n\t\t}\n\t\t// wait for the diff computation to finish\n\t\tthis.waitForDiff().then(() => {\n\t\t\tconst diffs = diffModel.diff.get()?.mappings;\n\t\t\tif (!diffs || diffs.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._goTo(diffs[0]);\n\t\t});\n\t}\n\n\taccessibleDiffViewerNext(): void { this._accessibleDiffViewer.get().next(); }\n\n\taccessibleDiffViewerPrev(): void { this._accessibleDiffViewer.get().prev(); }\n\n\tasync waitForDiff(): Promise<void> {\n\t\tconst diffModel = this._diffModel.get();\n\t\tif (!diffModel) { return; }\n\t\tawait diffModel.waitForDiff();\n\t}\n\n\tmapToOtherSide(): { destination: CodeEditorWidget; destinationSelection: Range | undefined } {\n\t\tconst isModifiedFocus = this._editors.modified.hasWidgetFocus();\n\t\tconst source = isModifiedFocus ? this._editors.modified : this._editors.original;\n\t\tconst destination = isModifiedFocus ? this._editors.original : this._editors.modified;\n\n\t\tlet destinationSelection: Range | undefined;\n\n\t\tconst sourceSelection = source.getSelection();\n\t\tif (sourceSelection) {\n\t\t\tconst mappings = this._diffModel.get()?.diff.get()?.mappings.map(m => isModifiedFocus ? m.lineRangeMapping.flip() : m.lineRangeMapping);\n\t\t\tif (mappings) {\n\t\t\t\tconst newRange1 = translatePosition(sourceSelection.getStartPosition(), mappings);\n\t\t\t\tconst newRange2 = translatePosition(sourceSelection.getEndPosition(), mappings);\n\t\t\t\tdestinationSelection = Range.plusRange(newRange1, newRange2);\n\t\t\t}\n\t\t}\n\t\treturn { destination, destinationSelection };\n\t}\n\n\tswitchSide(): void {\n\t\tconst { destination, destinationSelection } = this.mapToOtherSide();\n\t\tdestination.focus();\n\t\tif (destinationSelection) {\n\t\t\tdestination.setSelection(destinationSelection);\n\t\t}\n\t}\n\n\texitCompareMove(): void {\n\t\tconst model = this._diffModel.get();\n\t\tif (!model) { return; }\n\t\tmodel.movedTextToCompare.set(undefined, undefined);\n\t}\n\n\tcollapseAllUnchangedRegions(): void {\n\t\tconst unchangedRegions = this._diffModel.get()?.unchangedRegions.get();\n\t\tif (!unchangedRegions) { return; }\n\t\ttransaction(tx => {\n\t\t\tfor (const region of unchangedRegions) {\n\t\t\t\tregion.collapseAll(tx);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowAllUnchangedRegions(): void {\n\t\tconst unchangedRegions = this._diffModel.get()?.unchangedRegions.get();\n\t\tif (!unchangedRegions) { return; }\n\t\ttransaction(tx => {\n\t\t\tfor (const region of unchangedRegions) {\n\t\t\t\tregion.showAll(tx);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _handleCursorPositionChange(e: ICursorPositionChangedEvent | undefined, isModifiedEditor: boolean): void {\n\t\tif (e?.reason === CursorChangeReason.Explicit) {\n\t\t\tconst diff = this._diffModel.get()?.diff.get()?.mappings.find(m => isModifiedEditor ? m.lineRangeMapping.modified.contains(e.position.lineNumber) : m.lineRangeMapping.original.contains(e.position.lineNumber));\n\t\t\tif (diff?.lineRangeMapping.modified.isEmpty) {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'diffEditor.cursorPositionChanged' });\n\t\t\t} else if (diff?.lineRangeMapping.original.isEmpty) {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'diffEditor.cursorPositionChanged' });\n\t\t\t} else if (diff) {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, { source: 'diffEditor.cursorPositionChanged' });\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function toLineChanges(state: DiffState): ILineChange[] {\n\treturn state.mappings.map(x => {\n\t\tconst m = x.lineRangeMapping;\n\t\tlet originalStartLineNumber: number;\n\t\tlet originalEndLineNumber: number;\n\t\tlet modifiedStartLineNumber: number;\n\t\tlet modifiedEndLineNumber: number;\n\t\tlet innerChanges = m.innerChanges;\n\n\t\tif (m.original.isEmpty) {\n\t\t\t// Insertion\n\t\t\toriginalStartLineNumber = m.original.startLineNumber - 1;\n\t\t\toriginalEndLineNumber = 0;\n\t\t\tinnerChanges = undefined;\n\t\t} else {\n\t\t\toriginalStartLineNumber = m.original.startLineNumber;\n\t\t\toriginalEndLineNumber = m.original.endLineNumberExclusive - 1;\n\t\t}\n\n\t\tif (m.modified.isEmpty) {\n\t\t\t// Deletion\n\t\t\tmodifiedStartLineNumber = m.modified.startLineNumber - 1;\n\t\t\tmodifiedEndLineNumber = 0;\n\t\t\tinnerChanges = undefined;\n\t\t} else {\n\t\t\tmodifiedStartLineNumber = m.modified.startLineNumber;\n\t\t\tmodifiedEndLineNumber = m.modified.endLineNumberExclusive - 1;\n\t\t}\n\n\t\treturn {\n\t\t\toriginalStartLineNumber,\n\t\t\toriginalEndLineNumber,\n\t\t\tmodifiedStartLineNumber,\n\t\t\tmodifiedEndLineNumber,\n\t\t\tcharChanges: innerChanges?.map(m => ({\n\t\t\t\toriginalStartLineNumber: m.originalRange.startLineNumber,\n\t\t\t\toriginalStartColumn: m.originalRange.startColumn,\n\t\t\t\toriginalEndLineNumber: m.originalRange.endLineNumber,\n\t\t\t\toriginalEndColumn: m.originalRange.endColumn,\n\t\t\t\tmodifiedStartLineNumber: m.modifiedRange.startLineNumber,\n\t\t\t\tmodifiedStartColumn: m.modifiedRange.startColumn,\n\t\t\t\tmodifiedEndLineNumber: m.modifiedRange.endLineNumber,\n\t\t\t\tmodifiedEndColumn: m.modifiedRange.endColumn,\n\t\t\t}))\n\t\t};\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getWindow, h } from '../../../../base/browser/dom.js';\nimport { IBoundarySashes } from '../../../../base/browser/ui/sash/sash.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { BugIndicatingError, onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { readHotReloadableExport } from '../../../../base/common/hotReloadHelpers.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IObservable, ITransaction, autorun, autorunWithStore, derived, derivedDisposable, disposableObservableValue, observableFromEvent, observableValue, recomputeInitiallyAndOnChange, subtransaction, transaction } from '../../../../base/common/observable.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { bindContextKey } from '../../../../platform/observable/common/platformObservableUtils.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IDiffEditorOptions } from '../../../common/config/editorOptions.js';\nimport { IDimension } from '../../../common/core/2d/dimension.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CursorChangeReason, ICursorPositionChangedEvent } from '../../../common/cursorEvents.js';\nimport { ILineChange } from '../../../common/diff/legacyLinesDiffComputer.js';\nimport { LineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { EditorType, IDiffEditorModel, IDiffEditorViewModel, IDiffEditorViewState } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IIdentifiedSingleEditOperation } from '../../../common/model.js';\nimport { IEditorConstructionOptions } from '../../config/editorConfiguration.js';\nimport { ICodeEditor, IDiffEditor, IDiffEditorConstructionOptions } from '../../editorBrowser.js';\nimport { EditorExtensionsRegistry, IDiffEditorContributionDescription } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from '../codeEditor/codeEditorWidget.js';\nimport { AccessibleDiffViewer, AccessibleDiffViewerModelFromEditors } from './components/accessibleDiffViewer.js';\nimport { DiffEditorDecorations } from './components/diffEditorDecorations.js';\nimport { DiffEditorEditors } from './components/diffEditorEditors.js';\nimport { DiffEditorSash, SashLayout } from './components/diffEditorSash.js';\nimport { DiffEditorViewZones } from './components/diffEditorViewZones/diffEditorViewZones.js';\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { DiffEditorViewModel, DiffMapping, DiffState } from './diffEditorViewModel.js';\nimport { DiffEditorGutter } from './features/gutterFeature.js';\nimport { HideUnchangedRegionsFeature } from './features/hideUnchangedRegionsFeature.js';\nimport { MovedBlocksLinesFeature } from './features/movedBlocksLinesFeature.js';\nimport { OverviewRulerFeature } from './features/overviewRulerFeature.js';\nimport { RevertButtonsFeature } from './features/revertButtonsFeature.js';\nimport './style.css';\nimport { CSSStyle, ObservableElementSizeObserver, RefCounted, applyStyle, applyViewZones, translatePosition } from './utils.js';\n\nexport interface IDiffCodeEditorWidgetOptions {\n\toriginalEditor?: ICodeEditorWidgetOptions;\n\tmodifiedEditor?: ICodeEditorWidgetOptions;\n}\n\nexport class DiffEditorWidget extends DelegatingEditor implements IDiffEditor {\n\n\tprivate readonly elements;\n\tprivate readonly _diffModelSrc;\n\tprivate readonly _diffModel;\n\tpublic readonly onDidChangeModel;\n\n\tpublic get onDidContentSizeChange() { return this._editors.onDidContentSizeChange; }\n\n\tprivate readonly _contextKeyService;\n\tprivate readonly _instantiationService;\n\tprivate readonly _rootSizeObserver: ObservableElementSizeObserver;\n\n\n\tprivate readonly _sashLayout: SashLayout;\n\tprivate readonly _sash: IObservable<DiffEditorSash | undefined>;\n\tprivate readonly _boundarySashes;\n\n\tprivate _accessibleDiffViewerShouldBeVisible;\n\tprivate _accessibleDiffViewerVisible;\n\tprivate readonly _accessibleDiffViewer: IObservable<AccessibleDiffViewer>;\n\tprivate readonly _options: DiffEditorOptions;\n\tprivate readonly _editors: DiffEditorEditors;\n\n\tprivate readonly _overviewRulerPart: IObservable<OverviewRulerFeature | undefined>;\n\tprivate readonly _movedBlocksLinesPart;\n\n\tprivate readonly _gutter: IObservable<DiffEditorGutter | undefined>;\n\n\tconstructor(\n\t\tprivate readonly _domElement: HTMLElement,\n\t\toptions: Readonly<IDiffEditorConstructionOptions>,\n\t\tcodeEditorWidgetOptions: IDiffCodeEditorWidgetOptions,\n\t\t@IContextKeyService private readonly _parentContextKeyService: IContextKeyService,\n\t\t@IInstantiationService private readonly _parentInstantiationService: IInstantiationService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IAccessibilitySignalService private readonly _accessibilitySignalService: IAccessibilitySignalService,\n\t\t@IEditorProgressService private readonly _editorProgressService: IEditorProgressService,\n\t) {\n\t\tsuper();\n\t\tthis.elements = h('div.monaco-diff-editor.side-by-side', { style: { position: 'relative', height: '100%' } }, [\n\t\t\th('div.editor.original@original', { style: { position: 'absolute', height: '100%', } }),\n\t\t\th('div.editor.modified@modified', { style: { position: 'absolute', height: '100%', } }),\n\t\t\th('div.accessibleDiffViewer@accessibleDiffViewer', { style: { position: 'absolute', height: '100%' } }),\n\t\t]);\n\t\tthis._diffModelSrc = this._register(disposableObservableValue<RefCounted<DiffEditorViewModel> | undefined>(this, undefined));\n\t\tthis._diffModel = derived<DiffEditorViewModel | undefined>(this, reader => this._diffModelSrc.read(reader)?.object);\n\t\tthis.onDidChangeModel = Event.fromObservableLight(this._diffModel);\n\t\tthis._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._domElement));\n\t\tthis._instantiationService = this._register(this._parentInstantiationService.createChild(\n\t\t\tnew ServiceCollection([IContextKeyService, this._contextKeyService])\n\t\t));\n\t\tthis._boundarySashes = observableValue<IBoundarySashes | undefined>(this, undefined);\n\t\tthis._accessibleDiffViewerShouldBeVisible = observableValue(this, false);\n\t\tthis._accessibleDiffViewerVisible = derived(this, reader =>\n\t\t\tthis._options.onlyShowAccessibleDiffViewer.read(reader)\n\t\t\t\t? true\n\t\t\t\t: this._accessibleDiffViewerShouldBeVisible.read(reader)\n\t\t);\n\t\tthis._movedBlocksLinesPart = observableValue<MovedBlocksLinesFeature | undefined>(this, undefined);\n\t\tthis._layoutInfo = derived(this, reader => {\n\t\t\tconst fullWidth = this._rootSizeObserver.width.read(reader);\n\t\t\tconst fullHeight = this._rootSizeObserver.height.read(reader);\n\n\t\t\tif (this._rootSizeObserver.automaticLayout) {\n\t\t\t\tthis.elements.root.style.height = '100%';\n\t\t\t} else {\n\t\t\t\tthis.elements.root.style.height = fullHeight + 'px';\n\t\t\t}\n\n\t\t\tconst sash = this._sash.read(reader);\n\n\t\t\tconst gutter = this._gutter.read(reader);\n\t\t\tconst gutterWidth = gutter?.width.read(reader) ?? 0;\n\n\t\t\tconst overviewRulerPartWidth = this._overviewRulerPart.read(reader)?.width ?? 0;\n\n\t\t\tlet originalLeft: number, originalWidth: number, modifiedLeft: number, modifiedWidth: number, gutterLeft: number;\n\n\t\t\tconst sideBySide = !!sash;\n\t\t\tif (sideBySide) {\n\t\t\t\tconst sashLeft = sash.sashLeft.read(reader);\n\t\t\t\tconst movedBlocksLinesWidth = this._movedBlocksLinesPart.read(reader)?.width.read(reader) ?? 0;\n\n\t\t\t\toriginalLeft = 0;\n\t\t\t\toriginalWidth = sashLeft - gutterWidth - movedBlocksLinesWidth;\n\n\t\t\t\tgutterLeft = sashLeft - gutterWidth;\n\n\t\t\t\tmodifiedLeft = sashLeft;\n\t\t\t\tmodifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n\t\t\t} else {\n\t\t\t\tgutterLeft = 0;\n\n\t\t\t\tconst shouldHideOriginalLineNumbers = this._options.inlineViewHideOriginalLineNumbers.read(reader);\n\t\t\t\toriginalLeft = gutterWidth;\n\t\t\t\tif (shouldHideOriginalLineNumbers) {\n\t\t\t\t\toriginalWidth = 0;\n\t\t\t\t} else {\n\t\t\t\t\toriginalWidth = Math.max(5, this._editors.originalObs.layoutInfoDecorationsLeft.read(reader));\n\t\t\t\t}\n\n\t\t\t\tmodifiedLeft = gutterWidth + originalWidth;\n\t\t\t\tmodifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n\t\t\t}\n\n\t\t\tthis.elements.original.style.left = originalLeft + 'px';\n\t\t\tthis.elements.original.style.width = originalWidth + 'px';\n\t\t\tthis._editors.original.layout({ width: originalWidth, height: fullHeight }, true);\n\n\t\t\tgutter?.layout(gutterLeft);\n\n\t\t\tthis.elements.modified.style.left = modifiedLeft + 'px';\n\t\t\tthis.elements.modified.style.width = modifiedWidth + 'px';\n\t\t\tthis._editors.modified.layout({ width: modifiedWidth, height: fullHeight }, true);\n\n\t\t\treturn {\n\t\t\t\tmodifiedEditor: this._editors.modified.getLayoutInfo(),\n\t\t\t\toriginalEditor: this._editors.original.getLayoutInfo(),\n\t\t\t};\n\t\t});\n\t\tthis._diffValue = this._diffModel.map((m, r) => m?.diff.read(r));\n\t\tthis.onDidUpdateDiff = Event.fromObservableLight(this._diffValue);\n\t\tcodeEditorService.willCreateDiffEditor();\n\n\t\tthis._contextKeyService.createKey('isInDiffEditor', true);\n\n\t\tthis._domElement.appendChild(this.elements.root);\n\t\tthis._register(toDisposable(() => this.elements.root.remove()));\n\n\t\tthis._rootSizeObserver = this._register(new ObservableElementSizeObserver(this.elements.root, options.dimension));\n\t\tthis._rootSizeObserver.setAutomaticLayout(options.automaticLayout ?? false);\n\n\t\tthis._options = this._instantiationService.createInstance(DiffEditorOptions, options);\n\t\tthis._register(autorun(reader => {\n\t\t\tthis._options.setWidth(this._rootSizeObserver.width.read(reader));\n\t\t}));\n\n\t\tthis._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\n\t\tthis._register(bindContextKey(EditorContextKeys.isEmbeddedDiffEditor, this._contextKeyService,\n\t\t\treader => this._options.isInEmbeddedEditor.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.comparingMovedCode, this._contextKeyService,\n\t\t\treader => !!this._diffModel.read(reader)?.movedTextToCompare.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, this._contextKeyService,\n\t\t\treader => this._options.couldShowInlineViewBecauseOfSize.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorInlineMode, this._contextKeyService,\n\t\t\treader => !this._options.renderSideBySide.read(reader)\n\t\t));\n\n\t\tthis._register(bindContextKey(EditorContextKeys.hasChanges, this._contextKeyService,\n\t\t\treader => (this._diffModel.read(reader)?.diff.read(reader)?.mappings.length ?? 0) > 0\n\t\t));\n\n\t\tthis._editors = this._register(this._instantiationService.createInstance(\n\t\t\tDiffEditorEditors,\n\t\t\tthis.elements.original,\n\t\t\tthis.elements.modified,\n\t\t\tthis._options,\n\t\t\tcodeEditorWidgetOptions,\n\t\t\t(i, c, o, o2) => this._createInnerEditor(i, c, o, o2),\n\t\t));\n\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorOriginalWritable, this._contextKeyService,\n\t\t\treader => this._options.originalEditable.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorModifiedWritable, this._contextKeyService,\n\t\t\treader => !this._options.readOnly.read(reader)\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorOriginalUri, this._contextKeyService,\n\t\t\treader => this._diffModel.read(reader)?.model.original.uri.toString() ?? ''\n\t\t));\n\t\tthis._register(bindContextKey(EditorContextKeys.diffEditorModifiedUri, this._contextKeyService,\n\t\t\treader => this._diffModel.read(reader)?.model.modified.uri.toString() ?? ''\n\t\t));\n\n\t\tthis._overviewRulerPart = derivedDisposable(this, reader =>\n\t\t\t!this._options.renderOverviewRuler.read(reader)\n\t\t\t\t? undefined\n\t\t\t\t: this._instantiationService.createInstance(\n\t\t\t\t\treadHotReloadableExport(OverviewRulerFeature, reader),\n\t\t\t\t\tthis._editors,\n\t\t\t\t\tthis.elements.root,\n\t\t\t\t\tthis._diffModel,\n\t\t\t\t\tthis._rootSizeObserver.width,\n\t\t\t\t\tthis._rootSizeObserver.height,\n\t\t\t\t\tthis._layoutInfo.map(i => i.modifiedEditor),\n\t\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst dimensions = {\n\t\t\theight: this._rootSizeObserver.height,\n\t\t\twidth: this._rootSizeObserver.width.map((w, reader) => w - (this._overviewRulerPart.read(reader)?.width ?? 0)),\n\t\t};\n\n\t\tthis._sashLayout = new SashLayout(this._options, dimensions);\n\n\t\tthis._sash = derivedDisposable(this, reader => {\n\t\t\tconst showSash = this._options.renderSideBySide.read(reader);\n\t\t\tthis.elements.root.classList.toggle('side-by-side', showSash);\n\t\t\treturn !showSash ? undefined : new DiffEditorSash(\n\t\t\t\tthis.elements.root,\n\t\t\t\tdimensions,\n\t\t\t\tthis._options.enableSplitViewResizing,\n\t\t\t\tthis._boundarySashes,\n\t\t\t\tthis._sashLayout.sashLeft,\n\t\t\t\t() => this._sashLayout.resetSash(),\n\t\t\t);\n\t\t}).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst unchangedRangesFeature = derivedDisposable(this, reader => /** @description UnchangedRangesFeature */\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\treadHotReloadableExport(HideUnchangedRegionsFeature, reader),\n\t\t\t\tthis._editors, this._diffModel, this._options\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tderivedDisposable(this, reader => /** @description DiffEditorDecorations */\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\treadHotReloadableExport(DiffEditorDecorations, reader),\n\t\t\t\tthis._editors, this._diffModel, this._options, this,\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst origViewZoneIdsToIgnore = new Set<string>();\n\t\tconst modViewZoneIdsToIgnore = new Set<string>();\n\t\tlet isUpdatingViewZones = false;\n\t\tconst viewZoneManager = derivedDisposable(this, reader => /** @description ViewZoneManager */\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\treadHotReloadableExport(DiffEditorViewZones, reader),\n\t\t\t\tgetWindow(this._domElement),\n\t\t\t\tthis._editors,\n\t\t\t\tthis._diffModel,\n\t\t\t\tthis._options,\n\t\t\t\tthis,\n\t\t\t\t() => isUpdatingViewZones || unchangedRangesFeature.get().isUpdatingHiddenAreas,\n\t\t\t\torigViewZoneIdsToIgnore,\n\t\t\t\tmodViewZoneIdsToIgnore\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst originalViewZones = derived(this, (reader) => { /** @description originalViewZones */\n\t\t\tconst orig = viewZoneManager.read(reader).viewZones.read(reader).orig;\n\t\t\tconst orig2 = unchangedRangesFeature.read(reader).viewZones.read(reader).origViewZones;\n\t\t\treturn orig.concat(orig2);\n\t\t});\n\t\tconst modifiedViewZones = derived(this, (reader) => { /** @description modifiedViewZones */\n\t\t\tconst mod = viewZoneManager.read(reader).viewZones.read(reader).mod;\n\t\t\tconst mod2 = unchangedRangesFeature.read(reader).viewZones.read(reader).modViewZones;\n\t\t\treturn mod.concat(mod2);\n\t\t});\n\t\tthis._register(applyViewZones(this._editors.original, originalViewZones, isUpdatingOrigViewZones => {\n\t\t\tisUpdatingViewZones = isUpdatingOrigViewZones;\n\t\t}, origViewZoneIdsToIgnore));\n\t\tlet scrollState: StableEditorScrollState | undefined;\n\t\tthis._register(applyViewZones(this._editors.modified, modifiedViewZones, isUpdatingModViewZones => {\n\t\t\tisUpdatingViewZones = isUpdatingModViewZones;\n\t\t\tif (isUpdatingViewZones) {\n\t\t\t\tscrollState = StableEditorScrollState.capture(this._editors.modified);\n\t\t\t} else {\n\t\t\t\tscrollState?.restore(this._editors.modified);\n\t\t\t\tscrollState = undefined;\n\t\t\t}\n\t\t}, modViewZoneIdsToIgnore));\n\n\t\tthis._accessibleDiffViewer = derivedDisposable(this, reader =>\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\treadHotReloadableExport(AccessibleDiffViewer, reader),\n\t\t\t\tthis.elements.accessibleDiffViewer,\n\t\t\t\tthis._accessibleDiffViewerVisible,\n\t\t\t\t(visible, tx) => this._accessibleDiffViewerShouldBeVisible.set(visible, tx),\n\t\t\t\tthis._options.onlyShowAccessibleDiffViewer.map(v => !v),\n\t\t\t\tthis._rootSizeObserver.width,\n\t\t\t\tthis._rootSizeObserver.height,\n\t\t\t\tthis._diffModel.map((m, r) => m?.diff.read(r)?.mappings.map(m => m.lineRangeMapping)),\n\t\t\t\tnew AccessibleDiffViewerModelFromEditors(this._editors),\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store);\n\n\t\tconst visibility = this._accessibleDiffViewerVisible.map<CSSStyle['visibility']>(v => v ? 'hidden' : 'visible');\n\t\tthis._register(applyStyle(this.elements.modified, { visibility }));\n\t\tthis._register(applyStyle(this.elements.original, { visibility }));\n\n\t\tthis._createDiffEditorContributions();\n\n\t\tcodeEditorService.addDiffEditor(this);\n\n\t\tthis._gutter = derivedDisposable(this, reader => {\n\t\t\treturn this._options.shouldRenderGutterMenu.read(reader)\n\t\t\t\t? this._instantiationService.createInstance(\n\t\t\t\t\treadHotReloadableExport(DiffEditorGutter, reader),\n\t\t\t\t\tthis.elements.root,\n\t\t\t\t\tthis._diffModel,\n\t\t\t\t\tthis._editors,\n\t\t\t\t\tthis._options,\n\t\t\t\t\tthis._sashLayout,\n\t\t\t\t\tthis._boundarySashes,\n\t\t\t\t)\n\t\t\t\t: undefined;\n\t\t});\n\n\t\tthis._register(recomputeInitiallyAndOnChange(this._layoutInfo));\n\n\t\tderivedDisposable(this, reader => /** @description MovedBlocksLinesPart */\n\t\t\tnew (readHotReloadableExport(MovedBlocksLinesFeature, reader))(\n\t\t\t\tthis.elements.root,\n\t\t\t\tthis._diffModel,\n\t\t\t\tthis._layoutInfo.map(i => i.originalEditor),\n\t\t\t\tthis._layoutInfo.map(i => i.modifiedEditor),\n\t\t\t\tthis._editors,\n\t\t\t)\n\t\t).recomputeInitiallyAndOnChange(this._store, value => {\n\t\t\t// This is to break the layout info <-> moved blocks lines part dependency cycle.\n\t\t\tthis._movedBlocksLinesPart.set(value, undefined);\n\t\t});\n\n\t\tthis._register(Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition, e => this._handleCursorPositionChange(e, true)));\n\t\tthis._register(Event.runAndSubscribe(this._editors.original.onDidChangeCursorPosition, e => this._handleCursorPositionChange(e, false)));\n\n\t\tconst isInitializingDiff = this._diffModel.map(this, (m, reader) => {\n\t\t\t/** @isInitializingDiff isDiffUpToDate */\n\t\t\tif (!m) { return undefined; }\n\t\t\treturn m.diff.read(reader) === undefined && !m.isDiffUpToDate.read(reader);\n\t\t});\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\t/** @description DiffEditorWidgetHelper.ShowProgress */\n\t\t\tif (isInitializingDiff.read(reader) === true) {\n\t\t\t\tconst r = this._editorProgressService.show(true, 1000);\n\t\t\t\tstore.add(toDisposable(() => r.done()));\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tstore.add(new (readHotReloadableExport(RevertButtonsFeature, reader))(this._editors, this._diffModel, this._options, this));\n\t\t}));\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tif (!model) { return; }\n\t\t\tfor (const m of [model.model.original, model.model.modified]) {\n\t\t\t\tstore.add(m.onWillDispose(e => {\n\t\t\t\t\tonUnexpectedError(new BugIndicatingError('TextModel got disposed before DiffEditorWidget model got reset'));\n\t\t\t\t\tthis.setModel(null);\n\t\t\t\t}));\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tthis._options.setModel(this._diffModel.read(reader));\n\t\t}));\n\t}\n\n\tprotected _createInnerEditor(instantiationService: IInstantiationService, container: HTMLElement, options: Readonly<IEditorConstructionOptions>, editorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n\t\treturn editor;\n\t}\n\n\tprivate readonly _layoutInfo;\n\n\tprivate _createDiffEditorContributions() {\n\t\tconst contributions: IDiffEditorContributionDescription[] = EditorExtensionsRegistry.getDiffEditorContributions();\n\t\tfor (const desc of contributions) {\n\t\t\ttry {\n\t\t\t\tthis._register(this._instantiationService.createInstance(desc.ctor, this));\n\t\t\t} catch (err) {\n\t\t\t\tonUnexpectedError(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override get _targetEditor(): CodeEditorWidget { return this._editors.modified; }\n\n\toverride getEditorType(): string { return EditorType.IDiffEditor; }\n\n\toverride layout(dimension?: IDimension | undefined): void {\n\t\tthis._rootSizeObserver.observe(dimension);\n\t}\n\n\toverride hasTextFocus(): boolean { return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus(); }\n\n\tpublic override saveViewState(): IDiffEditorViewState {\n\t\tconst originalViewState = this._editors.original.saveViewState();\n\t\tconst modifiedViewState = this._editors.modified.saveViewState();\n\t\treturn {\n\t\t\toriginal: originalViewState,\n\t\t\tmodified: modifiedViewState,\n\t\t\tmodelState: this._diffModel.get()?.serializeState(),\n\t\t};\n\t}\n\n\tpublic override restoreViewState(s: IDiffEditorViewState): void {\n\t\tif (s && s.original && s.modified) {\n\t\t\tconst diffEditorState = s as IDiffEditorViewState;\n\t\t\tthis._editors.original.restoreViewState(diffEditorState.original);\n\t\t\tthis._editors.modified.restoreViewState(diffEditorState.modified);\n\t\t\tif (diffEditorState.modelState) {\n\t\t\t\tthis._diffModel.get()?.restoreSerializedState(diffEditorState.modelState as any);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleInitialized(): void {\n\t\tthis._editors.original.handleInitialized();\n\t\tthis._editors.modified.handleInitialized();\n\t}\n\n\tpublic createViewModel(model: IDiffEditorModel): IDiffEditorViewModel {\n\t\treturn this._instantiationService.createInstance(DiffEditorViewModel, model, this._options);\n\t}\n\n\toverride getModel(): IDiffEditorModel | null { return this._diffModel.get()?.model ?? null; }\n\n\toverride setModel(model: IDiffEditorModel | null | IDiffEditorViewModel): void {\n\t\tconst vm = !model ? null\n\t\t\t: ('model' in model) ? RefCounted.create(model).createNewRef(this)\n\t\t\t\t: RefCounted.create(this.createViewModel(model), this);\n\t\tthis.setDiffModel(vm);\n\t}\n\n\tsetDiffModel(viewModel: RefCounted<IDiffEditorViewModel> | null, tx?: ITransaction): void {\n\t\tconst currentModel = this._diffModel.get();\n\n\t\tif (!viewModel && currentModel) {\n\t\t\t// Transitioning from a model to no-model\n\t\t\tthis._accessibleDiffViewer.get().close();\n\t\t}\n\n\t\tif (this._diffModel.get() !== viewModel?.object) {\n\t\t\tsubtransaction(tx, tx => {\n\t\t\t\tconst vm = viewModel?.object;\n\t\t\t\t/** @description DiffEditorWidget.setModel */\n\t\t\t\tobservableFromEvent.batchEventsGlobally(tx, () => {\n\t\t\t\t\tthis._editors.original.setModel(vm ? vm.model.original : null);\n\t\t\t\t\tthis._editors.modified.setModel(vm ? vm.model.modified : null);\n\t\t\t\t});\n\t\t\t\tconst prevValueRef = this._diffModelSrc.get()?.createNewRef(this);\n\t\t\t\tthis._diffModelSrc.set(viewModel?.createNewRef(this) as RefCounted<DiffEditorViewModel> | undefined, tx);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// async, so that this runs after the transaction finished.\n\t\t\t\t\t// TODO: use the transaction to schedule disposal\n\t\t\t\t\tprevValueRef?.dispose();\n\t\t\t\t}, 0);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @param changedOptions Only has values for top-level options that have actually changed.\n\t */\n\toverride updateOptions(changedOptions: IDiffEditorOptions): void {\n\t\tthis._options.updateOptions(changedOptions);\n\t}\n\tgetContainerDomNode(): HTMLElement { return this._domElement; }\n\tgetOriginalEditor(): ICodeEditor { return this._editors.original; }\n\tgetModifiedEditor(): ICodeEditor { return this._editors.modified; }\n\n\tprivate readonly _diffValue;\n\treadonly onDidUpdateDiff: Event<void>;\n\n\t/**\n\t * @deprecated Use `this.getDiffComputationResult().changes2` instead.\n\t */\n\tgetLineChanges(): ILineChange[] | null {\n\t\tconst diffState = this._diffModel.get()?.diff.get();\n\t\tif (!diffState) { return null; }\n\t\treturn toLineChanges(diffState);\n\t}\n\n\trevert(diff: LineRangeMapping): void {\n\t\tconst model = this._diffModel.get();\n\t\tif (!model || !model.isDiffUpToDate.get()) { return; }\n\n\t\tthis._editors.modified.executeEdits('diffEditor', [\n\t\t\t{\n\t\t\t\trange: diff.modified.toExclusiveRange(),\n\t\t\t\ttext: model.model.original.getValueInRange(diff.original.toExclusiveRange())\n\t\t\t}\n\t\t]);\n\t}\n\n\trevertRangeMappings(diffs: RangeMapping[]): void {\n\t\tconst model = this._diffModel.get();\n\t\tif (!model || !model.isDiffUpToDate.get()) { return; }\n\n\t\tconst changes: IIdentifiedSingleEditOperation[] = diffs.map<IIdentifiedSingleEditOperation>(c => ({\n\t\t\trange: c.modifiedRange,\n\t\t\ttext: model.model.original.getValueInRange(c.originalRange)\n\t\t}));\n\n\t\tthis._editors.modified.executeEdits('diffEditor', changes);\n\t}\n\n\tprivate _goTo(diff: DiffMapping): void {\n\t\tthis._editors.modified.setPosition(new Position(diff.lineRangeMapping.modified.startLineNumber, 1));\n\t\tthis._editors.modified.revealRangeInCenter(diff.lineRangeMapping.modified.toExclusiveRange());\n\t}\n\n\tgoToDiff(target: 'previous' | 'next'): void {\n\t\tconst diffs = this._diffModel.get()?.diff.get()?.mappings;\n\t\tif (!diffs || diffs.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst curLineNumber = this._editors.modified.getPosition()!.lineNumber;\n\t\tlet diff: DiffMapping | undefined;\n\t\tif (target === 'next') {\n\t\t\tconst modifiedLineCount = this._editors.modified.getModel()!.getLineCount();\n\t\t\tif (modifiedLineCount === curLineNumber) {\n\t\t\t\tdiff = diffs[0];\n\t\t\t} else {\n\t\t\t\tdiff = diffs.find(d => d.lineRangeMapping.modified.startLineNumber > curLineNumber) ?? diffs[0];\n\t\t\t}\n\t\t} else {\n\t\t\tdiff = findLast(diffs, d => d.lineRangeMapping.modified.startLineNumber < curLineNumber) ?? diffs[diffs.length - 1];\n\t\t}\n\t\tthis._goTo(diff);\n\n\t\tif (diff.lineRangeMapping.modified.isEmpty) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'diffEditor.goToDiff' });\n\t\t} else if (diff.lineRangeMapping.original.isEmpty) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'diffEditor.goToDiff' });\n\t\t} else if (diff) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, { source: 'diffEditor.goToDiff' });\n\t\t}\n\t}\n\n\trevealFirstDiff(): void {\n\t\tconst diffModel = this._diffModel.get();\n\t\tif (!diffModel) {\n\t\t\treturn;\n\t\t}\n\t\t// wait for the diff computation to finish\n\t\tthis.waitForDiff().then(() => {\n\t\t\tconst diffs = diffModel.diff.get()?.mappings;\n\t\t\tif (!diffs || diffs.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._goTo(diffs[0]);\n\t\t});\n\t}\n\n\taccessibleDiffViewerNext(): void { this._accessibleDiffViewer.get().next(); }\n\n\taccessibleDiffViewerPrev(): void { this._accessibleDiffViewer.get().prev(); }\n\n\tasync waitForDiff(): Promise<void> {\n\t\tconst diffModel = this._diffModel.get();\n\t\tif (!diffModel) { return; }\n\t\tawait diffModel.waitForDiff();\n\t}\n\n\tmapToOtherSide(): { destination: CodeEditorWidget; destinationSelection: Range | undefined } {\n\t\tconst isModifiedFocus = this._editors.modified.hasWidgetFocus();\n\t\tconst source = isModifiedFocus ? this._editors.modified : this._editors.original;\n\t\tconst destination = isModifiedFocus ? this._editors.original : this._editors.modified;\n\n\t\tlet destinationSelection: Range | undefined;\n\n\t\tconst sourceSelection = source.getSelection();\n\t\tif (sourceSelection) {\n\t\t\tconst mappings = this._diffModel.get()?.diff.get()?.mappings.map(m => isModifiedFocus ? m.lineRangeMapping.flip() : m.lineRangeMapping);\n\t\t\tif (mappings) {\n\t\t\t\tconst newRange1 = translatePosition(sourceSelection.getStartPosition(), mappings);\n\t\t\t\tconst newRange2 = translatePosition(sourceSelection.getEndPosition(), mappings);\n\t\t\t\tdestinationSelection = Range.plusRange(newRange1, newRange2);\n\t\t\t}\n\t\t}\n\t\treturn { destination, destinationSelection };\n\t}\n\n\tswitchSide(): void {\n\t\tconst { destination, destinationSelection } = this.mapToOtherSide();\n\t\tdestination.focus();\n\t\tif (destinationSelection) {\n\t\t\tdestination.setSelection(destinationSelection);\n\t\t}\n\t}\n\n\texitCompareMove(): void {\n\t\tconst model = this._diffModel.get();\n\t\tif (!model) { return; }\n\t\tmodel.movedTextToCompare.set(undefined, undefined);\n\t}\n\n\tcollapseAllUnchangedRegions(): void {\n\t\tconst unchangedRegions = this._diffModel.get()?.unchangedRegions.get();\n\t\tif (!unchangedRegions) { return; }\n\t\ttransaction(tx => {\n\t\t\tfor (const region of unchangedRegions) {\n\t\t\t\tregion.collapseAll(tx);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowAllUnchangedRegions(): void {\n\t\tconst unchangedRegions = this._diffModel.get()?.unchangedRegions.get();\n\t\tif (!unchangedRegions) { return; }\n\t\ttransaction(tx => {\n\t\t\tfor (const region of unchangedRegions) {\n\t\t\t\tregion.showAll(tx);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _handleCursorPositionChange(e: ICursorPositionChangedEvent | undefined, isModifiedEditor: boolean): void {\n\t\tif (e?.reason === CursorChangeReason.Explicit) {\n\t\t\tconst diff = this._diffModel.get()?.diff.get()?.mappings.find(m => isModifiedEditor ? m.lineRangeMapping.modified.contains(e.position.lineNumber) : m.lineRangeMapping.original.contains(e.position.lineNumber));\n\t\t\tif (diff?.lineRangeMapping.modified.isEmpty) {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'diffEditor.cursorPositionChanged' });\n\t\t\t} else if (diff?.lineRangeMapping.original.isEmpty) {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'diffEditor.cursorPositionChanged' });\n\t\t\t} else if (diff) {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, { source: 'diffEditor.cursorPositionChanged' });\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function toLineChanges(state: DiffState): ILineChange[] {\n\treturn state.mappings.map(x => {\n\t\tconst m = x.lineRangeMapping;\n\t\tlet originalStartLineNumber: number;\n\t\tlet originalEndLineNumber: number;\n\t\tlet modifiedStartLineNumber: number;\n\t\tlet modifiedEndLineNumber: number;\n\t\tlet innerChanges = m.innerChanges;\n\n\t\tif (m.original.isEmpty) {\n\t\t\t// Insertion\n\t\t\toriginalStartLineNumber = m.original.startLineNumber - 1;\n\t\t\toriginalEndLineNumber = 0;\n\t\t\tinnerChanges = undefined;\n\t\t} else {\n\t\t\toriginalStartLineNumber = m.original.startLineNumber;\n\t\t\toriginalEndLineNumber = m.original.endLineNumberExclusive - 1;\n\t\t}\n\n\t\tif (m.modified.isEmpty) {\n\t\t\t// Deletion\n\t\t\tmodifiedStartLineNumber = m.modified.startLineNumber - 1;\n\t\t\tmodifiedEndLineNumber = 0;\n\t\t\tinnerChanges = undefined;\n\t\t} else {\n\t\t\tmodifiedStartLineNumber = m.modified.startLineNumber;\n\t\t\tmodifiedEndLineNumber = m.modified.endLineNumberExclusive - 1;\n\t\t}\n\n\t\treturn {\n\t\t\toriginalStartLineNumber,\n\t\t\toriginalEndLineNumber,\n\t\t\tmodifiedStartLineNumber,\n\t\t\tmodifiedEndLineNumber,\n\t\t\tcharChanges: innerChanges?.map(m => ({\n\t\t\t\toriginalStartLineNumber: m.originalRange.startLineNumber,\n\t\t\t\toriginalStartColumn: m.originalRange.startColumn,\n\t\t\t\toriginalEndLineNumber: m.originalRange.endLineNumber,\n\t\t\t\toriginalEndColumn: m.originalRange.endColumn,\n\t\t\t\tmodifiedStartLineNumber: m.modifiedRange.startLineNumber,\n\t\t\t\tmodifiedStartColumn: m.modifiedRange.startColumn,\n\t\t\t\tmodifiedEndLineNumber: m.modifiedRange.endLineNumber,\n\t\t\t\tmodifiedEndColumn: m.modifiedRange.endColumn,\n\t\t\t}))\n\t\t};\n\t});\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7919, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/commands.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/vs/editor/browser/widget/diffEditor/commands.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getActiveElement } from '../../../../base/browser/dom.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { ICodeEditor, IDiffEditor } from '../../editorBrowser.js';\nimport { EditorAction2, ServicesAccessor } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { DiffEditorWidget } from './diffEditorWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize2 } from '../../../../nls.js';\nimport { ILocalizedString } from '../../../../platform/action/common/action.js';\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport './registrations.contribution.js';\nimport { DiffEditorSelectionHunkToolbarContext } from './features/gutterFeature.js';\nimport { URI } from '../../../../base/common/uri.js';\n\nexport class ToggleCollapseUnchangedRegions extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'diffEditor.toggleCollapseUnchangedRegions',\n\t\t\ttitle: localize2('toggleCollapseUnchangedRegions', 'Toggle Collapse Unchanged Regions'),\n\t\t\ticon: Codicon.map,\n\t\t\ttoggled: ContextKeyExpr.has('config.diffEditor.hideUnchangedRegions.enabled'),\n\t\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t\t\tmenu: {\n\t\t\t\twhen: ContextKeyExpr.has('isInDiffEditor'),\n\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\torder: 22,\n\t\t\t\tgroup: 'navigation',\n\t\t\t},\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]): void {\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst newValue = !configurationService.getValue<boolean>('diffEditor.hideUnchangedRegions.enabled');\n\t\tconfigurationService.updateValue('diffEditor.hideUnchangedRegions.enabled', newValue);\n\t}\n}\n\nexport class ToggleShowMovedCodeBlocks extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'diffEditor.toggleShowMovedCodeBlocks',\n\t\t\ttitle: localize2('toggleShowMovedCodeBlocks', 'Toggle Show Moved Code Blocks'),\n\t\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]): void {\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst newValue = !configurationService.getValue<boolean>('diffEditor.experimental.showMoves');\n\t\tconfigurationService.updateValue('diffEditor.experimental.showMoves', newValue);\n\t}\n}\n\nexport class ToggleUseInlineViewWhenSpaceIsLimited extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'diffEditor.toggleUseInlineViewWhenSpaceIsLimited',\n\t\t\ttitle: localize2('toggleUseInlineViewWhenSpaceIsLimited', 'Toggle Use Inline View When Space Is Limited'),\n\t\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]): void {\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst newValue = !configurationService.getValue<boolean>('diffEditor.useInlineViewWhenSpaceIsLimited');\n\t\tconfigurationService.updateValue('diffEditor.useInlineViewWhenSpaceIsLimited', newValue);\n\t}\n}\n\nconst diffEditorCategory: ILocalizedString = localize2('diffEditor', \"Diff Editor\");\n\nexport class SwitchSide extends EditorAction2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'diffEditor.switchSide',\n\t\t\ttitle: localize2('switchSide', 'Switch Side'),\n\t\t\ticon: Codicon.arrowSwap,\n\t\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t\t\tf1: true,\n\t\t\tcategory: diffEditorCategory,\n\t\t});\n\t}\n\n\trunEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, arg?: { dryRun: boolean }): unknown {\n\t\tconst diffEditor = findFocusedDiffEditor(accessor);\n\t\tif (diffEditor instanceof DiffEditorWidget) {\n\t\t\tif (arg && arg.dryRun) {\n\t\t\t\treturn { destinationSelection: diffEditor.mapToOtherSide().destinationSelection };\n\t\t\t} else {\n\t\t\t\tdiffEditor.switchSide();\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n}\nexport class ExitCompareMove extends EditorAction2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'diffEditor.exitCompareMove',\n\t\t\ttitle: localize2('exitCompareMove', 'Exit Compare Move'),\n\t\t\ticon: Codicon.close,\n\t\t\tprecondition: EditorContextKeys.comparingMovedCode,\n\t\t\tf1: false,\n\t\t\tcategory: diffEditorCategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: 10000,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t}\n\t\t});\n\t}\n\n\trunEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ...args: unknown[]): void {\n\t\tconst diffEditor = findFocusedDiffEditor(accessor);\n\t\tif (diffEditor instanceof DiffEditorWidget) {\n\t\t\tdiffEditor.exitCompareMove();\n\t\t}\n\t}\n}\n\nexport class CollapseAllUnchangedRegions extends EditorAction2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'diffEditor.collapseAllUnchangedRegions',\n\t\t\ttitle: localize2('collapseAllUnchangedRegions', 'Collapse All Unchanged Regions'),\n\t\t\ticon: Codicon.fold,\n\t\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t\t\tf1: true,\n\t\t\tcategory: diffEditorCategory,\n\t\t});\n\t}\n\n\trunEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ...args: unknown[]): void {\n\t\tconst diffEditor = findFocusedDiffEditor(accessor);\n\t\tif (diffEditor instanceof DiffEditorWidget) {\n\t\t\tdiffEditor.collapseAllUnchangedRegions();\n\t\t}\n\t}\n}\n\nexport class ShowAllUnchangedRegions extends EditorAction2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'diffEditor.showAllUnchangedRegions',\n\t\t\ttitle: localize2('showAllUnchangedRegions', 'Show All Unchanged Regions'),\n\t\t\ticon: Codicon.unfold,\n\t\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t\t\tf1: true,\n\t\t\tcategory: diffEditorCategory,\n\t\t});\n\t}\n\n\trunEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ...args: unknown[]): void {\n\t\tconst diffEditor = findFocusedDiffEditor(accessor);\n\t\tif (diffEditor instanceof DiffEditorWidget) {\n\t\t\tdiffEditor.showAllUnchangedRegions();\n\t\t}\n\t}\n}\n\nexport class RevertHunkOrSelection extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'diffEditor.revert',\n\t\t\ttitle: localize2('revert', 'Revert'),\n\t\t\tf1: false,\n\t\t\tcategory: diffEditorCategory,\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, arg: DiffEditorSelectionHunkToolbarContext): unknown {\n\t\tconst diffEditor = findDiffEditor(accessor, arg.originalUri, arg.modifiedUri);\n\t\tif (diffEditor instanceof DiffEditorWidget) {\n\t\t\tdiffEditor.revertRangeMappings(arg.mapping.innerChanges ?? []);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nconst accessibleDiffViewerCategory: ILocalizedString = localize2('accessibleDiffViewer', \"Accessible Diff Viewer\");\n\nexport class AccessibleDiffViewerNext extends Action2 {\n\tpublic static id = 'editor.action.accessibleDiffViewer.next';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: AccessibleDiffViewerNext.id,\n\t\t\ttitle: localize2('editor.action.accessibleDiffViewer.next', 'Go to Next Difference'),\n\t\t\tcategory: accessibleDiffViewerCategory,\n\t\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyCode.F7,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tf1: true,\n\t\t});\n\t}\n\n\tpublic override run(accessor: ServicesAccessor): void {\n\t\tconst diffEditor = findFocusedDiffEditor(accessor);\n\t\tdiffEditor?.accessibleDiffViewerNext();\n\t}\n}\n\nexport class AccessibleDiffViewerPrev extends Action2 {\n\tpublic static id = 'editor.action.accessibleDiffViewer.prev';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: AccessibleDiffViewerPrev.id,\n\t\t\ttitle: localize2('editor.action.accessibleDiffViewer.prev', 'Go to Previous Difference'),\n\t\t\tcategory: accessibleDiffViewerCategory,\n\t\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.F7,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tf1: true,\n\t\t});\n\t}\n\n\tpublic override run(accessor: ServicesAccessor): void {\n\t\tconst diffEditor = findFocusedDiffEditor(accessor);\n\t\tdiffEditor?.accessibleDiffViewerPrev();\n\t}\n}\n\nexport function findDiffEditor(accessor: ServicesAccessor, originalUri: URI, modifiedUri: URI): IDiffEditor | null {\n\tconst codeEditorService = accessor.get(ICodeEditorService);\n\tconst diffEditors = codeEditorService.listDiffEditors();\n\n\treturn diffEditors.find(diffEditor => {\n\t\tconst modified = diffEditor.getModifiedEditor();\n\t\tconst original = diffEditor.getOriginalEditor();\n\n\t\treturn modified && modified.getModel()?.uri.toString() === modifiedUri.toString()\n\t\t\t&& original && original.getModel()?.uri.toString() === originalUri.toString();\n\t}) || null;\n}\n\nexport function findFocusedDiffEditor(accessor: ServicesAccessor): IDiffEditor | null {\n\tconst codeEditorService = accessor.get(ICodeEditorService);\n\tconst diffEditors = codeEditorService.listDiffEditors();\n\n\tconst activeElement = getActiveElement();\n\tif (activeElement) {\n\t\tfor (const d of diffEditors) {\n\t\t\tconst container = d.getContainerDomNode();\n\t\t\tif (container.contains(activeElement)) {\n\t\t\t\treturn d;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8193, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditor.contribution.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/vs/editor/browser/widget/diffEditor/diffEditor.contribution.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { AccessibleDiffViewerNext, AccessibleDiffViewerPrev, CollapseAllUnchangedRegions, ExitCompareMove, RevertHunkOrSelection, ShowAllUnchangedRegions, SwitchSide, ToggleCollapseUnchangedRegions, ToggleShowMovedCodeBlocks, ToggleUseInlineViewWhenSpaceIsLimited } from './commands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyEqualsExpr, ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport './registrations.contribution.js';\n\nregisterAction2(ToggleCollapseUnchangedRegions);\nregisterAction2(ToggleShowMovedCodeBlocks);\nregisterAction2(ToggleUseInlineViewWhenSpaceIsLimited);\n\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n\tcommand: {\n\t\tid: new ToggleUseInlineViewWhenSpaceIsLimited().desc.id,\n\t\ttitle: localize('useInlineViewWhenSpaceIsLimited', \"Use Inline View When Space Is Limited\"),\n\t\ttoggled: ContextKeyExpr.has('config.diffEditor.useInlineViewWhenSpaceIsLimited'),\n\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t},\n\torder: 11,\n\tgroup: '1_diff',\n\twhen: ContextKeyExpr.and(\n\t\tEditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached,\n\t\tContextKeyExpr.has('isInDiffEditor'),\n\t),\n});\n\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n\tcommand: {\n\t\tid: new ToggleShowMovedCodeBlocks().desc.id,\n\t\ttitle: localize('showMoves', \"Show Moved Code Blocks\"),\n\t\ticon: Codicon.move,\n\t\ttoggled: ContextKeyEqualsExpr.create('config.diffEditor.experimental.showMoves', true),\n\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t},\n\torder: 10,\n\tgroup: '1_diff',\n\twhen: ContextKeyExpr.has('isInDiffEditor'),\n});\n\nregisterAction2(RevertHunkOrSelection);\n\nfor (const ctx of [\n\t{ icon: Codicon.arrowRight, key: EditorContextKeys.diffEditorInlineMode.toNegated() },\n\t{ icon: Codicon.discard, key: EditorContextKeys.diffEditorInlineMode }\n]) {\n\tMenuRegistry.appendMenuItem(MenuId.DiffEditorHunkToolbar, {\n\t\tcommand: {\n\t\t\tid: new RevertHunkOrSelection().desc.id,\n\t\t\ttitle: localize('revertHunk', \"Revert Block\"),\n\t\t\ticon: ctx.icon,\n\t\t},\n\t\twhen: ContextKeyExpr.and(EditorContextKeys.diffEditorModifiedWritable, ctx.key),\n\t\torder: 5,\n\t\tgroup: 'primary',\n\t});\n\n\tMenuRegistry.appendMenuItem(MenuId.DiffEditorSelectionToolbar, {\n\t\tcommand: {\n\t\t\tid: new RevertHunkOrSelection().desc.id,\n\t\t\ttitle: localize('revertSelection', \"Revert Selection\"),\n\t\t\ticon: ctx.icon,\n\t\t},\n\t\twhen: ContextKeyExpr.and(EditorContextKeys.diffEditorModifiedWritable, ctx.key),\n\t\torder: 5,\n\t\tgroup: 'primary',\n\t});\n\n}\n\nregisterAction2(SwitchSide);\nregisterAction2(ExitCompareMove);\nregisterAction2(CollapseAllUnchangedRegions);\nregisterAction2(ShowAllUnchangedRegions);\n\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n\tcommand: {\n\t\tid: AccessibleDiffViewerNext.id,\n\t\ttitle: localize('Open Accessible Diff Viewer', \"Open Accessible Diff Viewer\"),\n\t\tprecondition: ContextKeyExpr.has('isInDiffEditor'),\n\t},\n\torder: 10,\n\tgroup: '2_diff',\n\twhen: ContextKeyExpr.and(\n\t\tEditorContextKeys.accessibleDiffViewerVisible.negate(),\n\t\tContextKeyExpr.has('isInDiffEditor'),\n\t),\n});\n\n\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.next', AccessibleDiffViewerNext.id);\nregisterAction2(AccessibleDiffViewerNext);\n\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.prev', AccessibleDiffViewerPrev.id);\nregisterAction2(AccessibleDiffViewerPrev);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8293, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/markdownRenderer/browser/markdownRenderer.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/markdownRenderer/browser/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/markdownRenderer/browser/markdownRenderer.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/markdownRenderer/browser/vs/editor/browser/widget/markdownRenderer/browser/markdownRenderer.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { MarkdownRenderOptions, renderMarkdown } from '../../../../../base/browser/markdownRenderer.js';\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { IMarkdownString, MarkdownStringTrustedOptions } from '../../../../../base/common/htmlContent.js';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { EditorOption } from '../../../../common/config/editorOptions.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { tokenizeToString } from '../../../../common/languages/textToHtmlTokenizer.js';\nimport { applyFontInfo } from '../../../config/domFontInfo.js';\nimport { ICodeEditor } from '../../../editorBrowser.js';\nimport './renderedMarkdown.css';\n\nexport interface IMarkdownRenderResult extends IDisposable {\n\treadonly element: HTMLElement;\n}\n\nexport interface IMarkdownRendererOptions {\n\treadonly editor?: ICodeEditor;\n\treadonly codeBlockFontFamily?: string;\n\treadonly codeBlockFontSize?: string;\n}\n\n/**\n * Markdown renderer that can render codeblocks with the editor mechanics. This\n * renderer should always be preferred.\n */\nexport class MarkdownRenderer {\n\n\tprivate static _ttpTokenizer = createTrustedTypesPolicy('tokenizeToString', {\n\t\tcreateHTML(html: string) {\n\t\t\treturn html;\n\t\t}\n\t});\n\n\tconstructor(\n\t\tprivate readonly _options: IMarkdownRendererOptions,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t) { }\n\n\trender(markdown: IMarkdownString, options?: MarkdownRenderOptions, outElement?: HTMLElement): IMarkdownRenderResult {\n\t\tconst rendered = renderMarkdown(markdown, {\n\t\t\tcodeBlockRenderer: (alias, value) => this.renderCodeBlock(alias, value),\n\t\t\tactionHandler: (link, mdStr) => this.openMarkdownLink(link, mdStr),\n\t\t\t...options,\n\t\t}, outElement);\n\t\trendered.element.classList.add('rendered-markdown');\n\t\treturn rendered;\n\t}\n\n\tprivate async renderCodeBlock(languageAlias: string | undefined, value: string): Promise<HTMLElement> {\n\t\t// In markdown,\n\t\t// it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n\t\t// it is possible no alias is given in which case we fall back to the current editor lang\n\t\tlet languageId: string | undefined | null;\n\t\tif (languageAlias) {\n\t\t\tlanguageId = this._languageService.getLanguageIdByLanguageName(languageAlias);\n\t\t} else if (this._options.editor) {\n\t\t\tlanguageId = this._options.editor.getModel()?.getLanguageId();\n\t\t}\n\t\tif (!languageId) {\n\t\t\tlanguageId = PLAINTEXT_LANGUAGE_ID;\n\t\t}\n\t\tconst html = await tokenizeToString(this._languageService, value, languageId);\n\n\t\tconst element = document.createElement('span');\n\n\t\telement.innerHTML = (MarkdownRenderer._ttpTokenizer?.createHTML(html) ?? html) as string;\n\n\t\t// use \"good\" font\n\t\tif (this._options.editor) {\n\t\t\tconst fontInfo = this._options.editor.getOption(EditorOption.fontInfo);\n\t\t\tapplyFontInfo(element, fontInfo);\n\t\t} else if (this._options.codeBlockFontFamily) {\n\t\t\telement.style.fontFamily = this._options.codeBlockFontFamily;\n\t\t}\n\n\t\tif (this._options.codeBlockFontSize !== undefined) {\n\t\t\telement.style.fontSize = this._options.codeBlockFontSize;\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tprotected async openMarkdownLink(link: string, markdown: IMarkdownString) {\n\t\tawait openLinkFromMarkdown(this._openerService, link, markdown.isTrusted);\n\t}\n}\n\nexport async function openLinkFromMarkdown(openerService: IOpenerService, link: string, isTrusted: boolean | MarkdownStringTrustedOptions | undefined, skipValidation?: boolean): Promise<boolean> {\n\ttry {\n\t\treturn await openerService.open(link, {\n\t\t\tfromUserGesture: true,\n\t\t\tallowContributedOpeners: true,\n\t\t\tallowCommands: toAllowCommandsOption(isTrusted),\n\t\t\tskipValidation\n\t\t});\n\t} catch (e) {\n\t\tonUnexpectedError(e);\n\t\treturn false;\n\t}\n}\n\nfunction toAllowCommandsOption(isTrusted: boolean | MarkdownStringTrustedOptions | undefined): boolean | readonly string[] {\n\tif (isTrusted === true) {\n\t\treturn true; // Allow all commands\n\t}\n\n\tif (isTrusted && Array.isArray(isTrusted.enabledCommands)) {\n\t\treturn isTrusted.enabledCommands; // Allow subset of commands\n\t}\n\n\treturn false; // Block commands\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { MarkdownRenderOptions, renderMarkdown } from '../../../../../base/browser/markdownRenderer.js';\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { IMarkdownString, MarkdownStringTrustedOptions } from '../../../../../base/common/htmlContent.js';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { EditorOption } from '../../../../common/config/editorOptions.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { tokenizeToString } from '../../../../common/languages/textToHtmlTokenizer.js';\nimport { applyFontInfo } from '../../../config/domFontInfo.js';\nimport { ICodeEditor } from '../../../editorBrowser.js';\nimport './renderedMarkdown.css';\n\nexport interface IMarkdownRenderResult extends IDisposable {\n\treadonly element: HTMLElement;\n}\n\nexport interface IMarkdownRendererOptions {\n\treadonly editor?: ICodeEditor;\n\treadonly codeBlockFontFamily?: string;\n\treadonly codeBlockFontSize?: string;\n}\n\n/**\n * Markdown renderer that can render codeblocks with the editor mechanics. This\n * renderer should always be preferred.\n */\nexport class MarkdownRenderer {\n\n\tprivate static _ttpTokenizer = createTrustedTypesPolicy('tokenizeToString', {\n\t\tcreateHTML(html: string) {\n\t\t\treturn html;\n\t\t}\n\t});\n\n\tconstructor(\n\t\tprivate readonly _options: IMarkdownRendererOptions,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t) { }\n\n\trender(markdown: IMarkdownString, options?: MarkdownRenderOptions, outElement?: HTMLElement): IMarkdownRenderResult {\n\t\tconst rendered = renderMarkdown(markdown, {\n\t\t\tcodeBlockRenderer: (alias, value) => this.renderCodeBlock(alias, value),\n\t\t\tactionHandler: (link, mdStr) => this.openMarkdownLink(link, mdStr),\n\t\t\t...options,\n\t\t}, outElement);\n\t\trendered.element.classList.add('rendered-markdown');\n\t\treturn rendered;\n\t}\n\n\tprivate async renderCodeBlock(languageAlias: string | undefined, value: string): Promise<HTMLElement> {\n\t\t// In markdown,\n\t\t// it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n\t\t// it is possible no alias is given in which case we fall back to the current editor lang\n\t\tlet languageId: string | undefined | null;\n\t\tif (languageAlias) {\n\t\t\tlanguageId = this._languageService.getLanguageIdByLanguageName(languageAlias);\n\t\t} else if (this._options.editor) {\n\t\t\tlanguageId = this._options.editor.getModel()?.getLanguageId();\n\t\t}\n\t\tif (!languageId) {\n\t\t\tlanguageId = PLAINTEXT_LANGUAGE_ID;\n\t\t}\n\t\tconst html = await tokenizeToString(this._languageService, value, languageId);\n\n\t\tconst element = document.createElement('span');\n\n\t\telement.innerHTML = (MarkdownRenderer._ttpTokenizer?.createHTML(html) ?? html) as string;\n\n\t\t// use \"good\" font\n\t\tif (this._options.editor) {\n\t\t\tconst fontInfo = this._options.editor.getOption(EditorOption.fontInfo);\n\t\t\tapplyFontInfo(element, fontInfo);\n\t\t} else if (this._options.codeBlockFontFamily) {\n\t\t\telement.style.fontFamily = this._options.codeBlockFontFamily;\n\t\t}\n\n\t\tif (this._options.codeBlockFontSize !== undefined) {\n\t\t\telement.style.fontSize = this._options.codeBlockFontSize;\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tprotected async openMarkdownLink(link: string, markdown: IMarkdownString) {\n\t\tawait openLinkFromMarkdown(this._openerService, link, markdown.isTrusted);\n\t}\n}\n\nexport async function openLinkFromMarkdown(openerService: IOpenerService, link: string, isTrusted: boolean | MarkdownStringTrustedOptions | undefined, skipValidation?: boolean): Promise<boolean> {\n\ttry {\n\t\treturn await openerService.open(link, {\n\t\t\tfromUserGesture: true,\n\t\t\tallowContributedOpeners: true,\n\t\t\tallowCommands: toAllowCommandsOption(isTrusted),\n\t\t\tskipValidation\n\t\t});\n\t} catch (e) {\n\t\tonUnexpectedError(e);\n\t\treturn false;\n\t}\n}\n\nfunction toAllowCommandsOption(isTrusted: boolean | MarkdownStringTrustedOptions | undefined): boolean | readonly string[] {\n\tif (isTrusted === true) {\n\t\treturn true; // Allow all commands\n\t}\n\n\tif (isTrusted && Array.isArray(isTrusted.enabledCommands)) {\n\t\treturn isTrusted.enabledCommands; // Allow subset of commands\n\t}\n\n\treturn false; // Block commands\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8422, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/codeEditor/embeddedCodeEditorWidget.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/vs/editor/browser/widget/codeEditor/embeddedCodeEditorWidget.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as objects from '../../../../base/common/objects.js';\nimport { ICodeEditor } from '../../editorBrowser.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from './codeEditorWidget.js';\nimport { ConfigurationChangedEvent, IEditorOptions } from '../../../common/config/editorOptions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n\nexport class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n\tprivate readonly _parentEditor: ICodeEditor;\n\tprivate readonly _overwriteOptions: IEditorOptions;\n\n\tconstructor(\n\t\tdomElement: HTMLElement,\n\t\toptions: IEditorOptions,\n\t\tcodeEditorWidgetOptions: ICodeEditorWidgetOptions,\n\t\tparentEditor: ICodeEditor,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@ILanguageConfigurationService languageConfigurationService: ILanguageConfigurationService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService\n\t) {\n\t\tsuper(domElement, { ...parentEditor.getRawOptions(), overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n\n\t\tthis._parentEditor = parentEditor;\n\t\tthis._overwriteOptions = options;\n\n\t\t// Overwrite parent's options\n\t\tsuper.updateOptions(this._overwriteOptions);\n\n\t\tthis._register(parentEditor.onDidChangeConfiguration((e: ConfigurationChangedEvent) => this._onParentConfigurationChanged(e)));\n\t}\n\n\tgetParentEditor(): ICodeEditor {\n\t\treturn this._parentEditor;\n\t}\n\n\tprivate _onParentConfigurationChanged(e: ConfigurationChangedEvent): void {\n\t\tsuper.updateOptions(this._parentEditor.getRawOptions());\n\t\tsuper.updateOptions(this._overwriteOptions);\n\t}\n\n\toverride updateOptions(newOptions: IEditorOptions): void {\n\t\tobjects.mixin(this._overwriteOptions, newOptions, true);\n\t\tsuper.updateOptions(this._overwriteOptions);\n\t}\n}\n\nexport function getOuterEditor(accessor: ServicesAccessor): ICodeEditor | null {\n\tconst editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n\tif (editor instanceof EmbeddedCodeEditorWidget) {\n\t\treturn editor.getParentEditor();\n\t}\n\treturn editor;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as objects from '../../../../base/common/objects.js';\nimport { ICodeEditor } from '../../editorBrowser.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from './codeEditorWidget.js';\nimport { ConfigurationChangedEvent, IEditorOptions } from '../../../common/config/editorOptions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n\nexport class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n\tprivate readonly _parentEditor: ICodeEditor;\n\tprivate readonly _overwriteOptions: IEditorOptions;\n\n\tconstructor(\n\t\tdomElement: HTMLElement,\n\t\toptions: IEditorOptions,\n\t\tcodeEditorWidgetOptions: ICodeEditorWidgetOptions,\n\t\tparentEditor: ICodeEditor,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@ILanguageConfigurationService languageConfigurationService: ILanguageConfigurationService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService\n\t) {\n\t\tsuper(domElement, { ...parentEditor.getRawOptions(), overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n\n\t\tthis._parentEditor = parentEditor;\n\t\tthis._overwriteOptions = options;\n\n\t\t// Overwrite parent's options\n\t\tsuper.updateOptions(this._overwriteOptions);\n\n\t\tthis._register(parentEditor.onDidChangeConfiguration((e: ConfigurationChangedEvent) => this._onParentConfigurationChanged(e)));\n\t}\n\n\tgetParentEditor(): ICodeEditor {\n\t\treturn this._parentEditor;\n\t}\n\n\tprivate _onParentConfigurationChanged(e: ConfigurationChangedEvent): void {\n\t\tsuper.updateOptions(this._parentEditor.getRawOptions());\n\t\tsuper.updateOptions(this._overwriteOptions);\n\t}\n\n\toverride updateOptions(newOptions: IEditorOptions): void {\n\t\tobjects.mixin(this._overwriteOptions, newOptions, true);\n\t\tsuper.updateOptions(this._overwriteOptions);\n\t}\n}\n\nexport function getOuterEditor(accessor: ServicesAccessor): ICodeEditor | null {\n\tconst editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n\tif (editor instanceof EmbeddedCodeEditorWidget) {\n\t\treturn editor.getParentEditor();\n\t}\n\treturn editor;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8511, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/colors.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/vs/editor/browser/widget/multiDiffEditor/colors.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { registerColor, editorBackground } from '../../../../platform/theme/common/colorRegistry.js';\n\nexport const multiDiffEditorHeaderBackground = registerColor(\n\t'multiDiffEditor.headerBackground',\n\t{ dark: '#262626', light: 'tab.inactiveBackground', hcDark: 'tab.inactiveBackground', hcLight: 'tab.inactiveBackground', },\n\tlocalize('multiDiffEditor.headerBackground', 'The background color of the diff editor\\'s header')\n);\n\nexport const multiDiffEditorBackground = registerColor(\n\t'multiDiffEditor.background',\n\teditorBackground,\n\tlocalize('multiDiffEditor.background', 'The background color of the multi file diff editor')\n);\n\nexport const multiDiffEditorBorder = registerColor(\n\t'multiDiffEditor.border',\n\t{ dark: 'sideBarSectionHeader.border', light: '#cccccc', hcDark: 'sideBarSectionHeader.border', hcLight: '#cccccc', },\n\tlocalize('multiDiffEditor.border', 'The border color of the multi file diff editor')\n);\n\n"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;AAEhG,OAAO,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;;;AAC9C,OAAO,EAAE,aAAa,EAAE,gBAAgB,EAAE,MAAM,oDAAoD,CAAC;;;AAE9F,MAAM,+BAA+B,OAAG,2MAAa,EAC3D,kCAAkC,EAClC;IAAE,IAAI,EAAE,SAAS;IAAE,KAAK,EAAE,wBAAwB;IAAE,MAAM,EAAE,wBAAwB;IAAE,OAAO,EAAE,wBAAwB;AAAA,CAAG,MAC1H,gLAAQ,EAAC,GAAkC,EAAE,mDAAmD,CAAC,CACjG,CAAC;AAEK,MAAM,yBAAyB,OAAG,2MAAa,EACrD,4BAA4B,EAC5B,0NAAgB,MAChB,gLAAQ,EAAC,GAA4B,EAAE,oDAAoD,CAAC,CAC5F,CAAC;AAEK,MAAM,qBAAqB,OAAG,2MAAa,EACjD,wBAAwB,EACxB;IAAE,IAAI,EAAE,6BAA6B;IAAE,KAAK,EAAE,SAAS;IAAE,MAAM,EAAE,6BAA6B;IAAE,OAAO,EAAE,SAAS;AAAA,CAAG,MACrH,gLAAQ,EAAC,GAAwB,EAAE,gDAAgD,CAAC,CACpF,CAAC","debugId":null}},
    {"offset": {"line": 8545, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/diffEditorItemTemplate.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/multiDiffEditor/diffEditorItemTemplate.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/vs/editor/browser/widget/multiDiffEditor/diffEditorItemTemplate.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, globalTransaction, observableValue } from '../../../../base/common/observable.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, type IScopedContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IDiffEditorOptions } from '../../../common/config/editorOptions.js';\nimport { OffsetRange } from '../../../common/core/ranges/offsetRange.js';\nimport { observableCodeEditor } from '../../observableCodeEditor.js';\nimport { DiffEditorWidget } from '../diffEditor/diffEditorWidget.js';\nimport { DocumentDiffItemViewModel } from './multiDiffEditorViewModel.js';\nimport { IObjectData, IPooledObject } from './objectPool.js';\nimport { ActionRunnerWithContext } from './utils.js';\nimport { IWorkbenchUIElementFactory } from './workbenchUIElementFactory.js';\n\nexport class TemplateData implements IObjectData {\n\tconstructor(\n\t\tpublic readonly viewModel: DocumentDiffItemViewModel,\n\t\tpublic readonly deltaScrollVertical: (delta: number) => void,\n\t) { }\n\n\n\tgetId(): unknown {\n\t\treturn this.viewModel;\n\t}\n}\n\nexport class DiffEditorItemTemplate extends Disposable implements IPooledObject<TemplateData> {\n\tprivate readonly _viewModel;\n\n\tprivate readonly _collapsed;\n\n\tprivate readonly _editorContentHeight;\n\tpublic readonly contentHeight;\n\n\tprivate readonly _modifiedContentWidth;\n\tprivate readonly _modifiedWidth;\n\tprivate readonly _originalContentWidth;\n\tprivate readonly _originalWidth;\n\n\tpublic readonly maxScroll;\n\n\tprivate readonly _elements;\n\n\tpublic readonly editor;\n\n\tprivate readonly isModifedFocused;\n\tprivate readonly isOriginalFocused;\n\tpublic readonly isFocused;\n\n\tprivate readonly _resourceLabel;\n\n\tprivate readonly _resourceLabel2;\n\n\tprivate readonly _outerEditorHeight: number;\n\tprivate readonly _contextKeyService: IScopedContextKeyService;\n\n\tconstructor(\n\t\tprivate readonly _container: HTMLElement,\n\t\tprivate readonly _overflowWidgetsDomNode: HTMLElement,\n\t\tprivate readonly _workbenchUIElementFactory: IWorkbenchUIElementFactory,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextKeyService _parentContextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\t\tthis._viewModel = observableValue<DocumentDiffItemViewModel | undefined>(this, undefined);\n\t\tthis._collapsed = derived(this, reader => this._viewModel.read(reader)?.collapsed.read(reader));\n\t\tthis._editorContentHeight = observableValue<number>(this, 500);\n\t\tthis.contentHeight = derived(this, reader => {\n\t\t\tconst h = this._collapsed.read(reader) ? 0 : this._editorContentHeight.read(reader);\n\t\t\treturn h + this._outerEditorHeight;\n\t\t});\n\t\tthis._modifiedContentWidth = observableValue<number>(this, 0);\n\t\tthis._modifiedWidth = observableValue<number>(this, 0);\n\t\tthis._originalContentWidth = observableValue<number>(this, 0);\n\t\tthis._originalWidth = observableValue<number>(this, 0);\n\t\tthis.maxScroll = derived(this, reader => {\n\t\t\tconst scroll1 = this._modifiedContentWidth.read(reader) - this._modifiedWidth.read(reader);\n\t\t\tconst scroll2 = this._originalContentWidth.read(reader) - this._originalWidth.read(reader);\n\t\t\tif (scroll1 > scroll2) {\n\t\t\t\treturn { maxScroll: scroll1, width: this._modifiedWidth.read(reader) };\n\t\t\t} else {\n\t\t\t\treturn { maxScroll: scroll2, width: this._originalWidth.read(reader) };\n\t\t\t}\n\t\t});\n\t\tthis._elements = h('div.multiDiffEntry', [\n\t\t\th('div.header@header', [\n\t\t\t\th('div.header-content', [\n\t\t\t\t\th('div.collapse-button@collapseButton'),\n\t\t\t\t\th('div.file-path', [\n\t\t\t\t\t\th('div.title.modified.show-file-icons@primaryPath', [] as any),\n\t\t\t\t\t\th('div.status.deleted@status', ['R']),\n\t\t\t\t\t\th('div.title.original.show-file-icons@secondaryPath', [] as any),\n\t\t\t\t\t]),\n\t\t\t\t\th('div.actions@actions'),\n\t\t\t\t]),\n\t\t\t]),\n\n\t\t\th('div.editorParent', [\n\t\t\t\th('div.editorContainer@editor'),\n\t\t\t])\n\t\t]) as Record<string, HTMLElement>;\n\t\tthis.editor = this._register(this._instantiationService.createInstance(DiffEditorWidget, this._elements.editor, {\n\t\t\toverflowWidgetsDomNode: this._overflowWidgetsDomNode,\n\t\t}, {}));\n\t\tthis.isModifedFocused = observableCodeEditor(this.editor.getModifiedEditor()).isFocused;\n\t\tthis.isOriginalFocused = observableCodeEditor(this.editor.getOriginalEditor()).isFocused;\n\t\tthis.isFocused = derived(this, reader => this.isModifedFocused.read(reader) || this.isOriginalFocused.read(reader));\n\t\tthis._resourceLabel = this._workbenchUIElementFactory.createResourceLabel\n\t\t\t? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath))\n\t\t\t: undefined;\n\t\tthis._resourceLabel2 = this._workbenchUIElementFactory.createResourceLabel\n\t\t\t? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath))\n\t\t\t: undefined;\n\t\tthis._dataStore = this._register(new DisposableStore());\n\t\tthis._headerHeight = 40;\n\t\tthis._lastScrollTop = -1;\n\t\tthis._isSettingScrollTop = false;\n\n\t\tconst btn = new Button(this._elements.collapseButton, {});\n\n\t\tthis._register(autorun(reader => {\n\t\t\tbtn.element.className = '';\n\t\t\tbtn.icon = this._collapsed.read(reader) ? Codicon.chevronRight : Codicon.chevronDown;\n\t\t}));\n\t\tthis._register(btn.onDidClick(() => {\n\t\t\tthis._viewModel.get()?.collapsed.set(!this._collapsed.get(), undefined);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tthis._elements.editor.style.display = this._collapsed.read(reader) ? 'none' : 'block';\n\t\t}));\n\n\t\tthis._register(this.editor.getModifiedEditor().onDidLayoutChange(e => {\n\t\t\tconst width = this.editor.getModifiedEditor().getLayoutInfo().contentWidth;\n\t\t\tthis._modifiedWidth.set(width, undefined);\n\t\t}));\n\n\t\tthis._register(this.editor.getOriginalEditor().onDidLayoutChange(e => {\n\t\t\tconst width = this.editor.getOriginalEditor().getLayoutInfo().contentWidth;\n\t\t\tthis._originalWidth.set(width, undefined);\n\t\t}));\n\n\t\tthis._register(this.editor.onDidContentSizeChange(e => {\n\t\t\tglobalTransaction(tx => {\n\t\t\t\tthis._editorContentHeight.set(e.contentHeight, tx);\n\t\t\t\tthis._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(), tx);\n\t\t\t\tthis._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(), tx);\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this.editor.getOriginalEditor().onDidScrollChange(e => {\n\t\t\tif (this._isSettingScrollTop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!e.scrollTopChanged || !this._data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst delta = e.scrollTop - this._lastScrollTop;\n\t\t\tthis._data.deltaScrollVertical(delta);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst isActive = this._viewModel.read(reader)?.isActive.read(reader);\n\t\t\tthis._elements.root.classList.toggle('active', isActive);\n\t\t}));\n\n\t\tthis._container.appendChild(this._elements.root);\n\t\tthis._outerEditorHeight = this._headerHeight;\n\n\t\tthis._contextKeyService = this._register(_parentContextKeyService.createScoped(this._elements.actions));\n\t\tconst instantiationService = this._register(this._instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService])));\n\t\tthis._register(instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.actions, MenuId.MultiDiffEditorFileToolbar, {\n\t\t\tactionRunner: this._register(new ActionRunnerWithContext(() => (this._viewModel.get()?.modifiedUri))),\n\t\t\tmenuOptions: {\n\t\t\t\tshouldForwardArgs: true,\n\t\t\t},\n\t\t\ttoolbarOptions: { primaryGroup: g => g.startsWith('navigation') },\n\t\t\tactionViewItemProvider: (action, options) => createActionViewItem(instantiationService, action, options),\n\t\t}));\n\t}\n\n\tpublic setScrollLeft(left: number): void {\n\t\tif (this._modifiedContentWidth.get() - this._modifiedWidth.get() > this._originalContentWidth.get() - this._originalWidth.get()) {\n\t\t\tthis.editor.getModifiedEditor().setScrollLeft(left);\n\t\t} else {\n\t\t\tthis.editor.getOriginalEditor().setScrollLeft(left);\n\t\t}\n\t}\n\n\tprivate readonly _dataStore;\n\n\tprivate _data: TemplateData | undefined;\n\n\tpublic setData(data: TemplateData | undefined): void {\n\t\tthis._data = data;\n\t\tfunction updateOptions(options: IDiffEditorOptions): IDiffEditorOptions {\n\t\t\treturn {\n\t\t\t\t...options,\n\t\t\t\tscrollBeyondLastLine: false,\n\t\t\t\thideUnchangedRegions: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t},\n\t\t\t\tscrollbar: {\n\t\t\t\t\tvertical: 'hidden',\n\t\t\t\t\thorizontal: 'hidden',\n\t\t\t\t\thandleMouseWheel: false,\n\t\t\t\t\tuseShadows: false,\n\t\t\t\t},\n\t\t\t\trenderOverviewRuler: false,\n\t\t\t\tfixedOverflowWidgets: true,\n\t\t\t\toverviewRulerBorder: false,\n\t\t\t};\n\t\t}\n\n\t\tif (!data) {\n\t\t\tglobalTransaction(tx => {\n\t\t\t\tthis._viewModel.set(undefined, tx);\n\t\t\t\tthis.editor.setDiffModel(null, tx);\n\t\t\t\tthis._dataStore.clear();\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = data.viewModel.documentDiffItem;\n\n\t\tglobalTransaction(tx => {\n\t\t\tthis._resourceLabel?.setUri(data.viewModel.modifiedUri ?? data.viewModel.originalUri!, { strikethrough: data.viewModel.modifiedUri === undefined });\n\n\t\t\tlet isRenamed = false;\n\t\t\tlet isDeleted = false;\n\t\t\tlet isAdded = false;\n\t\t\tlet flag = '';\n\t\t\tif (data.viewModel.modifiedUri && data.viewModel.originalUri && data.viewModel.modifiedUri.path !== data.viewModel.originalUri.path) {\n\t\t\t\tflag = 'R';\n\t\t\t\tisRenamed = true;\n\t\t\t} else if (!data.viewModel.modifiedUri) {\n\t\t\t\tflag = 'D';\n\t\t\t\tisDeleted = true;\n\t\t\t} else if (!data.viewModel.originalUri) {\n\t\t\t\tflag = 'A';\n\t\t\t\tisAdded = true;\n\t\t\t}\n\t\t\tthis._elements.status.classList.toggle('renamed', isRenamed);\n\t\t\tthis._elements.status.classList.toggle('deleted', isDeleted);\n\t\t\tthis._elements.status.classList.toggle('added', isAdded);\n\t\t\tthis._elements.status.innerText = flag;\n\n\t\t\tthis._resourceLabel2?.setUri(isRenamed ? data.viewModel.originalUri : undefined, { strikethrough: true });\n\n\t\t\tthis._dataStore.clear();\n\t\t\tthis._viewModel.set(data.viewModel, tx);\n\t\t\tthis.editor.setDiffModel(data.viewModel.diffEditorViewModelRef, tx);\n\t\t\tthis.editor.updateOptions(updateOptions(value.options ?? {}));\n\t\t});\n\t\tif (value.onOptionsDidChange) {\n\t\t\tthis._dataStore.add(value.onOptionsDidChange(() => {\n\t\t\t\tthis.editor.updateOptions(updateOptions(value.options ?? {}));\n\t\t\t}));\n\t\t}\n\t\tdata.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore, value => {\n\t\t\tif (!value) {\n\t\t\t\tthis.setData(undefined);\n\t\t\t}\n\t\t});\n\n\t\tif (data.viewModel.documentDiffItem.contextKeys) {\n\t\t\tfor (const [key, value] of Object.entries(data.viewModel.documentDiffItem.contextKeys)) {\n\t\t\t\tthis._contextKeyService.createKey(key, value);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate readonly _headerHeight;\n\n\tprivate _lastScrollTop;\n\tprivate _isSettingScrollTop;\n\n\tpublic render(verticalRange: OffsetRange, width: number, editorScroll: number, viewPort: OffsetRange): void {\n\t\tthis._elements.root.style.visibility = 'visible';\n\t\tthis._elements.root.style.top = `${verticalRange.start}px`;\n\t\tthis._elements.root.style.height = `${verticalRange.length}px`;\n\t\tthis._elements.root.style.width = `${width}px`;\n\t\tthis._elements.root.style.position = 'absolute';\n\n\t\t// For sticky scroll\n\t\tconst maxDelta = verticalRange.length - this._headerHeight;\n\t\tconst delta = Math.max(0, Math.min(viewPort.start - verticalRange.start, maxDelta));\n\t\tthis._elements.header.style.transform = `translateY(${delta}px)`;\n\n\t\tglobalTransaction(tx => {\n\t\t\tthis.editor.layout({\n\t\t\t\twidth: width - 2 * 8 - 2 * 1,\n\t\t\t\theight: verticalRange.length - this._outerEditorHeight,\n\t\t\t});\n\t\t});\n\t\ttry {\n\t\t\tthis._isSettingScrollTop = true;\n\t\t\tthis._lastScrollTop = editorScroll;\n\t\t\tthis.editor.getOriginalEditor().setScrollTop(editorScroll);\n\t\t} finally {\n\t\t\tthis._isSettingScrollTop = false;\n\t\t}\n\n\t\tthis._elements.header.classList.toggle('shadow', delta > 0 || editorScroll > 0);\n\t\tthis._elements.header.classList.toggle('collapsed', delta === maxDelta);\n\t}\n\n\tpublic hide(): void {\n\t\tthis._elements.root.style.top = `-100000px`;\n\t\tthis._elements.root.style.visibility = 'hidden'; // Some editor parts are still visible\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, globalTransaction, observableValue } from '../../../../base/common/observable.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, type IScopedContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IDiffEditorOptions } from '../../../common/config/editorOptions.js';\nimport { OffsetRange } from '../../../common/core/ranges/offsetRange.js';\nimport { observableCodeEditor } from '../../observableCodeEditor.js';\nimport { DiffEditorWidget } from '../diffEditor/diffEditorWidget.js';\nimport { DocumentDiffItemViewModel } from './multiDiffEditorViewModel.js';\nimport { IObjectData, IPooledObject } from './objectPool.js';\nimport { ActionRunnerWithContext } from './utils.js';\nimport { IWorkbenchUIElementFactory } from './workbenchUIElementFactory.js';\n\nexport class TemplateData implements IObjectData {\n\tconstructor(\n\t\tpublic readonly viewModel: DocumentDiffItemViewModel,\n\t\tpublic readonly deltaScrollVertical: (delta: number) => void,\n\t) { }\n\n\n\tgetId(): unknown {\n\t\treturn this.viewModel;\n\t}\n}\n\nexport class DiffEditorItemTemplate extends Disposable implements IPooledObject<TemplateData> {\n\tprivate readonly _viewModel;\n\n\tprivate readonly _collapsed;\n\n\tprivate readonly _editorContentHeight;\n\tpublic readonly contentHeight;\n\n\tprivate readonly _modifiedContentWidth;\n\tprivate readonly _modifiedWidth;\n\tprivate readonly _originalContentWidth;\n\tprivate readonly _originalWidth;\n\n\tpublic readonly maxScroll;\n\n\tprivate readonly _elements;\n\n\tpublic readonly editor;\n\n\tprivate readonly isModifedFocused;\n\tprivate readonly isOriginalFocused;\n\tpublic readonly isFocused;\n\n\tprivate readonly _resourceLabel;\n\n\tprivate readonly _resourceLabel2;\n\n\tprivate readonly _outerEditorHeight: number;\n\tprivate readonly _contextKeyService: IScopedContextKeyService;\n\n\tconstructor(\n\t\tprivate readonly _container: HTMLElement,\n\t\tprivate readonly _overflowWidgetsDomNode: HTMLElement,\n\t\tprivate readonly _workbenchUIElementFactory: IWorkbenchUIElementFactory,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextKeyService _parentContextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\t\tthis._viewModel = observableValue<DocumentDiffItemViewModel | undefined>(this, undefined);\n\t\tthis._collapsed = derived(this, reader => this._viewModel.read(reader)?.collapsed.read(reader));\n\t\tthis._editorContentHeight = observableValue<number>(this, 500);\n\t\tthis.contentHeight = derived(this, reader => {\n\t\t\tconst h = this._collapsed.read(reader) ? 0 : this._editorContentHeight.read(reader);\n\t\t\treturn h + this._outerEditorHeight;\n\t\t});\n\t\tthis._modifiedContentWidth = observableValue<number>(this, 0);\n\t\tthis._modifiedWidth = observableValue<number>(this, 0);\n\t\tthis._originalContentWidth = observableValue<number>(this, 0);\n\t\tthis._originalWidth = observableValue<number>(this, 0);\n\t\tthis.maxScroll = derived(this, reader => {\n\t\t\tconst scroll1 = this._modifiedContentWidth.read(reader) - this._modifiedWidth.read(reader);\n\t\t\tconst scroll2 = this._originalContentWidth.read(reader) - this._originalWidth.read(reader);\n\t\t\tif (scroll1 > scroll2) {\n\t\t\t\treturn { maxScroll: scroll1, width: this._modifiedWidth.read(reader) };\n\t\t\t} else {\n\t\t\t\treturn { maxScroll: scroll2, width: this._originalWidth.read(reader) };\n\t\t\t}\n\t\t});\n\t\tthis._elements = h('div.multiDiffEntry', [\n\t\t\th('div.header@header', [\n\t\t\t\th('div.header-content', [\n\t\t\t\t\th('div.collapse-button@collapseButton'),\n\t\t\t\t\th('div.file-path', [\n\t\t\t\t\t\th('div.title.modified.show-file-icons@primaryPath', [] as any),\n\t\t\t\t\t\th('div.status.deleted@status', ['R']),\n\t\t\t\t\t\th('div.title.original.show-file-icons@secondaryPath', [] as any),\n\t\t\t\t\t]),\n\t\t\t\t\th('div.actions@actions'),\n\t\t\t\t]),\n\t\t\t]),\n\n\t\t\th('div.editorParent', [\n\t\t\t\th('div.editorContainer@editor'),\n\t\t\t])\n\t\t]) as Record<string, HTMLElement>;\n\t\tthis.editor = this._register(this._instantiationService.createInstance(DiffEditorWidget, this._elements.editor, {\n\t\t\toverflowWidgetsDomNode: this._overflowWidgetsDomNode,\n\t\t}, {}));\n\t\tthis.isModifedFocused = observableCodeEditor(this.editor.getModifiedEditor()).isFocused;\n\t\tthis.isOriginalFocused = observableCodeEditor(this.editor.getOriginalEditor()).isFocused;\n\t\tthis.isFocused = derived(this, reader => this.isModifedFocused.read(reader) || this.isOriginalFocused.read(reader));\n\t\tthis._resourceLabel = this._workbenchUIElementFactory.createResourceLabel\n\t\t\t? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath))\n\t\t\t: undefined;\n\t\tthis._resourceLabel2 = this._workbenchUIElementFactory.createResourceLabel\n\t\t\t? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath))\n\t\t\t: undefined;\n\t\tthis._dataStore = this._register(new DisposableStore());\n\t\tthis._headerHeight = 40;\n\t\tthis._lastScrollTop = -1;\n\t\tthis._isSettingScrollTop = false;\n\n\t\tconst btn = new Button(this._elements.collapseButton, {});\n\n\t\tthis._register(autorun(reader => {\n\t\t\tbtn.element.className = '';\n\t\t\tbtn.icon = this._collapsed.read(reader) ? Codicon.chevronRight : Codicon.chevronDown;\n\t\t}));\n\t\tthis._register(btn.onDidClick(() => {\n\t\t\tthis._viewModel.get()?.collapsed.set(!this._collapsed.get(), undefined);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tthis._elements.editor.style.display = this._collapsed.read(reader) ? 'none' : 'block';\n\t\t}));\n\n\t\tthis._register(this.editor.getModifiedEditor().onDidLayoutChange(e => {\n\t\t\tconst width = this.editor.getModifiedEditor().getLayoutInfo().contentWidth;\n\t\t\tthis._modifiedWidth.set(width, undefined);\n\t\t}));\n\n\t\tthis._register(this.editor.getOriginalEditor().onDidLayoutChange(e => {\n\t\t\tconst width = this.editor.getOriginalEditor().getLayoutInfo().contentWidth;\n\t\t\tthis._originalWidth.set(width, undefined);\n\t\t}));\n\n\t\tthis._register(this.editor.onDidContentSizeChange(e => {\n\t\t\tglobalTransaction(tx => {\n\t\t\t\tthis._editorContentHeight.set(e.contentHeight, tx);\n\t\t\t\tthis._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(), tx);\n\t\t\t\tthis._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(), tx);\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this.editor.getOriginalEditor().onDidScrollChange(e => {\n\t\t\tif (this._isSettingScrollTop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!e.scrollTopChanged || !this._data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst delta = e.scrollTop - this._lastScrollTop;\n\t\t\tthis._data.deltaScrollVertical(delta);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst isActive = this._viewModel.read(reader)?.isActive.read(reader);\n\t\t\tthis._elements.root.classList.toggle('active', isActive);\n\t\t}));\n\n\t\tthis._container.appendChild(this._elements.root);\n\t\tthis._outerEditorHeight = this._headerHeight;\n\n\t\tthis._contextKeyService = this._register(_parentContextKeyService.createScoped(this._elements.actions));\n\t\tconst instantiationService = this._register(this._instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService])));\n\t\tthis._register(instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.actions, MenuId.MultiDiffEditorFileToolbar, {\n\t\t\tactionRunner: this._register(new ActionRunnerWithContext(() => (this._viewModel.get()?.modifiedUri))),\n\t\t\tmenuOptions: {\n\t\t\t\tshouldForwardArgs: true,\n\t\t\t},\n\t\t\ttoolbarOptions: { primaryGroup: g => g.startsWith('navigation') },\n\t\t\tactionViewItemProvider: (action, options) => createActionViewItem(instantiationService, action, options),\n\t\t}));\n\t}\n\n\tpublic setScrollLeft(left: number): void {\n\t\tif (this._modifiedContentWidth.get() - this._modifiedWidth.get() > this._originalContentWidth.get() - this._originalWidth.get()) {\n\t\t\tthis.editor.getModifiedEditor().setScrollLeft(left);\n\t\t} else {\n\t\t\tthis.editor.getOriginalEditor().setScrollLeft(left);\n\t\t}\n\t}\n\n\tprivate readonly _dataStore;\n\n\tprivate _data: TemplateData | undefined;\n\n\tpublic setData(data: TemplateData | undefined): void {\n\t\tthis._data = data;\n\t\tfunction updateOptions(options: IDiffEditorOptions): IDiffEditorOptions {\n\t\t\treturn {\n\t\t\t\t...options,\n\t\t\t\tscrollBeyondLastLine: false,\n\t\t\t\thideUnchangedRegions: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t},\n\t\t\t\tscrollbar: {\n\t\t\t\t\tvertical: 'hidden',\n\t\t\t\t\thorizontal: 'hidden',\n\t\t\t\t\thandleMouseWheel: false,\n\t\t\t\t\tuseShadows: false,\n\t\t\t\t},\n\t\t\t\trenderOverviewRuler: false,\n\t\t\t\tfixedOverflowWidgets: true,\n\t\t\t\toverviewRulerBorder: false,\n\t\t\t};\n\t\t}\n\n\t\tif (!data) {\n\t\t\tglobalTransaction(tx => {\n\t\t\t\tthis._viewModel.set(undefined, tx);\n\t\t\t\tthis.editor.setDiffModel(null, tx);\n\t\t\t\tthis._dataStore.clear();\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = data.viewModel.documentDiffItem;\n\n\t\tglobalTransaction(tx => {\n\t\t\tthis._resourceLabel?.setUri(data.viewModel.modifiedUri ?? data.viewModel.originalUri!, { strikethrough: data.viewModel.modifiedUri === undefined });\n\n\t\t\tlet isRenamed = false;\n\t\t\tlet isDeleted = false;\n\t\t\tlet isAdded = false;\n\t\t\tlet flag = '';\n\t\t\tif (data.viewModel.modifiedUri && data.viewModel.originalUri && data.viewModel.modifiedUri.path !== data.viewModel.originalUri.path) {\n\t\t\t\tflag = 'R';\n\t\t\t\tisRenamed = true;\n\t\t\t} else if (!data.viewModel.modifiedUri) {\n\t\t\t\tflag = 'D';\n\t\t\t\tisDeleted = true;\n\t\t\t} else if (!data.viewModel.originalUri) {\n\t\t\t\tflag = 'A';\n\t\t\t\tisAdded = true;\n\t\t\t}\n\t\t\tthis._elements.status.classList.toggle('renamed', isRenamed);\n\t\t\tthis._elements.status.classList.toggle('deleted', isDeleted);\n\t\t\tthis._elements.status.classList.toggle('added', isAdded);\n\t\t\tthis._elements.status.innerText = flag;\n\n\t\t\tthis._resourceLabel2?.setUri(isRenamed ? data.viewModel.originalUri : undefined, { strikethrough: true });\n\n\t\t\tthis._dataStore.clear();\n\t\t\tthis._viewModel.set(data.viewModel, tx);\n\t\t\tthis.editor.setDiffModel(data.viewModel.diffEditorViewModelRef, tx);\n\t\t\tthis.editor.updateOptions(updateOptions(value.options ?? {}));\n\t\t});\n\t\tif (value.onOptionsDidChange) {\n\t\t\tthis._dataStore.add(value.onOptionsDidChange(() => {\n\t\t\t\tthis.editor.updateOptions(updateOptions(value.options ?? {}));\n\t\t\t}));\n\t\t}\n\t\tdata.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore, value => {\n\t\t\tif (!value) {\n\t\t\t\tthis.setData(undefined);\n\t\t\t}\n\t\t});\n\n\t\tif (data.viewModel.documentDiffItem.contextKeys) {\n\t\t\tfor (const [key, value] of Object.entries(data.viewModel.documentDiffItem.contextKeys)) {\n\t\t\t\tthis._contextKeyService.createKey(key, value);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate readonly _headerHeight;\n\n\tprivate _lastScrollTop;\n\tprivate _isSettingScrollTop;\n\n\tpublic render(verticalRange: OffsetRange, width: number, editorScroll: number, viewPort: OffsetRange): void {\n\t\tthis._elements.root.style.visibility = 'visible';\n\t\tthis._elements.root.style.top = `${verticalRange.start}px`;\n\t\tthis._elements.root.style.height = `${verticalRange.length}px`;\n\t\tthis._elements.root.style.width = `${width}px`;\n\t\tthis._elements.root.style.position = 'absolute';\n\n\t\t// For sticky scroll\n\t\tconst maxDelta = verticalRange.length - this._headerHeight;\n\t\tconst delta = Math.max(0, Math.min(viewPort.start - verticalRange.start, maxDelta));\n\t\tthis._elements.header.style.transform = `translateY(${delta}px)`;\n\n\t\tglobalTransaction(tx => {\n\t\t\tthis.editor.layout({\n\t\t\t\twidth: width - 2 * 8 - 2 * 1,\n\t\t\t\theight: verticalRange.length - this._outerEditorHeight,\n\t\t\t});\n\t\t});\n\t\ttry {\n\t\t\tthis._isSettingScrollTop = true;\n\t\t\tthis._lastScrollTop = editorScroll;\n\t\t\tthis.editor.getOriginalEditor().setScrollTop(editorScroll);\n\t\t} finally {\n\t\t\tthis._isSettingScrollTop = false;\n\t\t}\n\n\t\tthis._elements.header.classList.toggle('shadow', delta > 0 || editorScroll > 0);\n\t\tthis._elements.header.classList.toggle('collapsed', delta === maxDelta);\n\t}\n\n\tpublic hide(): void {\n\t\tthis._elements.root.style.top = `-100000px`;\n\t\tthis._elements.root.style.visibility = 'hidden'; // Some editor parts are still visible\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8847, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/objectPool.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/multiDiffEditor/objectPool.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/vs/editor/browser/widget/multiDiffEditor/objectPool.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IDisposable, IReference } from '../../../../base/common/lifecycle.js';\n\nexport class ObjectPool<TData extends IObjectData, T extends IPooledObject<TData>> implements IDisposable {\n\tprivate readonly _unused = new Set<T>();\n\tprivate readonly _used = new Set<T>();\n\tprivate readonly _itemData = new Map<T, TData>();\n\n\tconstructor(\n\t\tprivate readonly _create: (data: TData) => T,\n\t) { }\n\n\tpublic getUnusedObj(data: TData): IReference<T> {\n\t\tlet obj: T;\n\n\t\tif (this._unused.size === 0) {\n\t\t\tobj = this._create(data);\n\t\t\tthis._itemData.set(obj, data);\n\t\t} else {\n\t\t\tconst values = [...this._unused.values()];\n\t\t\tobj = values.find(obj => this._itemData.get(obj)!.getId() === data.getId()) ?? values[0];\n\t\t\tthis._unused.delete(obj);\n\t\t\tthis._itemData.set(obj, data);\n\t\t\tobj.setData(data);\n\t\t}\n\t\tthis._used.add(obj);\n\t\treturn {\n\t\t\tobject: obj,\n\t\t\tdispose: () => {\n\t\t\t\tthis._used.delete(obj);\n\t\t\t\tif (this._unused.size > 5) {\n\t\t\t\t\tobj.dispose();\n\t\t\t\t} else {\n\t\t\t\t\tthis._unused.add(obj);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tdispose(): void {\n\t\tfor (const obj of this._used) {\n\t\t\tobj.dispose();\n\t\t}\n\t\tfor (const obj of this._unused) {\n\t\t\tobj.dispose();\n\t\t}\n\t\tthis._used.clear();\n\t\tthis._unused.clear();\n\t}\n}\n\nexport interface IObjectData {\n\tgetId(): unknown;\n}\n\nexport interface IPooledObject<TData> extends IDisposable {\n\tsetData(data: TData): void;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IDisposable, IReference } from '../../../../base/common/lifecycle.js';\n\nexport class ObjectPool<TData extends IObjectData, T extends IPooledObject<TData>> implements IDisposable {\n\tprivate readonly _unused = new Set<T>();\n\tprivate readonly _used = new Set<T>();\n\tprivate readonly _itemData = new Map<T, TData>();\n\n\tconstructor(\n\t\tprivate readonly _create: (data: TData) => T,\n\t) { }\n\n\tpublic getUnusedObj(data: TData): IReference<T> {\n\t\tlet obj: T;\n\n\t\tif (this._unused.size === 0) {\n\t\t\tobj = this._create(data);\n\t\t\tthis._itemData.set(obj, data);\n\t\t} else {\n\t\t\tconst values = [...this._unused.values()];\n\t\t\tobj = values.find(obj => this._itemData.get(obj)!.getId() === data.getId()) ?? values[0];\n\t\t\tthis._unused.delete(obj);\n\t\t\tthis._itemData.set(obj, data);\n\t\t\tobj.setData(data);\n\t\t}\n\t\tthis._used.add(obj);\n\t\treturn {\n\t\t\tobject: obj,\n\t\t\tdispose: () => {\n\t\t\t\tthis._used.delete(obj);\n\t\t\t\tif (this._unused.size > 5) {\n\t\t\t\t\tobj.dispose();\n\t\t\t\t} else {\n\t\t\t\t\tthis._unused.add(obj);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tdispose(): void {\n\t\tfor (const obj of this._used) {\n\t\t\tobj.dispose();\n\t\t}\n\t\tfor (const obj of this._unused) {\n\t\t\tobj.dispose();\n\t\t}\n\t\tthis._used.clear();\n\t\tthis._unused.clear();\n\t}\n}\n\nexport interface IObjectData {\n\tgetId(): unknown;\n}\n\nexport interface IPooledObject<TData> extends IDisposable {\n\tsetData(data: TData): void;\n}\n"],"names":[],"mappings":";;;;AAMM,MAAO,UAAU;IAKtB,YACkB,OAA2B,CAAA;QAA3B,IAAA,CAAA,OAAO,GAAP,OAAO,CAAoB;QAL5B,IAAA,CAAA,OAAO,GAAG,IAAI,GAAG,EAAK,CAAC;QACvB,IAAA,CAAA,KAAK,GAAG,IAAI,GAAG,EAAK,CAAC;QACrB,IAAA,CAAA,SAAS,GAAG,IAAI,GAAG,EAAY,CAAC;IAI7C,CAAC;IAEE,YAAY,CAAC,IAAW,EAAA;QAC9B,IAAI,GAAM,CAAC;QAEX,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC;YAC7B,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACzB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAC/B,CAAC,MAAM,CAAC;YACP,MAAM,MAAM,GAAG,CAAC;mBAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;aAAC,CAAC;YAC1C,GAAG,GAAG,MAAM,CAAC,IAAI,EAAC,GAAG,CAAC,EAAE,AAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAE,CAAC,KAAK,EAAE,KAAK,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC;YACzF,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACzB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;YAC9B,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACnB,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACpB,OAAO;YACN,MAAM,EAAE,GAAG;YACX,OAAO,EAAE,GAAG,EAAE;gBACb,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACvB,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC;oBAC3B,GAAG,CAAC,OAAO,EAAE,CAAC;gBACf,CAAC,MAAM,CAAC;oBACP,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACvB,CAAC;YACF,CAAC;SACD,CAAC;IACH,CAAC;IAED,OAAO,GAAA;QACN,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,KAAK,CAAE,CAAC;YAC9B,GAAG,CAAC,OAAO,EAAE,CAAC;QACf,CAAC;QACD,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,OAAO,CAAE,CAAC;YAChC,GAAG,CAAC,OAAO,EAAE,CAAC;QACf,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;IACtB,CAAC;CACD","debugId":null}},
    {"offset": {"line": 8900, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/multiDiffEditorWidgetImpl.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/vs/editor/browser/widget/multiDiffEditor/multiDiffEditorWidgetImpl.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Dimension, getWindow, h, scheduleAtNextAnimationFrame } from '../../../../base/browser/dom.js';\nimport { SmoothScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { compareBy, numberComparator } from '../../../../base/common/arrays.js';\nimport { findFirstMax } from '../../../../base/common/arraysFind.js';\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nimport { Disposable, IReference, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IObservable, IReader, ITransaction, autorun, autorunWithStore, derived, disposableObservableValue, globalTransaction, observableFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { Scrollable, ScrollbarVisibility } from '../../../../base/common/scrollable.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyValue, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { OffsetRange } from '../../../common/core/ranges/offsetRange.js';\nimport { ISelection, Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ObservableElementSizeObserver } from '../diffEditor/utils.js';\nimport { DiffEditorItemTemplate, TemplateData } from './diffEditorItemTemplate.js';\nimport { DocumentDiffItemViewModel, MultiDiffEditorViewModel } from './multiDiffEditorViewModel.js';\nimport { ObjectPool } from './objectPool.js';\nimport './style.css';\nimport { IWorkbenchUIElementFactory } from './workbenchUIElementFactory.js';\n\nexport class MultiDiffEditorWidgetImpl extends Disposable {\n\tprivate readonly _scrollableElements;\n\n\tprivate readonly _scrollable;\n\n\tprivate readonly _scrollableElement;\n\n\tprivate readonly _elements;\n\n\tprivate readonly _sizeObserver;\n\n\tprivate readonly _objectPool;\n\n\tpublic readonly scrollTop;\n\tpublic readonly scrollLeft;\n\n\tprivate readonly _viewItemsInfo;\n\n\tprivate readonly _viewItems;\n\n\tprivate readonly _spaceBetweenPx;\n\n\tprivate readonly _totalHeight;\n\tpublic readonly activeControl;\n\n\tprivate readonly _contextKeyService;\n\tprivate readonly _instantiationService;\n\n\tconstructor(\n\t\tprivate readonly _element: HTMLElement,\n\t\tprivate readonly _dimension: IObservable<Dimension | undefined>,\n\t\tprivate readonly _viewModel: IObservable<MultiDiffEditorViewModel | undefined>,\n\t\tprivate readonly _workbenchUIElementFactory: IWorkbenchUIElementFactory,\n\t\t@IContextKeyService private readonly _parentContextKeyService: IContextKeyService,\n\t\t@IInstantiationService private readonly _parentInstantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t\tthis._scrollableElements = h('div.scrollContent', [\n\t\t\th('div@content', {\n\t\t\t\tstyle: {\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t}\n\t\t\t}),\n\t\t\th('div.monaco-editor@overflowWidgetsDomNode', {\n\t\t\t}),\n\t\t]);\n\t\tthis._scrollable = this._register(new Scrollable({\n\t\t\tforceIntegerValues: false,\n\t\t\tscheduleAtNextAnimationFrame: (cb) => scheduleAtNextAnimationFrame(getWindow(this._element), cb),\n\t\t\tsmoothScrollDuration: 100,\n\t\t}));\n\t\tthis._scrollableElement = this._register(new SmoothScrollableElement(this._scrollableElements.root, {\n\t\t\tvertical: ScrollbarVisibility.Auto,\n\t\t\thorizontal: ScrollbarVisibility.Auto,\n\t\t\tuseShadows: false,\n\t\t}, this._scrollable));\n\t\tthis._elements = h('div.monaco-component.multiDiffEditor', {}, [\n\t\t\th('div', {}, [this._scrollableElement.getDomNode()]),\n\t\t\th('div.placeholder@placeholder', {}, [h('div')]),\n\t\t]);\n\t\tthis._sizeObserver = this._register(new ObservableElementSizeObserver(this._element, undefined));\n\t\tthis._objectPool = this._register(new ObjectPool<TemplateData, DiffEditorItemTemplate>((data) => {\n\t\t\tconst template = this._instantiationService.createInstance(\n\t\t\t\tDiffEditorItemTemplate,\n\t\t\t\tthis._scrollableElements.content,\n\t\t\t\tthis._scrollableElements.overflowWidgetsDomNode,\n\t\t\t\tthis._workbenchUIElementFactory\n\t\t\t);\n\t\t\ttemplate.setData(data);\n\t\t\treturn template;\n\t\t}));\n\t\tthis.scrollTop = observableFromEvent(this, this._scrollableElement.onScroll, () => /** @description scrollTop */ this._scrollableElement.getScrollPosition().scrollTop);\n\t\tthis.scrollLeft = observableFromEvent(this, this._scrollableElement.onScroll, () => /** @description scrollLeft */ this._scrollableElement.getScrollPosition().scrollLeft);\n\t\tthis._viewItemsInfo = derived<{ items: readonly VirtualizedViewItem[]; getItem: (viewModel: DocumentDiffItemViewModel) => VirtualizedViewItem }>(this,\n\t\t\t(reader) => {\n\t\t\t\tconst vm = this._viewModel.read(reader);\n\t\t\t\tif (!vm) {\n\t\t\t\t\treturn { items: [], getItem: _d => { throw new BugIndicatingError(); } };\n\t\t\t\t}\n\t\t\t\tconst viewModels = vm.items.read(reader);\n\t\t\t\tconst map = new Map<DocumentDiffItemViewModel, VirtualizedViewItem>();\n\t\t\t\tconst items = viewModels.map(d => {\n\t\t\t\t\tconst item = reader.store.add(new VirtualizedViewItem(d, this._objectPool, this.scrollLeft, delta => {\n\t\t\t\t\t\tthis._scrollableElement.setScrollPosition({ scrollTop: this._scrollableElement.getScrollPosition().scrollTop + delta });\n\t\t\t\t\t}));\n\t\t\t\t\tconst data = this._lastDocStates?.[item.getKey()];\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\ttransaction(tx => {\n\t\t\t\t\t\t\titem.setViewState(data, tx);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tmap.set(d, item);\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\treturn { items, getItem: d => map.get(d)! };\n\t\t\t}\n\t\t);\n\t\tthis._viewItems = this._viewItemsInfo.map(this, items => items.items);\n\t\tthis._spaceBetweenPx = 0;\n\t\tthis._totalHeight = this._viewItems.map(this, (items, reader) => items.reduce((r, i) => r + i.contentHeight.read(reader) + this._spaceBetweenPx, 0));\n\t\tthis.activeControl = derived(this, reader => {\n\t\t\tconst activeDiffItem = this._viewModel.read(reader)?.activeDiffItem.read(reader);\n\t\t\tif (!activeDiffItem) { return undefined; }\n\t\t\tconst viewItem = this._viewItemsInfo.read(reader).getItem(activeDiffItem);\n\t\t\treturn viewItem.template.read(reader)?.editor;\n\t\t});\n\t\tthis._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._element));\n\t\tthis._instantiationService = this._register(this._parentInstantiationService.createChild(\n\t\t\tnew ServiceCollection([IContextKeyService, this._contextKeyService])\n\t\t));\n\t\tthis._lastDocStates = {};\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tconst viewModel = this._viewModel.read(reader);\n\t\t\tif (viewModel && viewModel.contextKeys) {\n\t\t\t\tfor (const [key, value] of Object.entries(viewModel.contextKeys)) {\n\t\t\t\t\tconst contextKey = this._contextKeyService.createKey<ContextKeyValue>(key, undefined);\n\t\t\t\t\tcontextKey.set(value);\n\t\t\t\t\tstore.add(toDisposable(() => contextKey.reset()));\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tconst ctxAllCollapsed = this._parentContextKeyService.createKey<boolean>(EditorContextKeys.multiDiffEditorAllCollapsed.key, false);\n\t\tthis._register(autorun((reader) => {\n\t\t\tconst viewModel = this._viewModel.read(reader);\n\t\t\tif (viewModel) {\n\t\t\t\tconst allCollapsed = viewModel.items.read(reader).every(item => item.collapsed.read(reader));\n\t\t\t\tctxAllCollapsed.set(allCollapsed);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun((reader) => {\n\t\t\t/** @description Update widget dimension */\n\t\t\tconst dimension = this._dimension.read(reader);\n\t\t\tthis._sizeObserver.observe(dimension);\n\t\t}));\n\n\t\tconst placeholderMessage = derived(reader => {\n\t\t\tconst items = this._viewItems.read(reader);\n\t\t\tif (items.length > 0) { return undefined; }\n\n\t\t\tconst vm = this._viewModel.read(reader);\n\t\t\treturn (!vm || vm.isLoading.read(reader))\n\t\t\t\t? localize('loading', 'Loading...')\n\t\t\t\t: localize('noChangedFiles', 'No Changed Files');\n\t\t});\n\n\t\tthis._register(autorun((reader) => {\n\t\t\tconst message = placeholderMessage.read(reader);\n\t\t\tthis._elements.placeholder.innerText = message ?? '';\n\t\t\tthis._elements.placeholder.classList.toggle('visible', !!message);\n\t\t}));\n\n\t\tthis._scrollableElements.content.style.position = 'relative';\n\n\t\tthis._register(autorun((reader) => {\n\t\t\t/** @description Update scroll dimensions */\n\t\t\tconst height = this._sizeObserver.height.read(reader);\n\t\t\tthis._scrollableElements.root.style.height = `${height}px`;\n\t\t\tconst totalHeight = this._totalHeight.read(reader);\n\t\t\tthis._scrollableElements.content.style.height = `${totalHeight}px`;\n\n\t\t\tconst width = this._sizeObserver.width.read(reader);\n\n\t\t\tlet scrollWidth = width;\n\t\t\tconst viewItems = this._viewItems.read(reader);\n\t\t\tconst max = findFirstMax(viewItems, compareBy(i => i.maxScroll.read(reader).maxScroll, numberComparator));\n\t\t\tif (max) {\n\t\t\t\tconst maxScroll = max.maxScroll.read(reader);\n\t\t\t\tscrollWidth = width + maxScroll.maxScroll;\n\t\t\t}\n\n\t\t\tthis._scrollableElement.setScrollDimensions({\n\t\t\t\twidth: width,\n\t\t\t\theight: height,\n\t\t\t\tscrollHeight: totalHeight,\n\t\t\t\tscrollWidth,\n\t\t\t});\n\t\t}));\n\n\t\t_element.replaceChildren(this._elements.root);\n\t\tthis._register(toDisposable(() => {\n\t\t\t_element.replaceChildren();\n\t\t}));\n\n\t\tthis._register(this._register(autorun(reader => {\n\t\t\t/** @description Render all */\n\t\t\tglobalTransaction(tx => {\n\t\t\t\tthis.render(reader);\n\t\t\t});\n\t\t})));\n\t}\n\n\t/** This accounts for documents that are not loaded yet. */\n\tprivate _lastDocStates: IMultiDiffEditorViewState['docStates'];\n\n\tprivate render(reader: IReader | undefined) {\n\t\tconst scrollTop = this.scrollTop.read(reader);\n\t\tlet contentScrollOffsetToScrollOffset = 0;\n\t\tlet itemHeightSumBefore = 0;\n\t\tlet itemContentHeightSumBefore = 0;\n\t\tconst viewPortHeight = this._sizeObserver.height.read(reader);\n\t\tconst contentViewPort = OffsetRange.ofStartAndLength(scrollTop, viewPortHeight);\n\n\t\tconst width = this._sizeObserver.width.read(reader);\n\n\t\tfor (const v of this._viewItems.read(reader)) {\n\t\t\tconst itemContentHeight = v.contentHeight.read(reader);\n\t\t\tconst itemHeight = Math.min(itemContentHeight, viewPortHeight);\n\t\t\tconst itemRange = OffsetRange.ofStartAndLength(itemHeightSumBefore, itemHeight);\n\t\t\tconst itemContentRange = OffsetRange.ofStartAndLength(itemContentHeightSumBefore, itemContentHeight);\n\n\t\t\tif (itemContentRange.isBefore(contentViewPort)) {\n\t\t\t\tcontentScrollOffsetToScrollOffset -= itemContentHeight - itemHeight;\n\t\t\t\tv.hide();\n\t\t\t} else if (itemContentRange.isAfter(contentViewPort)) {\n\t\t\t\tv.hide();\n\t\t\t} else {\n\t\t\t\tconst scroll = Math.max(0, Math.min(contentViewPort.start - itemContentRange.start, itemContentHeight - itemHeight));\n\t\t\t\tcontentScrollOffsetToScrollOffset -= scroll;\n\t\t\t\tconst viewPort = OffsetRange.ofStartAndLength(scrollTop + contentScrollOffsetToScrollOffset, viewPortHeight);\n\t\t\t\tv.render(itemRange, scroll, width, viewPort);\n\t\t\t}\n\n\t\t\titemHeightSumBefore += itemHeight + this._spaceBetweenPx;\n\t\t\titemContentHeightSumBefore += itemContentHeight + this._spaceBetweenPx;\n\t\t}\n\n\t\tthis._scrollableElements.content.style.transform = `translateY(${-(scrollTop + contentScrollOffsetToScrollOffset)}px)`;\n\t}\n}\n\nexport interface IMultiDiffEditorViewState {\n\tdocStates?: Record<string, IMultiDiffDocState>;\n}\n\ninterface IMultiDiffDocState {\n\tcollapsed: boolean;\n\tselections?: ISelection[];\n}\n\nclass VirtualizedViewItem extends Disposable {\n\tprivate readonly _templateRef = this._register(disposableObservableValue<IReference<DiffEditorItemTemplate> | undefined>(this, undefined));\n\n\tpublic readonly contentHeight = derived(this, reader =>\n\t\tthis._templateRef.read(reader)?.object.contentHeight?.read(reader) ?? this.viewModel.lastTemplateData.read(reader).contentHeight\n\t);\n\n\tpublic readonly maxScroll = derived(this, reader => this._templateRef.read(reader)?.object.maxScroll.read(reader) ?? { maxScroll: 0, scrollWidth: 0 });\n\n\tpublic readonly template = derived(this, reader => this._templateRef.read(reader)?.object);\n\tprivate _isHidden = observableValue(this, false);\n\n\tprivate readonly _isFocused = derived(this, reader => this.template.read(reader)?.isFocused.read(reader) ?? false);\n\n\tconstructor(\n\t\tpublic readonly viewModel: DocumentDiffItemViewModel,\n\t\tprivate readonly _objectPool: ObjectPool<TemplateData, DiffEditorItemTemplate>,\n\t\tprivate readonly _scrollLeft: IObservable<number>,\n\t\tprivate readonly _deltaScrollVertical: (delta: number) => void,\n\t) {\n\t\tsuper();\n\n\t\tthis.viewModel.setIsFocused(this._isFocused, undefined);\n\n\t\tthis._register(autorun((reader) => {\n\t\t\tconst scrollLeft = this._scrollLeft.read(reader);\n\t\t\tthis._templateRef.read(reader)?.object.setScrollLeft(scrollLeft);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst ref = this._templateRef.read(reader);\n\t\t\tif (!ref) { return; }\n\t\t\tconst isHidden = this._isHidden.read(reader);\n\t\t\tif (!isHidden) { return; }\n\n\t\t\tconst isFocused = ref.object.isFocused.read(reader);\n\t\t\tif (isFocused) { return; }\n\n\t\t\tthis._clear();\n\t\t}));\n\t}\n\n\toverride dispose(): void {\n\t\tthis._clear();\n\t\tsuper.dispose();\n\t}\n\n\tpublic override toString(): string {\n\t\treturn `VirtualViewItem(${this.viewModel.documentDiffItem.modified?.uri.toString()})`;\n\t}\n\n\tpublic getKey(): string {\n\t\treturn this.viewModel.getKey();\n\t}\n\n\tpublic setViewState(viewState: IMultiDiffDocState, tx: ITransaction): void {\n\t\tthis.viewModel.collapsed.set(viewState.collapsed, tx);\n\n\t\tthis._updateTemplateData(tx);\n\t\tconst data = this.viewModel.lastTemplateData.get();\n\t\tconst selections = viewState.selections?.map(Selection.liftSelection);\n\t\tthis.viewModel.lastTemplateData.set({\n\t\t\t...data,\n\t\t\tselections,\n\t\t}, tx);\n\t\tconst ref = this._templateRef.get();\n\t\tif (ref) {\n\t\t\tif (selections) {\n\t\t\t\tref.object.editor.setSelections(selections);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _updateTemplateData(tx: ITransaction): void {\n\t\tconst ref = this._templateRef.get();\n\t\tif (!ref) { return; }\n\t\tthis.viewModel.lastTemplateData.set({\n\t\t\tcontentHeight: ref.object.contentHeight.get(),\n\t\t\tselections: ref.object.editor.getSelections() ?? undefined,\n\t\t}, tx);\n\t}\n\n\tprivate _clear(): void {\n\t\tconst ref = this._templateRef.get();\n\t\tif (!ref) { return; }\n\t\ttransaction(tx => {\n\t\t\tthis._updateTemplateData(tx);\n\t\t\tref.object.hide();\n\t\t\tthis._templateRef.set(undefined, tx);\n\t\t});\n\t}\n\n\tpublic hide(): void {\n\t\tthis._isHidden.set(true, undefined);\n\t}\n\n\tpublic render(verticalSpace: OffsetRange, offset: number, width: number, viewPort: OffsetRange): void {\n\t\tthis._isHidden.set(false, undefined);\n\n\t\tlet ref = this._templateRef.get();\n\t\tif (!ref) {\n\t\t\tref = this._objectPool.getUnusedObj(new TemplateData(this.viewModel, this._deltaScrollVertical));\n\t\t\tthis._templateRef.set(ref, undefined);\n\n\t\t\tconst selections = this.viewModel.lastTemplateData.get().selections;\n\t\t\tif (selections) {\n\t\t\t\tref.object.editor.setSelections(selections);\n\t\t\t}\n\t\t}\n\t\tref.object.render(verticalSpace, width, offset, viewPort);\n\t}\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9254, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/multiDiffEditorWidget.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sources":["file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/file%3A/mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/multiDiffEditor/multiDiffEditorWidget.ts","file:///Users/liza/Desktop/FrontReady/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/vs/editor/browser/widget/multiDiffEditor/multiDiffEditorWidget.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Dimension } from '../../../../base/browser/dom.js';\nimport { readHotReloadableExport } from '../../../../base/common/hotReloadHelpers.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { derived, observableValue, recomputeInitiallyAndOnChange } from '../../../../base/common/observable.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport './colors.js';\nimport { DiffEditorItemTemplate } from './diffEditorItemTemplate.js';\nimport { MultiDiffEditorViewModel } from './multiDiffEditorViewModel.js';\nimport { MultiDiffEditorWidgetImpl } from './multiDiffEditorWidgetImpl.js';\nimport { IWorkbenchUIElementFactory } from './workbenchUIElementFactory.js';\n\nexport class MultiDiffEditorWidget extends Disposable {\n\tprivate readonly _dimension = observableValue<Dimension | undefined>(this, undefined);\n\tprivate readonly _viewModel = observableValue<MultiDiffEditorViewModel | undefined>(this, undefined);\n\n\tprivate readonly _widgetImpl = derived(this, (reader) => {\n\t\treadHotReloadableExport(DiffEditorItemTemplate, reader);\n\t\treturn reader.store.add(this._instantiationService.createInstance((\n\t\t\treadHotReloadableExport(MultiDiffEditorWidgetImpl, reader)),\n\t\t\tthis._element,\n\t\t\tthis._dimension,\n\t\t\tthis._viewModel,\n\t\t\tthis._workbenchUIElementFactory,\n\t\t));\n\t});\n\n\tconstructor(\n\t\tprivate readonly _element: HTMLElement,\n\t\tprivate readonly _workbenchUIElementFactory: IWorkbenchUIElementFactory,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(recomputeInitiallyAndOnChange(this._widgetImpl));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Dimension } from '../../../../base/browser/dom.js';\nimport { readHotReloadableExport } from '../../../../base/common/hotReloadHelpers.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { derived, observableValue, recomputeInitiallyAndOnChange } from '../../../../base/common/observable.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport './colors.js';\nimport { DiffEditorItemTemplate } from './diffEditorItemTemplate.js';\nimport { MultiDiffEditorViewModel } from './multiDiffEditorViewModel.js';\nimport { MultiDiffEditorWidgetImpl } from './multiDiffEditorWidgetImpl.js';\nimport { IWorkbenchUIElementFactory } from './workbenchUIElementFactory.js';\n\nexport class MultiDiffEditorWidget extends Disposable {\n\tprivate readonly _dimension = observableValue<Dimension | undefined>(this, undefined);\n\tprivate readonly _viewModel = observableValue<MultiDiffEditorViewModel | undefined>(this, undefined);\n\n\tprivate readonly _widgetImpl = derived(this, (reader) => {\n\t\treadHotReloadableExport(DiffEditorItemTemplate, reader);\n\t\treturn reader.store.add(this._instantiationService.createInstance((\n\t\t\treadHotReloadableExport(MultiDiffEditorWidgetImpl, reader)),\n\t\t\tthis._element,\n\t\t\tthis._dimension,\n\t\t\tthis._viewModel,\n\t\t\tthis._workbenchUIElementFactory,\n\t\t));\n\t});\n\n\tconstructor(\n\t\tprivate readonly _element: HTMLElement,\n\t\tprivate readonly _workbenchUIElementFactory: IWorkbenchUIElementFactory,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(recomputeInitiallyAndOnChange(this._widgetImpl));\n\t}\n}\n"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;AAGhG,OAAO,EAAE,uBAAuB,EAAE,MAAM,6CAA6C,CAAC;AACtF,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;;AAClE,OAAO,EAAE,OAAO,EAAE,eAAe,EAAE,6BAA6B,EAAE,MAAM,uCAAuC,CAAC;AAChH,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,aAAa,CAAC;AACrB,OAAO,EAAE,sBAAsB,EAAE,MAAM,6BAA6B,CAAC;AAErE,OAAO,EAAE,yBAAyB,EAAE,MAAM,gCAAgC,CAAC;;;;;;;;;;;;;;;;;;;AAGpE,IAAM,qBAAqB,GAA3B,MAAM,qBAAsB,SAAQ,0LAAU;IAepD,YACkB,QAAqB,EACrB,0BAAsD,EAChD,qBAA6D,CAAA;QAEpF,KAAK,EAAE,CAAC;QAJS,IAAA,CAAA,QAAQ,GAAR,QAAQ,CAAa;QACrB,IAAA,CAAA,0BAA0B,GAA1B,0BAA0B,CAA4B;QAC/B,IAAA,CAAA,qBAAqB,GAArB,qBAAqB,CAAuB;QAjBpE,IAAA,CAAA,UAAU,OAAG,iNAAe,EAAwB,IAAI,EAAE,SAAS,CAAC,CAAC;QACrE,IAAA,CAAA,UAAU,OAAG,iNAAe,EAAuC,IAAI,EAAE,SAAS,CAAC,CAAC;QAEpF,IAAA,CAAA,WAAW,OAAG,yMAAO,EAAC,IAAI,EAAE,CAAC,MAAM,EAAE,EAAE;gBACvD,8MAAuB,EAAC,mPAAsB,EAAE,MAAM,CAAC,CAAC;YACxD,OAAO,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,IACjE,8MAAuB,EAAC,yPAAyB,EAAE,MAAM,CAAC,CAAC,CAC3D,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,0BAA0B,CAC/B,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QASF,IAAI,CAAC,SAAS,KAAC,+NAA6B,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;IACjE,CAAC;CACD,CAAA;AAxBY,qBAAqB,GAAA,WAAA;IAkB/B,QAAA,GAAA,8NAAqB,CAAA;GAlBX,qBAAqB,CAwBjC","debugId":null}}]
}