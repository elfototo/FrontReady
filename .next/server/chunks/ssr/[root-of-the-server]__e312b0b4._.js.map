{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/liza/Desktop/FrontReady/src/app/components/codeEditor.tsx"],"sourcesContent":["\"use client\";\nimport Editor, { DiffEditor, useMonaco, loader } from \"@monaco-editor/react\";\nimport { useEffect, useState } from \"react\";\nimport { TbWashDrycleanOff } from \"react-icons/tb\";\nimport github from \"monaco-themes/themes/GitHub.json\";\nimport monokai from \"monaco-themes/themes/Monokai.json\";\nimport dracula from \"monaco-themes/themes/Dracula.json\";\nimport solarizedDark from \"monaco-themes/themes/Solarized-dark.json\";\nimport solarizedLight from \"monaco-themes/themes/Solarized-light.json\";\nimport cobalt from \"monaco-themes/themes/Cobalt.json\";\nimport tomorrowNight from \"monaco-themes/themes/Tomorrow-Night.json\";\nimport type { editor } from \"monaco-editor\";\nimport * as monaco from \"monaco-editor\";\n\nconst themes: Record<string, editor.IStandaloneThemeData> = {\n  github: github as editor.IStandaloneThemeData,\n  monokai: monokai as editor.IStandaloneThemeData,\n  dracula: dracula as editor.IStandaloneThemeData,\n  \"solarized-dark\": solarizedDark as editor.IStandaloneThemeData,\n  \"solarized-light\": solarizedLight as editor.IStandaloneThemeData,\n  cobalt: cobalt as editor.IStandaloneThemeData,\n  \"tomorrow-night\": tomorrowNight as editor.IStandaloneThemeData,\n};\n\ntype Language = \"index.html\" | \"styles.css\" | \"App.js\";\n\ntype Test = {\n  description: string;\n  query: string;\n  clicks?: number;\n  expectText?: string;\n  type?: string; // вместо литералов\n};\n\ntype Exercise = {\n  id: number;\n  theme: string;\n  title: string;\n  dificult: string;\n  time: string;\n  note: string;\n  requirements: string;\n  html: string;\n  app: string;\n  css: string;\n  tests: Test[];\n  [key: string]: unknown;\n};\n\nexport default function CodeEditor({\n  code,\n  exercise,\n  setCode,\n  onChange,\n}: {\n  code: { [key: string]: string | undefined };\n  exercise: Exercise | undefined;\n  setCode: (code: {\n    \"index.html\": string | undefined;\n    \"styles.css\": string | undefined;\n    \"App.js\": string | undefined;\n  }) => void;\n  onChange: (code: {\n    \"index.html\": string | undefined;\n    \"styles.css\": string | undefined;\n    \"App.js\": string | undefined;\n  }) => void;\n}) {\n  const [theme, setTheme] = useState<string>(\"dracula\");\n  const [activeFile, setActiveFile] = useState<Language>(\"App.js\");\n\n  // темы редактора\n  useEffect(() => {\n    loader.init().then((monacoInstance) => {\n      Object.entries(themes).forEach(([name, themeData]) => {\n        monacoInstance.editor.defineTheme(name, themeData);\n      });\n    });\n  }, []);\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      const saved = localStorage.getItem(\"editorTheme\");\n      if (saved) setTheme(saved);\n    }\n  }, []);\n\n  const handleThemeChange = (newTheme: string) => {\n    setTheme(newTheme);\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(\"editorTheme\", newTheme);\n    }\n  };\n\n  const files: Record<\n    string,\n    { name: string; language: string; value: string | undefined }\n  > = {\n    \"App.js\": {\n      name: \"App.js\",\n      language: \"javascript\",\n      value: code[\"App.js\"] || \"\",\n    },\n    \"styles.css\": {\n      name: \"styles.css\",\n      language: \"css\",\n      value: code[\"styles.css\"] || \"\",\n    },\n    \"index.html\": {\n      name: \"index.html\",\n      language: \"html\",\n      value: code[\"index.html\"] || \"\",\n    },\n  };\n\n  // кнопка сброса\n  function getInitialCode(exercise: Exercise): Record<Language, string> {\n    return {\n      \"index.html\": exercise.html ?? \"\",\n      \"styles.css\": exercise.css ?? \"\",\n      \"App.js\": exercise.app ?? \"\",\n    };\n  }\n\n  const handlerClean = (e: React.MouseEvent<HTMLButtonElement>) => {\n    if (!exercise) return;\n\n    const initial = getInitialCode(exercise);\n\n    // 1. Убираем сохранённое из localStorage\n    localStorage.removeItem(`exercise-${exercise.id}`);\n\n    // 2. Возвращаем код к исходному\n    setCode(initial);\n  };\n\n  const handleCodeChange = (val: string | undefined) => {\n    onChange({\n      \"index.html\":\n        activeFile === \"index.html\" ? val || undefined : code[\"index.html\"],\n      \"styles.css\":\n        activeFile === \"styles.css\" ? val || undefined : code[\"styles.css\"],\n      \"App.js\": activeFile === \"App.js\" ? val || undefined : code[\"App.js\"],\n    });\n  };\n\n  return (\n    <div className=\"shadow-2xl\">\n      <div className=\"flex justify-between flex-wrap\">\n        <div className=\"flex gap-1\">\n          {(Object.keys(files) as Language[]).map((f) => (\n            <button\n              key={f}\n              className=\"p-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700\"\n              disabled={activeFile === f}\n              onClick={() => setActiveFile(f)}\n            >\n              {f}\n            </button>\n          ))}\n        </div>\n        <div className=\"gap-2 flex items-center\">\n          <select\n            value={theme}\n            onChange={(e) => handleThemeChange(e.target.value)}\n            className=\"border rounded p-1 w-48\"\n          >\n            {Object.keys(themes).map((name) => (\n              <option key={name} value={name}>\n                {name}\n              </option>\n            ))}\n          </select>\n\n          <button\n            className=\"text-gray-500 cursor-pointer p-2 bg-gray-100 hover:bg-gray-200 rounded-full\"\n            onClick={handlerClean}\n          >\n            <TbWashDrycleanOff />\n          </button>\n        </div>\n      </div>\n\n      <Editor\n        height=\"70vh\"\n        theme={theme}\n        path={files[activeFile].name}\n        defaultLanguage={files[activeFile].language}\n        defaultValue={files[activeFile].value}\n        value={files[activeFile].value}\n        onChange={handleCodeChange}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///Users/liza/Desktop/FrontReady/src/app/components/brawser.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport * as Babel from \"@babel/standalone\";\nimport debounce from \"lodash.debounce\";\n\nexport default function Brawser({\n  code,\n  setCode,\n}: {\n  code: { [key: string]: string | undefined };\n  setCode: (code: {\n    \"index.html\": string | undefined;\n    \"styles.css\": string | undefined;\n    \"App.js\": string | undefined;\n  }) => void;\n}) {\n  function sanitizeReactCode(source: string): string {\n    return (\n      source\n        // убираем import React или import * as React\n        .replace(/import\\s+(React|.*\\*\\s+as\\s+React).*;\\s*/g, \"\")\n        // убираем import { useState } from 'react';\n        .replace(/import\\s+{[^}]+}\\s+from\\s+['\"][^'\"]+['\"];\\s*/g, \"\")\n        // убираем export default\n        .replace(/export\\s+default\\s+/g, \"\")\n    );\n  }\n\n  const [compiledJS, setCompiledJS] = useState(\"\");\n\n  const run = useMemo(\n    () =>\n      debounce(() => {\n        try {\n          if (code[\"App.js\"]) {\n            const sanitized = sanitizeReactCode(code[\"App.js\"]);\n            const result = Babel.transform(sanitized, {\n              filename: \"file.js\",\n              presets: [\"react\", \"env\"],\n            }).code;\n            setCompiledJS(result || \"\");\n          }\n        } catch (err) {\n          console.error(\"Ошибка компиляции TSX:\", err);\n          setCompiledJS(\"\");\n        }\n      }, 300),\n    [code]\n  );\n\n  useEffect(() => {\n    run(); // используем\n\n    return () => {\n      run.cancel(); // чистим при размонтировании\n    };\n  }, [run]);\n\n  const srcDoc = useMemo(() => {\n    return `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n        <head>\n          <meta charset=\"UTF-8\" />\n          <style>${code[\"styles.css\"]}</style>\n        </head>\n        <body>\n          ${code[\"index.html\"] || \"<div id='root'></div>\"}\n          <script src=\"https://unpkg.com/react@18/umd/react.development.js\"></script>\n          <script src=\"https://unpkg.com/react-dom@18/umd/react-dom.development.js\"></script>\n          <script>\n          const { useState, StrictMode } = React;\n            const { createRoot } = ReactDOM;\n            try {\n              ${compiledJS}\n              if (typeof App !== \"undefined\") {\n                const root = document.getElementById(\"root\");\n                ReactDOM.createRoot(root).render(React.createElement(App));\n              }\n            } catch (e) {\n              document.body.innerHTML += '<pre style=\"color:red\">' + e + '</pre>';\n            }\n          </script>\n        </body>\n      </html>\n    `;\n  }, [code, compiledJS]);\n\n  return (\n    <iframe\n      id=\"preview\"\n      title=\"preview\"\n      srcDoc={srcDoc}\n      sandbox=\"allow-scripts allow-same-origin\"\n      width=\"100%\"\n      height=\"100%\"\n      style={{\n        borderRadius: \"8px\",\n      }}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,QAAQ,EAC9B,IAAI,EACJ,OAAO,EAQR;IACC,SAAS,kBAAkB,MAAc;QACvC,OACE,MACE,6CAA6C;SAC5C,OAAO,CAAC,6CAA6C,GACtD,4CAA4C;SAC3C,OAAO,CAAC,iDAAiD,GAC1D,yBAAyB;SACxB,OAAO,CAAC,wBAAwB;IAEvC;IAEA,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,MAAM,MAAM,IAAA,gNAAO,EACjB,IACE,IAAA,sJAAQ,EAAC;YACP,IAAI;gBACF,IAAI,IAAI,CAAC,SAAS,EAAE;oBAClB,MAAM,YAAY,kBAAkB,IAAI,CAAC,SAAS;oBAClD,MAAM,SAAS,2JAAe,CAAC,WAAW;wBACxC,UAAU;wBACV,SAAS;4BAAC;4BAAS;yBAAM;oBAC3B,GAAG,IAAI;oBACP,cAAc,UAAU;gBAC1B;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,cAAc;YAChB;QACF,GAAG,MACL;QAAC;KAAK;IAGR,IAAA,kNAAS,EAAC;QACR,OAAO,aAAa;QAEpB,OAAO;YACL,IAAI,MAAM,IAAI,6BAA6B;QAC7C;IACF,GAAG;QAAC;KAAI;IAER,MAAM,SAAS,IAAA,gNAAO,EAAC;QACrB,OAAO,CAAC;;;;;iBAKK,EAAE,IAAI,CAAC,aAAa,CAAC;;;UAG5B,EAAE,IAAI,CAAC,aAAa,IAAI,wBAAwB;;;;;;;cAO5C,EAAE,WAAW;;;;;;;;;;;IAWvB,CAAC;IACH,GAAG;QAAC;QAAM;KAAW;IAErB,qBACE,8OAAC;QACC,IAAG;QACH,OAAM;QACN,QAAQ;QACR,SAAQ;QACR,OAAM;QACN,QAAO;QACP,OAAO;YACL,cAAc;QAChB;;;;;;AAGN","debugId":null}},
    {"offset": {"line": 321, "column": 0}, "map": {"version":3,"sources":["file:///Users/liza/Desktop/FrontReady/src/lib/runTests.ts"],"sourcesContent":["export type TestCase = {\n  description: string;\n  query: string;\n  clicks?: number;\n  expectText?: string;\n  type?: \"equals\" | \"increment\" | \"includes\" | \"regex\" | string;\n};\n\nexport type TestResult = {\n  description: string;\n  pass: boolean;\n  expected?: string;\n  actual?: string;\n  reason?: string;\n  error?: string;\n};\n\nexport async function runTests(tests: TestCase[]): Promise<TestResult[]> {\n  console.groupCollapsed(`[runTests] start — ${new Date().toLocaleTimeString()}`);\n  console.log(\"tests:\", JSON.parse(JSON.stringify(tests)));\n\n  // helper\n  const tick = (ms = 50) => new Promise<void>((r) => setTimeout(r, ms));\n  const parseNumberFromText = (text: string): number | null => {\n    const m = text.match(/-?\\d+/);\n    return m ? parseInt(m[0], 10) : null;\n  };\n\n  const iframe = document.getElementById(\"preview\") as HTMLIFrameElement | null;\n  if (!iframe) {\n    console.warn(\"[runTests] iframe #preview не найден — тесты отменены\");\n    console.groupEnd();\n    return [];\n  }\n\n  console.log(\"[runTests] found iframe #preview, waiting short tick for stability...\");\n  await tick(80);\n\n  const doc = iframe.contentDocument || iframe.contentWindow?.document;\n  if (!doc) {\n    console.warn(\"[runTests] iframe.document недоступен — тесты отменены\");\n    console.groupEnd();\n    return [];\n  }\n\n  console.log(\"[runTests] iframe document ready. body length:\", (doc.body?.innerHTML || \"\").length);\n\n  const results: TestResult[] = [];\n\n  for (const t of tests) {\n    console.groupCollapsed(`[test] ${t.description}`);\n    console.log(\"selector:\", t.query, \"clicks:\", t.clicks ?? 0, \"type:\", t.type ?? \"equals\", \"expectText:\", t.expectText);\n\n    const res: TestResult = { description: t.description, pass: false };\n\n    try {\n      const el = doc.querySelector(t.query) as HTMLElement | null;\n      if (!el) {\n        res.reason = \"Элемент не найден\";\n        console.warn(`[test] Элемент не найден по селектору \"${t.query}\"`);\n        // для дебага — небольшая подсказка: первые 300 символов body\n        const snippet = (doc.body?.innerText || \"\").slice(0, 500);\n        console.debug(\"[test] body snippet (start, 500 chars):\", snippet);\n        results.push(res);\n        console.groupEnd();\n        continue;\n      }\n\n      const beforeText = (el.textContent || \"\").trim();\n      console.log(\"[test] beforeText:\", JSON.stringify(beforeText));\n\n      const clicks = t.clicks ?? 0;\n      for (let i = 0; i < clicks; i++) {\n        el.dispatchEvent(new MouseEvent(\"click\", { bubbles: true, cancelable: true }));\n        // даём React обработать setState\n        await tick(25);\n      }\n\n      const afterText = (el.textContent || \"\").trim();\n      console.log(\"[test] afterText:\", JSON.stringify(afterText));\n\n      // обработка типов тестов\n      const type = t.type ?? \"equals\";\n\n      if (type === \"increment\") {\n        const beforeNum = parseNumberFromText(beforeText);\n        const afterNum = parseNumberFromText(afterText);\n        console.log(`[test] parsed numbers before=${String(beforeNum)} after=${String(afterNum)}`);\n\n        if (beforeNum === null || afterNum === null) {\n          res.pass = false;\n          res.reason = `Не удалось распарсить числа (before=\"${beforeText}\", after=\"${afterText}\")`;\n          res.actual = afterText;\n          console.warn(\"[test] fail:\", res.reason);\n        } else {\n          res.expected = String(beforeNum + clicks);\n          res.actual = String(afterNum);\n          res.pass = afterNum === beforeNum + clicks;\n          console.log(`[test] expected numeric after = ${res.expected}, actual = ${res.actual}`);\n        }\n      } else if (type === \"includes\") {\n        const actual = afterText;\n        res.actual = actual;\n        res.expected = t.expectText;\n        res.pass = typeof t.expectText === \"string\" ? actual.includes(t.expectText) : false;\n        console.log(`[test] includes?`, res.pass);\n      } else if (type === \"regex\") {\n        try {\n          const re = new RegExp(t.expectText ?? \"\");\n          const actual = afterText;\n          res.actual = actual;\n          res.expected = String(t.expectText);\n          res.pass = re.test(actual);\n          console.log(`[test] regex test?`, res.pass);\n        } catch (reErr) {\n          res.pass = false;\n          res.error = reErr instanceof Error ? reErr.message : String(reErr);\n          console.error(\"[test] regex error:\", res.error);\n        }\n      } else {\n        // equals (по умолчанию) — сравнение строковое\n        res.expected = t.expectText;\n        res.actual = afterText;\n        res.pass = t.expectText === undefined ? true : afterText === t.expectText;\n        console.log(`[test] equals?`, res.pass, \"expected:\", res.expected, \"actual:\", res.actual);\n      }\n    } catch (err) {\n      res.error = err instanceof Error ? err.message : String(err);\n      console.error(\"[test] exception:\", res.error);\n    }\n\n    results.push(res);\n    if (res.pass) console.log(`✅ ${t.description}`);\n    else console.warn(`❌ ${t.description}`, res);\n    console.groupEnd();\n  }\n\n  // summary\n  const passed = results.filter((r) => r.pass).length;\n  console.log(`[runTests] finished — passed ${passed}/${results.length}`);\n  console.groupEnd();\n\n  return results;\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 444, "column": 0}, "map": {"version":3,"sources":["file:///Users/liza/Desktop/FrontReady/src/app/components/testsConsole.tsx"],"sourcesContent":["import { useState, useMemo } from \"react\";\nimport { DragSizing } from \"react-drag-sizing\";\nimport { TestCase, runTests } from \"@/lib/runTests\";\n\ntype TestResult = {\n  description: string;\n  pass: boolean;\n  error?: string;\n};\n\ntype Test = {\n  description: string;\n  query: string;\n  clicks?: number;\n  expectText?: string;\n  type?: string; // вместо литералов\n};\n\ntype Exercise = {\n  id: number;\n  theme: string;\n  title: string;\n  dificult: string;\n  time: string;\n  note: string;\n  requirements: string;\n  html: string;\n  app: string;\n  css: string;\n  tests: Test[];\n  [key: string]: unknown;\n};\n\nexport default function TestsConsole({\n  code,\n  exercise,\n  results = [],\n}: {\n  code: { [key: string]: string | undefined };\n  exercise: Exercise | undefined;\n  results?: TestResult[];\n}) {\n  const [collapsed, setCollapsed] = useState(false);\n\n  const srcDoc = useMemo(() => {\n    // Рендерим список результатов прямо в HTML iframe\n    const resultHTML =\n      results.length === 0\n        ? `<p style=\"color:gray;\">Нет результатов</p>`\n        : results\n            .map(\n              (r) => `\n              <div style=\"margin:4px 0; font-family: monospace; color:${\n                r.pass ? \"green\" : \"red\"\n              }\">\n                ${r.pass ? \"✅\" : \"❌\"} ${r.description}\n                ${\n                  !r.pass && r.error\n                    ? `<div style=\"color:#555;\">${r.error}</div>`\n                    : \"\"\n                }\n              </div>\n            `\n            )\n            .join(\"\");\n\n    return `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n        <head>\n          <meta charset=\"UTF-8\" />\n          <style>\n            body { font-family: sans-serif; padding: 10px; background: #f8fafc; }\n          </style>\n        </head>\n        <body>\n          <h3 style=\"margin:0 0 10px 0;\">Результаты тестов</h3>\n          ${resultHTML}\n        </body>\n      </html>\n    `;\n  }, [results]);\n\n  return (\n    <div className=\"w-full bg-white rounded-b-xl overflow-hidden\">\n      {/* Кнопка скрыть / открыть */}\n      <div className=\"flex justify-end p-2 bg-slate-200 border-y-1 border-slate-300\">\n        <button\n          className=\"bg-white px-2 rounded-xl\"\n          onClick={() => setCollapsed(!collapsed)}\n        >\n          {collapsed ? \"Открыть\" : \"Закрыть\"}\n        </button>\n      </div>\n\n      {!collapsed && (\n        <DragSizing\n          direction=\"vertical\"\n          defaultSize={200}\n          minSize={100}\n          maxSize={500}\n          className=\"w-full\"\n        >\n          <iframe\n            id=\"tests\"\n            title=\"tests\"\n            srcDoc={srcDoc}\n            sandbox=\"allow-scripts allow-same-origin\"\n            width=\"100%\"\n            height=\"100%\"\n            style={{\n              backgroundColor: \"#f8fafc\",\n            }}\n          />\n        </DragSizing>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAgCe,SAAS,aAAa,EACnC,IAAI,EACJ,QAAQ,EACR,UAAU,EAAE,EAKb;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,SAAS,IAAA,gNAAO,EAAC;QACrB,kDAAkD;QAClD,MAAM,aACJ,QAAQ,MAAM,KAAK,IACf,CAAC,0CAA0C,CAAC,GAC5C,QACG,GAAG,CACF,CAAC,IAAM,CAAC;sEACgD,EACtD,EAAE,IAAI,GAAG,UAAU,MACpB;gBACC,EAAE,EAAE,IAAI,GAAG,MAAM,IAAI,CAAC,EAAE,EAAE,WAAW,CAAC;gBACtC,EACE,CAAC,EAAE,IAAI,IAAI,EAAE,KAAK,GACd,CAAC,yBAAyB,EAAE,EAAE,KAAK,CAAC,MAAM,CAAC,GAC3C,GACL;;YAEL,CAAC,EAEA,IAAI,CAAC;QAEd,OAAO,CAAC;;;;;;;;;;;UAWF,EAAE,WAAW;;;IAGnB,CAAC;IACH,GAAG;QAAC;KAAQ;IAEZ,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAU;oBACV,SAAS,IAAM,aAAa,CAAC;8BAE5B,YAAY,YAAY;;;;;;;;;;;YAI5B,CAAC,2BACA,8OAAC,4KAAU;gBACT,WAAU;gBACV,aAAa;gBACb,SAAS;gBACT,SAAS;gBACT,WAAU;0BAEV,cAAA,8OAAC;oBACC,IAAG;oBACH,OAAM;oBACN,QAAQ;oBACR,SAAQ;oBACR,OAAM;oBACN,QAAO;oBACP,OAAO;wBACL,iBAAiB;oBACnB;;;;;;;;;;;;;;;;;AAMZ","debugId":null}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":["file:///Users/liza/Desktop/FrontReady/src/app/exercise/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { use, useState, useEffect } from \"react\";\nimport exersiseData from \"../../data/exercise.json\";\nimport Link from \"next/link\";\nimport { FaArrowRotateLeft } from \"react-icons/fa6\";\nimport { HiClock } from \"react-icons/hi\";\nimport { PiFireFill } from \"react-icons/pi\";\nimport { TbCodeCircleFilled } from \"react-icons/tb\";\nimport CodeEditor from \"../../components/codeEditor\";\nimport Brawser from \"../../components/brawser\";\nimport { TestCase, runTests } from \"@/lib/runTests\";\nimport TestsConsole from \"@/app/components/testsConsole\";\n\ntype TestResult = {\n  description: string;\n  pass: boolean;\n  error?: string;\n};\n\ntype Test = {\n  description: string;\n  query: string;\n  clicks?: number;\n  expectText?: string;\n  type?: string; // вместо литералов\n};\n\ntype Exercise = {\n  id: number;\n  theme: string;\n  title: string;\n  dificult: string;\n  time: string;\n  note: string;\n  requirements: string;\n  html: string;\n  app: string;\n  css: string;\n  tests: Test[];\n  [key: string]: unknown;\n};\n\nexport default function ExercisePage({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const { id } = use(params);\n  const exercises: Exercise[] = exersiseData;\n  const exercise = exercises.find((ex) => ex.id === Number(id));\n\n  const [code, setCode] = useState({\n    \"index.html\": exercise?.html || undefined,\n    \"styles.css\": exercise?.css || undefined,\n    \"App.js\": exercise?.app || undefined,\n  });\n\n  useEffect(() => {\n    setCode({\n      \"index.html\": exercise?.html || undefined,\n      \"styles.css\": exercise?.css || undefined,\n      \"App.js\": exercise?.app || undefined,\n    });\n  }, [exercise]);\n\n  // console.log(\"code\", code);\n  // console.log(\"exercise\", exercise);\n\n  const [initialized, setInitialized] = useState(false);\n\n  useEffect(() => {\n    if (!exercise) {\n      console.log(\"exercise\", exercise);\n      return;\n    }\n    if (typeof window === \"undefined\") {\n      console.log(\"typeof window\", typeof window);\n      return;\n    }\n\n    const key = `exercise-${exercise.id}`;\n    const saved = localStorage.getItem(key);\n\n    console.log(\"key\", key, \"saved\", saved);\n\n    if (saved) {\n      setCode(JSON.parse(saved));\n      console.log(\"есть сохраненное\");\n    } else {\n      const initial = {\n        \"index.html\": exercise.html ?? undefined,\n        \"styles.css\": exercise.css ?? undefined,\n        \"App.js\": exercise.app ?? undefined,\n      };\n\n      setCode(initial);\n      console.log(\"нет сохраненного, ставим:\", initial);\n    }\n    // выставляем флаг ТОЛЬКО после загрузки из localStorage/инициализации\n    setInitialized(true);\n  }, [exercise, setCode]);\n\n  useEffect(() => {\n    if (!exercise) return;\n    if (!initialized) return;\n\n    const key = `exercise-${exercise.id}`;\n    localStorage.setItem(key, JSON.stringify(code));\n    console.log(\"сохранили изменения в localStorage\", key, code);\n  }, [code, exercise, initialized]);\n\n  const [testResults, setTestResults] = useState<TestResult[]>([]);\n\n  const handleCheck = async () => {\n    \n    if (!exercise?.tests) {\n      console.log(\"Нет тестов для этого упражнения\");\n      return;\n    }\n    const results = await runTests(exercise.tests as TestCase[]);\n    setTestResults(results); // сохраняем в state\n  };\n\n  return (\n    <div className=\"relative font-sans px-16 mt-10 h-screen\">\n      <div className=\"flex justify-between\">\n        <h1 className=\"text-4xl\">{exercise?.title}</h1>\n        <Link href={\"/\"}>\n          <div className=\"flex items-center gap-2\">\n            <FaArrowRotateLeft size={12} /> назад\n          </div>\n        </Link>\n      </div>\n\n      <div className=\"flex gap-5\">\n        {/* Условия */}\n        <div className=\"w-1/4\">\n          <div className=\"flex gap-5 text-slate-400 whitespace-nowrap flex-wrap mt-5\">\n            <div className=\"flex items-center gap-1\">\n              <TbCodeCircleFilled />\n              {exercise?.theme}\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <PiFireFill />\n              {exercise?.dificult}\n            </div>\n            <div className=\"flex items-center gap-1 \">\n              <HiClock />\n              {exercise?.time}\n            </div>\n          </div>\n\n          <div className=\"bg-blue-100 dark:bg-blue-950 p-5 my-5 rounded-xl\">\n            {exercise?.requirements}\n          </div>\n        </div>\n        <div className=\"w-full flex gap-5 h-full mt-5\">\n          <div className=\"w-1/2\">\n            <CodeEditor\n              code={code}\n              exercise={exercise}\n              setCode={setCode}\n              onChange={(newCode) => setCode(newCode)}\n            />\n          </div>\n\n          {/* Браузер */}\n          <div className=\"w-1/2 relative border-1 border-slate-300 rounded-xl overflow-hidden\">\n            <Brawser code={code} setCode={setCode} />\n            <div className=\"absolute bottom-0 w-full\">\n              <TestsConsole\n                code={code}\n                exercise={exercise}\n                results={testResults}\n              />\n            </div>\n          </div>\n        </div>\n        {/* Code Editor */}\n      </div>\n\n      <div className=\"fixed bottom-0 left-0 w-full h-20 bg-slate-200 flex justify-end items-center px-16 z-10\">\n        <button\n          className=\"p-2 bg-white cursor-pointer rounded-xl\"\n          onClick={handleCheck}\n        >\n          Проверть\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}