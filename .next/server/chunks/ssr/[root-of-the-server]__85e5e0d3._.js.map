{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/liza/Desktop/FrontReady/src/app/components/codeEditor.tsx"],"sourcesContent":["\"use client\";\nimport Editor, { DiffEditor, useMonaco, loader } from \"@monaco-editor/react\";\nimport { useEffect, useState } from \"react\";\nimport { TbWashDrycleanOff } from \"react-icons/tb\";\nimport github from \"monaco-themes/themes/GitHub.json\";\nimport monokai from \"monaco-themes/themes/Monokai.json\";\nimport dracula from \"monaco-themes/themes/Dracula.json\";\nimport solarizedDark from \"monaco-themes/themes/Solarized-dark.json\";\nimport solarizedLight from \"monaco-themes/themes/Solarized-light.json\";\nimport cobalt from \"monaco-themes/themes/Cobalt.json\";\nimport tomorrowNight from \"monaco-themes/themes/Tomorrow-Night.json\";\nimport * as monaco from \"monaco-editor\";\nimport type { editor } from \"monaco-editor\";\n\nconst themes: Record<string, editor.IStandaloneThemeData> = {\n  github: github as editor.IStandaloneThemeData,\n  monokai: monokai as editor.IStandaloneThemeData,\n  dracula: dracula as editor.IStandaloneThemeData,\n  \"solarized-dark\": solarizedDark as editor.IStandaloneThemeData,\n  \"solarized-light\": solarizedLight as editor.IStandaloneThemeData,\n  cobalt: cobalt as editor.IStandaloneThemeData,\n  \"tomorrow-night\": tomorrowNight as editor.IStandaloneThemeData,\n};\n\ntype Language = \"html\" | \"css\" | \"javascript\" | \"tsx\";\n\ntype Exercise = {\n  id: number;\n  theme: string;\n  title: string;\n  dificult: string;\n  time: string;\n  note: string;\n  requirements: string;\n  html: string;\n  javascript: string;\n  css: string;\n  tsx: string;\n  [key: string]: unknown;\n};\n\nexport default function CodeEditor({\n  exercise,\n  jsValue,\n  tsxValue,\n  htmlValue,\n  cssValue,\n}: {\n  exercise: Exercise | undefined;\n  jsValue: string | undefined;\n  tsxValue: string | undefined;\n  htmlValue: string | undefined;\n  cssValue: string | undefined;\n}) {\n  const [activeLang, setActiveLang] = useState<Language>(\"javascript\");\n\n  const [userCode, setUserCode] = useState<Record<Language, string>>({\n    javascript: \"\",\n    html: \"\",\n    css: \"\",\n    tsx: \"\",\n  });\n\n  const [theme, setTheme] = useState<string>(\"dracula\");\n\n  useEffect(() => {\n    loader.init().then((monacoInstance) => {\n      Object.entries(themes).forEach(([name, themeData]) => {\n        monacoInstance.editor.defineTheme(name, themeData);\n      });\n    });\n  }, []);\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      const saved = localStorage.getItem(\"editorTheme\");\n      if (saved) setTheme(saved);\n    }\n  }, []);\n\n  const handleThemeChange = (newTheme: string) => {\n    setTheme(newTheme);\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(\"editorTheme\", newTheme);\n    }\n  };\n\n  useEffect(() => {\n    if (exercise) {\n      const initial: Record<Language, string> = {\n        html: \"\",\n        css: \"\",\n        javascript: \"\",\n        tsx: \"\",\n      };\n\n      if (exercise.javascript) {\n        initial[\"javascript\"] = exercise.javascript;\n      }\n      if (exercise.html) {\n        initial[\"html\"] = exercise.html;\n      }\n      if (exercise.css) {\n        initial[\"css\"] = exercise.css;\n      }\n      if (exercise.tsx) {\n        initial[\"tsx\"] = exercise.tsx;\n      }\n\n      const saved = localStorage.getItem(`exercise-${exercise.id}`);\n      if (saved) {\n        setUserCode(JSON.parse(saved));\n      } else {\n        setUserCode(initial);\n      }\n    }\n  }, [exercise]);\n\n  useEffect(() => {\n    if (Object.values(userCode).some((val) => val)) {\n      localStorage.setItem(\n        `exercise-${exercise?.id}`,\n        JSON.stringify(userCode)\n      );\n    }\n  }, [userCode, exercise]);\n\n  const [fileName, setFileName] = useState(\"script.js\");\n\n  const files: Record<\n    string,\n    { name: string; language: string; value: string | undefined }\n  > = {\n    \"script.js\": {\n      name: \"script.js\",\n      language: \"javascript\",\n      value: jsValue,\n    },\n    \"script.tsx\": {\n      name: \"script.tsx\",\n      language: \"typescript\",\n      value: tsxValue,\n    },\n    \"style.css\": {\n      name: \"style.css\",\n      language: \"css\",\n      value: cssValue,\n    },\n    \"index.html\": {\n      name: \"index.html\",\n      language: \"html\",\n      value: htmlValue,\n    },\n  };\n\n  const file = files[fileName];\n\n  function getInitialCode(exercise: Exercise): Record<Language, string> {\n    return {\n      html: exercise.html ?? \"\",\n      css: exercise.css ?? \"\",\n      javascript: exercise.javascript ?? \"\",\n      tsx: exercise.tsx ?? \"\",\n    };\n  }\n\n  const handlerClean = (e: React.MouseEvent<HTMLButtonElement>) => {\n    if (!exercise) return;\n\n    const initial = getInitialCode(exercise);\n\n    // 1. Убираем сохранённое из localStorage\n    localStorage.removeItem(`exercise-${exercise.id}`);\n\n    // 2. Возвращаем код к исходному\n    setUserCode(initial);\n  };\n\n  return (\n    <div className=\"shadow-2xl\">\n      <div className=\"flex justify-between\">\n        <div className=\"flex gap-1\">\n          <button\n            className=\"p-2 bg-gray-100 hover:bg-gray-200\"\n            disabled={fileName === \"script.js\"}\n            onClick={() => setFileName(\"script.js\")}\n          >\n            script.js\n          </button>\n          <button\n            className=\"p-2 bg-gray-100 hover:bg-gray-200\"\n            disabled={fileName === \"script.tsx\"}\n            onClick={() => setFileName(\"script.tsx\")}\n          >\n            script.tsx\n          </button>\n          <button\n            className=\"p-2 bg-gray-100 hover:bg-gray-200\"\n            disabled={fileName === \"style.css\"}\n            onClick={() => setFileName(\"style.css\")}\n          >\n            style.css\n          </button>\n          <button\n            className=\"p-2 bg-gray-100 hover:bg-gray-200\"\n            disabled={fileName === \"index.html\"}\n            onClick={() => setFileName(\"index.html\")}\n          >\n            index.html\n          </button>\n        </div>\n        <div className=\"gap-2 flex items-center\">\n          <select\n            value={theme}\n            onChange={(e) => handleThemeChange(e.target.value)}\n            className=\"border rounded p-1 w-48\"\n          >\n            {Object.keys(themes).map((name) => (\n              <option key={name} value={name}>\n                {name}\n              </option>\n            ))}\n          </select>\n\n          <button\n            className=\"text-gray-500 cursor-pointer p-2 bg-gray-100 hover:bg-gray-200 rounded-full\"\n            onClick={handlerClean}\n          >\n            <TbWashDrycleanOff />\n          </button>\n        </div>\n      </div>\n\n      <Editor\n        height=\"80vh\"\n        theme={theme}\n        path={file.name}\n        defaultLanguage={file.language}\n        defaultValue={file.value}\n        value={userCode[activeLang]}\n        onChange={(val: string | undefined) =>\n          setUserCode((prev) => ({ ...prev, [activeLang]: val || \"\" }))\n        }\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}